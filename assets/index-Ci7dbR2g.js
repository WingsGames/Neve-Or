(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function yv(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var zp={exports:{}},Cs={},Wp={exports:{}},z={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qi=Symbol.for("react.element"),vv=Symbol.for("react.portal"),_v=Symbol.for("react.fragment"),Tv=Symbol.for("react.strict_mode"),Ev=Symbol.for("react.profiler"),Iv=Symbol.for("react.provider"),Cv=Symbol.for("react.context"),wv=Symbol.for("react.forward_ref"),Sv=Symbol.for("react.suspense"),xv=Symbol.for("react.memo"),Av=Symbol.for("react.lazy"),Tc=Symbol.iterator;function Nv(t){return t===null||typeof t!="object"?null:(t=Tc&&t[Tc]||t["@@iterator"],typeof t=="function"?t:null)}var Jp={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Kp=Object.assign,Yp={};function Hr(t,e,n){this.props=t,this.context=e,this.refs=Yp,this.updater=n||Jp}Hr.prototype.isReactComponent={};Hr.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Hr.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Qp(){}Qp.prototype=Hr.prototype;function Ka(t,e,n){this.props=t,this.context=e,this.refs=Yp,this.updater=n||Jp}var Ya=Ka.prototype=new Qp;Ya.constructor=Ka;Kp(Ya,Hr.prototype);Ya.isPureReactComponent=!0;var Ec=Array.isArray,Xp=Object.prototype.hasOwnProperty,Qa={current:null},Zp={key:!0,ref:!0,__self:!0,__source:!0};function jp(t,e,n){var r,i={},o=null,s=null;if(e!=null)for(r in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(o=""+e.key),e)Xp.call(e,r)&&!Zp.hasOwnProperty(r)&&(i[r]=e[r]);var u=arguments.length-2;if(u===1)i.children=n;else if(1<u){for(var c=Array(u),d=0;d<u;d++)c[d]=arguments[d+2];i.children=c}if(t&&t.defaultProps)for(r in u=t.defaultProps,u)i[r]===void 0&&(i[r]=u[r]);return{$$typeof:qi,type:t,key:o,ref:s,props:i,_owner:Qa.current}}function kv(t,e){return{$$typeof:qi,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Xa(t){return typeof t=="object"&&t!==null&&t.$$typeof===qi}function Rv(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Ic=/\/+/g;function Ys(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Rv(""+t.key):e.toString(36)}function Eo(t,e,n,r,i){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case qi:case vv:s=!0}}if(s)return s=t,i=i(s),t=r===""?"."+Ys(s,0):r,Ec(i)?(n="",t!=null&&(n=t.replace(Ic,"$&/")+"/"),Eo(i,e,n,"",function(d){return d})):i!=null&&(Xa(i)&&(i=kv(i,n+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(Ic,"$&/")+"/")+t)),e.push(i)),1;if(s=0,r=r===""?".":r+":",Ec(t))for(var u=0;u<t.length;u++){o=t[u];var c=r+Ys(o,u);s+=Eo(o,e,n,c,i)}else if(c=Nv(t),typeof c=="function")for(t=c.call(t),u=0;!(o=t.next()).done;)o=o.value,c=r+Ys(o,u++),s+=Eo(o,e,n,c,i);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function eo(t,e,n){if(t==null)return t;var r=[],i=0;return Eo(t,r,"","",function(o){return e.call(n,o,i++)}),r}function Pv(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Fe={current:null},Io={transition:null},Mv={ReactCurrentDispatcher:Fe,ReactCurrentBatchConfig:Io,ReactCurrentOwner:Qa};function eh(){throw Error("act(...) is not supported in production builds of React.")}z.Children={map:eo,forEach:function(t,e,n){eo(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return eo(t,function(){e++}),e},toArray:function(t){return eo(t,function(e){return e})||[]},only:function(t){if(!Xa(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};z.Component=Hr;z.Fragment=_v;z.Profiler=Ev;z.PureComponent=Ka;z.StrictMode=Tv;z.Suspense=Sv;z.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Mv;z.act=eh;z.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Kp({},t.props),i=t.key,o=t.ref,s=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,s=Qa.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var u=t.type.defaultProps;for(c in e)Xp.call(e,c)&&!Zp.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&u!==void 0?u[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){u=Array(c);for(var d=0;d<c;d++)u[d]=arguments[d+2];r.children=u}return{$$typeof:qi,type:t.type,key:i,ref:o,props:r,_owner:s}};z.createContext=function(t){return t={$$typeof:Cv,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Iv,_context:t},t.Consumer=t};z.createElement=jp;z.createFactory=function(t){var e=jp.bind(null,t);return e.type=t,e};z.createRef=function(){return{current:null}};z.forwardRef=function(t){return{$$typeof:wv,render:t}};z.isValidElement=Xa;z.lazy=function(t){return{$$typeof:Av,_payload:{_status:-1,_result:t},_init:Pv}};z.memo=function(t,e){return{$$typeof:xv,type:t,compare:e===void 0?null:e}};z.startTransition=function(t){var e=Io.transition;Io.transition={};try{t()}finally{Io.transition=e}};z.unstable_act=eh;z.useCallback=function(t,e){return Fe.current.useCallback(t,e)};z.useContext=function(t){return Fe.current.useContext(t)};z.useDebugValue=function(){};z.useDeferredValue=function(t){return Fe.current.useDeferredValue(t)};z.useEffect=function(t,e){return Fe.current.useEffect(t,e)};z.useId=function(){return Fe.current.useId()};z.useImperativeHandle=function(t,e,n){return Fe.current.useImperativeHandle(t,e,n)};z.useInsertionEffect=function(t,e){return Fe.current.useInsertionEffect(t,e)};z.useLayoutEffect=function(t,e){return Fe.current.useLayoutEffect(t,e)};z.useMemo=function(t,e){return Fe.current.useMemo(t,e)};z.useReducer=function(t,e,n){return Fe.current.useReducer(t,e,n)};z.useRef=function(t){return Fe.current.useRef(t)};z.useState=function(t){return Fe.current.useState(t)};z.useSyncExternalStore=function(t,e,n){return Fe.current.useSyncExternalStore(t,e,n)};z.useTransition=function(){return Fe.current.useTransition()};z.version="18.3.1";Wp.exports=z;var q=Wp.exports;const Dv=yv(q);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bv=q,Lv=Symbol.for("react.element"),Uv=Symbol.for("react.fragment"),Fv=Object.prototype.hasOwnProperty,Ov=bv.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Vv={key:!0,ref:!0,__self:!0,__source:!0};function th(t,e,n){var r,i={},o=null,s=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(s=e.ref);for(r in e)Fv.call(e,r)&&!Vv.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:Lv,type:t,key:o,ref:s,props:i,_owner:Ov.current}}Cs.Fragment=Uv;Cs.jsx=th;Cs.jsxs=th;zp.exports=Cs;var m=zp.exports,bl={},nh={exports:{}},Xe={},rh={exports:{}},ih={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(N,D){var L=N.length;N.push(D);e:for(;0<L;){var O=L-1>>>1,Q=N[O];if(0<i(Q,D))N[O]=D,N[L]=Q,L=O;else break e}}function n(N){return N.length===0?null:N[0]}function r(N){if(N.length===0)return null;var D=N[0],L=N.pop();if(L!==D){N[0]=L;e:for(var O=0,Q=N.length,je=Q>>>1;O<je;){var Rt=2*(O+1)-1,rr=N[Rt],Pt=Rt+1,jt=N[Pt];if(0>i(rr,L))Pt<Q&&0>i(jt,rr)?(N[O]=jt,N[Pt]=L,O=Pt):(N[O]=rr,N[Rt]=L,O=Rt);else if(Pt<Q&&0>i(jt,L))N[O]=jt,N[Pt]=L,O=Pt;else break e}}return D}function i(N,D){var L=N.sortIndex-D.sortIndex;return L!==0?L:N.id-D.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,u=s.now();t.unstable_now=function(){return s.now()-u}}var c=[],d=[],f=1,p=null,h=3,y=!1,T=!1,E=!1,S=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(N){for(var D=n(d);D!==null;){if(D.callback===null)r(d);else if(D.startTime<=N)r(d),D.sortIndex=D.expirationTime,e(c,D);else break;D=n(d)}}function I(N){if(E=!1,v(N),!T)if(n(c)!==null)T=!0,Ie(C);else{var D=n(d);D!==null&&M(I,D.startTime-N)}}function C(N,D){T=!1,E&&(E=!1,_(A),A=-1),y=!0;var L=h;try{for(v(D),p=n(c);p!==null&&(!(p.expirationTime>D)||N&&!B());){var O=p.callback;if(typeof O=="function"){p.callback=null,h=p.priorityLevel;var Q=O(p.expirationTime<=D);D=t.unstable_now(),typeof Q=="function"?p.callback=Q:p===n(c)&&r(c),v(D)}else r(c);p=n(c)}if(p!==null)var je=!0;else{var Rt=n(d);Rt!==null&&M(I,Rt.startTime-D),je=!1}return je}finally{p=null,h=L,y=!1}}var w=!1,x=null,A=-1,P=5,R=-1;function B(){return!(t.unstable_now()-R<P)}function $(){if(x!==null){var N=t.unstable_now();R=N;var D=!0;try{D=x(!0,N)}finally{D?Z():(w=!1,x=null)}}else w=!1}var Z;if(typeof g=="function")Z=function(){g($)};else if(typeof MessageChannel<"u"){var kt=new MessageChannel,ut=kt.port2;kt.port1.onmessage=$,Z=function(){ut.postMessage(null)}}else Z=function(){S($,0)};function Ie(N){x=N,w||(w=!0,Z())}function M(N,D){A=S(function(){N(t.unstable_now())},D)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(N){N.callback=null},t.unstable_continueExecution=function(){T||y||(T=!0,Ie(C))},t.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<N?Math.floor(1e3/N):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(N){switch(h){case 1:case 2:case 3:var D=3;break;default:D=h}var L=h;h=D;try{return N()}finally{h=L}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(N,D){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var L=h;h=N;try{return D()}finally{h=L}},t.unstable_scheduleCallback=function(N,D,L){var O=t.unstable_now();switch(typeof L=="object"&&L!==null?(L=L.delay,L=typeof L=="number"&&0<L?O+L:O):L=O,N){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=L+Q,N={id:f++,callback:D,priorityLevel:N,startTime:L,expirationTime:Q,sortIndex:-1},L>O?(N.sortIndex=L,e(d,N),n(c)===null&&N===n(d)&&(E?(_(A),A=-1):E=!0,M(I,L-O))):(N.sortIndex=Q,e(c,N),T||y||(T=!0,Ie(C))),N},t.unstable_shouldYield=B,t.unstable_wrapCallback=function(N){var D=h;return function(){var L=h;h=D;try{return N.apply(this,arguments)}finally{h=L}}}})(ih);rh.exports=ih;var Hv=rh.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bv=q,Qe=Hv;function k(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var oh=new Set,Ci={};function Zn(t,e){Dr(t,e),Dr(t+"Capture",e)}function Dr(t,e){for(Ci[t]=e,t=0;t<e.length;t++)oh.add(e[t])}var Gt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ll=Object.prototype.hasOwnProperty,Gv=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Cc={},wc={};function qv(t){return Ll.call(wc,t)?!0:Ll.call(Cc,t)?!1:Gv.test(t)?wc[t]=!0:(Cc[t]=!0,!1)}function $v(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function zv(t,e,n,r){if(e===null||typeof e>"u"||$v(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Oe(t,e,n,r,i,o,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=s}var Ae={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ae[t]=new Oe(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ae[e]=new Oe(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ae[t]=new Oe(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ae[t]=new Oe(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ae[t]=new Oe(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ae[t]=new Oe(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ae[t]=new Oe(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ae[t]=new Oe(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ae[t]=new Oe(t,5,!1,t.toLowerCase(),null,!1,!1)});var Za=/[\-:]([a-z])/g;function ja(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Za,ja);Ae[e]=new Oe(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Za,ja);Ae[e]=new Oe(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Za,ja);Ae[e]=new Oe(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ae[t]=new Oe(t,1,!1,t.toLowerCase(),null,!1,!1)});Ae.xlinkHref=new Oe("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ae[t]=new Oe(t,1,!1,t.toLowerCase(),null,!0,!0)});function eu(t,e,n,r){var i=Ae.hasOwnProperty(e)?Ae[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(zv(e,n,i,r)&&(n=null),r||i===null?qv(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Qt=Bv.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,to=Symbol.for("react.element"),lr=Symbol.for("react.portal"),ar=Symbol.for("react.fragment"),tu=Symbol.for("react.strict_mode"),Ul=Symbol.for("react.profiler"),sh=Symbol.for("react.provider"),lh=Symbol.for("react.context"),nu=Symbol.for("react.forward_ref"),Fl=Symbol.for("react.suspense"),Ol=Symbol.for("react.suspense_list"),ru=Symbol.for("react.memo"),nn=Symbol.for("react.lazy"),ah=Symbol.for("react.offscreen"),Sc=Symbol.iterator;function Kr(t){return t===null||typeof t!="object"?null:(t=Sc&&t[Sc]||t["@@iterator"],typeof t=="function"?t:null)}var ce=Object.assign,Qs;function oi(t){if(Qs===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Qs=e&&e[1]||""}return`
`+Qs+t}var Xs=!1;function Zs(t,e){if(!t||Xs)return"";Xs=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var i=d.stack.split(`
`),o=r.stack.split(`
`),s=i.length-1,u=o.length-1;1<=s&&0<=u&&i[s]!==o[u];)u--;for(;1<=s&&0<=u;s--,u--)if(i[s]!==o[u]){if(s!==1||u!==1)do if(s--,u--,0>u||i[s]!==o[u]){var c=`
`+i[s].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=s&&0<=u);break}}}finally{Xs=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?oi(t):""}function Wv(t){switch(t.tag){case 5:return oi(t.type);case 16:return oi("Lazy");case 13:return oi("Suspense");case 19:return oi("SuspenseList");case 0:case 2:case 15:return t=Zs(t.type,!1),t;case 11:return t=Zs(t.type.render,!1),t;case 1:return t=Zs(t.type,!0),t;default:return""}}function Vl(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ar:return"Fragment";case lr:return"Portal";case Ul:return"Profiler";case tu:return"StrictMode";case Fl:return"Suspense";case Ol:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case lh:return(t.displayName||"Context")+".Consumer";case sh:return(t._context.displayName||"Context")+".Provider";case nu:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ru:return e=t.displayName||null,e!==null?e:Vl(t.type)||"Memo";case nn:e=t._payload,t=t._init;try{return Vl(t(e))}catch{}}return null}function Jv(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Vl(e);case 8:return e===tu?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function xn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function uh(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Kv(t){var e=uh(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(s){r=""+s,o.call(this,s)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function no(t){t._valueTracker||(t._valueTracker=Kv(t))}function ch(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=uh(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Ho(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Hl(t,e){var n=e.checked;return ce({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function xc(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=xn(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function dh(t,e){e=e.checked,e!=null&&eu(t,"checked",e,!1)}function Bl(t,e){dh(t,e);var n=xn(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Gl(t,e.type,n):e.hasOwnProperty("defaultValue")&&Gl(t,e.type,xn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Ac(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Gl(t,e,n){(e!=="number"||Ho(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var si=Array.isArray;function Er(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+xn(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function ql(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(k(91));return ce({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Nc(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(k(92));if(si(n)){if(1<n.length)throw Error(k(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:xn(n)}}function fh(t,e){var n=xn(e.value),r=xn(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function kc(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function ph(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function $l(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?ph(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ro,hh=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(ro=ro||document.createElement("div"),ro.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ro.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function wi(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ci={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Yv=["Webkit","ms","Moz","O"];Object.keys(ci).forEach(function(t){Yv.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ci[e]=ci[t]})});function mh(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ci.hasOwnProperty(t)&&ci[t]?(""+e).trim():e+"px"}function gh(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=mh(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var Qv=ce({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function zl(t,e){if(e){if(Qv[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(k(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(k(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(k(61))}if(e.style!=null&&typeof e.style!="object")throw Error(k(62))}}function Wl(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Jl=null;function iu(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Kl=null,Ir=null,Cr=null;function Rc(t){if(t=Wi(t)){if(typeof Kl!="function")throw Error(k(280));var e=t.stateNode;e&&(e=Ns(e),Kl(t.stateNode,t.type,e))}}function yh(t){Ir?Cr?Cr.push(t):Cr=[t]:Ir=t}function vh(){if(Ir){var t=Ir,e=Cr;if(Cr=Ir=null,Rc(t),e)for(t=0;t<e.length;t++)Rc(e[t])}}function _h(t,e){return t(e)}function Th(){}var js=!1;function Eh(t,e,n){if(js)return t(e,n);js=!0;try{return _h(t,e,n)}finally{js=!1,(Ir!==null||Cr!==null)&&(Th(),vh())}}function Si(t,e){var n=t.stateNode;if(n===null)return null;var r=Ns(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(k(231,e,typeof n));return n}var Yl=!1;if(Gt)try{var Yr={};Object.defineProperty(Yr,"passive",{get:function(){Yl=!0}}),window.addEventListener("test",Yr,Yr),window.removeEventListener("test",Yr,Yr)}catch{Yl=!1}function Xv(t,e,n,r,i,o,s,u,c){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(f){this.onError(f)}}var di=!1,Bo=null,Go=!1,Ql=null,Zv={onError:function(t){di=!0,Bo=t}};function jv(t,e,n,r,i,o,s,u,c){di=!1,Bo=null,Xv.apply(Zv,arguments)}function e_(t,e,n,r,i,o,s,u,c){if(jv.apply(this,arguments),di){if(di){var d=Bo;di=!1,Bo=null}else throw Error(k(198));Go||(Go=!0,Ql=d)}}function jn(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Ih(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Pc(t){if(jn(t)!==t)throw Error(k(188))}function t_(t){var e=t.alternate;if(!e){if(e=jn(t),e===null)throw Error(k(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Pc(i),t;if(o===r)return Pc(i),e;o=o.sibling}throw Error(k(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,u=i.child;u;){if(u===n){s=!0,n=i,r=o;break}if(u===r){s=!0,r=i,n=o;break}u=u.sibling}if(!s){for(u=o.child;u;){if(u===n){s=!0,n=o,r=i;break}if(u===r){s=!0,r=o,n=i;break}u=u.sibling}if(!s)throw Error(k(189))}}if(n.alternate!==r)throw Error(k(190))}if(n.tag!==3)throw Error(k(188));return n.stateNode.current===n?t:e}function Ch(t){return t=t_(t),t!==null?wh(t):null}function wh(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=wh(t);if(e!==null)return e;t=t.sibling}return null}var Sh=Qe.unstable_scheduleCallback,Mc=Qe.unstable_cancelCallback,n_=Qe.unstable_shouldYield,r_=Qe.unstable_requestPaint,ge=Qe.unstable_now,i_=Qe.unstable_getCurrentPriorityLevel,ou=Qe.unstable_ImmediatePriority,xh=Qe.unstable_UserBlockingPriority,qo=Qe.unstable_NormalPriority,o_=Qe.unstable_LowPriority,Ah=Qe.unstable_IdlePriority,ws=null,wt=null;function s_(t){if(wt&&typeof wt.onCommitFiberRoot=="function")try{wt.onCommitFiberRoot(ws,t,void 0,(t.current.flags&128)===128)}catch{}}var mt=Math.clz32?Math.clz32:u_,l_=Math.log,a_=Math.LN2;function u_(t){return t>>>=0,t===0?32:31-(l_(t)/a_|0)|0}var io=64,oo=4194304;function li(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function $o(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,o=t.pingedLanes,s=n&268435455;if(s!==0){var u=s&~i;u!==0?r=li(u):(o&=s,o!==0&&(r=li(o)))}else s=n&~i,s!==0?r=li(s):o!==0&&(r=li(o));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,o=e&-e,i>=o||i===16&&(o&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-mt(e),i=1<<n,r|=t[n],e&=~i;return r}function c_(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function d_(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var s=31-mt(o),u=1<<s,c=i[s];c===-1?(!(u&n)||u&r)&&(i[s]=c_(u,e)):c<=e&&(t.expiredLanes|=u),o&=~u}}function Xl(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Nh(){var t=io;return io<<=1,!(io&4194240)&&(io=64),t}function el(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function $i(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-mt(e),t[e]=n}function f_(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-mt(n),o=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~o}}function su(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-mt(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var X=0;function kh(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Rh,lu,Ph,Mh,Dh,Zl=!1,so=[],mn=null,gn=null,yn=null,xi=new Map,Ai=new Map,on=[],p_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Dc(t,e){switch(t){case"focusin":case"focusout":mn=null;break;case"dragenter":case"dragleave":gn=null;break;case"mouseover":case"mouseout":yn=null;break;case"pointerover":case"pointerout":xi.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ai.delete(e.pointerId)}}function Qr(t,e,n,r,i,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},e!==null&&(e=Wi(e),e!==null&&lu(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function h_(t,e,n,r,i){switch(e){case"focusin":return mn=Qr(mn,t,e,n,r,i),!0;case"dragenter":return gn=Qr(gn,t,e,n,r,i),!0;case"mouseover":return yn=Qr(yn,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return xi.set(o,Qr(xi.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Ai.set(o,Qr(Ai.get(o)||null,t,e,n,r,i)),!0}return!1}function bh(t){var e=Un(t.target);if(e!==null){var n=jn(e);if(n!==null){if(e=n.tag,e===13){if(e=Ih(n),e!==null){t.blockedOn=e,Dh(t.priority,function(){Ph(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Co(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=jl(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Jl=r,n.target.dispatchEvent(r),Jl=null}else return e=Wi(n),e!==null&&lu(e),t.blockedOn=n,!1;e.shift()}return!0}function bc(t,e,n){Co(t)&&n.delete(e)}function m_(){Zl=!1,mn!==null&&Co(mn)&&(mn=null),gn!==null&&Co(gn)&&(gn=null),yn!==null&&Co(yn)&&(yn=null),xi.forEach(bc),Ai.forEach(bc)}function Xr(t,e){t.blockedOn===e&&(t.blockedOn=null,Zl||(Zl=!0,Qe.unstable_scheduleCallback(Qe.unstable_NormalPriority,m_)))}function Ni(t){function e(i){return Xr(i,t)}if(0<so.length){Xr(so[0],t);for(var n=1;n<so.length;n++){var r=so[n];r.blockedOn===t&&(r.blockedOn=null)}}for(mn!==null&&Xr(mn,t),gn!==null&&Xr(gn,t),yn!==null&&Xr(yn,t),xi.forEach(e),Ai.forEach(e),n=0;n<on.length;n++)r=on[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<on.length&&(n=on[0],n.blockedOn===null);)bh(n),n.blockedOn===null&&on.shift()}var wr=Qt.ReactCurrentBatchConfig,zo=!0;function g_(t,e,n,r){var i=X,o=wr.transition;wr.transition=null;try{X=1,au(t,e,n,r)}finally{X=i,wr.transition=o}}function y_(t,e,n,r){var i=X,o=wr.transition;wr.transition=null;try{X=4,au(t,e,n,r)}finally{X=i,wr.transition=o}}function au(t,e,n,r){if(zo){var i=jl(t,e,n,r);if(i===null)cl(t,e,r,Wo,n),Dc(t,r);else if(h_(i,t,e,n,r))r.stopPropagation();else if(Dc(t,r),e&4&&-1<p_.indexOf(t)){for(;i!==null;){var o=Wi(i);if(o!==null&&Rh(o),o=jl(t,e,n,r),o===null&&cl(t,e,r,Wo,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else cl(t,e,r,null,n)}}var Wo=null;function jl(t,e,n,r){if(Wo=null,t=iu(r),t=Un(t),t!==null)if(e=jn(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Ih(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Wo=t,null}function Lh(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(i_()){case ou:return 1;case xh:return 4;case qo:case o_:return 16;case Ah:return 536870912;default:return 16}default:return 16}}var fn=null,uu=null,wo=null;function Uh(){if(wo)return wo;var t,e=uu,n=e.length,r,i="value"in fn?fn.value:fn.textContent,o=i.length;for(t=0;t<n&&e[t]===i[t];t++);var s=n-t;for(r=1;r<=s&&e[n-r]===i[o-r];r++);return wo=i.slice(t,1<r?1-r:void 0)}function So(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function lo(){return!0}function Lc(){return!1}function Ze(t){function e(n,r,i,o,s){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=s,this.currentTarget=null;for(var u in t)t.hasOwnProperty(u)&&(n=t[u],this[u]=n?n(o):o[u]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?lo:Lc,this.isPropagationStopped=Lc,this}return ce(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=lo)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=lo)},persist:function(){},isPersistent:lo}),e}var Br={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cu=Ze(Br),zi=ce({},Br,{view:0,detail:0}),v_=Ze(zi),tl,nl,Zr,Ss=ce({},zi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:du,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Zr&&(Zr&&t.type==="mousemove"?(tl=t.screenX-Zr.screenX,nl=t.screenY-Zr.screenY):nl=tl=0,Zr=t),tl)},movementY:function(t){return"movementY"in t?t.movementY:nl}}),Uc=Ze(Ss),__=ce({},Ss,{dataTransfer:0}),T_=Ze(__),E_=ce({},zi,{relatedTarget:0}),rl=Ze(E_),I_=ce({},Br,{animationName:0,elapsedTime:0,pseudoElement:0}),C_=Ze(I_),w_=ce({},Br,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),S_=Ze(w_),x_=ce({},Br,{data:0}),Fc=Ze(x_),A_={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},N_={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},k_={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function R_(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=k_[t])?!!e[t]:!1}function du(){return R_}var P_=ce({},zi,{key:function(t){if(t.key){var e=A_[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=So(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?N_[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:du,charCode:function(t){return t.type==="keypress"?So(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?So(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),M_=Ze(P_),D_=ce({},Ss,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Oc=Ze(D_),b_=ce({},zi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:du}),L_=Ze(b_),U_=ce({},Br,{propertyName:0,elapsedTime:0,pseudoElement:0}),F_=Ze(U_),O_=ce({},Ss,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),V_=Ze(O_),H_=[9,13,27,32],fu=Gt&&"CompositionEvent"in window,fi=null;Gt&&"documentMode"in document&&(fi=document.documentMode);var B_=Gt&&"TextEvent"in window&&!fi,Fh=Gt&&(!fu||fi&&8<fi&&11>=fi),Vc=" ",Hc=!1;function Oh(t,e){switch(t){case"keyup":return H_.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vh(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ur=!1;function G_(t,e){switch(t){case"compositionend":return Vh(e);case"keypress":return e.which!==32?null:(Hc=!0,Vc);case"textInput":return t=e.data,t===Vc&&Hc?null:t;default:return null}}function q_(t,e){if(ur)return t==="compositionend"||!fu&&Oh(t,e)?(t=Uh(),wo=uu=fn=null,ur=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Fh&&e.locale!=="ko"?null:e.data;default:return null}}var $_={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Bc(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!$_[t.type]:e==="textarea"}function Hh(t,e,n,r){yh(r),e=Jo(e,"onChange"),0<e.length&&(n=new cu("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var pi=null,ki=null;function z_(t){Xh(t,0)}function xs(t){var e=fr(t);if(ch(e))return t}function W_(t,e){if(t==="change")return e}var Bh=!1;if(Gt){var il;if(Gt){var ol="oninput"in document;if(!ol){var Gc=document.createElement("div");Gc.setAttribute("oninput","return;"),ol=typeof Gc.oninput=="function"}il=ol}else il=!1;Bh=il&&(!document.documentMode||9<document.documentMode)}function qc(){pi&&(pi.detachEvent("onpropertychange",Gh),ki=pi=null)}function Gh(t){if(t.propertyName==="value"&&xs(ki)){var e=[];Hh(e,ki,t,iu(t)),Eh(z_,e)}}function J_(t,e,n){t==="focusin"?(qc(),pi=e,ki=n,pi.attachEvent("onpropertychange",Gh)):t==="focusout"&&qc()}function K_(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return xs(ki)}function Y_(t,e){if(t==="click")return xs(e)}function Q_(t,e){if(t==="input"||t==="change")return xs(e)}function X_(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var yt=typeof Object.is=="function"?Object.is:X_;function Ri(t,e){if(yt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Ll.call(e,i)||!yt(t[i],e[i]))return!1}return!0}function $c(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function zc(t,e){var n=$c(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=$c(n)}}function qh(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?qh(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function $h(){for(var t=window,e=Ho();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Ho(t.document)}return e}function pu(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Z_(t){var e=$h(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&qh(n.ownerDocument.documentElement,n)){if(r!==null&&pu(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!t.extend&&o>r&&(i=r,r=o,o=i),i=zc(n,o);var s=zc(n,r);i&&s&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var j_=Gt&&"documentMode"in document&&11>=document.documentMode,cr=null,ea=null,hi=null,ta=!1;function Wc(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ta||cr==null||cr!==Ho(r)||(r=cr,"selectionStart"in r&&pu(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),hi&&Ri(hi,r)||(hi=r,r=Jo(ea,"onSelect"),0<r.length&&(e=new cu("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=cr)))}function ao(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var dr={animationend:ao("Animation","AnimationEnd"),animationiteration:ao("Animation","AnimationIteration"),animationstart:ao("Animation","AnimationStart"),transitionend:ao("Transition","TransitionEnd")},sl={},zh={};Gt&&(zh=document.createElement("div").style,"AnimationEvent"in window||(delete dr.animationend.animation,delete dr.animationiteration.animation,delete dr.animationstart.animation),"TransitionEvent"in window||delete dr.transitionend.transition);function As(t){if(sl[t])return sl[t];if(!dr[t])return t;var e=dr[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in zh)return sl[t]=e[n];return t}var Wh=As("animationend"),Jh=As("animationiteration"),Kh=As("animationstart"),Yh=As("transitionend"),Qh=new Map,Jc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function kn(t,e){Qh.set(t,e),Zn(e,[t])}for(var ll=0;ll<Jc.length;ll++){var al=Jc[ll],e0=al.toLowerCase(),t0=al[0].toUpperCase()+al.slice(1);kn(e0,"on"+t0)}kn(Wh,"onAnimationEnd");kn(Jh,"onAnimationIteration");kn(Kh,"onAnimationStart");kn("dblclick","onDoubleClick");kn("focusin","onFocus");kn("focusout","onBlur");kn(Yh,"onTransitionEnd");Dr("onMouseEnter",["mouseout","mouseover"]);Dr("onMouseLeave",["mouseout","mouseover"]);Dr("onPointerEnter",["pointerout","pointerover"]);Dr("onPointerLeave",["pointerout","pointerover"]);Zn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Zn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Zn("onBeforeInput",["compositionend","keypress","textInput","paste"]);Zn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Zn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Zn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ai="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),n0=new Set("cancel close invalid load scroll toggle".split(" ").concat(ai));function Kc(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,e_(r,e,void 0,t),t.currentTarget=null}function Xh(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var o=void 0;if(e)for(var s=r.length-1;0<=s;s--){var u=r[s],c=u.instance,d=u.currentTarget;if(u=u.listener,c!==o&&i.isPropagationStopped())break e;Kc(i,u,d),o=c}else for(s=0;s<r.length;s++){if(u=r[s],c=u.instance,d=u.currentTarget,u=u.listener,c!==o&&i.isPropagationStopped())break e;Kc(i,u,d),o=c}}}if(Go)throw t=Ql,Go=!1,Ql=null,t}function re(t,e){var n=e[sa];n===void 0&&(n=e[sa]=new Set);var r=t+"__bubble";n.has(r)||(Zh(e,t,2,!1),n.add(r))}function ul(t,e,n){var r=0;e&&(r|=4),Zh(n,t,r,e)}var uo="_reactListening"+Math.random().toString(36).slice(2);function Pi(t){if(!t[uo]){t[uo]=!0,oh.forEach(function(n){n!=="selectionchange"&&(n0.has(n)||ul(n,!1,t),ul(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[uo]||(e[uo]=!0,ul("selectionchange",!1,e))}}function Zh(t,e,n,r){switch(Lh(e)){case 1:var i=g_;break;case 4:i=y_;break;default:i=au}n=i.bind(null,e,n,t),i=void 0,!Yl||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function cl(t,e,n,r,i){var o=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var u=r.stateNode.containerInfo;if(u===i||u.nodeType===8&&u.parentNode===i)break;if(s===4)for(s=r.return;s!==null;){var c=s.tag;if((c===3||c===4)&&(c=s.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;s=s.return}for(;u!==null;){if(s=Un(u),s===null)return;if(c=s.tag,c===5||c===6){r=o=s;continue e}u=u.parentNode}}r=r.return}Eh(function(){var d=o,f=iu(n),p=[];e:{var h=Qh.get(t);if(h!==void 0){var y=cu,T=t;switch(t){case"keypress":if(So(n)===0)break e;case"keydown":case"keyup":y=M_;break;case"focusin":T="focus",y=rl;break;case"focusout":T="blur",y=rl;break;case"beforeblur":case"afterblur":y=rl;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=Uc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=T_;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=L_;break;case Wh:case Jh:case Kh:y=C_;break;case Yh:y=F_;break;case"scroll":y=v_;break;case"wheel":y=V_;break;case"copy":case"cut":case"paste":y=S_;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=Oc}var E=(e&4)!==0,S=!E&&t==="scroll",_=E?h!==null?h+"Capture":null:h;E=[];for(var g=d,v;g!==null;){v=g;var I=v.stateNode;if(v.tag===5&&I!==null&&(v=I,_!==null&&(I=Si(g,_),I!=null&&E.push(Mi(g,I,v)))),S)break;g=g.return}0<E.length&&(h=new y(h,T,null,n,f),p.push({event:h,listeners:E}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",h&&n!==Jl&&(T=n.relatedTarget||n.fromElement)&&(Un(T)||T[qt]))break e;if((y||h)&&(h=f.window===f?f:(h=f.ownerDocument)?h.defaultView||h.parentWindow:window,y?(T=n.relatedTarget||n.toElement,y=d,T=T?Un(T):null,T!==null&&(S=jn(T),T!==S||T.tag!==5&&T.tag!==6)&&(T=null)):(y=null,T=d),y!==T)){if(E=Uc,I="onMouseLeave",_="onMouseEnter",g="mouse",(t==="pointerout"||t==="pointerover")&&(E=Oc,I="onPointerLeave",_="onPointerEnter",g="pointer"),S=y==null?h:fr(y),v=T==null?h:fr(T),h=new E(I,g+"leave",y,n,f),h.target=S,h.relatedTarget=v,I=null,Un(f)===d&&(E=new E(_,g+"enter",T,n,f),E.target=v,E.relatedTarget=S,I=E),S=I,y&&T)t:{for(E=y,_=T,g=0,v=E;v;v=ir(v))g++;for(v=0,I=_;I;I=ir(I))v++;for(;0<g-v;)E=ir(E),g--;for(;0<v-g;)_=ir(_),v--;for(;g--;){if(E===_||_!==null&&E===_.alternate)break t;E=ir(E),_=ir(_)}E=null}else E=null;y!==null&&Yc(p,h,y,E,!1),T!==null&&S!==null&&Yc(p,S,T,E,!0)}}e:{if(h=d?fr(d):window,y=h.nodeName&&h.nodeName.toLowerCase(),y==="select"||y==="input"&&h.type==="file")var C=W_;else if(Bc(h))if(Bh)C=Q_;else{C=K_;var w=J_}else(y=h.nodeName)&&y.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(C=Y_);if(C&&(C=C(t,d))){Hh(p,C,n,f);break e}w&&w(t,h,d),t==="focusout"&&(w=h._wrapperState)&&w.controlled&&h.type==="number"&&Gl(h,"number",h.value)}switch(w=d?fr(d):window,t){case"focusin":(Bc(w)||w.contentEditable==="true")&&(cr=w,ea=d,hi=null);break;case"focusout":hi=ea=cr=null;break;case"mousedown":ta=!0;break;case"contextmenu":case"mouseup":case"dragend":ta=!1,Wc(p,n,f);break;case"selectionchange":if(j_)break;case"keydown":case"keyup":Wc(p,n,f)}var x;if(fu)e:{switch(t){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else ur?Oh(t,n)&&(A="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(A="onCompositionStart");A&&(Fh&&n.locale!=="ko"&&(ur||A!=="onCompositionStart"?A==="onCompositionEnd"&&ur&&(x=Uh()):(fn=f,uu="value"in fn?fn.value:fn.textContent,ur=!0)),w=Jo(d,A),0<w.length&&(A=new Fc(A,t,null,n,f),p.push({event:A,listeners:w}),x?A.data=x:(x=Vh(n),x!==null&&(A.data=x)))),(x=B_?G_(t,n):q_(t,n))&&(d=Jo(d,"onBeforeInput"),0<d.length&&(f=new Fc("onBeforeInput","beforeinput",null,n,f),p.push({event:f,listeners:d}),f.data=x))}Xh(p,e)})}function Mi(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Jo(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=Si(t,n),o!=null&&r.unshift(Mi(t,o,i)),o=Si(t,e),o!=null&&r.push(Mi(t,o,i))),t=t.return}return r}function ir(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Yc(t,e,n,r,i){for(var o=e._reactName,s=[];n!==null&&n!==r;){var u=n,c=u.alternate,d=u.stateNode;if(c!==null&&c===r)break;u.tag===5&&d!==null&&(u=d,i?(c=Si(n,o),c!=null&&s.unshift(Mi(n,c,u))):i||(c=Si(n,o),c!=null&&s.push(Mi(n,c,u)))),n=n.return}s.length!==0&&t.push({event:e,listeners:s})}var r0=/\r\n?/g,i0=/\u0000|\uFFFD/g;function Qc(t){return(typeof t=="string"?t:""+t).replace(r0,`
`).replace(i0,"")}function co(t,e,n){if(e=Qc(e),Qc(t)!==e&&n)throw Error(k(425))}function Ko(){}var na=null,ra=null;function ia(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var oa=typeof setTimeout=="function"?setTimeout:void 0,o0=typeof clearTimeout=="function"?clearTimeout:void 0,Xc=typeof Promise=="function"?Promise:void 0,s0=typeof queueMicrotask=="function"?queueMicrotask:typeof Xc<"u"?function(t){return Xc.resolve(null).then(t).catch(l0)}:oa;function l0(t){setTimeout(function(){throw t})}function dl(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Ni(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Ni(e)}function vn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Zc(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Gr=Math.random().toString(36).slice(2),Ct="__reactFiber$"+Gr,Di="__reactProps$"+Gr,qt="__reactContainer$"+Gr,sa="__reactEvents$"+Gr,a0="__reactListeners$"+Gr,u0="__reactHandles$"+Gr;function Un(t){var e=t[Ct];if(e)return e;for(var n=t.parentNode;n;){if(e=n[qt]||n[Ct]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Zc(t);t!==null;){if(n=t[Ct])return n;t=Zc(t)}return e}t=n,n=t.parentNode}return null}function Wi(t){return t=t[Ct]||t[qt],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function fr(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(k(33))}function Ns(t){return t[Di]||null}var la=[],pr=-1;function Rn(t){return{current:t}}function oe(t){0>pr||(t.current=la[pr],la[pr]=null,pr--)}function te(t,e){pr++,la[pr]=t.current,t.current=e}var An={},Me=Rn(An),Be=Rn(!1),qn=An;function br(t,e){var n=t.type.contextTypes;if(!n)return An;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=e[o];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Ge(t){return t=t.childContextTypes,t!=null}function Yo(){oe(Be),oe(Me)}function jc(t,e,n){if(Me.current!==An)throw Error(k(168));te(Me,e),te(Be,n)}function jh(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(k(108,Jv(t)||"Unknown",i));return ce({},n,r)}function Qo(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||An,qn=Me.current,te(Me,t),te(Be,Be.current),!0}function ed(t,e,n){var r=t.stateNode;if(!r)throw Error(k(169));n?(t=jh(t,e,qn),r.__reactInternalMemoizedMergedChildContext=t,oe(Be),oe(Me),te(Me,t)):oe(Be),te(Be,n)}var bt=null,ks=!1,fl=!1;function em(t){bt===null?bt=[t]:bt.push(t)}function c0(t){ks=!0,em(t)}function Pn(){if(!fl&&bt!==null){fl=!0;var t=0,e=X;try{var n=bt;for(X=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}bt=null,ks=!1}catch(i){throw bt!==null&&(bt=bt.slice(t+1)),Sh(ou,Pn),i}finally{X=e,fl=!1}}return null}var hr=[],mr=0,Xo=null,Zo=0,et=[],tt=0,$n=null,Lt=1,Ut="";function Dn(t,e){hr[mr++]=Zo,hr[mr++]=Xo,Xo=t,Zo=e}function tm(t,e,n){et[tt++]=Lt,et[tt++]=Ut,et[tt++]=$n,$n=t;var r=Lt;t=Ut;var i=32-mt(r)-1;r&=~(1<<i),n+=1;var o=32-mt(e)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,Lt=1<<32-mt(e)+i|n<<i|r,Ut=o+t}else Lt=1<<o|n<<i|r,Ut=t}function hu(t){t.return!==null&&(Dn(t,1),tm(t,1,0))}function mu(t){for(;t===Xo;)Xo=hr[--mr],hr[mr]=null,Zo=hr[--mr],hr[mr]=null;for(;t===$n;)$n=et[--tt],et[tt]=null,Ut=et[--tt],et[tt]=null,Lt=et[--tt],et[tt]=null}var Ke=null,We=null,se=!1,pt=null;function nm(t,e){var n=nt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function td(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ke=t,We=vn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ke=t,We=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=$n!==null?{id:Lt,overflow:Ut}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=nt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Ke=t,We=null,!0):!1;default:return!1}}function aa(t){return(t.mode&1)!==0&&(t.flags&128)===0}function ua(t){if(se){var e=We;if(e){var n=e;if(!td(t,e)){if(aa(t))throw Error(k(418));e=vn(n.nextSibling);var r=Ke;e&&td(t,e)?nm(r,n):(t.flags=t.flags&-4097|2,se=!1,Ke=t)}}else{if(aa(t))throw Error(k(418));t.flags=t.flags&-4097|2,se=!1,Ke=t}}}function nd(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ke=t}function fo(t){if(t!==Ke)return!1;if(!se)return nd(t),se=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!ia(t.type,t.memoizedProps)),e&&(e=We)){if(aa(t))throw rm(),Error(k(418));for(;e;)nm(t,e),e=vn(e.nextSibling)}if(nd(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(k(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){We=vn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}We=null}}else We=Ke?vn(t.stateNode.nextSibling):null;return!0}function rm(){for(var t=We;t;)t=vn(t.nextSibling)}function Lr(){We=Ke=null,se=!1}function gu(t){pt===null?pt=[t]:pt.push(t)}var d0=Qt.ReactCurrentBatchConfig;function jr(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(k(309));var r=n.stateNode}if(!r)throw Error(k(147,t));var i=r,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(s){var u=i.refs;s===null?delete u[o]:u[o]=s},e._stringRef=o,e)}if(typeof t!="string")throw Error(k(284));if(!n._owner)throw Error(k(290,t))}return t}function po(t,e){throw t=Object.prototype.toString.call(e),Error(k(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function rd(t){var e=t._init;return e(t._payload)}function im(t){function e(_,g){if(t){var v=_.deletions;v===null?(_.deletions=[g],_.flags|=16):v.push(g)}}function n(_,g){if(!t)return null;for(;g!==null;)e(_,g),g=g.sibling;return null}function r(_,g){for(_=new Map;g!==null;)g.key!==null?_.set(g.key,g):_.set(g.index,g),g=g.sibling;return _}function i(_,g){return _=In(_,g),_.index=0,_.sibling=null,_}function o(_,g,v){return _.index=v,t?(v=_.alternate,v!==null?(v=v.index,v<g?(_.flags|=2,g):v):(_.flags|=2,g)):(_.flags|=1048576,g)}function s(_){return t&&_.alternate===null&&(_.flags|=2),_}function u(_,g,v,I){return g===null||g.tag!==6?(g=_l(v,_.mode,I),g.return=_,g):(g=i(g,v),g.return=_,g)}function c(_,g,v,I){var C=v.type;return C===ar?f(_,g,v.props.children,I,v.key):g!==null&&(g.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===nn&&rd(C)===g.type)?(I=i(g,v.props),I.ref=jr(_,g,v),I.return=_,I):(I=Mo(v.type,v.key,v.props,null,_.mode,I),I.ref=jr(_,g,v),I.return=_,I)}function d(_,g,v,I){return g===null||g.tag!==4||g.stateNode.containerInfo!==v.containerInfo||g.stateNode.implementation!==v.implementation?(g=Tl(v,_.mode,I),g.return=_,g):(g=i(g,v.children||[]),g.return=_,g)}function f(_,g,v,I,C){return g===null||g.tag!==7?(g=Bn(v,_.mode,I,C),g.return=_,g):(g=i(g,v),g.return=_,g)}function p(_,g,v){if(typeof g=="string"&&g!==""||typeof g=="number")return g=_l(""+g,_.mode,v),g.return=_,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case to:return v=Mo(g.type,g.key,g.props,null,_.mode,v),v.ref=jr(_,null,g),v.return=_,v;case lr:return g=Tl(g,_.mode,v),g.return=_,g;case nn:var I=g._init;return p(_,I(g._payload),v)}if(si(g)||Kr(g))return g=Bn(g,_.mode,v,null),g.return=_,g;po(_,g)}return null}function h(_,g,v,I){var C=g!==null?g.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return C!==null?null:u(_,g,""+v,I);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case to:return v.key===C?c(_,g,v,I):null;case lr:return v.key===C?d(_,g,v,I):null;case nn:return C=v._init,h(_,g,C(v._payload),I)}if(si(v)||Kr(v))return C!==null?null:f(_,g,v,I,null);po(_,v)}return null}function y(_,g,v,I,C){if(typeof I=="string"&&I!==""||typeof I=="number")return _=_.get(v)||null,u(g,_,""+I,C);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case to:return _=_.get(I.key===null?v:I.key)||null,c(g,_,I,C);case lr:return _=_.get(I.key===null?v:I.key)||null,d(g,_,I,C);case nn:var w=I._init;return y(_,g,v,w(I._payload),C)}if(si(I)||Kr(I))return _=_.get(v)||null,f(g,_,I,C,null);po(g,I)}return null}function T(_,g,v,I){for(var C=null,w=null,x=g,A=g=0,P=null;x!==null&&A<v.length;A++){x.index>A?(P=x,x=null):P=x.sibling;var R=h(_,x,v[A],I);if(R===null){x===null&&(x=P);break}t&&x&&R.alternate===null&&e(_,x),g=o(R,g,A),w===null?C=R:w.sibling=R,w=R,x=P}if(A===v.length)return n(_,x),se&&Dn(_,A),C;if(x===null){for(;A<v.length;A++)x=p(_,v[A],I),x!==null&&(g=o(x,g,A),w===null?C=x:w.sibling=x,w=x);return se&&Dn(_,A),C}for(x=r(_,x);A<v.length;A++)P=y(x,_,A,v[A],I),P!==null&&(t&&P.alternate!==null&&x.delete(P.key===null?A:P.key),g=o(P,g,A),w===null?C=P:w.sibling=P,w=P);return t&&x.forEach(function(B){return e(_,B)}),se&&Dn(_,A),C}function E(_,g,v,I){var C=Kr(v);if(typeof C!="function")throw Error(k(150));if(v=C.call(v),v==null)throw Error(k(151));for(var w=C=null,x=g,A=g=0,P=null,R=v.next();x!==null&&!R.done;A++,R=v.next()){x.index>A?(P=x,x=null):P=x.sibling;var B=h(_,x,R.value,I);if(B===null){x===null&&(x=P);break}t&&x&&B.alternate===null&&e(_,x),g=o(B,g,A),w===null?C=B:w.sibling=B,w=B,x=P}if(R.done)return n(_,x),se&&Dn(_,A),C;if(x===null){for(;!R.done;A++,R=v.next())R=p(_,R.value,I),R!==null&&(g=o(R,g,A),w===null?C=R:w.sibling=R,w=R);return se&&Dn(_,A),C}for(x=r(_,x);!R.done;A++,R=v.next())R=y(x,_,A,R.value,I),R!==null&&(t&&R.alternate!==null&&x.delete(R.key===null?A:R.key),g=o(R,g,A),w===null?C=R:w.sibling=R,w=R);return t&&x.forEach(function($){return e(_,$)}),se&&Dn(_,A),C}function S(_,g,v,I){if(typeof v=="object"&&v!==null&&v.type===ar&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case to:e:{for(var C=v.key,w=g;w!==null;){if(w.key===C){if(C=v.type,C===ar){if(w.tag===7){n(_,w.sibling),g=i(w,v.props.children),g.return=_,_=g;break e}}else if(w.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===nn&&rd(C)===w.type){n(_,w.sibling),g=i(w,v.props),g.ref=jr(_,w,v),g.return=_,_=g;break e}n(_,w);break}else e(_,w);w=w.sibling}v.type===ar?(g=Bn(v.props.children,_.mode,I,v.key),g.return=_,_=g):(I=Mo(v.type,v.key,v.props,null,_.mode,I),I.ref=jr(_,g,v),I.return=_,_=I)}return s(_);case lr:e:{for(w=v.key;g!==null;){if(g.key===w)if(g.tag===4&&g.stateNode.containerInfo===v.containerInfo&&g.stateNode.implementation===v.implementation){n(_,g.sibling),g=i(g,v.children||[]),g.return=_,_=g;break e}else{n(_,g);break}else e(_,g);g=g.sibling}g=Tl(v,_.mode,I),g.return=_,_=g}return s(_);case nn:return w=v._init,S(_,g,w(v._payload),I)}if(si(v))return T(_,g,v,I);if(Kr(v))return E(_,g,v,I);po(_,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,g!==null&&g.tag===6?(n(_,g.sibling),g=i(g,v),g.return=_,_=g):(n(_,g),g=_l(v,_.mode,I),g.return=_,_=g),s(_)):n(_,g)}return S}var Ur=im(!0),om=im(!1),jo=Rn(null),es=null,gr=null,yu=null;function vu(){yu=gr=es=null}function _u(t){var e=jo.current;oe(jo),t._currentValue=e}function ca(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Sr(t,e){es=t,yu=gr=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(He=!0),t.firstContext=null)}function st(t){var e=t._currentValue;if(yu!==t)if(t={context:t,memoizedValue:e,next:null},gr===null){if(es===null)throw Error(k(308));gr=t,es.dependencies={lanes:0,firstContext:t}}else gr=gr.next=t;return e}var Fn=null;function Tu(t){Fn===null?Fn=[t]:Fn.push(t)}function sm(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Tu(e)):(n.next=i.next,i.next=n),e.interleaved=n,$t(t,r)}function $t(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var rn=!1;function Eu(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function lm(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Bt(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function _n(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,J&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,$t(t,n)}return i=r.interleaved,i===null?(e.next=e,Tu(r)):(e.next=i.next,i.next=e),r.interleaved=e,$t(t,n)}function xo(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,su(t,n)}}function id(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=s:o=o.next=s,n=n.next}while(n!==null);o===null?i=o=e:o=o.next=e}else i=o=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function ts(t,e,n,r){var i=t.updateQueue;rn=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,u=i.shared.pending;if(u!==null){i.shared.pending=null;var c=u,d=c.next;c.next=null,s===null?o=d:s.next=d,s=c;var f=t.alternate;f!==null&&(f=f.updateQueue,u=f.lastBaseUpdate,u!==s&&(u===null?f.firstBaseUpdate=d:u.next=d,f.lastBaseUpdate=c))}if(o!==null){var p=i.baseState;s=0,f=d=c=null,u=o;do{var h=u.lane,y=u.eventTime;if((r&h)===h){f!==null&&(f=f.next={eventTime:y,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var T=t,E=u;switch(h=e,y=n,E.tag){case 1:if(T=E.payload,typeof T=="function"){p=T.call(y,p,h);break e}p=T;break e;case 3:T.flags=T.flags&-65537|128;case 0:if(T=E.payload,h=typeof T=="function"?T.call(y,p,h):T,h==null)break e;p=ce({},p,h);break e;case 2:rn=!0}}u.callback!==null&&u.lane!==0&&(t.flags|=64,h=i.effects,h===null?i.effects=[u]:h.push(u))}else y={eventTime:y,lane:h,tag:u.tag,payload:u.payload,callback:u.callback,next:null},f===null?(d=f=y,c=p):f=f.next=y,s|=h;if(u=u.next,u===null){if(u=i.shared.pending,u===null)break;h=u,u=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(!0);if(f===null&&(c=p),i.baseState=c,i.firstBaseUpdate=d,i.lastBaseUpdate=f,e=i.shared.interleaved,e!==null){i=e;do s|=i.lane,i=i.next;while(i!==e)}else o===null&&(i.shared.lanes=0);Wn|=s,t.lanes=s,t.memoizedState=p}}function od(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(k(191,i));i.call(r)}}}var Ji={},St=Rn(Ji),bi=Rn(Ji),Li=Rn(Ji);function On(t){if(t===Ji)throw Error(k(174));return t}function Iu(t,e){switch(te(Li,e),te(bi,t),te(St,Ji),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:$l(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=$l(e,t)}oe(St),te(St,e)}function Fr(){oe(St),oe(bi),oe(Li)}function am(t){On(Li.current);var e=On(St.current),n=$l(e,t.type);e!==n&&(te(bi,t),te(St,n))}function Cu(t){bi.current===t&&(oe(St),oe(bi))}var ae=Rn(0);function ns(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var pl=[];function wu(){for(var t=0;t<pl.length;t++)pl[t]._workInProgressVersionPrimary=null;pl.length=0}var Ao=Qt.ReactCurrentDispatcher,hl=Qt.ReactCurrentBatchConfig,zn=0,ue=null,Te=null,Ce=null,rs=!1,mi=!1,Ui=0,f0=0;function Ne(){throw Error(k(321))}function Su(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!yt(t[n],e[n]))return!1;return!0}function xu(t,e,n,r,i,o){if(zn=o,ue=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ao.current=t===null||t.memoizedState===null?g0:y0,t=n(r,i),mi){o=0;do{if(mi=!1,Ui=0,25<=o)throw Error(k(301));o+=1,Ce=Te=null,e.updateQueue=null,Ao.current=v0,t=n(r,i)}while(mi)}if(Ao.current=is,e=Te!==null&&Te.next!==null,zn=0,Ce=Te=ue=null,rs=!1,e)throw Error(k(300));return t}function Au(){var t=Ui!==0;return Ui=0,t}function It(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ce===null?ue.memoizedState=Ce=t:Ce=Ce.next=t,Ce}function lt(){if(Te===null){var t=ue.alternate;t=t!==null?t.memoizedState:null}else t=Te.next;var e=Ce===null?ue.memoizedState:Ce.next;if(e!==null)Ce=e,Te=t;else{if(t===null)throw Error(k(310));Te=t,t={memoizedState:Te.memoizedState,baseState:Te.baseState,baseQueue:Te.baseQueue,queue:Te.queue,next:null},Ce===null?ue.memoizedState=Ce=t:Ce=Ce.next=t}return Ce}function Fi(t,e){return typeof e=="function"?e(t):e}function ml(t){var e=lt(),n=e.queue;if(n===null)throw Error(k(311));n.lastRenderedReducer=t;var r=Te,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var u=s=null,c=null,d=o;do{var f=d.lane;if((zn&f)===f)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var p={lane:f,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(u=c=p,s=r):c=c.next=p,ue.lanes|=f,Wn|=f}d=d.next}while(d!==null&&d!==o);c===null?s=r:c.next=u,yt(r,e.memoizedState)||(He=!0),e.memoizedState=r,e.baseState=s,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do o=i.lane,ue.lanes|=o,Wn|=o,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function gl(t){var e=lt(),n=e.queue;if(n===null)throw Error(k(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,o=e.memoizedState;if(i!==null){n.pending=null;var s=i=i.next;do o=t(o,s.action),s=s.next;while(s!==i);yt(o,e.memoizedState)||(He=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function um(){}function cm(t,e){var n=ue,r=lt(),i=e(),o=!yt(r.memoizedState,i);if(o&&(r.memoizedState=i,He=!0),r=r.queue,Nu(pm.bind(null,n,r,t),[t]),r.getSnapshot!==e||o||Ce!==null&&Ce.memoizedState.tag&1){if(n.flags|=2048,Oi(9,fm.bind(null,n,r,i,e),void 0,null),we===null)throw Error(k(349));zn&30||dm(n,e,i)}return i}function dm(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ue.updateQueue,e===null?(e={lastEffect:null,stores:null},ue.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function fm(t,e,n,r){e.value=n,e.getSnapshot=r,hm(e)&&mm(t)}function pm(t,e,n){return n(function(){hm(e)&&mm(t)})}function hm(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!yt(t,n)}catch{return!0}}function mm(t){var e=$t(t,1);e!==null&&gt(e,t,1,-1)}function sd(t){var e=It();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Fi,lastRenderedState:t},e.queue=t,t=t.dispatch=m0.bind(null,ue,t),[e.memoizedState,t]}function Oi(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=ue.updateQueue,e===null?(e={lastEffect:null,stores:null},ue.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function gm(){return lt().memoizedState}function No(t,e,n,r){var i=It();ue.flags|=t,i.memoizedState=Oi(1|e,n,void 0,r===void 0?null:r)}function Rs(t,e,n,r){var i=lt();r=r===void 0?null:r;var o=void 0;if(Te!==null){var s=Te.memoizedState;if(o=s.destroy,r!==null&&Su(r,s.deps)){i.memoizedState=Oi(e,n,o,r);return}}ue.flags|=t,i.memoizedState=Oi(1|e,n,o,r)}function ld(t,e){return No(8390656,8,t,e)}function Nu(t,e){return Rs(2048,8,t,e)}function ym(t,e){return Rs(4,2,t,e)}function vm(t,e){return Rs(4,4,t,e)}function _m(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Tm(t,e,n){return n=n!=null?n.concat([t]):null,Rs(4,4,_m.bind(null,e,t),n)}function ku(){}function Em(t,e){var n=lt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Su(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Im(t,e){var n=lt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Su(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Cm(t,e,n){return zn&21?(yt(n,e)||(n=Nh(),ue.lanes|=n,Wn|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,He=!0),t.memoizedState=n)}function p0(t,e){var n=X;X=n!==0&&4>n?n:4,t(!0);var r=hl.transition;hl.transition={};try{t(!1),e()}finally{X=n,hl.transition=r}}function wm(){return lt().memoizedState}function h0(t,e,n){var r=En(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Sm(t))xm(e,n);else if(n=sm(t,e,n,r),n!==null){var i=Le();gt(n,t,r,i),Am(n,e,r)}}function m0(t,e,n){var r=En(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Sm(t))xm(e,i);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var s=e.lastRenderedState,u=o(s,n);if(i.hasEagerState=!0,i.eagerState=u,yt(u,s)){var c=e.interleaved;c===null?(i.next=i,Tu(e)):(i.next=c.next,c.next=i),e.interleaved=i;return}}catch{}finally{}n=sm(t,e,i,r),n!==null&&(i=Le(),gt(n,t,r,i),Am(n,e,r))}}function Sm(t){var e=t.alternate;return t===ue||e!==null&&e===ue}function xm(t,e){mi=rs=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Am(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,su(t,n)}}var is={readContext:st,useCallback:Ne,useContext:Ne,useEffect:Ne,useImperativeHandle:Ne,useInsertionEffect:Ne,useLayoutEffect:Ne,useMemo:Ne,useReducer:Ne,useRef:Ne,useState:Ne,useDebugValue:Ne,useDeferredValue:Ne,useTransition:Ne,useMutableSource:Ne,useSyncExternalStore:Ne,useId:Ne,unstable_isNewReconciler:!1},g0={readContext:st,useCallback:function(t,e){return It().memoizedState=[t,e===void 0?null:e],t},useContext:st,useEffect:ld,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,No(4194308,4,_m.bind(null,e,t),n)},useLayoutEffect:function(t,e){return No(4194308,4,t,e)},useInsertionEffect:function(t,e){return No(4,2,t,e)},useMemo:function(t,e){var n=It();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=It();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=h0.bind(null,ue,t),[r.memoizedState,t]},useRef:function(t){var e=It();return t={current:t},e.memoizedState=t},useState:sd,useDebugValue:ku,useDeferredValue:function(t){return It().memoizedState=t},useTransition:function(){var t=sd(!1),e=t[0];return t=p0.bind(null,t[1]),It().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=ue,i=It();if(se){if(n===void 0)throw Error(k(407));n=n()}else{if(n=e(),we===null)throw Error(k(349));zn&30||dm(r,e,n)}i.memoizedState=n;var o={value:n,getSnapshot:e};return i.queue=o,ld(pm.bind(null,r,o,t),[t]),r.flags|=2048,Oi(9,fm.bind(null,r,o,n,e),void 0,null),n},useId:function(){var t=It(),e=we.identifierPrefix;if(se){var n=Ut,r=Lt;n=(r&~(1<<32-mt(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ui++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=f0++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},y0={readContext:st,useCallback:Em,useContext:st,useEffect:Nu,useImperativeHandle:Tm,useInsertionEffect:ym,useLayoutEffect:vm,useMemo:Im,useReducer:ml,useRef:gm,useState:function(){return ml(Fi)},useDebugValue:ku,useDeferredValue:function(t){var e=lt();return Cm(e,Te.memoizedState,t)},useTransition:function(){var t=ml(Fi)[0],e=lt().memoizedState;return[t,e]},useMutableSource:um,useSyncExternalStore:cm,useId:wm,unstable_isNewReconciler:!1},v0={readContext:st,useCallback:Em,useContext:st,useEffect:Nu,useImperativeHandle:Tm,useInsertionEffect:ym,useLayoutEffect:vm,useMemo:Im,useReducer:gl,useRef:gm,useState:function(){return gl(Fi)},useDebugValue:ku,useDeferredValue:function(t){var e=lt();return Te===null?e.memoizedState=t:Cm(e,Te.memoizedState,t)},useTransition:function(){var t=gl(Fi)[0],e=lt().memoizedState;return[t,e]},useMutableSource:um,useSyncExternalStore:cm,useId:wm,unstable_isNewReconciler:!1};function dt(t,e){if(t&&t.defaultProps){e=ce({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function da(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:ce({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Ps={isMounted:function(t){return(t=t._reactInternals)?jn(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Le(),i=En(t),o=Bt(r,i);o.payload=e,n!=null&&(o.callback=n),e=_n(t,o,i),e!==null&&(gt(e,t,i,r),xo(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Le(),i=En(t),o=Bt(r,i);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=_n(t,o,i),e!==null&&(gt(e,t,i,r),xo(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Le(),r=En(t),i=Bt(n,r);i.tag=2,e!=null&&(i.callback=e),e=_n(t,i,r),e!==null&&(gt(e,t,r,n),xo(e,t,r))}};function ad(t,e,n,r,i,o,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,o,s):e.prototype&&e.prototype.isPureReactComponent?!Ri(n,r)||!Ri(i,o):!0}function Nm(t,e,n){var r=!1,i=An,o=e.contextType;return typeof o=="object"&&o!==null?o=st(o):(i=Ge(e)?qn:Me.current,r=e.contextTypes,o=(r=r!=null)?br(t,i):An),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ps,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function ud(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Ps.enqueueReplaceState(e,e.state,null)}function fa(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Eu(t);var o=e.contextType;typeof o=="object"&&o!==null?i.context=st(o):(o=Ge(e)?qn:Me.current,i.context=br(t,o)),i.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(da(t,e,o,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Ps.enqueueReplaceState(i,i.state,null),ts(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Or(t,e){try{var n="",r=e;do n+=Wv(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:i,digest:null}}function yl(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function pa(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var _0=typeof WeakMap=="function"?WeakMap:Map;function km(t,e,n){n=Bt(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){ss||(ss=!0,Ca=r),pa(t,e)},n}function Rm(t,e,n){n=Bt(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){pa(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){pa(t,e),typeof r!="function"&&(Tn===null?Tn=new Set([this]):Tn.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),n}function cd(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new _0;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=D0.bind(null,t,e,n),e.then(t,t))}function dd(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function fd(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Bt(-1,1),e.tag=2,_n(n,e,1))),n.lanes|=1),t)}var T0=Qt.ReactCurrentOwner,He=!1;function be(t,e,n,r){e.child=t===null?om(e,null,n,r):Ur(e,t.child,n,r)}function pd(t,e,n,r,i){n=n.render;var o=e.ref;return Sr(e,i),r=xu(t,e,n,r,o,i),n=Au(),t!==null&&!He?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,zt(t,e,i)):(se&&n&&hu(e),e.flags|=1,be(t,e,r,i),e.child)}function hd(t,e,n,r,i){if(t===null){var o=n.type;return typeof o=="function"&&!Fu(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,Pm(t,e,o,r,i)):(t=Mo(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&i)){var s=o.memoizedProps;if(n=n.compare,n=n!==null?n:Ri,n(s,r)&&t.ref===e.ref)return zt(t,e,i)}return e.flags|=1,t=In(o,r),t.ref=e.ref,t.return=e,e.child=t}function Pm(t,e,n,r,i){if(t!==null){var o=t.memoizedProps;if(Ri(o,r)&&t.ref===e.ref)if(He=!1,e.pendingProps=r=o,(t.lanes&i)!==0)t.flags&131072&&(He=!0);else return e.lanes=t.lanes,zt(t,e,i)}return ha(t,e,n,r,i)}function Mm(t,e,n){var r=e.pendingProps,i=r.children,o=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},te(vr,ze),ze|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,te(vr,ze),ze|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,te(vr,ze),ze|=r}else o!==null?(r=o.baseLanes|n,e.memoizedState=null):r=n,te(vr,ze),ze|=r;return be(t,e,i,n),e.child}function Dm(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function ha(t,e,n,r,i){var o=Ge(n)?qn:Me.current;return o=br(e,o),Sr(e,i),n=xu(t,e,n,r,o,i),r=Au(),t!==null&&!He?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,zt(t,e,i)):(se&&r&&hu(e),e.flags|=1,be(t,e,n,i),e.child)}function md(t,e,n,r,i){if(Ge(n)){var o=!0;Qo(e)}else o=!1;if(Sr(e,i),e.stateNode===null)ko(t,e),Nm(e,n,r),fa(e,n,r,i),r=!0;else if(t===null){var s=e.stateNode,u=e.memoizedProps;s.props=u;var c=s.context,d=n.contextType;typeof d=="object"&&d!==null?d=st(d):(d=Ge(n)?qn:Me.current,d=br(e,d));var f=n.getDerivedStateFromProps,p=typeof f=="function"||typeof s.getSnapshotBeforeUpdate=="function";p||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(u!==r||c!==d)&&ud(e,s,r,d),rn=!1;var h=e.memoizedState;s.state=h,ts(e,r,s,i),c=e.memoizedState,u!==r||h!==c||Be.current||rn?(typeof f=="function"&&(da(e,n,f,r),c=e.memoizedState),(u=rn||ad(e,n,u,r,h,c,d))?(p||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),s.props=r,s.state=c,s.context=d,r=u):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{s=e.stateNode,lm(t,e),u=e.memoizedProps,d=e.type===e.elementType?u:dt(e.type,u),s.props=d,p=e.pendingProps,h=s.context,c=n.contextType,typeof c=="object"&&c!==null?c=st(c):(c=Ge(n)?qn:Me.current,c=br(e,c));var y=n.getDerivedStateFromProps;(f=typeof y=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(u!==p||h!==c)&&ud(e,s,r,c),rn=!1,h=e.memoizedState,s.state=h,ts(e,r,s,i);var T=e.memoizedState;u!==p||h!==T||Be.current||rn?(typeof y=="function"&&(da(e,n,y,r),T=e.memoizedState),(d=rn||ad(e,n,d,r,h,T,c)||!1)?(f||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,T,c),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,T,c)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||u===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=T),s.props=r,s.state=T,s.context=c,r=d):(typeof s.componentDidUpdate!="function"||u===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return ma(t,e,n,r,o,i)}function ma(t,e,n,r,i,o){Dm(t,e);var s=(e.flags&128)!==0;if(!r&&!s)return i&&ed(e,n,!1),zt(t,e,o);r=e.stateNode,T0.current=e;var u=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&s?(e.child=Ur(e,t.child,null,o),e.child=Ur(e,null,u,o)):be(t,e,u,o),e.memoizedState=r.state,i&&ed(e,n,!0),e.child}function bm(t){var e=t.stateNode;e.pendingContext?jc(t,e.pendingContext,e.pendingContext!==e.context):e.context&&jc(t,e.context,!1),Iu(t,e.containerInfo)}function gd(t,e,n,r,i){return Lr(),gu(i),e.flags|=256,be(t,e,n,r),e.child}var ga={dehydrated:null,treeContext:null,retryLane:0};function ya(t){return{baseLanes:t,cachePool:null,transitions:null}}function Lm(t,e,n){var r=e.pendingProps,i=ae.current,o=!1,s=(e.flags&128)!==0,u;if((u=s)||(u=t!==null&&t.memoizedState===null?!1:(i&2)!==0),u?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),te(ae,i&1),t===null)return ua(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(s=r.children,t=r.fallback,o?(r=e.mode,o=e.child,s={mode:"hidden",children:s},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=s):o=bs(s,r,0,null),t=Bn(t,r,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=ya(n),e.memoizedState=ga,t):Ru(e,s));if(i=t.memoizedState,i!==null&&(u=i.dehydrated,u!==null))return E0(t,e,s,r,u,i,n);if(o){o=r.fallback,s=e.mode,i=t.child,u=i.sibling;var c={mode:"hidden",children:r.children};return!(s&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=In(i,c),r.subtreeFlags=i.subtreeFlags&14680064),u!==null?o=In(u,o):(o=Bn(o,s,n,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,s=t.child.memoizedState,s=s===null?ya(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},o.memoizedState=s,o.childLanes=t.childLanes&~n,e.memoizedState=ga,r}return o=t.child,t=o.sibling,r=In(o,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Ru(t,e){return e=bs({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function ho(t,e,n,r){return r!==null&&gu(r),Ur(e,t.child,null,n),t=Ru(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function E0(t,e,n,r,i,o,s){if(n)return e.flags&256?(e.flags&=-257,r=yl(Error(k(422))),ho(t,e,s,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=r.fallback,i=e.mode,r=bs({mode:"visible",children:r.children},i,0,null),o=Bn(o,i,s,null),o.flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,e.mode&1&&Ur(e,t.child,null,s),e.child.memoizedState=ya(s),e.memoizedState=ga,o);if(!(e.mode&1))return ho(t,e,s,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var u=r.dgst;return r=u,o=Error(k(419)),r=yl(o,r,void 0),ho(t,e,s,r)}if(u=(s&t.childLanes)!==0,He||u){if(r=we,r!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|s)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,$t(t,i),gt(r,t,i,-1))}return Uu(),r=yl(Error(k(421))),ho(t,e,s,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=b0.bind(null,t),i._reactRetry=e,null):(t=o.treeContext,We=vn(i.nextSibling),Ke=e,se=!0,pt=null,t!==null&&(et[tt++]=Lt,et[tt++]=Ut,et[tt++]=$n,Lt=t.id,Ut=t.overflow,$n=e),e=Ru(e,r.children),e.flags|=4096,e)}function yd(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),ca(t.return,e,n)}function vl(t,e,n,r,i){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function Um(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(be(t,e,r.children,n),r=ae.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&yd(t,n,e);else if(t.tag===19)yd(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(te(ae,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&ns(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),vl(e,!1,i,n,o);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&ns(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}vl(e,!0,n,null,o);break;case"together":vl(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ko(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function zt(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Wn|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(k(153));if(e.child!==null){for(t=e.child,n=In(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=In(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function I0(t,e,n){switch(e.tag){case 3:bm(e),Lr();break;case 5:am(e);break;case 1:Ge(e.type)&&Qo(e);break;case 4:Iu(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;te(jo,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(te(ae,ae.current&1),e.flags|=128,null):n&e.child.childLanes?Lm(t,e,n):(te(ae,ae.current&1),t=zt(t,e,n),t!==null?t.sibling:null);te(ae,ae.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Um(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),te(ae,ae.current),r)break;return null;case 22:case 23:return e.lanes=0,Mm(t,e,n)}return zt(t,e,n)}var Fm,va,Om,Vm;Fm=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};va=function(){};Om=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,On(St.current);var o=null;switch(n){case"input":i=Hl(t,i),r=Hl(t,r),o=[];break;case"select":i=ce({},i,{value:void 0}),r=ce({},r,{value:void 0}),o=[];break;case"textarea":i=ql(t,i),r=ql(t,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Ko)}zl(n,r);var s;n=null;for(d in i)if(!r.hasOwnProperty(d)&&i.hasOwnProperty(d)&&i[d]!=null)if(d==="style"){var u=i[d];for(s in u)u.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Ci.hasOwnProperty(d)?o||(o=[]):(o=o||[]).push(d,null));for(d in r){var c=r[d];if(u=i!=null?i[d]:void 0,r.hasOwnProperty(d)&&c!==u&&(c!=null||u!=null))if(d==="style")if(u){for(s in u)!u.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&u[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(o||(o=[]),o.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,u=u?u.__html:void 0,c!=null&&u!==c&&(o=o||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(o=o||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Ci.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&re("scroll",t),o||u===c||(o=[])):(o=o||[]).push(d,c))}n&&(o=o||[]).push("style",n);var d=o;(e.updateQueue=d)&&(e.flags|=4)}};Vm=function(t,e,n,r){n!==r&&(e.flags|=4)};function ei(t,e){if(!se)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function ke(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function C0(t,e,n){var r=e.pendingProps;switch(mu(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ke(e),null;case 1:return Ge(e.type)&&Yo(),ke(e),null;case 3:return r=e.stateNode,Fr(),oe(Be),oe(Me),wu(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(fo(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,pt!==null&&(xa(pt),pt=null))),va(t,e),ke(e),null;case 5:Cu(e);var i=On(Li.current);if(n=e.type,t!==null&&e.stateNode!=null)Om(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(k(166));return ke(e),null}if(t=On(St.current),fo(e)){r=e.stateNode,n=e.type;var o=e.memoizedProps;switch(r[Ct]=e,r[Di]=o,t=(e.mode&1)!==0,n){case"dialog":re("cancel",r),re("close",r);break;case"iframe":case"object":case"embed":re("load",r);break;case"video":case"audio":for(i=0;i<ai.length;i++)re(ai[i],r);break;case"source":re("error",r);break;case"img":case"image":case"link":re("error",r),re("load",r);break;case"details":re("toggle",r);break;case"input":xc(r,o),re("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},re("invalid",r);break;case"textarea":Nc(r,o),re("invalid",r)}zl(n,o),i=null;for(var s in o)if(o.hasOwnProperty(s)){var u=o[s];s==="children"?typeof u=="string"?r.textContent!==u&&(o.suppressHydrationWarning!==!0&&co(r.textContent,u,t),i=["children",u]):typeof u=="number"&&r.textContent!==""+u&&(o.suppressHydrationWarning!==!0&&co(r.textContent,u,t),i=["children",""+u]):Ci.hasOwnProperty(s)&&u!=null&&s==="onScroll"&&re("scroll",r)}switch(n){case"input":no(r),Ac(r,o,!0);break;case"textarea":no(r),kc(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=Ko)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=ph(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=s.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=s.createElement(n,{is:r.is}):(t=s.createElement(n),n==="select"&&(s=t,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):t=s.createElementNS(t,n),t[Ct]=e,t[Di]=r,Fm(t,e,!1,!1),e.stateNode=t;e:{switch(s=Wl(n,r),n){case"dialog":re("cancel",t),re("close",t),i=r;break;case"iframe":case"object":case"embed":re("load",t),i=r;break;case"video":case"audio":for(i=0;i<ai.length;i++)re(ai[i],t);i=r;break;case"source":re("error",t),i=r;break;case"img":case"image":case"link":re("error",t),re("load",t),i=r;break;case"details":re("toggle",t),i=r;break;case"input":xc(t,r),i=Hl(t,r),re("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=ce({},r,{value:void 0}),re("invalid",t);break;case"textarea":Nc(t,r),i=ql(t,r),re("invalid",t);break;default:i=r}zl(n,i),u=i;for(o in u)if(u.hasOwnProperty(o)){var c=u[o];o==="style"?gh(t,c):o==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&hh(t,c)):o==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&wi(t,c):typeof c=="number"&&wi(t,""+c):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Ci.hasOwnProperty(o)?c!=null&&o==="onScroll"&&re("scroll",t):c!=null&&eu(t,o,c,s))}switch(n){case"input":no(t),Ac(t,r,!1);break;case"textarea":no(t),kc(t);break;case"option":r.value!=null&&t.setAttribute("value",""+xn(r.value));break;case"select":t.multiple=!!r.multiple,o=r.value,o!=null?Er(t,!!r.multiple,o,!1):r.defaultValue!=null&&Er(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Ko)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ke(e),null;case 6:if(t&&e.stateNode!=null)Vm(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(k(166));if(n=On(Li.current),On(St.current),fo(e)){if(r=e.stateNode,n=e.memoizedProps,r[Ct]=e,(o=r.nodeValue!==n)&&(t=Ke,t!==null))switch(t.tag){case 3:co(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&co(r.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Ct]=e,e.stateNode=r}return ke(e),null;case 13:if(oe(ae),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(se&&We!==null&&e.mode&1&&!(e.flags&128))rm(),Lr(),e.flags|=98560,o=!1;else if(o=fo(e),r!==null&&r.dehydrated!==null){if(t===null){if(!o)throw Error(k(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(k(317));o[Ct]=e}else Lr(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ke(e),o=!1}else pt!==null&&(xa(pt),pt=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||ae.current&1?Ee===0&&(Ee=3):Uu())),e.updateQueue!==null&&(e.flags|=4),ke(e),null);case 4:return Fr(),va(t,e),t===null&&Pi(e.stateNode.containerInfo),ke(e),null;case 10:return _u(e.type._context),ke(e),null;case 17:return Ge(e.type)&&Yo(),ke(e),null;case 19:if(oe(ae),o=e.memoizedState,o===null)return ke(e),null;if(r=(e.flags&128)!==0,s=o.rendering,s===null)if(r)ei(o,!1);else{if(Ee!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=ns(t),s!==null){for(e.flags|=128,ei(o,!1),r=s.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)o=n,t=r,o.flags&=14680066,s=o.alternate,s===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,t=s.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return te(ae,ae.current&1|2),e.child}t=t.sibling}o.tail!==null&&ge()>Vr&&(e.flags|=128,r=!0,ei(o,!1),e.lanes=4194304)}else{if(!r)if(t=ns(s),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ei(o,!0),o.tail===null&&o.tailMode==="hidden"&&!s.alternate&&!se)return ke(e),null}else 2*ge()-o.renderingStartTime>Vr&&n!==1073741824&&(e.flags|=128,r=!0,ei(o,!1),e.lanes=4194304);o.isBackwards?(s.sibling=e.child,e.child=s):(n=o.last,n!==null?n.sibling=s:e.child=s,o.last=s)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=ge(),e.sibling=null,n=ae.current,te(ae,r?n&1|2:n&1),e):(ke(e),null);case 22:case 23:return Lu(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?ze&1073741824&&(ke(e),e.subtreeFlags&6&&(e.flags|=8192)):ke(e),null;case 24:return null;case 25:return null}throw Error(k(156,e.tag))}function w0(t,e){switch(mu(e),e.tag){case 1:return Ge(e.type)&&Yo(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Fr(),oe(Be),oe(Me),wu(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Cu(e),null;case 13:if(oe(ae),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(k(340));Lr()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return oe(ae),null;case 4:return Fr(),null;case 10:return _u(e.type._context),null;case 22:case 23:return Lu(),null;case 24:return null;default:return null}}var mo=!1,Re=!1,S0=typeof WeakSet=="function"?WeakSet:Set,U=null;function yr(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){pe(t,e,r)}else n.current=null}function _a(t,e,n){try{n()}catch(r){pe(t,e,r)}}var vd=!1;function x0(t,e){if(na=zo,t=$h(),pu(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var s=0,u=-1,c=-1,d=0,f=0,p=t,h=null;t:for(;;){for(var y;p!==n||i!==0&&p.nodeType!==3||(u=s+i),p!==o||r!==0&&p.nodeType!==3||(c=s+r),p.nodeType===3&&(s+=p.nodeValue.length),(y=p.firstChild)!==null;)h=p,p=y;for(;;){if(p===t)break t;if(h===n&&++d===i&&(u=s),h===o&&++f===r&&(c=s),(y=p.nextSibling)!==null)break;p=h,h=p.parentNode}p=y}n=u===-1||c===-1?null:{start:u,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ra={focusedElem:t,selectionRange:n},zo=!1,U=e;U!==null;)if(e=U,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,U=t;else for(;U!==null;){e=U;try{var T=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(T!==null){var E=T.memoizedProps,S=T.memoizedState,_=e.stateNode,g=_.getSnapshotBeforeUpdate(e.elementType===e.type?E:dt(e.type,E),S);_.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(k(163))}}catch(I){pe(e,e.return,I)}if(t=e.sibling,t!==null){t.return=e.return,U=t;break}U=e.return}return T=vd,vd=!1,T}function gi(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,o!==void 0&&_a(e,n,o)}i=i.next}while(i!==r)}}function Ms(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Ta(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Hm(t){var e=t.alternate;e!==null&&(t.alternate=null,Hm(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Ct],delete e[Di],delete e[sa],delete e[a0],delete e[u0])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Bm(t){return t.tag===5||t.tag===3||t.tag===4}function _d(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Bm(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Ea(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ko));else if(r!==4&&(t=t.child,t!==null))for(Ea(t,e,n),t=t.sibling;t!==null;)Ea(t,e,n),t=t.sibling}function Ia(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Ia(t,e,n),t=t.sibling;t!==null;)Ia(t,e,n),t=t.sibling}var Se=null,ft=!1;function en(t,e,n){for(n=n.child;n!==null;)Gm(t,e,n),n=n.sibling}function Gm(t,e,n){if(wt&&typeof wt.onCommitFiberUnmount=="function")try{wt.onCommitFiberUnmount(ws,n)}catch{}switch(n.tag){case 5:Re||yr(n,e);case 6:var r=Se,i=ft;Se=null,en(t,e,n),Se=r,ft=i,Se!==null&&(ft?(t=Se,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Se.removeChild(n.stateNode));break;case 18:Se!==null&&(ft?(t=Se,n=n.stateNode,t.nodeType===8?dl(t.parentNode,n):t.nodeType===1&&dl(t,n),Ni(t)):dl(Se,n.stateNode));break;case 4:r=Se,i=ft,Se=n.stateNode.containerInfo,ft=!0,en(t,e,n),Se=r,ft=i;break;case 0:case 11:case 14:case 15:if(!Re&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,s!==void 0&&(o&2||o&4)&&_a(n,e,s),i=i.next}while(i!==r)}en(t,e,n);break;case 1:if(!Re&&(yr(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){pe(n,e,u)}en(t,e,n);break;case 21:en(t,e,n);break;case 22:n.mode&1?(Re=(r=Re)||n.memoizedState!==null,en(t,e,n),Re=r):en(t,e,n);break;default:en(t,e,n)}}function Td(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new S0),e.forEach(function(r){var i=L0.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function ct(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=t,s=e,u=s;e:for(;u!==null;){switch(u.tag){case 5:Se=u.stateNode,ft=!1;break e;case 3:Se=u.stateNode.containerInfo,ft=!0;break e;case 4:Se=u.stateNode.containerInfo,ft=!0;break e}u=u.return}if(Se===null)throw Error(k(160));Gm(o,s,i),Se=null,ft=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(d){pe(i,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)qm(e,t),e=e.sibling}function qm(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ct(e,t),Et(t),r&4){try{gi(3,t,t.return),Ms(3,t)}catch(E){pe(t,t.return,E)}try{gi(5,t,t.return)}catch(E){pe(t,t.return,E)}}break;case 1:ct(e,t),Et(t),r&512&&n!==null&&yr(n,n.return);break;case 5:if(ct(e,t),Et(t),r&512&&n!==null&&yr(n,n.return),t.flags&32){var i=t.stateNode;try{wi(i,"")}catch(E){pe(t,t.return,E)}}if(r&4&&(i=t.stateNode,i!=null)){var o=t.memoizedProps,s=n!==null?n.memoizedProps:o,u=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{u==="input"&&o.type==="radio"&&o.name!=null&&dh(i,o),Wl(u,s);var d=Wl(u,o);for(s=0;s<c.length;s+=2){var f=c[s],p=c[s+1];f==="style"?gh(i,p):f==="dangerouslySetInnerHTML"?hh(i,p):f==="children"?wi(i,p):eu(i,f,p,d)}switch(u){case"input":Bl(i,o);break;case"textarea":fh(i,o);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var y=o.value;y!=null?Er(i,!!o.multiple,y,!1):h!==!!o.multiple&&(o.defaultValue!=null?Er(i,!!o.multiple,o.defaultValue,!0):Er(i,!!o.multiple,o.multiple?[]:"",!1))}i[Di]=o}catch(E){pe(t,t.return,E)}}break;case 6:if(ct(e,t),Et(t),r&4){if(t.stateNode===null)throw Error(k(162));i=t.stateNode,o=t.memoizedProps;try{i.nodeValue=o}catch(E){pe(t,t.return,E)}}break;case 3:if(ct(e,t),Et(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ni(e.containerInfo)}catch(E){pe(t,t.return,E)}break;case 4:ct(e,t),Et(t);break;case 13:ct(e,t),Et(t),i=t.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(Du=ge())),r&4&&Td(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(Re=(d=Re)||f,ct(e,t),Re=d):ct(e,t),Et(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!f&&t.mode&1)for(U=t,f=t.child;f!==null;){for(p=U=f;U!==null;){switch(h=U,y=h.child,h.tag){case 0:case 11:case 14:case 15:gi(4,h,h.return);break;case 1:yr(h,h.return);var T=h.stateNode;if(typeof T.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,T.props=e.memoizedProps,T.state=e.memoizedState,T.componentWillUnmount()}catch(E){pe(r,n,E)}}break;case 5:yr(h,h.return);break;case 22:if(h.memoizedState!==null){Id(p);continue}}y!==null?(y.return=h,U=y):Id(p)}f=f.sibling}e:for(f=null,p=t;;){if(p.tag===5){if(f===null){f=p;try{i=p.stateNode,d?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(u=p.stateNode,c=p.memoizedProps.style,s=c!=null&&c.hasOwnProperty("display")?c.display:null,u.style.display=mh("display",s))}catch(E){pe(t,t.return,E)}}}else if(p.tag===6){if(f===null)try{p.stateNode.nodeValue=d?"":p.memoizedProps}catch(E){pe(t,t.return,E)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;f===p&&(f=null),p=p.return}f===p&&(f=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:ct(e,t),Et(t),r&4&&Td(t);break;case 21:break;default:ct(e,t),Et(t)}}function Et(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Bm(n)){var r=n;break e}n=n.return}throw Error(k(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(wi(i,""),r.flags&=-33);var o=_d(t);Ia(t,o,i);break;case 3:case 4:var s=r.stateNode.containerInfo,u=_d(t);Ea(t,u,s);break;default:throw Error(k(161))}}catch(c){pe(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function A0(t,e,n){U=t,$m(t)}function $m(t,e,n){for(var r=(t.mode&1)!==0;U!==null;){var i=U,o=i.child;if(i.tag===22&&r){var s=i.memoizedState!==null||mo;if(!s){var u=i.alternate,c=u!==null&&u.memoizedState!==null||Re;u=mo;var d=Re;if(mo=s,(Re=c)&&!d)for(U=i;U!==null;)s=U,c=s.child,s.tag===22&&s.memoizedState!==null?Cd(i):c!==null?(c.return=s,U=c):Cd(i);for(;o!==null;)U=o,$m(o),o=o.sibling;U=i,mo=u,Re=d}Ed(t)}else i.subtreeFlags&8772&&o!==null?(o.return=i,U=o):Ed(t)}}function Ed(t){for(;U!==null;){var e=U;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Re||Ms(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Re)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:dt(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&od(e,o,r);break;case 3:var s=e.updateQueue;if(s!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}od(e,s,n)}break;case 5:var u=e.stateNode;if(n===null&&e.flags&4){n=u;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var f=d.memoizedState;if(f!==null){var p=f.dehydrated;p!==null&&Ni(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(k(163))}Re||e.flags&512&&Ta(e)}catch(h){pe(e,e.return,h)}}if(e===t){U=null;break}if(n=e.sibling,n!==null){n.return=e.return,U=n;break}U=e.return}}function Id(t){for(;U!==null;){var e=U;if(e===t){U=null;break}var n=e.sibling;if(n!==null){n.return=e.return,U=n;break}U=e.return}}function Cd(t){for(;U!==null;){var e=U;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Ms(4,e)}catch(c){pe(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(c){pe(e,i,c)}}var o=e.return;try{Ta(e)}catch(c){pe(e,o,c)}break;case 5:var s=e.return;try{Ta(e)}catch(c){pe(e,s,c)}}}catch(c){pe(e,e.return,c)}if(e===t){U=null;break}var u=e.sibling;if(u!==null){u.return=e.return,U=u;break}U=e.return}}var N0=Math.ceil,os=Qt.ReactCurrentDispatcher,Pu=Qt.ReactCurrentOwner,rt=Qt.ReactCurrentBatchConfig,J=0,we=null,ve=null,xe=0,ze=0,vr=Rn(0),Ee=0,Vi=null,Wn=0,Ds=0,Mu=0,yi=null,Ve=null,Du=0,Vr=1/0,Dt=null,ss=!1,Ca=null,Tn=null,go=!1,pn=null,ls=0,vi=0,wa=null,Ro=-1,Po=0;function Le(){return J&6?ge():Ro!==-1?Ro:Ro=ge()}function En(t){return t.mode&1?J&2&&xe!==0?xe&-xe:d0.transition!==null?(Po===0&&(Po=Nh()),Po):(t=X,t!==0||(t=window.event,t=t===void 0?16:Lh(t.type)),t):1}function gt(t,e,n,r){if(50<vi)throw vi=0,wa=null,Error(k(185));$i(t,n,r),(!(J&2)||t!==we)&&(t===we&&(!(J&2)&&(Ds|=n),Ee===4&&sn(t,xe)),qe(t,r),n===1&&J===0&&!(e.mode&1)&&(Vr=ge()+500,ks&&Pn()))}function qe(t,e){var n=t.callbackNode;d_(t,e);var r=$o(t,t===we?xe:0);if(r===0)n!==null&&Mc(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Mc(n),e===1)t.tag===0?c0(wd.bind(null,t)):em(wd.bind(null,t)),s0(function(){!(J&6)&&Pn()}),n=null;else{switch(kh(r)){case 1:n=ou;break;case 4:n=xh;break;case 16:n=qo;break;case 536870912:n=Ah;break;default:n=qo}n=Zm(n,zm.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function zm(t,e){if(Ro=-1,Po=0,J&6)throw Error(k(327));var n=t.callbackNode;if(xr()&&t.callbackNode!==n)return null;var r=$o(t,t===we?xe:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=as(t,r);else{e=r;var i=J;J|=2;var o=Jm();(we!==t||xe!==e)&&(Dt=null,Vr=ge()+500,Hn(t,e));do try{P0();break}catch(u){Wm(t,u)}while(!0);vu(),os.current=o,J=i,ve!==null?e=0:(we=null,xe=0,e=Ee)}if(e!==0){if(e===2&&(i=Xl(t),i!==0&&(r=i,e=Sa(t,i))),e===1)throw n=Vi,Hn(t,0),sn(t,r),qe(t,ge()),n;if(e===6)sn(t,r);else{if(i=t.current.alternate,!(r&30)&&!k0(i)&&(e=as(t,r),e===2&&(o=Xl(t),o!==0&&(r=o,e=Sa(t,o))),e===1))throw n=Vi,Hn(t,0),sn(t,r),qe(t,ge()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(k(345));case 2:bn(t,Ve,Dt);break;case 3:if(sn(t,r),(r&130023424)===r&&(e=Du+500-ge(),10<e)){if($o(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Le(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=oa(bn.bind(null,t,Ve,Dt),e);break}bn(t,Ve,Dt);break;case 4:if(sn(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var s=31-mt(r);o=1<<s,s=e[s],s>i&&(i=s),r&=~o}if(r=i,r=ge()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*N0(r/1960))-r,10<r){t.timeoutHandle=oa(bn.bind(null,t,Ve,Dt),r);break}bn(t,Ve,Dt);break;case 5:bn(t,Ve,Dt);break;default:throw Error(k(329))}}}return qe(t,ge()),t.callbackNode===n?zm.bind(null,t):null}function Sa(t,e){var n=yi;return t.current.memoizedState.isDehydrated&&(Hn(t,e).flags|=256),t=as(t,e),t!==2&&(e=Ve,Ve=n,e!==null&&xa(e)),t}function xa(t){Ve===null?Ve=t:Ve.push.apply(Ve,t)}function k0(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!yt(o(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function sn(t,e){for(e&=~Mu,e&=~Ds,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-mt(e),r=1<<n;t[n]=-1,e&=~r}}function wd(t){if(J&6)throw Error(k(327));xr();var e=$o(t,0);if(!(e&1))return qe(t,ge()),null;var n=as(t,e);if(t.tag!==0&&n===2){var r=Xl(t);r!==0&&(e=r,n=Sa(t,r))}if(n===1)throw n=Vi,Hn(t,0),sn(t,e),qe(t,ge()),n;if(n===6)throw Error(k(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,bn(t,Ve,Dt),qe(t,ge()),null}function bu(t,e){var n=J;J|=1;try{return t(e)}finally{J=n,J===0&&(Vr=ge()+500,ks&&Pn())}}function Jn(t){pn!==null&&pn.tag===0&&!(J&6)&&xr();var e=J;J|=1;var n=rt.transition,r=X;try{if(rt.transition=null,X=1,t)return t()}finally{X=r,rt.transition=n,J=e,!(J&6)&&Pn()}}function Lu(){ze=vr.current,oe(vr)}function Hn(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,o0(n)),ve!==null)for(n=ve.return;n!==null;){var r=n;switch(mu(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Yo();break;case 3:Fr(),oe(Be),oe(Me),wu();break;case 5:Cu(r);break;case 4:Fr();break;case 13:oe(ae);break;case 19:oe(ae);break;case 10:_u(r.type._context);break;case 22:case 23:Lu()}n=n.return}if(we=t,ve=t=In(t.current,null),xe=ze=e,Ee=0,Vi=null,Mu=Ds=Wn=0,Ve=yi=null,Fn!==null){for(e=0;e<Fn.length;e++)if(n=Fn[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var s=o.next;o.next=i,r.next=s}n.pending=r}Fn=null}return t}function Wm(t,e){do{var n=ve;try{if(vu(),Ao.current=is,rs){for(var r=ue.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}rs=!1}if(zn=0,Ce=Te=ue=null,mi=!1,Ui=0,Pu.current=null,n===null||n.return===null){Ee=1,Vi=e,ve=null;break}e:{var o=t,s=n.return,u=n,c=e;if(e=xe,u.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,f=u,p=f.tag;if(!(f.mode&1)&&(p===0||p===11||p===15)){var h=f.alternate;h?(f.updateQueue=h.updateQueue,f.memoizedState=h.memoizedState,f.lanes=h.lanes):(f.updateQueue=null,f.memoizedState=null)}var y=dd(s);if(y!==null){y.flags&=-257,fd(y,s,u,o,e),y.mode&1&&cd(o,d,e),e=y,c=d;var T=e.updateQueue;if(T===null){var E=new Set;E.add(c),e.updateQueue=E}else T.add(c);break e}else{if(!(e&1)){cd(o,d,e),Uu();break e}c=Error(k(426))}}else if(se&&u.mode&1){var S=dd(s);if(S!==null){!(S.flags&65536)&&(S.flags|=256),fd(S,s,u,o,e),gu(Or(c,u));break e}}o=c=Or(c,u),Ee!==4&&(Ee=2),yi===null?yi=[o]:yi.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var _=km(o,c,e);id(o,_);break e;case 1:u=c;var g=o.type,v=o.stateNode;if(!(o.flags&128)&&(typeof g.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Tn===null||!Tn.has(v)))){o.flags|=65536,e&=-e,o.lanes|=e;var I=Rm(o,u,e);id(o,I);break e}}o=o.return}while(o!==null)}Ym(n)}catch(C){e=C,ve===n&&n!==null&&(ve=n=n.return);continue}break}while(!0)}function Jm(){var t=os.current;return os.current=is,t===null?is:t}function Uu(){(Ee===0||Ee===3||Ee===2)&&(Ee=4),we===null||!(Wn&268435455)&&!(Ds&268435455)||sn(we,xe)}function as(t,e){var n=J;J|=2;var r=Jm();(we!==t||xe!==e)&&(Dt=null,Hn(t,e));do try{R0();break}catch(i){Wm(t,i)}while(!0);if(vu(),J=n,os.current=r,ve!==null)throw Error(k(261));return we=null,xe=0,Ee}function R0(){for(;ve!==null;)Km(ve)}function P0(){for(;ve!==null&&!n_();)Km(ve)}function Km(t){var e=Xm(t.alternate,t,ze);t.memoizedProps=t.pendingProps,e===null?Ym(t):ve=e,Pu.current=null}function Ym(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=w0(n,e),n!==null){n.flags&=32767,ve=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ee=6,ve=null;return}}else if(n=C0(n,e,ze),n!==null){ve=n;return}if(e=e.sibling,e!==null){ve=e;return}ve=e=t}while(e!==null);Ee===0&&(Ee=5)}function bn(t,e,n){var r=X,i=rt.transition;try{rt.transition=null,X=1,M0(t,e,n,r)}finally{rt.transition=i,X=r}return null}function M0(t,e,n,r){do xr();while(pn!==null);if(J&6)throw Error(k(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(k(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(f_(t,o),t===we&&(ve=we=null,xe=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||go||(go=!0,Zm(qo,function(){return xr(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=rt.transition,rt.transition=null;var s=X;X=1;var u=J;J|=4,Pu.current=null,x0(t,n),qm(n,t),Z_(ra),zo=!!na,ra=na=null,t.current=n,A0(n),r_(),J=u,X=s,rt.transition=o}else t.current=n;if(go&&(go=!1,pn=t,ls=i),o=t.pendingLanes,o===0&&(Tn=null),s_(n.stateNode),qe(t,ge()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(ss)throw ss=!1,t=Ca,Ca=null,t;return ls&1&&t.tag!==0&&xr(),o=t.pendingLanes,o&1?t===wa?vi++:(vi=0,wa=t):vi=0,Pn(),null}function xr(){if(pn!==null){var t=kh(ls),e=rt.transition,n=X;try{if(rt.transition=null,X=16>t?16:t,pn===null)var r=!1;else{if(t=pn,pn=null,ls=0,J&6)throw Error(k(331));var i=J;for(J|=4,U=t.current;U!==null;){var o=U,s=o.child;if(U.flags&16){var u=o.deletions;if(u!==null){for(var c=0;c<u.length;c++){var d=u[c];for(U=d;U!==null;){var f=U;switch(f.tag){case 0:case 11:case 15:gi(8,f,o)}var p=f.child;if(p!==null)p.return=f,U=p;else for(;U!==null;){f=U;var h=f.sibling,y=f.return;if(Hm(f),f===d){U=null;break}if(h!==null){h.return=y,U=h;break}U=y}}}var T=o.alternate;if(T!==null){var E=T.child;if(E!==null){T.child=null;do{var S=E.sibling;E.sibling=null,E=S}while(E!==null)}}U=o}}if(o.subtreeFlags&2064&&s!==null)s.return=o,U=s;else e:for(;U!==null;){if(o=U,o.flags&2048)switch(o.tag){case 0:case 11:case 15:gi(9,o,o.return)}var _=o.sibling;if(_!==null){_.return=o.return,U=_;break e}U=o.return}}var g=t.current;for(U=g;U!==null;){s=U;var v=s.child;if(s.subtreeFlags&2064&&v!==null)v.return=s,U=v;else e:for(s=g;U!==null;){if(u=U,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:Ms(9,u)}}catch(C){pe(u,u.return,C)}if(u===s){U=null;break e}var I=u.sibling;if(I!==null){I.return=u.return,U=I;break e}U=u.return}}if(J=i,Pn(),wt&&typeof wt.onPostCommitFiberRoot=="function")try{wt.onPostCommitFiberRoot(ws,t)}catch{}r=!0}return r}finally{X=n,rt.transition=e}}return!1}function Sd(t,e,n){e=Or(n,e),e=km(t,e,1),t=_n(t,e,1),e=Le(),t!==null&&($i(t,1,e),qe(t,e))}function pe(t,e,n){if(t.tag===3)Sd(t,t,n);else for(;e!==null;){if(e.tag===3){Sd(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Tn===null||!Tn.has(r))){t=Or(n,t),t=Rm(e,t,1),e=_n(e,t,1),t=Le(),e!==null&&($i(e,1,t),qe(e,t));break}}e=e.return}}function D0(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Le(),t.pingedLanes|=t.suspendedLanes&n,we===t&&(xe&n)===n&&(Ee===4||Ee===3&&(xe&130023424)===xe&&500>ge()-Du?Hn(t,0):Mu|=n),qe(t,e)}function Qm(t,e){e===0&&(t.mode&1?(e=oo,oo<<=1,!(oo&130023424)&&(oo=4194304)):e=1);var n=Le();t=$t(t,e),t!==null&&($i(t,e,n),qe(t,n))}function b0(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Qm(t,n)}function L0(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(k(314))}r!==null&&r.delete(e),Qm(t,n)}var Xm;Xm=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Be.current)He=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return He=!1,I0(t,e,n);He=!!(t.flags&131072)}else He=!1,se&&e.flags&1048576&&tm(e,Zo,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;ko(t,e),t=e.pendingProps;var i=br(e,Me.current);Sr(e,n),i=xu(null,e,r,t,i,n);var o=Au();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ge(r)?(o=!0,Qo(e)):o=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Eu(e),i.updater=Ps,e.stateNode=i,i._reactInternals=e,fa(e,r,t,n),e=ma(null,e,r,!0,o,n)):(e.tag=0,se&&o&&hu(e),be(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(ko(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=F0(r),t=dt(r,t),i){case 0:e=ha(null,e,r,t,n);break e;case 1:e=md(null,e,r,t,n);break e;case 11:e=pd(null,e,r,t,n);break e;case 14:e=hd(null,e,r,dt(r.type,t),n);break e}throw Error(k(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:dt(r,i),ha(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:dt(r,i),md(t,e,r,i,n);case 3:e:{if(bm(e),t===null)throw Error(k(387));r=e.pendingProps,o=e.memoizedState,i=o.element,lm(t,e),ts(e,r,null,n);var s=e.memoizedState;if(r=s.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){i=Or(Error(k(423)),e),e=gd(t,e,r,n,i);break e}else if(r!==i){i=Or(Error(k(424)),e),e=gd(t,e,r,n,i);break e}else for(We=vn(e.stateNode.containerInfo.firstChild),Ke=e,se=!0,pt=null,n=om(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Lr(),r===i){e=zt(t,e,n);break e}be(t,e,r,n)}e=e.child}return e;case 5:return am(e),t===null&&ua(e),r=e.type,i=e.pendingProps,o=t!==null?t.memoizedProps:null,s=i.children,ia(r,i)?s=null:o!==null&&ia(r,o)&&(e.flags|=32),Dm(t,e),be(t,e,s,n),e.child;case 6:return t===null&&ua(e),null;case 13:return Lm(t,e,n);case 4:return Iu(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Ur(e,null,r,n):be(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:dt(r,i),pd(t,e,r,i,n);case 7:return be(t,e,e.pendingProps,n),e.child;case 8:return be(t,e,e.pendingProps.children,n),e.child;case 12:return be(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,o=e.memoizedProps,s=i.value,te(jo,r._currentValue),r._currentValue=s,o!==null)if(yt(o.value,s)){if(o.children===i.children&&!Be.current){e=zt(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var u=o.dependencies;if(u!==null){s=o.child;for(var c=u.firstContext;c!==null;){if(c.context===r){if(o.tag===1){c=Bt(-1,n&-n),c.tag=2;var d=o.updateQueue;if(d!==null){d=d.shared;var f=d.pending;f===null?c.next=c:(c.next=f.next,f.next=c),d.pending=c}}o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),ca(o.return,n,e),u.lanes|=n;break}c=c.next}}else if(o.tag===10)s=o.type===e.type?null:o.child;else if(o.tag===18){if(s=o.return,s===null)throw Error(k(341));s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),ca(s,n,e),s=o.sibling}else s=o.child;if(s!==null)s.return=o;else for(s=o;s!==null;){if(s===e){s=null;break}if(o=s.sibling,o!==null){o.return=s.return,s=o;break}s=s.return}o=s}be(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Sr(e,n),i=st(i),r=r(i),e.flags|=1,be(t,e,r,n),e.child;case 14:return r=e.type,i=dt(r,e.pendingProps),i=dt(r.type,i),hd(t,e,r,i,n);case 15:return Pm(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:dt(r,i),ko(t,e),e.tag=1,Ge(r)?(t=!0,Qo(e)):t=!1,Sr(e,n),Nm(e,r,i),fa(e,r,i,n),ma(null,e,r,!0,t,n);case 19:return Um(t,e,n);case 22:return Mm(t,e,n)}throw Error(k(156,e.tag))};function Zm(t,e){return Sh(t,e)}function U0(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function nt(t,e,n,r){return new U0(t,e,n,r)}function Fu(t){return t=t.prototype,!(!t||!t.isReactComponent)}function F0(t){if(typeof t=="function")return Fu(t)?1:0;if(t!=null){if(t=t.$$typeof,t===nu)return 11;if(t===ru)return 14}return 2}function In(t,e){var n=t.alternate;return n===null?(n=nt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Mo(t,e,n,r,i,o){var s=2;if(r=t,typeof t=="function")Fu(t)&&(s=1);else if(typeof t=="string")s=5;else e:switch(t){case ar:return Bn(n.children,i,o,e);case tu:s=8,i|=8;break;case Ul:return t=nt(12,n,e,i|2),t.elementType=Ul,t.lanes=o,t;case Fl:return t=nt(13,n,e,i),t.elementType=Fl,t.lanes=o,t;case Ol:return t=nt(19,n,e,i),t.elementType=Ol,t.lanes=o,t;case ah:return bs(n,i,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case sh:s=10;break e;case lh:s=9;break e;case nu:s=11;break e;case ru:s=14;break e;case nn:s=16,r=null;break e}throw Error(k(130,t==null?t:typeof t,""))}return e=nt(s,n,e,i),e.elementType=t,e.type=r,e.lanes=o,e}function Bn(t,e,n,r){return t=nt(7,t,r,e),t.lanes=n,t}function bs(t,e,n,r){return t=nt(22,t,r,e),t.elementType=ah,t.lanes=n,t.stateNode={isHidden:!1},t}function _l(t,e,n){return t=nt(6,t,null,e),t.lanes=n,t}function Tl(t,e,n){return e=nt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function O0(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=el(0),this.expirationTimes=el(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=el(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Ou(t,e,n,r,i,o,s,u,c){return t=new O0(t,e,n,u,c),e===1?(e=1,o===!0&&(e|=8)):e=0,o=nt(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Eu(o),t}function V0(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:lr,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function jm(t){if(!t)return An;t=t._reactInternals;e:{if(jn(t)!==t||t.tag!==1)throw Error(k(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ge(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(k(171))}if(t.tag===1){var n=t.type;if(Ge(n))return jh(t,n,e)}return e}function eg(t,e,n,r,i,o,s,u,c){return t=Ou(n,r,!0,t,i,o,s,u,c),t.context=jm(null),n=t.current,r=Le(),i=En(n),o=Bt(r,i),o.callback=e??null,_n(n,o,i),t.current.lanes=i,$i(t,i,r),qe(t,r),t}function Ls(t,e,n,r){var i=e.current,o=Le(),s=En(i);return n=jm(n),e.context===null?e.context=n:e.pendingContext=n,e=Bt(o,s),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=_n(i,e,s),t!==null&&(gt(t,i,s,o),xo(t,i,s)),s}function us(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function xd(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Vu(t,e){xd(t,e),(t=t.alternate)&&xd(t,e)}function H0(){return null}var tg=typeof reportError=="function"?reportError:function(t){console.error(t)};function Hu(t){this._internalRoot=t}Us.prototype.render=Hu.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(k(409));Ls(t,e,null,null)};Us.prototype.unmount=Hu.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Jn(function(){Ls(null,t,null,null)}),e[qt]=null}};function Us(t){this._internalRoot=t}Us.prototype.unstable_scheduleHydration=function(t){if(t){var e=Mh();t={blockedOn:null,target:t,priority:e};for(var n=0;n<on.length&&e!==0&&e<on[n].priority;n++);on.splice(n,0,t),n===0&&bh(t)}};function Bu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Fs(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Ad(){}function B0(t,e,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var d=us(s);o.call(d)}}var s=eg(e,r,t,0,null,!1,!1,"",Ad);return t._reactRootContainer=s,t[qt]=s.current,Pi(t.nodeType===8?t.parentNode:t),Jn(),s}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var u=r;r=function(){var d=us(c);u.call(d)}}var c=Ou(t,0,!1,null,null,!1,!1,"",Ad);return t._reactRootContainer=c,t[qt]=c.current,Pi(t.nodeType===8?t.parentNode:t),Jn(function(){Ls(e,c,n,r)}),c}function Os(t,e,n,r,i){var o=n._reactRootContainer;if(o){var s=o;if(typeof i=="function"){var u=i;i=function(){var c=us(s);u.call(c)}}Ls(e,s,t,i)}else s=B0(n,e,t,i,r);return us(s)}Rh=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=li(e.pendingLanes);n!==0&&(su(e,n|1),qe(e,ge()),!(J&6)&&(Vr=ge()+500,Pn()))}break;case 13:Jn(function(){var r=$t(t,1);if(r!==null){var i=Le();gt(r,t,1,i)}}),Vu(t,1)}};lu=function(t){if(t.tag===13){var e=$t(t,134217728);if(e!==null){var n=Le();gt(e,t,134217728,n)}Vu(t,134217728)}};Ph=function(t){if(t.tag===13){var e=En(t),n=$t(t,e);if(n!==null){var r=Le();gt(n,t,e,r)}Vu(t,e)}};Mh=function(){return X};Dh=function(t,e){var n=X;try{return X=t,e()}finally{X=n}};Kl=function(t,e,n){switch(e){case"input":if(Bl(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Ns(r);if(!i)throw Error(k(90));ch(r),Bl(r,i)}}}break;case"textarea":fh(t,n);break;case"select":e=n.value,e!=null&&Er(t,!!n.multiple,e,!1)}};_h=bu;Th=Jn;var G0={usingClientEntryPoint:!1,Events:[Wi,fr,Ns,yh,vh,bu]},ti={findFiberByHostInstance:Un,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},q0={bundleType:ti.bundleType,version:ti.version,rendererPackageName:ti.rendererPackageName,rendererConfig:ti.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Qt.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Ch(t),t===null?null:t.stateNode},findFiberByHostInstance:ti.findFiberByHostInstance||H0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var yo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!yo.isDisabled&&yo.supportsFiber)try{ws=yo.inject(q0),wt=yo}catch{}}Xe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=G0;Xe.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Bu(e))throw Error(k(200));return V0(t,e,null,n)};Xe.createRoot=function(t,e){if(!Bu(t))throw Error(k(299));var n=!1,r="",i=tg;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Ou(t,1,!1,null,null,n,!1,r,i),t[qt]=e.current,Pi(t.nodeType===8?t.parentNode:t),new Hu(e)};Xe.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(k(188)):(t=Object.keys(t).join(","),Error(k(268,t)));return t=Ch(e),t=t===null?null:t.stateNode,t};Xe.flushSync=function(t){return Jn(t)};Xe.hydrate=function(t,e,n){if(!Fs(e))throw Error(k(200));return Os(null,t,e,!0,n)};Xe.hydrateRoot=function(t,e,n){if(!Bu(t))throw Error(k(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",s=tg;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),e=eg(e,null,t,1,n??null,i,!1,o,s),t[qt]=e.current,Pi(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Us(e)};Xe.render=function(t,e,n){if(!Fs(e))throw Error(k(200));return Os(null,t,e,!1,n)};Xe.unmountComponentAtNode=function(t){if(!Fs(t))throw Error(k(40));return t._reactRootContainer?(Jn(function(){Os(null,null,t,!1,function(){t._reactRootContainer=null,t[qt]=null})}),!0):!1};Xe.unstable_batchedUpdates=bu;Xe.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Fs(n))throw Error(k(200));if(t==null||t._reactInternals===void 0)throw Error(k(38));return Os(t,e,n,!1,r)};Xe.version="18.3.1-next-f1338f8080-20240426";function ng(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(ng)}catch(t){console.error(t)}}ng(),nh.exports=Xe;var $0=nh.exports,Nd=$0;bl.createRoot=Nd.createRoot,bl.hydrateRoot=Nd.hydrateRoot;var le=(t=>(t.INTRO="INTRO",t.SCENARIO="SCENARIO",t.HUB="HUB",t.QUIZ="QUIZ",t))(le||{}),K=(t=>(t.NONE="NONE",t.BALLOONS="BALLOONS",t.DRAG_SHIELD="DRAG_SHIELD",t.MULTIPLE_CHOICE="MULTIPLE_CHOICE",t.CODE_CRACKER="CODE_CRACKER",t.CITY_HALL_SUB_LOCATIONS="CITY_HALL_SUB_LOCATIONS",t))(K||{});const Aa="neve_or_game_state_v10_local",ee={INTRO:"assets/intro.jpg",HUB:"assets/hub.jpg",SCHOOL_LIOR:"assets/school_lior.jpg",TOWN_SQUARE:"assets/town_square.jpg",CITY_HALL:"assets/city_hall.jpg",CITY_HALL_SQUARE:"assets/city_hall_square.jpg",CITY_HALL_CAFE:"assets/city_hall_cafe.jpg",CITY_HALL_NEIGHBORHOOD:"assets/city_hall_neighborhood.jpg",CITY_HALL_SCHOOL:"assets/city_hall_school.jpg",FREEDOM_INTRO:"assets/freedom_intro.jpg",SCHOOL_TAMARA:"assets/school_tamara.jpg",NEWSPAPER:"assets/newspaper.jpg",COURT:"assets/court.jpg"},rg=[{id:"HUB_CONFIG",title:" ",type:le.HUB,isLocked:!1,isCompleted:!1,data:{description:"",backgroundImage:ee.HUB,dialog:[],interactionType:K.NONE,decisionQuestion:"",options:[]}},{id:"intro",title:" -  ",type:le.INTRO,isLocked:!1,isCompleted:!1,data:{description:'   ,           .        .      , , .      , ,    .  " "     .     ?',backgroundImage:ee.INTRO,decisionQuestion:"    ?",options:[{id:"start",text:"  ",feedback:"  ."}],dialog:[],interactionType:K.NONE}},{id:"school_lior",title:"  -   ",type:le.SCENARIO,isLocked:!1,isCompleted:!1,coordinates:{x:15,y:20},data:{description:'         ,    .   ,   : "   ".',backgroundImage:ee.SCHOOL_LIOR,dialog:[{id:"1",speaker:"",text:",  !   .",mood:"concerned"},{id:"2",speaker:"",text:" ,     .  .",mood:"neutral"}],interactionType:K.MULTIPLE_CHOICE,interactionData:{question:"    ?",answers:[{id:"1",text:" ",correct:!1},{id:"2",text:"   ",correct:!0},{id:"3",text:" ",correct:!1},{id:"4",text:" ",correct:!1}]},decisionQuestion:"   :            ?",options:[{id:"opt1",text:"   ",feedback:"    ,     ."},{id:"opt2",text:"   ",feedback:"   ,      ."},{id:"opt3",text:"   ",feedback:"   ,      ."},{id:"opt4",text:"  ",feedback:" ,   .   ."}],moreInfoTitle:"  ",moreInfoContent:"        ,    .  ,     .        ."}},{id:"town_square",title:"  -   ",type:le.SCENARIO,isLocked:!1,isCompleted:!1,coordinates:{x:50,y:50},data:{description:':            .   ""      .',backgroundImage:ee.TOWN_SQUARE,dialog:[],interactionType:K.DRAG_SHIELD,interactionData:{items:[{id:"1",text:"     ",isDanger:!0},{id:"2",text:"   ",isDanger:!1},{id:"3",text:"   ",isDanger:!0},{id:"4",text:"     ",isDanger:!1}]},decisionQuestion:"   ?",options:[{id:"ok",text:"",feedback:"            ."}],moreInfoTitle:" ",moreInfoContent:"   :   ,   ,       .   ."}},{id:"city_hall",title:" -   ",type:le.SCENARIO,isLocked:!1,isCompleted:!1,coordinates:{x:50,y:15},data:{description:"     .       AI   .   ,   ,     .",backgroundImage:ee.CITY_HALL,dialog:[{id:"1",speaker:" ",text:"          .        .",mood:"neutral"}],interactionType:K.CITY_HALL_SUB_LOCATIONS,subScenes:[{id:"sub_square",title:" ",icon:"",backgroundImage:ee.CITY_HALL_SQUARE,dialog:[{id:"1",speaker:" ",text:"    .   ,     .       .   .",mood:"happy"},{id:"2",speaker:"",text:" :          .",mood:"neutral"}]},{id:"sub_cafe",title:" ",icon:"",backgroundImage:ee.CITY_HALL_CAFE,dialog:[{id:"1",speaker:"  ",text:" ?     ,       .    .    . ? .   .",mood:"concerned"},{id:"2",speaker:"",text:" :          .",mood:"neutral"}]},{id:"sub_neighborhood",title:" ",icon:"",backgroundImage:ee.CITY_HALL_NEIGHBORHOOD,dialog:[{id:"1",speaker:"",text:"   .        ,      .",mood:"concerned"},{id:"2",speaker:"",text:" :            .",mood:"neutral"}]},{id:"sub_school",title:" ",icon:"",backgroundImage:ee.CITY_HALL_SCHOOL,dialog:[{id:"1",speaker:"",text:"     ,    ,      .       ,     .",mood:"neutral"},{id:"2",speaker:"",text:" :           .",mood:"neutral"}]}],decisionQuestion:'       " "?',options:[{id:"1",text:"    ",feedback:"  ,       . :   ,   ."},{id:"2",text:"    ",feedback:"    ,       . :   ,    ."},{id:"3",text:"      ",feedback:"    ,   .   ,   .       ."}],moreInfoTitle:" ",moreInfoContent:`            .    -:   .
        
  :
        .
     .
         .
  .`}},{id:"intro_freedom_speech",title:" -  ",type:le.SCENARIO,isLocked:!1,isCompleted:!1,data:{description:":        !",backgroundImage:ee.FREEDOM_INTRO,dialog:[],interactionType:K.BALLOONS,interactionData:{items:[{id:"1",text:"        ",isCorrect:!1},{id:"2",text:"    ",isCorrect:!0},{id:"3",text:"      ",isCorrect:!0},{id:"4",text:"    ",isCorrect:!1}]},decisionQuestion:"  ",options:[{id:"ok",text:"",feedback:"     ,   .     (     ),    ."}],moreInfoTitle:" ",moreInfoContent:"      ,    , .             ."}},{id:"school_tamara",title:"  - ",type:le.SCENARIO,isLocked:!1,isCompleted:!1,coordinates:{x:85,y:20},data:{description:`,  ',           .    "".`,backgroundImage:ee.SCHOOL_TAMARA,digitalContent:{type:"POST",author:"",content:"     !       .        ?",likes:150},dialog:[{id:"1",speaker:" ' ",text:",      !    .",mood:"angry"},{id:"2",speaker:"",text:"    !      .",mood:"concerned"},{id:"3",speaker:" ",text:'  .  ,  ""   .',mood:"neutral"}],interactionType:K.NONE,decisionQuestion:"   ?",options:[{id:"1",text:"   !",feedback:"  .     ."},{id:"2",text:"  ,    ",feedback:".      .     ."},{id:"3",text:"     ",feedback:" .      ."}],moreInfoTitle:" ",moreInfoContent:"            .         ( 13),      ."}},{id:"newspaper_office",title:'  ""',type:le.SCENARIO,isLocked:!1,isCompleted:!1,coordinates:{x:20,y:70},data:{description:'  ""  : "    ".       -10    .',backgroundImage:ee.NEWSPAPER,digitalContent:{type:"ARTICLE",title:"",content:":        .",author:" "},dialog:[{id:"1",speaker:" ",text:"    !  ?",mood:"concerned"},{id:"2",speaker:"",text:"  .   .",mood:"angry"}],interactionType:K.NONE,decisionQuestion:"   ?",options:[{id:"1",text:'   : "  !"',feedback:"    ."},{id:"2",text:'     "',feedback:" .      ."},{id:"3",text:"   ",feedback:"     ."}],moreInfoTitle:" ",moreInfoContent:'      .     " " (1953)     .'}},{id:"supreme_court",title:'  - " " "',type:le.SCENARIO,isLocked:!1,isCompleted:!1,coordinates:{x:50,y:85},data:{description:'  :    ".     .',backgroundImage:ee.COURT,dialog:[{id:"1",speaker:" ",text:"     .     .",mood:"neutral"},{id:"2",speaker:" ",text:"   ,  .     .",mood:"neutral"}],interactionType:K.NONE,decisionQuestion:",   ?",options:[{id:"1",text:"      ",feedback:' .    "   (1953).'},{id:"2",text:"      ",feedback:"     ."},{id:"3",text:"     ",feedback:"     ."}],moreInfoTitle:"  ",moreInfoContent:'  " "   :        "     ".'}},{id:"quiz_finale",title:"  ",type:le.QUIZ,isLocked:!1,isCompleted:!1,coordinates:{x:85,y:70},data:{description:"           .",dialog:[],interactionType:K.CODE_CRACKER,interactionData:{questions:[{id:"q1",question:"       ?",options:[{text:"1947",value:0},{text:"1967",value:0},{text:"1948",value:3},{text:"1946",value:0}],explanation:"1948 -    3"},{id:"q2",question:"       ?",options:[{text:"1996",value:0},{text:"1992",value:2},{text:"1987",value:0},{text:"1990",value:0}],explanation:"1992 -    2"},{id:"q3",question:"    -?     ",options:[{text:"9",value:0},{text:"5",value:0},{text:"8",value:0},{text:"7",value:4}],explanation:"   4.           (   ,  ,  ,     ,      ,  ,       )."},{id:"q4",question:"       ?",options:[{text:"",value:0},{text:"",value:2},{text:"",value:0},{text:"",value:0}],explanation:" -    2"}]},decisionQuestion:" !",options:[],moreInfoTitle:" !",moreInfoContent:`          ,  .       ,      .

      ,     ,       ,  .            .`}}],z0=[{id:"HUB_CONFIG",title:" ",type:le.HUB,isLocked:!1,isCompleted:!1,data:{description:"",backgroundImage:ee.HUB,dialog:[],interactionType:K.NONE,decisionQuestion:"",options:[]}},{id:"intro",title:" -  ",type:le.INTRO,isLocked:!1,isCompleted:!1,data:{description:'     /            .         .       .          .   " "    .     ',backgroundImage:ee.INTRO,decisionQuestion:"    ",options:[{id:"start",text:" ",feedback:"  ."}],dialog:[],interactionType:K.NONE}},{id:"school_lior",title:" -  ",type:le.SCENARIO,isLocked:!1,isCompleted:!1,coordinates:{x:15,y:20},data:{description:'              .     : "    ".',backgroundImage:ee.SCHOOL_LIOR,dialog:[{id:"1",speaker:"",text:"      !   .",mood:"concerned"},{id:"2",speaker:"",text:"  .      .      .",mood:"neutral"}],interactionType:K.MULTIPLE_CHOICE,interactionData:{question:"   ",answers:[{id:"1",text:"  ",correct:!1},{id:"2",text:"    ",correct:!0},{id:"3",text:" ",correct:!1},{id:"4",text:"  ",correct:!1}]},decisionQuestion:"   :         ",options:[{id:"opt1",text:"     ",feedback:":      . :    ."},{id:"opt2",text:"      ",feedback:":    . :     ."},{id:"opt3",text:"    ",feedback:":     . :     ."},{id:"opt4",text:"   ",feedback:":   . :      ."}],moreInfoTitle:"   ",moreInfoContent:"                 .         .        ."}},{id:"town_square",title:"  -  ",type:le.SCENARIO,isLocked:!1,isCompleted:!1,coordinates:{x:50,y:50},data:{description:':       .  ""        .',backgroundImage:ee.TOWN_SQUARE,dialog:[],interactionType:K.DRAG_SHIELD,interactionData:{items:[{id:"1",text:"      ",isDanger:!0},{id:"2",text:"   ",isDanger:!1},{id:"3",text:"    ",isDanger:!0},{id:"4",text:"   ",isDanger:!1}]},decisionQuestion:"   ",options:[{id:"ok",text:"",feedback:"           ."}],moreInfoTitle:" ",moreInfoContent:"    :              ."}},{id:"city_hall",title:" -     ",type:le.SCENARIO,isLocked:!1,isCompleted:!1,coordinates:{x:50,y:15},data:{description:'  " "   .        (AI).        .',backgroundImage:ee.CITY_HALL,dialog:[{id:"1",speaker:" ",text:"  /       .       ",mood:"neutral"}],interactionType:K.CITY_HALL_SUB_LOCATIONS,subScenes:[{id:"sub_square",title:" ",icon:"",backgroundImage:ee.CITY_HALL_SQUARE,dialog:[{id:"1",speaker:" ",text:"      .       .         .",mood:"happy"},{id:"2",speaker:"",text:" :           .",mood:"neutral"}]},{id:"sub_cafe",title:"",icon:"",backgroundImage:ee.CITY_HALL_CAFE,dialog:[{id:"1",speaker:"",text:"          .     .    .",mood:"concerned"},{id:"2",speaker:"",text:" :           .",mood:"neutral"}]},{id:"sub_neighborhood",title:" ",icon:"",backgroundImage:ee.CITY_HALL_NEIGHBORHOOD,dialog:[{id:"1",speaker:"",text:'  .              ""   .',mood:"concerned"},{id:"2",speaker:"",text:" :            .",mood:"neutral"}]},{id:"sub_school",title:"",icon:"",backgroundImage:ee.CITY_HALL_SCHOOL,dialog:[{id:"1",speaker:"",text:"               .     .",mood:"neutral"},{id:"2",speaker:"",text:" :          .",mood:"neutral"}]}],decisionQuestion:"       ",options:[{id:"1",text:"      ",feedback:"       .      ."},{id:"2",text:"   ",feedback:"      ."},{id:"3",text:"     ",feedback:"       .     .    ."}],moreInfoTitle:" ",moreInfoContent:"       .        ( )  (   )    ."}},{id:"intro_freedom_speech",title:" - ",type:le.SCENARIO,isLocked:!1,isCompleted:!1,data:{description:":        .",backgroundImage:ee.FREEDOM_INTRO,dialog:[],interactionType:K.BALLOONS,interactionData:{items:[{id:"1",text:"         ",isCorrect:!1},{id:"2",text:"      ",isCorrect:!0},{id:"3",text:"     ",isCorrect:!0},{id:"4",text:"     ",isCorrect:!1}]},decisionQuestion:" ",options:[{id:"ok",text:"",feedback:"  -   ."}],moreInfoTitle:" ",moreInfoContent:"      .         .        ."}},{id:"school_tamara",title:" - ",type:le.SCENARIO,isLocked:!1,isCompleted:!1,coordinates:{x:85,y:20},data:{description:'                  "".',backgroundImage:ee.SCHOOL_TAMARA,digitalContent:{type:"POST",author:"",content:"    !      .       ",likes:150},dialog:[{id:"1",speaker:"  ",text:"      !     .",mood:"angry"},{id:"2",speaker:"",text:"   !         .",mood:"concerned"},{id:"3",speaker:" ",text:"  .           .",mood:"neutral"}],interactionType:K.NONE,decisionQuestion:"    ",options:[{id:"1",text:"    !",feedback:"   .     ."},{id:"2",text:"       ",feedback:".      .    ."},{id:"3",text:"    ",feedback:" .     ."}],moreInfoTitle:" ",moreInfoContent:"         .         ( 13)."}},{id:"newspaper_office",title:' ""',type:le.SCENARIO,isLocked:!1,isCompleted:!1,coordinates:{x:20,y:70},data:{description:'  "" : "    ".        10 .',backgroundImage:ee.NEWSPAPER,digitalContent:{type:"ARTICLE",title:"",content:"       .",author:" "},dialog:[{id:"1",speaker:"",text:"  !  ",mood:"concerned"},{id:"2",speaker:"",text:"   .   .",mood:"angry"}],interactionType:K.NONE,decisionQuestion:"   ",options:[{id:"1",text:'    : " !"',feedback:"    ."},{id:"2",text:"    ",feedback:" .     ."},{id:"3",text:"  ",feedback:"    ."}],moreInfoTitle:" ",moreInfoContent:'     .    " " (1953)      .'}},{id:"supreme_court",title:" ",type:le.SCENARIO,isLocked:!1,isCompleted:!1,coordinates:{x:50,y:85},data:{description:"   :     .    .",backgroundImage:ee.COURT,dialog:[{id:"1",speaker:" ",text:"    .      .",mood:"neutral"},{id:"2",speaker:" ",text:"    .   .     .",mood:"neutral"}],interactionType:K.NONE,decisionQuestion:"  ",options:[{id:"1",text:"   -   ",feedback:".          ."},{id:"2",text:"  -    ",feedback:"     ."},{id:"3",text:"   ",feedback:"      ."}],moreInfoTitle:"  ",moreInfoContent:' :          "       ".'}},{id:"quiz_finale",title:"  ",type:le.QUIZ,isLocked:!1,isCompleted:!1,coordinates:{x:85,y:70},data:{description:"         .",dialog:[],interactionType:K.CODE_CRACKER,interactionData:{questions:[{id:"q1",question:"      ",options:[{text:"1947",value:0},{text:"1967",value:0},{text:"1948",value:3},{text:"1946",value:0}],explanation:"1948 -    3"},{id:"q2",question:"           ",options:[{text:"1996",value:0},{text:"1992",value:2},{text:"1987",value:0},{text:"1990",value:0}],explanation:"1992 -    2"},{id:"q3",question:"     ----      ",options:[{text:"9",value:0},{text:"5",value:0},{text:"8",value:0},{text:"7",value:4}],explanation:"   4.             (                             )"},{id:"q4",question:"       ",options:[{text:" ",value:0},{text:"",value:2},{text:"",value:0},{text:"",value:0}],explanation:" -    2"}]},decisionQuestion:"  !",options:[],moreInfoTitle:"  !",moreInfoContent:`             .             .

                      .           .`}}],ui={he:rg,ar:z0,en:[]},W0=()=>{ui.en=JSON.parse(JSON.stringify(rg))};W0();const Do=t=>{const e=ui[t]&&ui[t].length>0?ui[t]:ui.he;return JSON.parse(JSON.stringify(e))};Do("he");const kd={he:{start:"  ",devMode:"   (Dev Mode)",backToMap:" ",locked:"",completed:"",open:" ",next:"",challenge:" ",finishLevel:"   ",finishGame:" ",moreInfo:"  ",close:"",understood:", ",mapTitle:" ",gameTitle:" ",loading:"...",closeDev:"  ",correct:" !",correctAnswer:" !",tryAgain:"!  ",codeCracked:" !",codeLabel:" ",accessDenied:" :  ",question:"",of:"",mission:"",socialMedia:" ",newsAlert:" ",chooseLocation:"     ",visited:"  ",clickToListen:" ",finishedListening:" ",proceedToDecision:" ",visitMore:" ",locations:"",balloonsInst:"      !",shieldInst:"     !",yourChoice:" :",rotateDevice:"      ",fullScreen:" ",exitFullScreen:"  "},en:{start:"Start Game",devMode:"Enter Dev Mode",backToMap:"Back to Map",locked:"Locked",completed:"Completed",open:"Open",next:"Next",challenge:"Go to Challenge",finishLevel:"Finish Level & Back to Map",finishGame:"Finish Game",moreInfo:"More Info",close:"Close",understood:"Close",mapTitle:"City Map",gameTitle:"Neve Or",loading:"Loading...",closeDev:"Close & Play",correct:"Well Done!",correctAnswer:"Correct Answer!",tryAgain:"Wrong! Try Again",codeCracked:"Code Cracked!",codeLabel:"Secret Code",accessDenied:"Access Denied: Wrong Code",question:"Question",of:"of",mission:"MISSION",socialMedia:"SOCIAL MEDIA",newsAlert:"NEWS ALERT",chooseLocation:"Select a location to hear the residents",visited:" Visited",clickToListen:"Click to listen",finishedListening:"Finished listening",proceedToDecision:"Proceed to Decision",visitMore:"Visit",locations:"more locations",balloonsInst:" Pop forbidden balloons!",shieldInst:" Protect the vulnerable!",yourChoice:"Your Choice:",rotateDevice:"Please rotate your device to landscape ",fullScreen:"Full Screen",exitFullScreen:"Exit Full Screen"},ar:{start:" ",devMode:" ",backToMap:"  ",locked:"",completed:"",open:"",next:"",challenge:" ",finishLevel:"  ",finishGame:" ",moreInfo:" ",close:"",understood:" ",mapTitle:" ",gameTitle:" ",loading:" ...",closeDev:" ",correct:"!",correctAnswer:" !",tryAgain:"!   ",codeCracked:"  !",codeLabel:" ",accessDenied:"  :  ",question:"",of:"",mission:"",socialMedia:" ",newsAlert:" ",chooseLocation:"    ",visited:"  ",clickToListen:" ",finishedListening:"  ",proceedToDecision:"  ",visitMore:" ",locations:" ",balloonsInst:"       !",shieldInst:"     !",yourChoice:":",rotateDevice:"      ",fullScreen:" ",exitFullScreen:"   "}},H=(t,e)=>kd[e][t]||kd.he[t],J0=t=>t==="en"?"ltr":"rtl";let ni=null;const K0=()=>(ni||(ni=new(window.AudioContext||window.webkitAudioContext)),ni.state==="suspended"&&ni.resume(),ni),or=(t,e,n)=>{const r=t.createOscillator();return r.type=e,r.frequency.setValueAtTime(n,t.currentTime),r},sr=(t,e,n,r)=>{const i=t.createGain();return i.gain.setValueAtTime(e,t.currentTime),i.gain.exponentialRampToValueAtTime(n,t.currentTime+r),i},_e=t=>{try{const e=K0(),n=e.currentTime;switch(t){case"click":{const r=or(e,"sine",600),i=sr(e,.05,.001,.1);r.connect(i),i.connect(e.destination),r.start(n),r.stop(n+.1)}break;case"hover":{const r=or(e,"sine",400),i=sr(e,.02,.001,.05);r.connect(i),i.connect(e.destination),r.start(n),r.stop(n+.05)}break;case"success":{const o=or(e,"sine",523.25),s=or(e,"triangle",659.25),u=sr(e,.1,.001,.6),c=sr(e,.05,.001,.6);o.connect(u),s.connect(c),u.connect(e.destination),c.connect(e.destination),o.start(n),s.start(n),o.stop(n+.6),s.stop(n+.6)}break;case"error":{const r=or(e,"triangle",150),i=sr(e,.15,.001,.3),o=e.createBiquadFilter();o.type="lowpass",o.frequency.setValueAtTime(200,n),r.connect(o),o.connect(i),i.connect(e.destination),r.start(n),r.frequency.exponentialRampToValueAtTime(100,n+.2),r.stop(n+.3)}break;case"pop":{const r=or(e,"sine",400),i=sr(e,.1,.001,.15);r.connect(i),i.connect(e.destination),r.start(n),r.frequency.exponentialRampToValueAtTime(800,n+.1),r.stop(n+.15)}break}}catch{}},Y0=({nodes:t,onNodeSelect:e,language:n,onLanguageChange:r})=>{const i=t.find(f=>f.id==="HUB_CONFIG"),o=i==null?void 0:i.data.backgroundImage,[s,u]=q.useState(!1),c=!1,d=t.filter(f=>f.type!=="INTRO"&&f.type!=="HUB"&&f.coordinates);return m.jsxs("div",{className:"fixed inset-0 w-full h-full bg-slate-900 overflow-hidden font-sans select-none",children:[m.jsxs("div",{className:"absolute inset-0 z-0",children:[o&&!s?m.jsx("img",{src:o,alt:"City Map",className:"w-full h-full object-cover transition-transform duration-[60s] ease-linear hover:scale-105",onError:()=>u(!0)}):m.jsxs("div",{className:"w-full h-full relative bg-[#f0f4f8]",children:[m.jsx("div",{className:"absolute bottom-0 right-0 w-1/3 h-1/3 bg-[#bfdbfe] rounded-tl-[100px] opacity-60"}),m.jsx("div",{className:"absolute top-20 left-[-10%] w-1/3 h-20 bg-[#bfdbfe] -rotate-12 opacity-40"}),m.jsx("div",{className:"absolute inset-0 opacity-10",style:{backgroundImage:"linear-gradient(#94a3b8 2px, transparent 2px), linear-gradient(90deg, #94a3b8 2px, transparent 2px)",backgroundSize:"60px 60px"}}),m.jsx("div",{className:"absolute bottom-4 right-4 text-slate-400 font-bold text-xs uppercase tracking-widest",children:"NOVE OR CITY MAP"})]}),m.jsx("div",{className:"absolute inset-0 bg-black/5 pointer-events-none"})]}),c,m.jsx("div",{className:"absolute inset-0 z-10",children:d.map((f,p)=>{if(!f.coordinates)return null;const h=f.coordinates.y>60;return m.jsx("div",{className:"absolute transform -translate-x-1/2 -translate-y-1/2 hover:z-50 transition-all duration-300",style:{left:`${f.coordinates.x}%`,top:`${f.coordinates.y}%`},children:m.jsxs("button",{onClick:()=>{f.isLocked||(_e("click"),e(f.id))},disabled:f.isLocked,className:`relative group/pin flex flex-col items-center transition-all duration-300 ${f.isLocked?"opacity-90 grayscale-[0.8]":"hover:scale-110 cursor-pointer"}`,children:[m.jsx("div",{className:"hidden sm:block w-0.5 h-8 bg-black/30 absolute top-full left-1/2 -translate-x-1/2 origin-top transform scale-y-0 transition-transform duration-300 group-hover/pin:scale-y-100"}),m.jsx("div",{className:"hidden sm:block w-4 h-1 bg-black/40 rounded-full absolute top-[calc(100%+8px)] left-1/2 -translate-x-1/2 opacity-0 group-hover/pin:opacity-100 transition-opacity duration-300 blur-[2px]"}),m.jsx("div",{className:"absolute -top-3 -right-3 w-6 h-6 sm:w-8 sm:h-8 bg-yellow-400 text-blue-900 rounded-full border-[3px] border-white flex items-center justify-center font-black text-xs sm:text-sm shadow-md z-30 transform transition-transform group-hover/pin:rotate-12",children:p+1}),m.jsxs("div",{className:`w-12 h-12 sm:w-20 sm:h-20 rounded-2xl sm:rounded-3xl rotate-45 flex items-center justify-center shadow-2xl border-[3px] sm:border-[5px] border-white transition-all relative z-20 overflow-hidden
                  ${f.isCompleted?"bg-gradient-to-br from-green-400 to-green-600":f.isLocked?"bg-gradient-to-br from-slate-400 to-slate-600":"bg-gradient-to-br from-blue-500 to-blue-700 hover:shadow-blue-500/50"}
                `,children:[m.jsx("span",{className:"-rotate-45 text-2xl sm:text-4xl drop-shadow-md filter text-white",children:f.isCompleted?"":f.isLocked?"":f.type==="QUIZ"?"":""}),m.jsx("div",{className:"absolute inset-0 bg-white/30 -skew-x-12 -translate-x-full group-hover/pin:animate-shine"})]}),!f.isLocked&&!f.isCompleted&&m.jsx("div",{className:"absolute inset-0 bg-blue-400 rounded-2xl rotate-45 animate-ping opacity-30 -z-10 scale-150"}),m.jsxs("div",{className:`
                  absolute px-4 py-2 bg-white/95 backdrop-blur-md rounded-xl shadow-xl border border-blue-100 
                  text-sm font-bold text-gray-800 whitespace-nowrap opacity-0 
                  group-hover/pin:opacity-100 transition-all duration-300 z-30 flex flex-col items-center 
                  after:content-[''] after:absolute after:left-1/2 after:-translate-x-1/2 after:border-8 after:border-transparent pointer-events-none
                  ${h?"bottom-[calc(100%+20px)] translate-y-2 group-hover/pin:translate-y-0 after:-bottom-4 after:border-t-white/95 after:border-b-transparent":"top-[calc(100%+20px)] -translate-y-2 group-hover/pin:translate-y-0 after:-top-4 after:border-b-white/95 after:border-t-transparent"}
                `,children:[f.title,f.isLocked&&m.jsx("span",{className:"text-[10px] text-red-400 font-normal uppercase tracking-wider mt-0.5",children:"LOCKED"})]})]})},f.id)})}),m.jsxs("div",{className:"absolute bottom-6 right-6 z-40 flex items-center gap-3 bg-white px-4 py-2 rounded-full shadow-2xl border border-gray-100 animate-fade-in-up",children:[m.jsx(El,{color:"bg-blue-600",label:H("open",n)}),m.jsx("div",{className:"w-px h-3 bg-gray-200"}),m.jsx(El,{color:"bg-green-500",label:H("completed",n)}),m.jsx("div",{className:"w-px h-3 bg-gray-200"}),m.jsx(El,{color:"bg-slate-500",label:H("locked",n)})]})]})},El=({color:t,label:e})=>m.jsxs("div",{className:"flex items-center gap-1.5",children:[m.jsx("div",{className:`w-2.5 h-2.5 rounded-full ${t} shadow-sm ring-2 ring-gray-100`}),m.jsx("span",{className:"text-xs font-bold text-gray-700 whitespace-nowrap",children:e})]}),fe=({children:t,variant:e="primary",fullWidth:n=!1,className:r="",onClick:i,...o})=>{const s="px-6 py-3 rounded-xl font-bold transition-all duration-200 active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed shadow-md",u={primary:"bg-blue-600 text-white hover:bg-blue-700 shadow-blue-200",secondary:"bg-amber-400 text-blue-900 hover:bg-amber-500 shadow-amber-200",danger:"bg-red-500 text-white hover:bg-red-600 shadow-red-200",outline:"border-2 border-blue-600 text-blue-600 hover:bg-blue-50"},c=d=>{o.disabled||_e("click"),i&&i(d)};return m.jsx("button",{className:`${s} ${u[e]} ${n?"w-full":""} ${r}`,onClick:c,...o,children:t})},Rd=({message:t,avatarUrl:e})=>{const n=t.mood==="angry"?"border-red-400":t.mood==="happy"?"border-green-400":t.mood==="concerned"?"border-amber-400":"border-blue-200";return m.jsxs("div",{className:`flex gap-2 mb-3 sm:mb-4 animate-fade-in-up max-w-[95%] sm:max-w-[85%] ${t.isPlayer?"self-end flex-row-reverse":""}`,children:[m.jsx("div",{className:"flex-shrink-0 flex flex-col items-center gap-1",children:m.jsx("div",{className:`w-9 h-9 rounded-full border-2 ${n} shadow-md overflow-hidden bg-gray-100 flex items-center justify-center`,children:e?m.jsx("img",{src:e,alt:t.speaker,className:"w-full h-full object-cover"}):m.jsx("span",{className:"text-sm",children:""})})}),m.jsxs("div",{className:"flex flex-col gap-1 max-w-[85%]",children:[m.jsx("span",{className:`text-[10px] sm:text-xs font-bold px-2 py-0.5 rounded-full bg-black/40 text-white shadow-sm backdrop-blur-sm w-fit ${t.isPlayer?"ml-auto":"mr-auto"}`,children:t.speaker}),m.jsx("div",{className:`py-2 px-3 rounded-xl bg-white/95 border ${n} shadow-md backdrop-blur-sm ${t.isPlayer?"rounded-tl-none":"rounded-tr-none"}`,children:m.jsx("p",{className:"text-gray-900 leading-relaxed text-xs sm:text-sm font-medium",children:t.text})})]})]})},Q0=({node:t,onComplete:e,onBack:n,language:r})=>{const[i,o]=q.useState("INTRO"),[s,u]=q.useState(""),[c,d]=q.useState(!1),[f,p]=q.useState(null),[h,y]=q.useState(!1),[T,E]=q.useState([]),[S,_]=q.useState(null),[g,v]=q.useState(null),[I,C]=q.useState(!1),[w,x]=q.useState(new Set),[A,P]=q.useState(null),[R,B]=q.useState(0),[$,Z]=q.useState([]),[kt,ut]=q.useState(!1),[Ie,M]=q.useState(""),[N,D]=q.useState(null);q.useEffect(()=>{var F;if(o("INTRO"),y(!1),B(0),Z([]),_(null),v(null),x(new Set),P(null),p(null),u(""),ut(!1),M(""),D(null),C(!1),t.data.interactionType!==K.NONE&&((F=t.data.interactionData)!=null&&F.items)){const de=t.data.interactionData.items.map(ye=>({...ye,popped:!1,protected:!1}));E(de)}},[t]);const L=F=>{F.isCorrect?(_e("pop"),E(de=>de.map(ye=>ye.id===F.id?{...ye,popped:!0}:ye))):(_e("error"),_(F.id),setTimeout(()=>_(null),500))},O=F=>{F.isDanger?(_e("success"),E(de=>de.map(ye=>ye.id===F.id?{...ye,protected:!0}:ye))):(_e("error"),_(F.id),setTimeout(()=>_(null),500))},Q=F=>{v(F.id),F.correct?(_e("success"),setTimeout(()=>y(!0),800)):(_e("error"),_(F.id),setTimeout(()=>{_(null),v(null)},800))};q.useEffect(()=>{if(i==="INTERACTION"){let F=!1;t.data.interactionType===K.BALLOONS?F=T.filter(ye=>ye.isCorrect&&!ye.popped).length===0:t.data.interactionType===K.DRAG_SHIELD&&(F=T.filter(ye=>ye.isDanger&&!ye.protected).length===0),F&&T.length>0&&(_e("success"),setTimeout(()=>y(!0),1e3))}},[T,i,t.data.interactionType]);const je=(F,de)=>{if(F===0){_e("error"),C(!0),setTimeout(()=>C(!1),800);return}_e("success"),M(de),D(F),ut(!0)},Rt=()=>{if(_e("click"),N!==null){const F=[...$,N];Z(F),R<3?B(de=>de+1):F.join("")==="3242"?(_e("success"),setTimeout(()=>y(!0),500)):(Z([]),B(0)),ut(!1),D(null)}},rr=(F=!1)=>{var W;const{data:de}=t;if(!de.digitalContent)return null;const ye=de.digitalContent.type==="POST"?H("socialMedia",r):H("newsAlert",r),G=r==="he"||r==="ar"?"left-0 rounded-br-lg":"right-0 rounded-bl-lg";return m.jsxs("div",{className:`bg-slate-50 border border-slate-200 rounded-xl shadow-inner relative overflow-hidden ${F?"p-3":"p-4"}`,children:[m.jsx("div",{className:`absolute top-0 ${G} bg-yellow-400 text-blue-900 text-[10px] sm:text-xs font-black px-3 py-1 shadow-sm z-10 uppercase tracking-wide`,children:ye}),m.jsxs("div",{className:"flex items-center gap-2 mb-2 mt-2",children:[m.jsx("div",{className:`rounded-full flex items-center justify-center font-bold text-slate-500 bg-slate-200 border border-slate-300 ${F?"w-6 h-6 text-xs":"w-10 h-10 text-lg"}`,children:((W=de.digitalContent.author)==null?void 0:W[0])||""}),m.jsx("div",{children:m.jsx("p",{className:"font-bold text-slate-800 text-sm",children:de.digitalContent.author||de.digitalContent.title})})]}),m.jsxs("div",{className:`text-slate-900 font-sans font-medium leading-relaxed ${F?"text-xs sm:text-sm":"text-xs sm:text-base"} px-1`,children:['"',de.digitalContent.content,'"']})]})},Pt=()=>{var de,ye;const{data:F}=t;switch(i){case"INTRO":return m.jsx("div",{className:"h-full w-full flex flex-col justify-center items-center py-2 sm:py-4",children:m.jsxs("div",{className:"bg-white/95 backdrop-blur-md border border-gray-200 p-0 rounded-xl sm:rounded-2xl shadow-2xl w-[95%] max-w-md mx-auto flex flex-col max-h-[80dvh] opacity-0 animate-fade-in-up",style:{animationDelay:"0.5s",animationFillMode:"both"},children:[m.jsxs("div",{className:"bg-blue-600 px-3 py-2 sm:px-4 sm:py-3 text-white flex justify-between items-center gap-2 flex-shrink-0 rounded-t-xl sm:rounded-t-2xl",children:[m.jsx("h2",{className:"text-sm sm:text-base font-black truncate",children:t.title}),m.jsx("div",{className:"text-[10px] bg-blue-800 px-2 py-0.5 rounded uppercase tracking-wider flex-shrink-0",children:H("mission",r)})]}),m.jsxs("div",{className:"p-3 sm:p-4 overflow-y-auto custom-scrollbar flex-1 min-h-0",children:[m.jsx("p",{className:"text-xs sm:text-base leading-relaxed text-gray-800 font-medium mb-3 sm:mb-4",children:F.description}),F.digitalContent&&m.jsx("div",{className:"mt-2",children:rr(!1)})]}),m.jsx("div",{className:"bg-gray-50 p-2 sm:p-3 border-t border-gray-100 flex justify-center flex-shrink-0 rounded-b-xl sm:rounded-b-2xl",children:m.jsx(fe,{fullWidth:!0,onClick:()=>o(F.dialog.length>0?"DIALOG":F.interactionType!==K.NONE?"INTERACTION":"DECISION"),className:"py-2 sm:py-2.5 text-sm font-bold shadow-md max-w-[160px]",children:H("next",r)})})]})});case"DIALOG":return m.jsxs("div",{className:"flex flex-col h-full justify-end pb-8 relative",children:[F.digitalContent&&m.jsx("div",{className:"absolute top-14 right-4 max-w-xs animate-fade-in z-20 hidden lg:block",children:m.jsx("div",{className:"bg-white/90 backdrop-blur p-2 rounded-xl shadow-lg border border-white/50",children:rr(!0)})}),m.jsxs("div",{className:"flex flex-col min-h-0 justify-end w-full max-w-3xl mx-auto z-10",children:[m.jsx("div",{className:"flex-shrink-1 overflow-y-auto mb-2 p-2 mask-image-linear-gradient max-h-[60dvh] sm:max-h-[50dvh]",children:F.dialog.map(G=>{var W;return m.jsx(Rd,{message:G,avatarUrl:(W=F.characterImages)==null?void 0:W[G.speaker]},G.id)})}),m.jsx("div",{className:"flex justify-center flex-shrink-0",children:m.jsx(fe,{onClick:()=>o(F.interactionType!==K.NONE?"INTERACTION":"DECISION"),className:"py-2 px-8 rounded-full shadow-lg bg-blue-600/90 hover:bg-blue-600 backdrop-blur-sm",children:F.interactionType!==K.NONE?H("challenge",r):H("next",r)})})]})]});case"INTERACTION":if(F.interactionType===K.CITY_HALL_SUB_LOCATIONS&&F.subScenes){if(A)return m.jsxs("div",{className:"absolute inset-0 z-50 flex flex-col animate-fade-in",children:[A.backgroundImage&&m.jsx("img",{src:A.backgroundImage,className:"absolute inset-0 w-full h-full object-cover z-0 scale-100",alt:""}),m.jsx("div",{className:"absolute inset-0 bg-black/60 z-0 pointer-events-none"}),m.jsxs("div",{className:"absolute top-4 right-4 z-20 flex items-center gap-2 bg-black/60 backdrop-blur-md px-3 py-1.5 rounded-full border border-white/20 shadow-lg animate-slide-up",children:[m.jsx("span",{className:"text-xl filter drop-shadow-md",children:A.icon}),m.jsx("h3",{className:"text-sm font-bold text-white drop-shadow-md",children:A.title})]}),m.jsx("button",{onClick:()=>P(null),className:"absolute top-4 left-4 z-20 bg-red-600 hover:bg-red-700 text-white w-9 h-9 rounded-full flex items-center justify-center font-bold transition-all border-2 border-white/50 shadow-lg",children:""}),m.jsx("div",{className:"relative z-10 mt-auto flex flex-col p-4 w-full max-w-2xl mx-auto mb-16",children:m.jsx("div",{className:"overflow-y-auto max-h-[50dvh] p-2 scrollbar-hide flex flex-col justify-end",children:A.dialog.map(W=>m.jsx(Rd,{message:W},W.id))})}),m.jsx("div",{className:"absolute bottom-6 left-1/2 transform -translate-x-1/2 z-20",children:m.jsx(fe,{onClick:()=>{_e("click"),x(W=>new Set(W).add(A.id)),P(null)},className:"py-2 px-8 rounded-full text-sm font-bold shadow-2xl shadow-blue-900/50 bg-blue-600 hover:bg-blue-500 text-white border border-white/20",children:H("finishedListening",r)})})]});const G=w.size>=3;return m.jsxs("div",{className:"h-full flex flex-col items-center justify-center animate-fade-in max-w-4xl mx-auto w-full relative z-10",children:[m.jsx("h3",{className:"text-sm sm:text-lg font-bold text-white mb-4 text-center drop-shadow-lg bg-black/60 px-6 py-2 rounded-full backdrop-blur-md border border-white/20",children:H("chooseLocation",r)}),m.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 w-full max-w-2xl overflow-y-auto max-h-[60dvh] p-2",children:F.subScenes.map(W=>{const ne=w.has(W.id);return m.jsxs("button",{onClick:()=>{_e("click"),P(W)},className:`relative overflow-hidden p-3 rounded-xl transition-all duration-300 flex items-center gap-3 shadow-lg group text-right min-h-[60px]
                         ${ne?"bg-black/70 border border-green-400/50 backdrop-blur-sm":"bg-white/90 border-2 border-white hover:scale-105"}
                       `,children:[W.backgroundImage&&m.jsx("div",{className:"absolute inset-0 opacity-40 z-0",children:m.jsx("img",{src:W.backgroundImage,className:"w-full h-full object-cover",alt:""})}),m.jsx("div",{className:"relative z-10 text-2xl group-hover:scale-110 transition-transform filter drop-shadow-sm",children:W.icon}),m.jsxs("div",{className:"relative z-10 flex-1",children:[m.jsx("div",{className:`font-bold text-sm ${ne?"text-white":"text-gray-900"}`,children:W.title}),m.jsx("div",{className:`text-[10px] font-bold ${ne?"text-green-300":"text-blue-600"}`,children:H(ne?"visited":"clickToListen",r)})]})]},W.id)})}),m.jsx("div",{className:"mt-4 sm:mt-8 w-full flex justify-center",children:m.jsx(fe,{onClick:()=>o("DECISION"),disabled:!G,className:`py-2 px-8 rounded-full text-sm font-bold shadow-xl transition-all border border-white/20 ${G?"animate-bounce bg-blue-600 hover:bg-blue-500":"bg-gray-500/50 cursor-not-allowed text-gray-300"}`,children:G?H("proceedToDecision",r):`${H("visitMore",r)} ${3-w.size} ${H("locations",r)}`})})]})}if(F.interactionType===K.MULTIPLE_CHOICE&&((de=F.interactionData)!=null&&de.question))return m.jsxs("div",{className:"h-full w-full flex flex-col overflow-hidden animate-fade-in relative",children:[m.jsx("div",{className:"flex-shrink-0 mb-1 z-10",children:m.jsx("div",{className:"bg-indigo-900 text-white rounded-2xl shadow-xl relative overflow-hidden flex flex-col justify-center p-2 text-center",children:m.jsx("h3",{className:"text-xs sm:text-sm font-black relative z-10 drop-shadow-md leading-tight",children:F.interactionData.question})})}),m.jsx("div",{className:"flex-1 min-h-0 flex flex-col relative w-full",children:h?m.jsx("div",{className:"flex-1 flex flex-col items-center justify-center animate-fade-in p-1 overflow-y-auto",children:m.jsxs("div",{className:"bg-white/95 backdrop-blur-md p-4 rounded-3xl shadow-2xl text-center w-full max-w-xs border-4 border-green-100 flex flex-col items-center flex-shrink-0",children:[m.jsx("div",{className:"text-3xl mb-1 animate-bounce",children:""}),m.jsx("h3",{className:"text-lg font-black text-blue-900 mb-0.5",children:H("correct",r)}),m.jsx("p",{className:"text-gray-500 font-bold mb-3 text-xs",children:H("correctAnswer",r)}),m.jsx(fe,{fullWidth:!0,className:"py-2 text-sm shadow-lg bg-blue-600 text-white mt-auto flex-shrink-0",onClick:()=>o("DECISION"),children:H("next",r)})]})}):m.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar flex flex-col gap-1.5 p-1 pb-2",children:F.interactionData.answers.map(G=>{const W=g===G.id,ne=W&&!G.correct&&S===G.id;return m.jsxs("button",{onClick:()=>Q(G),className:`
                                p-2 rounded-xl border font-bold text-xs sm:text-sm transition-all duration-200 flex justify-between items-center text-start shadow-sm shrink-0 min-h-[40px]
                                ${W&&G.correct?"bg-green-500 border-green-600 text-white":ne?"bg-red-500 border-red-600 text-white animate-shake":"bg-white/95 border-gray-100 hover:border-blue-300 hover:bg-blue-50 text-gray-800"}
                              `,children:[m.jsx("span",{className:"flex-1 leading-tight",children:G.text}),m.jsxs("span",{className:"text-base flex-shrink-0 ml-2",children:[W&&G.correct&&"",ne&&""]})]},G.id)})})})]});if(F.interactionType===K.BALLOONS){const G=[{bg:"radial-gradient(circle at 30% 30%, #ef4444, #991b1b)",shadow:"shadow-red-900/40"},{bg:"radial-gradient(circle at 30% 30%, #eab308, #854d0e)",shadow:"shadow-yellow-900/40"},{bg:"radial-gradient(circle at 30% 30%, #3b82f6, #1e3a8a)",shadow:"shadow-blue-900/40"},{bg:"radial-gradient(circle at 30% 30%, #8b5cf6, #5b21b6)",shadow:"shadow-purple-900/40"}];return m.jsxs("div",{className:"h-full flex flex-col relative overflow-hidden animate-fade-in w-full max-w-4xl mx-auto rounded-2xl border-4 border-white/50 shadow-2xl",children:[m.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-sky-300 via-sky-200 to-white z-0"}),!h&&m.jsx("div",{className:"text-center z-10 pt-2 px-2 flex-shrink-0",children:m.jsx("div",{className:"inline-block bg-white/90 backdrop-blur-sm px-4 py-1.5 rounded-full shadow-xl border-2 border-blue-100",children:m.jsx("h3",{className:"font-black text-[10px] sm:text-xs text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-purple-600",children:H("balloonsInst",r)})})}),m.jsx("div",{className:"flex-1 relative z-10 overflow-hidden min-h-0 w-full flex flex-col",children:h?m.jsx("div",{className:"h-full flex items-center justify-center animate-fade-in bg-black/10 backdrop-blur-sm p-4",children:m.jsxs("div",{className:"bg-white/95 backdrop-blur-xl p-6 rounded-[2rem] shadow-2xl text-center border-4 border-white max-w-xs w-full",children:[m.jsx("div",{className:"text-4xl mb-2 animate-bounce",children:""}),m.jsx("h3",{className:"text-xl font-black text-blue-900 mb-2",children:H("correct",r)}),m.jsx(fe,{className:"px-6 py-2 w-full shadow-lg text-sm",onClick:()=>o("DECISION"),children:H("next",r)})]})}):m.jsx("div",{className:"flex flex-row flex-wrap sm:flex-nowrap items-center justify-center gap-1 sm:gap-4 h-full w-full px-2 pb-4 pt-10",children:T.map((W,ne)=>{const Mt=G[ne%G.length],ji=W.popped,hv=S===W.id,mv=4+ne*.7,_c=ne*1.2,gv=ne%2===0?"-translate-y-2 sm:-translate-y-6":"translate-y-2 sm:translate-y-6";return m.jsxs("div",{className:`relative flex flex-col items-center justify-center transition-all duration-300 ${ji?"balloon-burst":"balloon-float"} ${hv?"animate-shake":""} ${gv}`,style:{animationDuration:ji?"0.3s":`${mv}s`,animationDelay:ji?"0s":`-${_c}s`},children:[m.jsx("button",{onClick:()=>L(W),disabled:ji,className:`balloon-shape w-16 h-20 sm:w-24 sm:h-28 flex items-center justify-center p-1 text-center cursor-pointer group border-none outline-none ring-0 ${Mt.shadow}`,style:{background:Mt.bg},children:m.jsx("p",{className:"relative z-10 font-bold text-white text-[8px] sm:text-xs leading-tight drop-shadow-md select-none group-hover:scale-105 transition-transform line-clamp-4 px-1",children:W.text})}),m.jsx("div",{className:"w-[1px] bg-white/60 origin-top animate-[stringWave_3s_ease-in-out_infinite]",style:{height:"30px",animationDelay:`-${_c}s`}})]},W.id)})})})]})}if(F.interactionType===K.DRAG_SHIELD)return m.jsxs("div",{className:"h-full w-full flex flex-col overflow-hidden animate-fade-in relative",children:[m.jsx("div",{className:"flex-shrink-0 text-center mb-2 z-10 pt-1 px-2",children:m.jsx("div",{className:"bg-indigo-900 text-white rounded-2xl shadow-xl inline-flex flex-col items-center px-4 py-2 relative overflow-hidden max-w-full",children:m.jsxs("h3",{className:"text-xs sm:text-sm font-black flex items-center gap-2 relative z-10 whitespace-nowrap",children:[m.jsx("span",{className:"text-base",children:""}),H("shieldInst",r)]})})}),m.jsx("div",{className:"flex-1 overflow-y-auto min-h-0 relative z-10 custom-scrollbar px-1 pb-2",children:m.jsx("div",{className:"grid grid-cols-2 gap-2 sm:gap-3",children:T.map(G=>{const W=S===G.id,ne=G.protected;return m.jsxs("button",{onClick:()=>O(G),disabled:ne,className:`
                               relative group p-2 rounded-xl transition-all duration-300 flex flex-col items-center justify-center text-center gap-1.5 min-h-[90px]
                               shadow-lg border backdrop-blur-sm shrink-0
                               ${ne?"bg-blue-50/90 border-blue-400 shadow-blue-200 cursor-default scale-95":W?"bg-red-50 border-red-400 animate-shake":"bg-white/95 border-white hover:-translate-y-1 hover:shadow-xl hover:border-blue-200"}
                            `,children:[m.jsx("div",{className:"text-xl sm:text-3xl filter drop-shadow-sm transition-transform group-hover:scale-110",children:G.text.includes("")?"":G.text.includes("")?"":G.text.includes("")?"":""}),m.jsx("p",{className:`text-[9px] sm:text-xs font-bold leading-tight ${ne?"text-blue-800":"text-gray-700"}`,children:G.text}),m.jsx("div",{className:`absolute inset-0 flex items-center justify-center transition-all duration-500 ${ne?"opacity-100 scale-100":"opacity-0 scale-50 pointer-events-none"}`,children:m.jsx("div",{className:"bg-white/80 rounded-full p-2 shadow-xl backdrop-blur-sm",children:m.jsx("div",{className:"text-2xl drop-shadow-lg animate-bounce",children:""})})})]},G.id)})})}),m.jsx("div",{className:"flex-shrink-0 p-4 pb-6 flex justify-center z-20",children:h&&m.jsx(fe,{fullWidth:!0,onClick:()=>o("DECISION"),className:"animate-slide-up max-w-xs py-2 text-sm font-bold shadow-xl shadow-green-900/30 bg-green-600 hover:bg-green-700 border-2 border-green-400",children:H("next",r)})})]});if(F.interactionType===K.CODE_CRACKER&&((ye=F.interactionData)!=null&&ye.questions)){const G=F.interactionData.questions,W=G[R];return h?m.jsxs("div",{className:"text-center animate-fade-in bg-white/95 backdrop-blur-xl p-4 sm:p-6 rounded-3xl shadow-2xl h-full flex flex-col items-center overflow-y-auto border border-white/40",children:[m.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center text-4xl shadow-inner mb-3 flex-shrink-0 border-4 border-white",children:""}),m.jsx("h2",{className:"text-2xl font-black text-blue-900 mb-2",children:t.data.moreInfoTitle||H("codeCracked",r)}),m.jsx("div",{className:"flex justify-center gap-3 mb-4",children:$.map((ne,Mt)=>m.jsx("div",{className:"w-12 h-16 bg-gray-900 text-green-400 flex items-center justify-center text-3xl font-mono rounded-lg border-b-4 border-green-600 shadow-xl",children:ne},Mt))}),m.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar w-full mb-4 bg-blue-50/50 p-4 rounded-xl border border-blue-100 text-right rtl:text-right ltr:text-left",children:m.jsx("p",{className:"text-sm font-medium text-gray-800 leading-relaxed whitespace-pre-line",children:t.data.moreInfoContent})}),m.jsx(fe,{fullWidth:!0,onClick:e,className:"flex-shrink-0 py-3 text-base shadow-lg bg-gradient-to-r from-blue-600 to-blue-500 hover:from-blue-700 hover:to-blue-600 text-white font-bold rounded-xl transform transition hover:scale-105",children:H("finishGame",r)})]}):m.jsxs("div",{className:`h-full w-full flex flex-col overflow-hidden animate-fade-in relative ${I?"animate-shake":""}`,children:[I&&m.jsx("div",{className:"absolute inset-0 z-50 flex items-center justify-center bg-red-500/20 backdrop-blur-sm animate-pulse rounded-2xl pointer-events-none",children:m.jsxs("div",{className:"bg-red-600 text-white px-6 py-3 rounded-full shadow-2xl font-black text-xl border-4 border-white transform rotate-3",children:[H("tryAgain",r)," "]})}),kt&&m.jsx("div",{className:"absolute inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-md p-4 animate-fade-in",children:m.jsxs("div",{className:"bg-white w-full max-w-sm flex flex-col rounded-2xl p-4 shadow-2xl border border-white/40 animate-slide-up",children:[m.jsxs("h3",{className:"text-lg font-black text-green-600 mb-2 border-b pb-2 flex items-center gap-2",children:[m.jsx("span",{children:""})," ",H("correct",r)]}),m.jsx("div",{className:"overflow-y-auto flex-1 mb-4 custom-scrollbar",children:m.jsx("p",{className:"text-gray-800 text-sm leading-relaxed whitespace-pre-line font-medium",children:Ie})}),m.jsx(fe,{fullWidth:!0,onClick:Rt,className:"py-2.5 text-sm bg-green-600 hover:bg-green-700 text-white font-bold shadow-lg",children:H("next",r)})]})}),m.jsxs("div",{className:"bg-gray-800 text-green-400 p-2 rounded-xl font-mono text-center shadow-lg border-b-4 border-gray-900 transform rotate-1 flex-shrink-0 mb-2",children:[m.jsx("p",{className:"text-[9px] text-gray-500 uppercase tracking-widest mb-0.5",children:H("codeLabel",r)}),m.jsxs("div",{className:"text-lg tracking-[0.5em] flex justify-center h-6 items-center",children:[$.map(ne=>ne).join(""),[...Array(4-$.length)].map((ne,Mt)=>m.jsx("span",{className:"animate-pulse",children:"_"},Mt))]})]}),m.jsxs("div",{className:"bg-indigo-900 text-white rounded-2xl shadow-xl relative overflow-hidden flex-shrink-0 flex flex-col justify-center p-2 mb-2 text-center",children:[m.jsxs("div",{className:"absolute top-1 right-2 opacity-50 text-[8px] uppercase font-bold tracking-wider",children:[H("question",r)," ",R+1," / ",G.length]}),m.jsx("h3",{className:"text-xs sm:text-sm font-bold relative z-10 leading-snug",children:W.question})]}),m.jsx("div",{className:"flex-1 overflow-y-auto min-h-0 pb-2",children:m.jsx("div",{className:"flex flex-col gap-2",children:W.options.map((ne,Mt)=>m.jsxs("button",{onClick:()=>je(ne.value,W.explanation),className:"py-3 px-4 bg-white/95 border-2 border-blue-50 rounded-xl hover:bg-blue-600 hover:text-white hover:border-blue-600 hover:shadow-lg transition-all font-bold text-xs sm:text-sm active:scale-95 text-blue-900 shadow-sm flex items-center gap-3 text-start min-h-[50px]",children:[m.jsx("span",{className:"flex-shrink-0 w-6 h-6 rounded-full bg-blue-100 text-blue-800 flex items-center justify-center text-xs font-black shadow-inner border border-blue-200 group-hover:bg-white group-hover:text-blue-600",children:Mt+1}),m.jsx("span",{className:"flex-1",children:ne.text})]},Mt))})})]})}return m.jsx("div",{className:"flex items-center justify-center h-full",children:m.jsx(fe,{onClick:()=>o("DECISION"),children:H("next",r)})});case"DECISION":const Zi=F.options.find(G=>G.id===f);return m.jsxs("div",{className:"h-full w-full flex flex-col overflow-hidden animate-fade-in relative",children:[m.jsxs("div",{className:`bg-indigo-900 text-white rounded-2xl shadow-xl relative overflow-hidden transition-all duration-500 flex-shrink-0 flex flex-col justify-center text-center
                ${f?"p-2 mb-1":"p-2 mb-2"}
             `,children:[m.jsx("div",{className:"absolute -right-10 -top-10 w-32 h-32 bg-white/10 rounded-full blur-2xl"}),!f&&m.jsx("h2",{className:"text-lg font-black mb-0.5 relative z-10 drop-shadow-md",children:""}),m.jsx("p",{className:`relative z-10 leading-snug font-medium text-blue-50 ${f?"text-[10px] sm:text-xs line-clamp-1":"text-xs sm:text-sm"}`,children:F.decisionQuestion})]}),m.jsx("div",{className:"flex-1 min-h-0 flex flex-col relative w-full",children:f?m.jsxs("div",{className:"flex-1 flex flex-col animate-slide-up overflow-hidden pb-1 min-h-0",children:[m.jsxs("div",{className:"bg-blue-50 border-l-4 border-blue-500 p-1.5 rounded-r-xl mb-1 flex-shrink-0 shadow-sm",children:[m.jsx("span",{className:"text-[9px] font-bold text-blue-400 uppercase tracking-wider block",children:H("yourChoice",r)}),m.jsx("p",{className:"text-blue-900 font-bold text-xs leading-tight line-clamp-1",children:Zi==null?void 0:Zi.text})]}),m.jsxs("div",{className:"flex-1 bg-white border border-gray-100 shadow-xl rounded-2xl p-3 flex flex-col items-center text-center relative overflow-hidden min-h-0",children:[m.jsx("div",{className:"w-6 h-6 bg-yellow-100 rounded-full flex items-center justify-center text-sm mb-1 shadow-inner flex-shrink-0",children:""}),m.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar w-full mb-2 min-h-0",children:m.jsx("p",{className:"text-xs text-gray-800 font-medium leading-relaxed px-1",children:s})}),m.jsxs("div",{className:"w-full flex flex-col gap-1.5 mt-auto flex-shrink-0",children:[m.jsxs(fe,{variant:"outline",className:"w-full py-1.5 text-[10px] border-blue-200 text-blue-700 hover:bg-blue-50",onClick:()=>{_e("pop"),d(!0)},children:[" ",H("moreInfo",r)]}),m.jsx(fe,{className:"w-full py-2 text-xs shadow-lg bg-blue-600 text-white",onClick:e,children:t.type==="QUIZ"?H("finishGame",r):H("finishLevel",r)})]})]})]}):m.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar flex flex-col gap-1.5 p-1 pb-2",children:F.options.map(G=>m.jsx("button",{disabled:!!f,className:`
                           p-2 text-start rounded-xl border transition-all shadow-md font-bold text-gray-700 text-xs relative overflow-hidden flex-shrink-0 bg-white/95 border-white hover:border-blue-400 hover:bg-blue-50 hover:shadow-lg min-h-[40px]
                         `,onClick:()=>{_e("click"),p(G.id),u(G.feedback)},children:m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("span",{className:"flex-shrink-0 w-3 h-3 rounded-full border-2 border-gray-300 flex items-center justify-center"}),m.jsx("span",{className:"relative z-10 flex-1 leading-tight",children:G.text})]})},G.id))})}),c&&m.jsx("div",{className:"fixed inset-0 bg-black/70 z-50 flex items-center justify-center p-4 backdrop-blur-sm animate-fade-in",children:m.jsxs("div",{className:"bg-white w-full max-w-sm max-h-[85dvh] flex flex-col rounded-2xl p-4 shadow-2xl relative",children:[m.jsx("button",{onClick:()=>{_e("click"),d(!1)},className:"absolute top-2 left-2 w-6 h-6 bg-gray-100 rounded-full text-gray-500 hover:bg-gray-200 flex items-center justify-center font-bold text-xs",children:""}),m.jsx("h3",{className:"text-sm font-black text-blue-900 mb-2 border-b pb-1 pr-6",children:F.moreInfoTitle}),m.jsx("div",{className:"overflow-y-auto flex-1 mb-3 pr-2 custom-scrollbar",children:m.jsx("p",{className:"text-gray-700 text-xs leading-relaxed whitespace-pre-line",children:F.moreInfoContent})}),m.jsx(fe,{fullWidth:!0,onClick:()=>{_e("click"),d(!1)},className:"py-2 text-xs",children:H("understood",r)})]})})]})}},jt=i==="INTRO";return m.jsxs("div",{className:"absolute inset-0 h-[100dvh] bg-slate-900 flex flex-col font-sans relative overflow-hidden",children:[t.data.backgroundImage&&m.jsxs("div",{className:`absolute inset-0 z-0 animate-fade-in transition-all duration-1000 ${A?"filter blur-[0px] scale-100":""}`,children:[m.jsx("img",{src:t.data.backgroundImage,className:"w-full h-full object-cover transition-all duration-1000 opacity-100 blur-0",alt:"",onError:F=>F.currentTarget.style.display="none"}),m.jsx("div",{className:`absolute inset-0 transition-all duration-1000 ${jt?"bg-gradient-to-t from-black/80 via-transparent to-black/30":"bg-black/10"}`})]}),m.jsxs("div",{className:`p-2 sm:p-4 flex justify-between items-center sticky top-0 z-20 transition-all duration-500 flex-shrink-0 h-14 ${A?"opacity-0 pointer-events-none":"opacity-100"}`,children:[m.jsx(fe,{variant:"outline",className:"py-1 px-3 text-xs rounded-full backdrop-blur-md transition-colors font-bold shadow-sm bg-white/20 border-white/40 text-white hover:bg-white/40",onClick:n,children:H("backToMap",r)}),!jt&&m.jsx("span",{className:"font-bold text-white text-xs drop-shadow-md bg-black/30 px-2 py-0.5 rounded-full truncate max-w-[200px]",children:t.title})]}),m.jsx("main",{className:"flex-1 p-2 sm:p-4 max-w-5xl mx-auto w-full relative z-10 flex flex-col justify-center min-h-0 pb-4 overflow-hidden",children:Pt()})]})};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let X0,Z0;function j0(){return{geminiUrl:X0,vertexUrl:Z0}}function eT(t,e,n,r){var i,o;if(!(t!=null&&t.baseUrl)){const s=j0();return e?(i=s.vertexUrl)!==null&&i!==void 0?i:n:(o=s.geminiUrl)!==null&&o!==void 0?o:r}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Xt{}function b(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(r,i)=>{if(Object.prototype.hasOwnProperty.call(e,i)){const o=e[i];return o!=null?String(o):""}else throw new Error(`Key '${i}' not found in valueMap.`)})}function a(t,e,n){for(let o=0;o<e.length-1;o++){const s=e[o];if(s.endsWith("[]")){const u=s.slice(0,-2);if(!(u in t))if(Array.isArray(n))t[u]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${s}`);if(Array.isArray(t[u])){const c=t[u];if(Array.isArray(n))for(let d=0;d<c.length;d++){const f=c[d];a(f,e.slice(o+1),n[d])}else for(const d of c)a(d,e.slice(o+1),n)}return}else if(s.endsWith("[0]")){const u=s.slice(0,-3);u in t||(t[u]=[{}]);const c=t[u];a(c[0],e.slice(o+1),n);return}(!t[s]||typeof t[s]!="object")&&(t[s]={}),t=t[s]}const r=e[e.length-1],i=t[r];if(i!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===i)return;if(typeof i=="object"&&typeof n=="object"&&i!==null&&n!==null)Object.assign(i,n);else throw new Error(`Cannot set value for an existing key. Key: ${r}`)}else r==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[r]=n}function l(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let r=0;r<e.length;r++){if(typeof t!="object"||t===null)return n;const i=e[r];if(i.endsWith("[]")){const o=i.slice(0,-2);if(o in t){const s=t[o];return Array.isArray(s)?s.map(u=>l(u,e.slice(r+1),n)):n}else return n}else t=t[i]}return t}catch(r){if(r instanceof TypeError)return n;throw r}}function tT(t,e){for(const[n,r]of Object.entries(e)){const i=n.split("."),o=r.split("."),s=new Set;let u=-1;for(let c=0;c<i.length;c++)if(i[c]==="*"){u=c;break}if(u!==-1&&o.length>u)for(let c=u;c<o.length;c++){const d=o[c];d!=="*"&&!d.endsWith("[]")&&!d.endsWith("[0]")&&s.add(d)}Na(t,i,o,0,s)}}function Na(t,e,n,r,i){if(r>=e.length||typeof t!="object"||t===null)return;const o=e[r];if(o.endsWith("[]")){const s=o.slice(0,-2),u=t;if(s in u&&Array.isArray(u[s]))for(const c of u[s])Na(c,e,n,r+1,i)}else if(o==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const s=t,u=Object.keys(s).filter(d=>!d.startsWith("_")&&!i.has(d)),c={};for(const d of u)c[d]=s[d];for(const[d,f]of Object.entries(c)){const p=[];for(const h of n.slice(r))h==="*"?p.push(d):p.push(h);a(s,p,f)}for(const d of u)delete s[d]}}else{const s=t;o in s&&Na(s[o],e,n,r+1,i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Gu(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function nT(t){const e={},n=l(t,["operationName"]);n!=null&&a(e,["operationName"],n);const r=l(t,["resourceName"]);return r!=null&&a(e,["_url","resourceName"],r),e}function rT(t){const e={},n=l(t,["name"]);n!=null&&a(e,["name"],n);const r=l(t,["metadata"]);r!=null&&a(e,["metadata"],r);const i=l(t,["done"]);i!=null&&a(e,["done"],i);const o=l(t,["error"]);o!=null&&a(e,["error"],o);const s=l(t,["response","generateVideoResponse"]);return s!=null&&a(e,["response"],oT(s)),e}function iT(t){const e={},n=l(t,["name"]);n!=null&&a(e,["name"],n);const r=l(t,["metadata"]);r!=null&&a(e,["metadata"],r);const i=l(t,["done"]);i!=null&&a(e,["done"],i);const o=l(t,["error"]);o!=null&&a(e,["error"],o);const s=l(t,["response"]);return s!=null&&a(e,["response"],sT(s)),e}function oT(t){const e={},n=l(t,["generatedSamples"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>lT(s))),a(e,["generatedVideos"],o)}const r=l(t,["raiMediaFilteredCount"]);r!=null&&a(e,["raiMediaFilteredCount"],r);const i=l(t,["raiMediaFilteredReasons"]);return i!=null&&a(e,["raiMediaFilteredReasons"],i),e}function sT(t){const e={},n=l(t,["videos"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>aT(s))),a(e,["generatedVideos"],o)}const r=l(t,["raiMediaFilteredCount"]);r!=null&&a(e,["raiMediaFilteredCount"],r);const i=l(t,["raiMediaFilteredReasons"]);return i!=null&&a(e,["raiMediaFilteredReasons"],i),e}function lT(t){const e={},n=l(t,["video"]);return n!=null&&a(e,["video"],hT(n)),e}function aT(t){const e={},n=l(t,["_self"]);return n!=null&&a(e,["video"],mT(n)),e}function uT(t){const e={},n=l(t,["operationName"]);return n!=null&&a(e,["_url","operationName"],n),e}function cT(t){const e={},n=l(t,["operationName"]);return n!=null&&a(e,["_url","operationName"],n),e}function dT(t){const e={},n=l(t,["name"]);n!=null&&a(e,["name"],n);const r=l(t,["metadata"]);r!=null&&a(e,["metadata"],r);const i=l(t,["done"]);i!=null&&a(e,["done"],i);const o=l(t,["error"]);o!=null&&a(e,["error"],o);const s=l(t,["response"]);return s!=null&&a(e,["response"],fT(s)),e}function fT(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const r=l(t,["parent"]);r!=null&&a(e,["parent"],r);const i=l(t,["documentName"]);return i!=null&&a(e,["documentName"],i),e}function ig(t){const e={},n=l(t,["name"]);n!=null&&a(e,["name"],n);const r=l(t,["metadata"]);r!=null&&a(e,["metadata"],r);const i=l(t,["done"]);i!=null&&a(e,["done"],i);const o=l(t,["error"]);o!=null&&a(e,["error"],o);const s=l(t,["response"]);return s!=null&&a(e,["response"],pT(s)),e}function pT(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const r=l(t,["parent"]);r!=null&&a(e,["parent"],r);const i=l(t,["documentName"]);return i!=null&&a(e,["documentName"],i),e}function hT(t){const e={},n=l(t,["uri"]);n!=null&&a(e,["uri"],n);const r=l(t,["encodedVideo"]);r!=null&&a(e,["videoBytes"],Gu(r));const i=l(t,["encoding"]);return i!=null&&a(e,["mimeType"],i),e}function mT(t){const e={},n=l(t,["gcsUri"]);n!=null&&a(e,["uri"],n);const r=l(t,["bytesBase64Encoded"]);r!=null&&a(e,["videoBytes"],Gu(r));const i=l(t,["mimeType"]);return i!=null&&a(e,["mimeType"],i),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Pd;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Pd||(Pd={}));var Md;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(Md||(Md={}));var Dd;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(Dd||(Dd={}));var hn;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(hn||(hn={}));var bd;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(bd||(bd={}));var Ld;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(Ld||(Ld={}));var Ud;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(Ud||(Ud={}));var Fd;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(Fd||(Fd={}));var Od;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(Od||(Od={}));var Vd;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.HIGH="HIGH"})(Vd||(Vd={}));var Hd;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(Hd||(Hd={}));var Bd;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(Bd||(Bd={}));var Gd;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(Gd||(Gd={}));var qd;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE"})(qd||(qd={}));var $d;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})($d||($d={}));var zd;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(zd||(zd={}));var Wd;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(Wd||(Wd={}));var Jd;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(Jd||(Jd={}));var Kd;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(Kd||(Kd={}));var cs;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(cs||(cs={}));var Yd;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Yd||(Yd={}));var Qd;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(Qd||(Qd={}));var Xd;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(Xd||(Xd={}));var ka;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(ka||(ka={}));var Zd;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(Zd||(Zd={}));var jd;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(jd||(jd={}));var ef;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(ef||(ef={}));var tf;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(tf||(tf={}));var nf;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(nf||(nf={}));var rf;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(rf||(rf={}));var of;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(of||(of={}));var sf;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(sf||(sf={}));var lf;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(lf||(lf={}));var af;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(af||(af={}));var uf;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(uf||(uf={}));var cf;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(cf||(cf={}));var df;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(df||(df={}));var ff;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(ff||(ff={}));var pf;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(pf||(pf={}));var hf;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(hf||(hf={}));var mf;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(mf||(mf={}));var gf;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(gf||(gf={}));var yf;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(yf||(yf={}));var vf;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(vf||(vf={}));var _f;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(_f||(_f={}));var Tf;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(Tf||(Tf={}));var Ef;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(Ef||(Ef={}));var If;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(If||(If={}));var Cf;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(Cf||(Cf={}));var wf;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(wf||(wf={}));var Sf;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(Sf||(Sf={}));var xf;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(xf||(xf={}));var Af;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(Af||(Af={}));var Nf;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(Nf||(Nf={}));var _r;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(_r||(_r={}));class Ra{constructor(e){const n={};for(const r of e.headers.entries())n[r[0]]=r[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class ri{get text(){var e,n,r,i,o,s,u,c;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let d="",f=!1;const p=[];for(const h of(c=(u=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||u===void 0?void 0:u.parts)!==null&&c!==void 0?c:[]){for(const[y,T]of Object.entries(h))y!=="text"&&y!=="thought"&&y!=="thoughtSignature"&&(T!==null||T!==void 0)&&p.push(y);if(typeof h.text=="string"){if(typeof h.thought=="boolean"&&h.thought)continue;f=!0,d+=h.text}}return p.length>0&&console.warn(`there are non-text parts ${p} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),f?d:void 0}get data(){var e,n,r,i,o,s,u,c;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let d="";const f=[];for(const p of(c=(u=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||u===void 0?void 0:u.parts)!==null&&c!==void 0?c:[]){for(const[h,y]of Object.entries(p))h!=="inlineData"&&(y!==null||y!==void 0)&&f.push(h);p.inlineData&&typeof p.inlineData.data=="string"&&(d+=atob(p.inlineData.data))}return f.length>0&&console.warn(`there are non-data parts ${f} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),d.length>0?btoa(d):void 0}get functionCalls(){var e,n,r,i,o,s,u,c;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const d=(c=(u=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||u===void 0?void 0:u.parts)===null||c===void 0?void 0:c.filter(f=>f.functionCall).map(f=>f.functionCall).filter(f=>f!==void 0);if((d==null?void 0:d.length)!==0)return d}get executableCode(){var e,n,r,i,o,s,u,c,d;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const f=(c=(u=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||u===void 0?void 0:u.parts)===null||c===void 0?void 0:c.filter(p=>p.executableCode).map(p=>p.executableCode).filter(p=>p!==void 0);if((f==null?void 0:f.length)!==0)return(d=f==null?void 0:f[0])===null||d===void 0?void 0:d.code}get codeExecutionResult(){var e,n,r,i,o,s,u,c,d;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const f=(c=(u=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||u===void 0?void 0:u.parts)===null||c===void 0?void 0:c.filter(p=>p.codeExecutionResult).map(p=>p.codeExecutionResult).filter(p=>p!==void 0);if((f==null?void 0:f.length)!==0)return(d=f==null?void 0:f[0])===null||d===void 0?void 0:d.output}}class kf{}class Rf{}class gT{}class yT{}class vT{}class _T{}class Pf{}class Mf{}class Df{}class TT{}class ds{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new ds;let i;const o=e;return n?i=iT(o):i=rT(o),Object.assign(r,i),r}}class bf{}class Lf{}class Uf{}class ET{}class IT{}class CT{}class qu{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new qu,o=dT(e);return Object.assign(r,o),r}}class wT{}class ST{}class xT{}class Ff{}class AT{get text(){var e,n,r;let i="",o=!1;const s=[];for(const u of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[c,d]of Object.entries(u))c!=="text"&&c!=="thought"&&d!==null&&s.push(c);if(typeof u.text=="string"){if(typeof u.thought=="boolean"&&u.thought)continue;o=!0,i+=u.text}}return s.length>0&&console.warn(`there are non-text parts ${s} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),o?i:void 0}get data(){var e,n,r;let i="";const o=[];for(const s of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[u,c]of Object.entries(s))u!=="inlineData"&&c!==null&&o.push(u);s.inlineData&&typeof s.inlineData.data=="string"&&(i+=atob(s.inlineData.data))}return o.length>0&&console.warn(`there are non-data parts ${o} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),i.length>0?btoa(i):void 0}}class NT{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class $u{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new $u,o=ig(e);return Object.assign(r,o),r}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Y(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function og(t,e){const n=Y(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function sg(t){return Array.isArray(t)?t.map(e=>fs(e)):[fs(t)]}function fs(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function lg(t){const e=fs(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function ag(t){const e=fs(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Of(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function ug(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>Of(e)):[Of(t)]}function Pa(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function Vf(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function Hf(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function Pe(t){if(t==null)throw new Error("ContentUnion is required");return Pa(t)?t:{role:"user",parts:ug(t)}}function zu(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const r=Pe(n);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]});if(t.isVertexAI()){const n=Pe(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>Pe(n)):[Pe(e)]}function it(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(Vf(t)||Hf(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Pe(t)]}const e=[],n=[],r=Pa(t[0]);for(const i of t){const o=Pa(i);if(o!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(o)e.push(i);else{if(Vf(i)||Hf(i))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(i)}}return r||e.push({role:"user",parts:ug(n)}),e}function kT(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(r=>r!=="null");if(n.length===1)e.type=Object.values(hn).includes(n[0].toUpperCase())?n[0].toUpperCase():hn.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const r of n)e.anyOf.push({type:Object.values(hn).includes(r.toUpperCase())?r.toUpperCase():hn.TYPE_UNSPECIFIED})}}function Ar(t){const e={},n=["items"],r=["anyOf"],i=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const o=t.anyOf;o!=null&&o.length==2&&(o[0].type==="null"?(e.nullable=!0,t=o[1]):o[1].type==="null"&&(e.nullable=!0,t=o[0])),t.type instanceof Array&&kT(t.type,e);for(const[s,u]of Object.entries(t))if(u!=null)if(s=="type"){if(u==="null")throw new Error("type: null can not be the only possible type for the field.");if(u instanceof Array)continue;e.type=Object.values(hn).includes(u.toUpperCase())?u.toUpperCase():hn.TYPE_UNSPECIFIED}else if(n.includes(s))e[s]=Ar(u);else if(r.includes(s)){const c=[];for(const d of u){if(d.type=="null"){e.nullable=!0;continue}c.push(Ar(d))}e[s]=c}else if(i.includes(s)){const c={};for(const[d,f]of Object.entries(u))c[d]=Ar(f);e[s]=c}else{if(s==="additionalProperties")continue;e[s]=u}return e}function Wu(t){return Ar(t)}function Ju(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function Ku(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function qr(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Ar(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Ar(e.response));return t}function $r(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function RT(t,e,n,r=1){const i=!e.startsWith(`${n}/`)&&e.split("/").length===r;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:i?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:i?`${n}/${e}`:e}function Zt(t,e){if(typeof e!="string")throw new Error("name must be a string");return RT(t,e,"cachedContents")}function cg(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function Mn(t){return Gu(t)}function PT(t){return t!=null&&typeof t=="object"&&"name"in t}function MT(t){return t!=null&&typeof t=="object"&&"video"in t}function DT(t){return t!=null&&typeof t=="object"&&"uri"in t}function dg(t){var e;let n;if(PT(t)&&(n=t.name),!(DT(t)&&(n=t.uri,n===void 0))&&!(MT(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const i=n.split("files/")[1].match(/[a-z0-9]+/);if(i===null)throw new Error(`Could not extract file name from URI ${n}`);n=i[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function fg(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function pg(t){for(const e of["models","tunedModels","publisherModels"])if(bT(t,e))return t[e];return[]}function bT(t,e){return t!==null&&typeof t=="object"&&e in t}function LT(t,e={}){const n=t,r={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(r.responseJsonSchema=n.outputSchema),e.behavior&&(r.behavior=e.behavior),{functionDeclarations:[r]}}function UT(t,e={}){const n=[],r=new Set;for(const i of t){const o=i.name;if(r.has(o))throw new Error(`Duplicate function name ${o} found in MCP tools. Please ensure function names are unique.`);r.add(o);const s=LT(i,e);s.functionDeclarations&&n.push(...s.functionDeclarations)}return{functionDeclarations:n}}function hg(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const r=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,i=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(i>0||r!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(r>0||i!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function FT(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function mg(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const i=n.inlinedResponses;if(!Array.isArray(i)||i.length===0)return t;let o=!1;for(const s of i){if(typeof s!="object"||s===null)continue;const c=s.response;if(typeof c!="object"||c===null)continue;if(c.embedding!==void 0){o=!0;break}}return o&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function zr(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function gg(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function OT(t){const e={},n=l(t,["responsesFile"]);n!=null&&a(e,["fileName"],n);const r=l(t,["inlinedResponses","inlinedResponses"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>vE(s))),a(e,["inlinedResponses"],o)}const i=l(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),a(e,["inlinedEmbedContentResponses"],o)}return e}function VT(t){const e={},n=l(t,["predictionsFormat"]);n!=null&&a(e,["format"],n);const r=l(t,["gcsDestination","outputUriPrefix"]);r!=null&&a(e,["gcsUri"],r);const i=l(t,["bigqueryDestination","outputUri"]);return i!=null&&a(e,["bigqueryUri"],i),e}function HT(t){const e={},n=l(t,["format"]);n!=null&&a(e,["predictionsFormat"],n);const r=l(t,["gcsUri"]);r!=null&&a(e,["gcsDestination","outputUriPrefix"],r);const i=l(t,["bigqueryUri"]);if(i!=null&&a(e,["bigqueryDestination","outputUri"],i),l(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(l(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(l(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function bo(t){const e={},n=l(t,["name"]);n!=null&&a(e,["name"],n);const r=l(t,["metadata","displayName"]);r!=null&&a(e,["displayName"],r);const i=l(t,["metadata","state"]);i!=null&&a(e,["state"],gg(i));const o=l(t,["metadata","createTime"]);o!=null&&a(e,["createTime"],o);const s=l(t,["metadata","endTime"]);s!=null&&a(e,["endTime"],s);const u=l(t,["metadata","updateTime"]);u!=null&&a(e,["updateTime"],u);const c=l(t,["metadata","model"]);c!=null&&a(e,["model"],c);const d=l(t,["metadata","output"]);return d!=null&&a(e,["dest"],OT(mg(d))),e}function Ma(t){const e={},n=l(t,["name"]);n!=null&&a(e,["name"],n);const r=l(t,["displayName"]);r!=null&&a(e,["displayName"],r);const i=l(t,["state"]);i!=null&&a(e,["state"],gg(i));const o=l(t,["error"]);o!=null&&a(e,["error"],o);const s=l(t,["createTime"]);s!=null&&a(e,["createTime"],s);const u=l(t,["startTime"]);u!=null&&a(e,["startTime"],u);const c=l(t,["endTime"]);c!=null&&a(e,["endTime"],c);const d=l(t,["updateTime"]);d!=null&&a(e,["updateTime"],d);const f=l(t,["model"]);f!=null&&a(e,["model"],f);const p=l(t,["inputConfig"]);p!=null&&a(e,["src"],BT(p));const h=l(t,["outputConfig"]);h!=null&&a(e,["dest"],VT(mg(h)));const y=l(t,["completionStats"]);return y!=null&&a(e,["completionStats"],y),e}function BT(t){const e={},n=l(t,["instancesFormat"]);n!=null&&a(e,["format"],n);const r=l(t,["gcsSource","uris"]);r!=null&&a(e,["gcsUri"],r);const i=l(t,["bigquerySource","inputUri"]);return i!=null&&a(e,["bigqueryUri"],i),e}function GT(t,e){const n={};if(l(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(l(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(l(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const r=l(e,["fileName"]);r!=null&&a(n,["fileName"],r);const i=l(e,["inlinedRequests"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>yE(t,s))),a(n,["requests","requests"],o)}return n}function qT(t){const e={},n=l(t,["format"]);n!=null&&a(e,["instancesFormat"],n);const r=l(t,["gcsUri"]);r!=null&&a(e,["gcsSource","uris"],r);const i=l(t,["bigqueryUri"]);if(i!=null&&a(e,["bigquerySource","inputUri"],i),l(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(l(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function $T(t){const e={},n=l(t,["data"]);if(n!=null&&a(e,["data"],n),l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=l(t,["mimeType"]);return r!=null&&a(e,["mimeType"],r),e}function zT(t,e){const n={},r=l(e,["name"]);return r!=null&&a(n,["_url","name"],zr(t,r)),n}function WT(t,e){const n={},r=l(e,["name"]);return r!=null&&a(n,["_url","name"],zr(t,r)),n}function JT(t){const e={},n=l(t,["content"]);n!=null&&a(e,["content"],n);const r=l(t,["citationMetadata"]);r!=null&&a(e,["citationMetadata"],KT(r));const i=l(t,["tokenCount"]);i!=null&&a(e,["tokenCount"],i);const o=l(t,["finishReason"]);o!=null&&a(e,["finishReason"],o);const s=l(t,["avgLogprobs"]);s!=null&&a(e,["avgLogprobs"],s);const u=l(t,["groundingMetadata"]);u!=null&&a(e,["groundingMetadata"],u);const c=l(t,["index"]);c!=null&&a(e,["index"],c);const d=l(t,["logprobsResult"]);d!=null&&a(e,["logprobsResult"],d);const f=l(t,["safetyRatings"]);if(f!=null){let h=f;Array.isArray(h)&&(h=h.map(y=>y)),a(e,["safetyRatings"],h)}const p=l(t,["urlContextMetadata"]);return p!=null&&a(e,["urlContextMetadata"],p),e}function KT(t){const e={},n=l(t,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>i)),a(e,["citations"],r)}return e}function yg(t){const e={},n=l(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>SE(o))),a(e,["parts"],i)}const r=l(t,["role"]);return r!=null&&a(e,["role"],r),e}function YT(t,e){const n={},r=l(t,["displayName"]);if(e!==void 0&&r!=null&&a(e,["batch","displayName"],r),l(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function QT(t,e){const n={},r=l(t,["displayName"]);e!==void 0&&r!=null&&a(e,["displayName"],r);const i=l(t,["dest"]);return e!==void 0&&i!=null&&a(e,["outputConfig"],HT(FT(i))),n}function Bf(t,e){const n={},r=l(e,["model"]);r!=null&&a(n,["_url","model"],Y(t,r));const i=l(e,["src"]);i!=null&&a(n,["batch","inputConfig"],GT(t,hg(t,i)));const o=l(e,["config"]);return o!=null&&YT(o,n),n}function XT(t,e){const n={},r=l(e,["model"]);r!=null&&a(n,["model"],Y(t,r));const i=l(e,["src"]);i!=null&&a(n,["inputConfig"],qT(hg(t,i)));const o=l(e,["config"]);return o!=null&&QT(o,n),n}function ZT(t,e){const n={},r=l(t,["displayName"]);return e!==void 0&&r!=null&&a(e,["batch","displayName"],r),n}function jT(t,e){const n={},r=l(e,["model"]);r!=null&&a(n,["_url","model"],Y(t,r));const i=l(e,["src"]);i!=null&&a(n,["batch","inputConfig"],sE(t,i));const o=l(e,["config"]);return o!=null&&ZT(o,n),n}function eE(t,e){const n={},r=l(e,["name"]);return r!=null&&a(n,["_url","name"],zr(t,r)),n}function tE(t,e){const n={},r=l(e,["name"]);return r!=null&&a(n,["_url","name"],zr(t,r)),n}function nE(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const r=l(t,["name"]);r!=null&&a(e,["name"],r);const i=l(t,["done"]);i!=null&&a(e,["done"],i);const o=l(t,["error"]);return o!=null&&a(e,["error"],o),e}function rE(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const r=l(t,["name"]);r!=null&&a(e,["name"],r);const i=l(t,["done"]);i!=null&&a(e,["done"],i);const o=l(t,["error"]);return o!=null&&a(e,["error"],o),e}function iE(t,e){const n={},r=l(e,["contents"]);if(r!=null){let o=zu(t,r);Array.isArray(o)&&(o=o.map(s=>s)),a(n,["requests[]","request","content"],o)}const i=l(e,["config"]);return i!=null&&(a(n,["_self"],oE(i,n)),tT(n,{"requests[].*":"requests[].request.*"})),n}function oE(t,e){const n={},r=l(t,["taskType"]);e!==void 0&&r!=null&&a(e,["requests[]","taskType"],r);const i=l(t,["title"]);e!==void 0&&i!=null&&a(e,["requests[]","title"],i);const o=l(t,["outputDimensionality"]);if(e!==void 0&&o!=null&&a(e,["requests[]","outputDimensionality"],o),l(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(l(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function sE(t,e){const n={},r=l(e,["fileName"]);r!=null&&a(n,["file_name"],r);const i=l(e,["inlinedRequests"]);return i!=null&&a(n,["requests"],iE(t,i)),n}function lE(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["fileUri"]);n!=null&&a(e,["fileUri"],n);const r=l(t,["mimeType"]);return r!=null&&a(e,["mimeType"],r),e}function aE(t){const e={},n=l(t,["id"]);n!=null&&a(e,["id"],n);const r=l(t,["args"]);r!=null&&a(e,["args"],r);const i=l(t,["name"]);if(i!=null&&a(e,["name"],i),l(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(l(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function uE(t){const e={},n=l(t,["mode"]);n!=null&&a(e,["mode"],n);const r=l(t,["allowedFunctionNames"]);if(r!=null&&a(e,["allowedFunctionNames"],r),l(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function cE(t,e,n){const r={},i=l(e,["systemInstruction"]);n!==void 0&&i!=null&&a(n,["systemInstruction"],yg(Pe(i)));const o=l(e,["temperature"]);o!=null&&a(r,["temperature"],o);const s=l(e,["topP"]);s!=null&&a(r,["topP"],s);const u=l(e,["topK"]);u!=null&&a(r,["topK"],u);const c=l(e,["candidateCount"]);c!=null&&a(r,["candidateCount"],c);const d=l(e,["maxOutputTokens"]);d!=null&&a(r,["maxOutputTokens"],d);const f=l(e,["stopSequences"]);f!=null&&a(r,["stopSequences"],f);const p=l(e,["responseLogprobs"]);p!=null&&a(r,["responseLogprobs"],p);const h=l(e,["logprobs"]);h!=null&&a(r,["logprobs"],h);const y=l(e,["presencePenalty"]);y!=null&&a(r,["presencePenalty"],y);const T=l(e,["frequencyPenalty"]);T!=null&&a(r,["frequencyPenalty"],T);const E=l(e,["seed"]);E!=null&&a(r,["seed"],E);const S=l(e,["responseMimeType"]);S!=null&&a(r,["responseMimeType"],S);const _=l(e,["responseSchema"]);_!=null&&a(r,["responseSchema"],Wu(_));const g=l(e,["responseJsonSchema"]);if(g!=null&&a(r,["responseJsonSchema"],g),l(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(l(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const v=l(e,["safetySettings"]);if(n!==void 0&&v!=null){let $=v;Array.isArray($)&&($=$.map(Z=>xE(Z))),a(n,["safetySettings"],$)}const I=l(e,["tools"]);if(n!==void 0&&I!=null){let $=$r(I);Array.isArray($)&&($=$.map(Z=>NE(qr(Z)))),a(n,["tools"],$)}const C=l(e,["toolConfig"]);if(n!==void 0&&C!=null&&a(n,["toolConfig"],AE(C)),l(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const w=l(e,["cachedContent"]);n!==void 0&&w!=null&&a(n,["cachedContent"],Zt(t,w));const x=l(e,["responseModalities"]);x!=null&&a(r,["responseModalities"],x);const A=l(e,["mediaResolution"]);A!=null&&a(r,["mediaResolution"],A);const P=l(e,["speechConfig"]);if(P!=null&&a(r,["speechConfig"],Ju(P)),l(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const R=l(e,["thinkingConfig"]);R!=null&&a(r,["thinkingConfig"],R);const B=l(e,["imageConfig"]);return B!=null&&a(r,["imageConfig"],gE(B)),r}function dE(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const r=l(t,["candidates"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(d=>JT(d))),a(e,["candidates"],c)}const i=l(t,["modelVersion"]);i!=null&&a(e,["modelVersion"],i);const o=l(t,["promptFeedback"]);o!=null&&a(e,["promptFeedback"],o);const s=l(t,["responseId"]);s!=null&&a(e,["responseId"],s);const u=l(t,["usageMetadata"]);return u!=null&&a(e,["usageMetadata"],u),e}function fE(t,e){const n={},r=l(e,["name"]);return r!=null&&a(n,["_url","name"],zr(t,r)),n}function pE(t,e){const n={},r=l(e,["name"]);return r!=null&&a(n,["_url","name"],zr(t,r)),n}function hE(t){const e={};if(l(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=l(t,["enableWidget"]);return n!=null&&a(e,["enableWidget"],n),e}function mE(t){const e={};if(l(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(l(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=l(t,["timeRangeFilter"]);return n!=null&&a(e,["timeRangeFilter"],n),e}function gE(t){const e={},n=l(t,["aspectRatio"]);n!=null&&a(e,["aspectRatio"],n);const r=l(t,["imageSize"]);if(r!=null&&a(e,["imageSize"],r),l(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(l(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function yE(t,e){const n={},r=l(e,["model"]);r!=null&&a(n,["request","model"],Y(t,r));const i=l(e,["contents"]);if(i!=null){let u=it(i);Array.isArray(u)&&(u=u.map(c=>yg(c))),a(n,["request","contents"],u)}const o=l(e,["metadata"]);o!=null&&a(n,["metadata"],o);const s=l(e,["config"]);return s!=null&&a(n,["request","generationConfig"],cE(t,s,l(n,["request"],{}))),n}function vE(t){const e={},n=l(t,["response"]);n!=null&&a(e,["response"],dE(n));const r=l(t,["error"]);return r!=null&&a(e,["error"],r),e}function _E(t,e){const n={},r=l(t,["pageSize"]);e!==void 0&&r!=null&&a(e,["_query","pageSize"],r);const i=l(t,["pageToken"]);if(e!==void 0&&i!=null&&a(e,["_query","pageToken"],i),l(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function TE(t,e){const n={},r=l(t,["pageSize"]);e!==void 0&&r!=null&&a(e,["_query","pageSize"],r);const i=l(t,["pageToken"]);e!==void 0&&i!=null&&a(e,["_query","pageToken"],i);const o=l(t,["filter"]);return e!==void 0&&o!=null&&a(e,["_query","filter"],o),n}function EE(t){const e={},n=l(t,["config"]);return n!=null&&_E(n,e),e}function IE(t){const e={},n=l(t,["config"]);return n!=null&&TE(n,e),e}function CE(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const r=l(t,["nextPageToken"]);r!=null&&a(e,["nextPageToken"],r);const i=l(t,["operations"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>bo(s))),a(e,["batchJobs"],o)}return e}function wE(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const r=l(t,["nextPageToken"]);r!=null&&a(e,["nextPageToken"],r);const i=l(t,["batchPredictionJobs"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>Ma(s))),a(e,["batchJobs"],o)}return e}function SE(t){const e={},n=l(t,["mediaResolution"]);n!=null&&a(e,["mediaResolution"],n);const r=l(t,["codeExecutionResult"]);r!=null&&a(e,["codeExecutionResult"],r);const i=l(t,["executableCode"]);i!=null&&a(e,["executableCode"],i);const o=l(t,["fileData"]);o!=null&&a(e,["fileData"],lE(o));const s=l(t,["functionCall"]);s!=null&&a(e,["functionCall"],aE(s));const u=l(t,["functionResponse"]);u!=null&&a(e,["functionResponse"],u);const c=l(t,["inlineData"]);c!=null&&a(e,["inlineData"],$T(c));const d=l(t,["text"]);d!=null&&a(e,["text"],d);const f=l(t,["thought"]);f!=null&&a(e,["thought"],f);const p=l(t,["thoughtSignature"]);p!=null&&a(e,["thoughtSignature"],p);const h=l(t,["videoMetadata"]);return h!=null&&a(e,["videoMetadata"],h),e}function xE(t){const e={},n=l(t,["category"]);if(n!=null&&a(e,["category"],n),l(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=l(t,["threshold"]);return r!=null&&a(e,["threshold"],r),e}function AE(t){const e={},n=l(t,["functionCallingConfig"]);n!=null&&a(e,["functionCallingConfig"],uE(n));const r=l(t,["retrievalConfig"]);return r!=null&&a(e,["retrievalConfig"],r),e}function NE(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(p=>p)),a(e,["functionDeclarations"],f)}if(l(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=l(t,["googleSearchRetrieval"]);r!=null&&a(e,["googleSearchRetrieval"],r);const i=l(t,["computerUse"]);i!=null&&a(e,["computerUse"],i);const o=l(t,["fileSearch"]);o!=null&&a(e,["fileSearch"],o);const s=l(t,["codeExecution"]);if(s!=null&&a(e,["codeExecution"],s),l(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=l(t,["googleMaps"]);u!=null&&a(e,["googleMaps"],hE(u));const c=l(t,["googleSearch"]);c!=null&&a(e,["googleSearch"],mE(c));const d=l(t,["urlContext"]);return d!=null&&a(e,["urlContext"],d),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Wt;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(Wt||(Wt={}));class er{constructor(e,n,r,i){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,r,i)}init(e,n,r){var i,o;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let s={config:{}};!r||Object.keys(r).length===0?s={config:{}}:typeof r=="object"?s=Object.assign({},r):s=r,s.config&&(s.config.pageToken=n.nextPageToken),this.paramsInternal=s,this.pageInternalSize=(o=(i=s.config)===null||i===void 0?void 0:i.pageSize)!==null&&o!==void 0?o:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class kE extends Xt{constructor(e){super(),this.apiClient=e,this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)},this.list=async(n={})=>new er(Wt.PAGED_ITEM_BATCH_JOBS,r=>this.listInternal(r),await this.listInternal(n),n)}createInlinedGenerateContentRequest(e){const n=Bf(this.apiClient,e),r=n._url,i=b("{model}:batchGenerateContent",r),u=n.batch.inputConfig.requests,c=u.requests,d=[];for(const f of c){const p=Object.assign({},f);if(p.systemInstruction){const h=p.systemInstruction;delete p.systemInstruction;const y=p.request;y.systemInstruction=h,p.request=y}d.push(p)}return u.requests=d,delete n.config,delete n._url,delete n._query,{path:i,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const r=n?Object.assign({},n):{},i=Date.now().toString();if(r.displayName||(r.displayName=`genaiBatchJob_${i}`),r.dest===void 0){const o=this.getGcsUri(e),s=this.getBigqueryUri(e);if(o)o.endsWith(".jsonl")?r.dest=`${o.slice(0,-6)}/dest`:r.dest=`${o}_dest_${i}`;else if(s)r.dest=`${s}_dest_${i}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return r}async createInternal(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=XT(this.apiClient,e);return u=b("batchPredictionJobs",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>Ma(f))}else{const d=Bf(this.apiClient,e);return u=b("{model}:batchGenerateContent",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>bo(f))}}async createEmbeddingsInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=jT(this.apiClient,e);return o=b("{model}:asyncBatchEmbedContent",u._url),s=u._query,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>bo(c))}}async get(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=pE(this.apiClient,e);return u=b("batchPredictionJobs/{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>Ma(f))}else{const d=fE(this.apiClient,e);return u=b("batches/{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>bo(f))}}async cancel(e){var n,r,i,o;let s="",u={};if(this.apiClient.isVertexAI()){const c=WT(this.apiClient,e);s=b("batchPredictionJobs/{name}:cancel",c._url),u=c._query,delete c._url,delete c._query,await this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{const c=zT(this.apiClient,e);s=b("batches/{name}:cancel",c._url),u=c._query,delete c._url,delete c._query,await this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=IE(e);return u=b("batchPredictionJobs",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=wE(f),h=new Ff;return Object.assign(h,p),h})}else{const d=EE(e);return u=b("batches",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=CE(f),h=new Ff;return Object.assign(h,p),h})}}async delete(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=tE(this.apiClient,e);return u=b("batchPredictionJobs/{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>rE(f))}else{const d=eE(this.apiClient,e);return u=b("batches/{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>nE(f))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function RE(t){const e={},n=l(t,["data"]);if(n!=null&&a(e,["data"],n),l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=l(t,["mimeType"]);return r!=null&&a(e,["mimeType"],r),e}function Gf(t){const e={},n=l(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>jE(o))),a(e,["parts"],i)}const r=l(t,["role"]);return r!=null&&a(e,["role"],r),e}function PE(t,e){const n={},r=l(t,["ttl"]);e!==void 0&&r!=null&&a(e,["ttl"],r);const i=l(t,["expireTime"]);e!==void 0&&i!=null&&a(e,["expireTime"],i);const o=l(t,["displayName"]);e!==void 0&&o!=null&&a(e,["displayName"],o);const s=l(t,["contents"]);if(e!==void 0&&s!=null){let f=it(s);Array.isArray(f)&&(f=f.map(p=>Gf(p))),a(e,["contents"],f)}const u=l(t,["systemInstruction"]);e!==void 0&&u!=null&&a(e,["systemInstruction"],Gf(Pe(u)));const c=l(t,["tools"]);if(e!==void 0&&c!=null){let f=c;Array.isArray(f)&&(f=f.map(p=>tI(p))),a(e,["tools"],f)}const d=l(t,["toolConfig"]);if(e!==void 0&&d!=null&&a(e,["toolConfig"],eI(d)),l(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function ME(t,e){const n={},r=l(t,["ttl"]);e!==void 0&&r!=null&&a(e,["ttl"],r);const i=l(t,["expireTime"]);e!==void 0&&i!=null&&a(e,["expireTime"],i);const o=l(t,["displayName"]);e!==void 0&&o!=null&&a(e,["displayName"],o);const s=l(t,["contents"]);if(e!==void 0&&s!=null){let p=it(s);Array.isArray(p)&&(p=p.map(h=>h)),a(e,["contents"],p)}const u=l(t,["systemInstruction"]);e!==void 0&&u!=null&&a(e,["systemInstruction"],Pe(u));const c=l(t,["tools"]);if(e!==void 0&&c!=null){let p=c;Array.isArray(p)&&(p=p.map(h=>nI(h))),a(e,["tools"],p)}const d=l(t,["toolConfig"]);e!==void 0&&d!=null&&a(e,["toolConfig"],d);const f=l(t,["kmsKeyName"]);return e!==void 0&&f!=null&&a(e,["encryption_spec","kmsKeyName"],f),n}function DE(t,e){const n={},r=l(e,["model"]);r!=null&&a(n,["model"],og(t,r));const i=l(e,["config"]);return i!=null&&PE(i,n),n}function bE(t,e){const n={},r=l(e,["model"]);r!=null&&a(n,["model"],og(t,r));const i=l(e,["config"]);return i!=null&&ME(i,n),n}function LE(t,e){const n={},r=l(e,["name"]);return r!=null&&a(n,["_url","name"],Zt(t,r)),n}function UE(t,e){const n={},r=l(e,["name"]);return r!=null&&a(n,["_url","name"],Zt(t,r)),n}function FE(t){const e={},n=l(t,["sdkHttpResponse"]);return n!=null&&a(e,["sdkHttpResponse"],n),e}function OE(t){const e={},n=l(t,["sdkHttpResponse"]);return n!=null&&a(e,["sdkHttpResponse"],n),e}function VE(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["fileUri"]);n!=null&&a(e,["fileUri"],n);const r=l(t,["mimeType"]);return r!=null&&a(e,["mimeType"],r),e}function HE(t){const e={},n=l(t,["id"]);n!=null&&a(e,["id"],n);const r=l(t,["args"]);r!=null&&a(e,["args"],r);const i=l(t,["name"]);if(i!=null&&a(e,["name"],i),l(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(l(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function BE(t){const e={},n=l(t,["mode"]);n!=null&&a(e,["mode"],n);const r=l(t,["allowedFunctionNames"]);if(r!=null&&a(e,["allowedFunctionNames"],r),l(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function GE(t){const e={};if(l(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=l(t,["description"]);n!=null&&a(e,["description"],n);const r=l(t,["name"]);r!=null&&a(e,["name"],r);const i=l(t,["parameters"]);i!=null&&a(e,["parameters"],i);const o=l(t,["parametersJsonSchema"]);o!=null&&a(e,["parametersJsonSchema"],o);const s=l(t,["response"]);s!=null&&a(e,["response"],s);const u=l(t,["responseJsonSchema"]);return u!=null&&a(e,["responseJsonSchema"],u),e}function qE(t,e){const n={},r=l(e,["name"]);return r!=null&&a(n,["_url","name"],Zt(t,r)),n}function $E(t,e){const n={},r=l(e,["name"]);return r!=null&&a(n,["_url","name"],Zt(t,r)),n}function zE(t){const e={};if(l(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=l(t,["enableWidget"]);return n!=null&&a(e,["enableWidget"],n),e}function WE(t){const e={};if(l(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(l(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=l(t,["timeRangeFilter"]);return n!=null&&a(e,["timeRangeFilter"],n),e}function JE(t,e){const n={},r=l(t,["pageSize"]);e!==void 0&&r!=null&&a(e,["_query","pageSize"],r);const i=l(t,["pageToken"]);return e!==void 0&&i!=null&&a(e,["_query","pageToken"],i),n}function KE(t,e){const n={},r=l(t,["pageSize"]);e!==void 0&&r!=null&&a(e,["_query","pageSize"],r);const i=l(t,["pageToken"]);return e!==void 0&&i!=null&&a(e,["_query","pageToken"],i),n}function YE(t){const e={},n=l(t,["config"]);return n!=null&&JE(n,e),e}function QE(t){const e={},n=l(t,["config"]);return n!=null&&KE(n,e),e}function XE(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const r=l(t,["nextPageToken"]);r!=null&&a(e,["nextPageToken"],r);const i=l(t,["cachedContents"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),a(e,["cachedContents"],o)}return e}function ZE(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const r=l(t,["nextPageToken"]);r!=null&&a(e,["nextPageToken"],r);const i=l(t,["cachedContents"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),a(e,["cachedContents"],o)}return e}function jE(t){const e={},n=l(t,["mediaResolution"]);n!=null&&a(e,["mediaResolution"],n);const r=l(t,["codeExecutionResult"]);r!=null&&a(e,["codeExecutionResult"],r);const i=l(t,["executableCode"]);i!=null&&a(e,["executableCode"],i);const o=l(t,["fileData"]);o!=null&&a(e,["fileData"],VE(o));const s=l(t,["functionCall"]);s!=null&&a(e,["functionCall"],HE(s));const u=l(t,["functionResponse"]);u!=null&&a(e,["functionResponse"],u);const c=l(t,["inlineData"]);c!=null&&a(e,["inlineData"],RE(c));const d=l(t,["text"]);d!=null&&a(e,["text"],d);const f=l(t,["thought"]);f!=null&&a(e,["thought"],f);const p=l(t,["thoughtSignature"]);p!=null&&a(e,["thoughtSignature"],p);const h=l(t,["videoMetadata"]);return h!=null&&a(e,["videoMetadata"],h),e}function eI(t){const e={},n=l(t,["functionCallingConfig"]);n!=null&&a(e,["functionCallingConfig"],BE(n));const r=l(t,["retrievalConfig"]);return r!=null&&a(e,["retrievalConfig"],r),e}function tI(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(p=>p)),a(e,["functionDeclarations"],f)}if(l(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=l(t,["googleSearchRetrieval"]);r!=null&&a(e,["googleSearchRetrieval"],r);const i=l(t,["computerUse"]);i!=null&&a(e,["computerUse"],i);const o=l(t,["fileSearch"]);o!=null&&a(e,["fileSearch"],o);const s=l(t,["codeExecution"]);if(s!=null&&a(e,["codeExecution"],s),l(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=l(t,["googleMaps"]);u!=null&&a(e,["googleMaps"],zE(u));const c=l(t,["googleSearch"]);c!=null&&a(e,["googleSearch"],WE(c));const d=l(t,["urlContext"]);return d!=null&&a(e,["urlContext"],d),e}function nI(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(h=>GE(h))),a(e,["functionDeclarations"],p)}const r=l(t,["retrieval"]);r!=null&&a(e,["retrieval"],r);const i=l(t,["googleSearchRetrieval"]);i!=null&&a(e,["googleSearchRetrieval"],i);const o=l(t,["computerUse"]);if(o!=null&&a(e,["computerUse"],o),l(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const s=l(t,["codeExecution"]);s!=null&&a(e,["codeExecution"],s);const u=l(t,["enterpriseWebSearch"]);u!=null&&a(e,["enterpriseWebSearch"],u);const c=l(t,["googleMaps"]);c!=null&&a(e,["googleMaps"],c);const d=l(t,["googleSearch"]);d!=null&&a(e,["googleSearch"],d);const f=l(t,["urlContext"]);return f!=null&&a(e,["urlContext"],f),e}function rI(t,e){const n={},r=l(t,["ttl"]);e!==void 0&&r!=null&&a(e,["ttl"],r);const i=l(t,["expireTime"]);return e!==void 0&&i!=null&&a(e,["expireTime"],i),n}function iI(t,e){const n={},r=l(t,["ttl"]);e!==void 0&&r!=null&&a(e,["ttl"],r);const i=l(t,["expireTime"]);return e!==void 0&&i!=null&&a(e,["expireTime"],i),n}function oI(t,e){const n={},r=l(e,["name"]);r!=null&&a(n,["_url","name"],Zt(t,r));const i=l(e,["config"]);return i!=null&&rI(i,n),n}function sI(t,e){const n={},r=l(e,["name"]);r!=null&&a(n,["_url","name"],Zt(t,r));const i=l(e,["config"]);return i!=null&&iI(i,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class lI extends Xt{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new er(Wt.PAGED_ITEM_CACHED_CONTENTS,r=>this.listInternal(r),await this.listInternal(n),n)}async create(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=bE(this.apiClient,e);return u=b("cachedContents",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>f)}else{const d=DE(this.apiClient,e);return u=b("cachedContents",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>f)}}async get(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=$E(this.apiClient,e);return u=b("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>f)}else{const d=qE(this.apiClient,e);return u=b("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>f)}}async delete(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=UE(this.apiClient,e);return u=b("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=OE(f),h=new Lf;return Object.assign(h,p),h})}else{const d=LE(this.apiClient,e);return u=b("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=FE(f),h=new Lf;return Object.assign(h,p),h})}}async update(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=sI(this.apiClient,e);return u=b("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>f)}else{const d=oI(this.apiClient,e);return u=b("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>f)}}async listInternal(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=QE(e);return u=b("cachedContents",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=ZE(f),h=new Uf;return Object.assign(h,p),h})}else{const d=YE(e);return u=b("cachedContents",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=XE(f),h=new Uf;return Object.assign(h,p),h})}}}function qf(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ie(t){return this instanceof ie?(this.v=t,this):new ie(t)}function Nr(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),u("next"),u("throw"),u("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(y){return function(T){return Promise.resolve(T).then(y,p)}}function u(y,T){r[y]&&(i[y]=function(E){return new Promise(function(S,_){o.push([y,E,S,_])>1||c(y,E)})},T&&(i[y]=T(i[y])))}function c(y,T){try{d(r[y](T))}catch(E){h(o[0][3],E)}}function d(y){y.value instanceof ie?Promise.resolve(y.value.v).then(f,p):h(o[0][2],y)}function f(y){c("next",y)}function p(y){c("throw",y)}function h(y,T){y(T),o.shift(),o.length&&c(o[0][0],o[0][1])}}function _i(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof qf=="function"?qf(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(u,c){s=t[o](s),i(u,c,s.done,s.value)})}}function i(o,s,u,c){Promise.resolve(c).then(function(d){o({value:d,done:u})},s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function aI(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:vg(n)}function vg(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function uI(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function $f(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let r=0;for(;r<n;)if(t[r].role==="user")e.push(t[r]),r++;else{const i=[];let o=!0;for(;r<n&&t[r].role==="model";)i.push(t[r]),o&&!vg(t[r])&&(o=!1),r++;o?e.push(...i):e.pop()}return e}class cI{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new dI(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class dI{constructor(e,n,r,i={},o=[]){this.apiClient=e,this.modelsModule=n,this.model=r,this.config=i,this.history=o,this.sendPromise=Promise.resolve(),uI(o)}async sendMessage(e){var n;await this.sendPromise;const r=Pe(e.message),i=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var o,s,u;const c=await i,d=(s=(o=c.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content,f=c.automaticFunctionCallingHistory,p=this.getHistory(!0).length;let h=[];f!=null&&(h=(u=f.slice(p))!==null&&u!==void 0?u:[]);const y=d?[d]:[];this.recordHistory(r,y,h)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),i}async sendMessageStream(e){var n;await this.sendPromise;const r=Pe(e.message),i=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=i.then(()=>{}).catch(()=>{});const o=await i;return this.processStreamResponse(o,r)}getHistory(e=!1){const n=e?$f(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){var r,i;return Nr(this,arguments,function*(){var s,u,c,d;const f=[];try{for(var p=!0,h=_i(e),y;y=yield ie(h.next()),s=y.done,!s;p=!0){d=y.value,p=!1;const T=d;if(aI(T)){const E=(i=(r=T.candidates)===null||r===void 0?void 0:r[0])===null||i===void 0?void 0:i.content;E!==void 0&&f.push(E)}yield yield ie(T)}}catch(T){u={error:T}}finally{try{!p&&!s&&(c=h.return)&&(yield ie(c.call(h)))}finally{if(u)throw u.error}}this.recordHistory(n,f)})}recordHistory(e,n,r){let i=[];n.length>0&&n.every(o=>o.role!==void 0)?i=n:i.push({role:"model",parts:[]}),r&&r.length>0?this.history.push(...$f(r)):this.history.push(e),this.history.push(...i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Vs extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Vs.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function fI(t){const e={},n=l(t,["file"]);return n!=null&&a(e,["file"],n),e}function pI(t){const e={},n=l(t,["sdkHttpResponse"]);return n!=null&&a(e,["sdkHttpResponse"],n),e}function hI(t){const e={},n=l(t,["name"]);return n!=null&&a(e,["_url","file"],dg(n)),e}function mI(t){const e={},n=l(t,["sdkHttpResponse"]);return n!=null&&a(e,["sdkHttpResponse"],n),e}function gI(t){const e={},n=l(t,["name"]);return n!=null&&a(e,["_url","file"],dg(n)),e}function yI(t,e){const n={},r=l(t,["pageSize"]);e!==void 0&&r!=null&&a(e,["_query","pageSize"],r);const i=l(t,["pageToken"]);return e!==void 0&&i!=null&&a(e,["_query","pageToken"],i),n}function vI(t){const e={},n=l(t,["config"]);return n!=null&&yI(n,e),e}function _I(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const r=l(t,["nextPageToken"]);r!=null&&a(e,["nextPageToken"],r);const i=l(t,["files"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),a(e,["files"],o)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class TI extends Xt{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new er(Wt.PAGED_ITEM_FILES,r=>this.listInternal(r),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=vI(e);return o=b("files",u._url),s=u._query,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),i.then(c=>{const d=_I(c),f=new wT;return Object.assign(f,d),f})}}async createInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=fI(e);return o=b("upload/v1beta/files",u._url),s=u._query,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>{const d=pI(c),f=new ST;return Object.assign(f,d),f})}}async get(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=gI(e);return o=b("files/{file}",u._url),s=u._query,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>c)}}async delete(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=hI(e);return o=b("files/{file}",u._url),s=u._query,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),i.then(c=>{const d=mI(c),f=new xT;return Object.assign(f,d),f})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Lo(t){const e={},n=l(t,["data"]);if(n!=null&&a(e,["data"],n),l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=l(t,["mimeType"]);return r!=null&&a(e,["mimeType"],r),e}function EI(t){const e={},n=l(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>FI(o))),a(e,["parts"],i)}const r=l(t,["role"]);return r!=null&&a(e,["role"],r),e}function II(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["fileUri"]);n!=null&&a(e,["fileUri"],n);const r=l(t,["mimeType"]);return r!=null&&a(e,["mimeType"],r),e}function CI(t){const e={},n=l(t,["id"]);n!=null&&a(e,["id"],n);const r=l(t,["args"]);r!=null&&a(e,["args"],r);const i=l(t,["name"]);if(i!=null&&a(e,["name"],i),l(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(l(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function wI(t){const e={};if(l(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=l(t,["description"]);n!=null&&a(e,["description"],n);const r=l(t,["name"]);r!=null&&a(e,["name"],r);const i=l(t,["parameters"]);i!=null&&a(e,["parameters"],i);const o=l(t,["parametersJsonSchema"]);o!=null&&a(e,["parametersJsonSchema"],o);const s=l(t,["response"]);s!=null&&a(e,["response"],s);const u=l(t,["responseJsonSchema"]);return u!=null&&a(e,["responseJsonSchema"],u),e}function SI(t){const e={},n=l(t,["modelSelectionConfig"]);n!=null&&a(e,["modelConfig"],n);const r=l(t,["responseJsonSchema"]);r!=null&&a(e,["responseJsonSchema"],r);const i=l(t,["audioTimestamp"]);i!=null&&a(e,["audioTimestamp"],i);const o=l(t,["candidateCount"]);o!=null&&a(e,["candidateCount"],o);const s=l(t,["enableAffectiveDialog"]);s!=null&&a(e,["enableAffectiveDialog"],s);const u=l(t,["frequencyPenalty"]);u!=null&&a(e,["frequencyPenalty"],u);const c=l(t,["logprobs"]);c!=null&&a(e,["logprobs"],c);const d=l(t,["maxOutputTokens"]);d!=null&&a(e,["maxOutputTokens"],d);const f=l(t,["mediaResolution"]);f!=null&&a(e,["mediaResolution"],f);const p=l(t,["presencePenalty"]);p!=null&&a(e,["presencePenalty"],p);const h=l(t,["responseLogprobs"]);h!=null&&a(e,["responseLogprobs"],h);const y=l(t,["responseMimeType"]);y!=null&&a(e,["responseMimeType"],y);const T=l(t,["responseModalities"]);T!=null&&a(e,["responseModalities"],T);const E=l(t,["responseSchema"]);E!=null&&a(e,["responseSchema"],E);const S=l(t,["routingConfig"]);S!=null&&a(e,["routingConfig"],S);const _=l(t,["seed"]);_!=null&&a(e,["seed"],_);const g=l(t,["speechConfig"]);g!=null&&a(e,["speechConfig"],_g(g));const v=l(t,["stopSequences"]);v!=null&&a(e,["stopSequences"],v);const I=l(t,["temperature"]);I!=null&&a(e,["temperature"],I);const C=l(t,["thinkingConfig"]);C!=null&&a(e,["thinkingConfig"],C);const w=l(t,["topK"]);w!=null&&a(e,["topK"],w);const x=l(t,["topP"]);if(x!=null&&a(e,["topP"],x),l(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function xI(t){const e={};if(l(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=l(t,["enableWidget"]);return n!=null&&a(e,["enableWidget"],n),e}function AI(t){const e={};if(l(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(l(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=l(t,["timeRangeFilter"]);return n!=null&&a(e,["timeRangeFilter"],n),e}function NI(t,e){const n={},r=l(t,["generationConfig"]);e!==void 0&&r!=null&&a(e,["setup","generationConfig"],r);const i=l(t,["responseModalities"]);e!==void 0&&i!=null&&a(e,["setup","generationConfig","responseModalities"],i);const o=l(t,["temperature"]);e!==void 0&&o!=null&&a(e,["setup","generationConfig","temperature"],o);const s=l(t,["topP"]);e!==void 0&&s!=null&&a(e,["setup","generationConfig","topP"],s);const u=l(t,["topK"]);e!==void 0&&u!=null&&a(e,["setup","generationConfig","topK"],u);const c=l(t,["maxOutputTokens"]);e!==void 0&&c!=null&&a(e,["setup","generationConfig","maxOutputTokens"],c);const d=l(t,["mediaResolution"]);e!==void 0&&d!=null&&a(e,["setup","generationConfig","mediaResolution"],d);const f=l(t,["seed"]);e!==void 0&&f!=null&&a(e,["setup","generationConfig","seed"],f);const p=l(t,["speechConfig"]);e!==void 0&&p!=null&&a(e,["setup","generationConfig","speechConfig"],Ku(p));const h=l(t,["thinkingConfig"]);e!==void 0&&h!=null&&a(e,["setup","generationConfig","thinkingConfig"],h);const y=l(t,["enableAffectiveDialog"]);e!==void 0&&y!=null&&a(e,["setup","generationConfig","enableAffectiveDialog"],y);const T=l(t,["systemInstruction"]);e!==void 0&&T!=null&&a(e,["setup","systemInstruction"],EI(Pe(T)));const E=l(t,["tools"]);if(e!==void 0&&E!=null){let w=$r(E);Array.isArray(w)&&(w=w.map(x=>VI(qr(x)))),a(e,["setup","tools"],w)}const S=l(t,["sessionResumption"]);e!==void 0&&S!=null&&a(e,["setup","sessionResumption"],OI(S));const _=l(t,["inputAudioTranscription"]);e!==void 0&&_!=null&&a(e,["setup","inputAudioTranscription"],_);const g=l(t,["outputAudioTranscription"]);e!==void 0&&g!=null&&a(e,["setup","outputAudioTranscription"],g);const v=l(t,["realtimeInputConfig"]);e!==void 0&&v!=null&&a(e,["setup","realtimeInputConfig"],v);const I=l(t,["contextWindowCompression"]);e!==void 0&&I!=null&&a(e,["setup","contextWindowCompression"],I);const C=l(t,["proactivity"]);return e!==void 0&&C!=null&&a(e,["setup","proactivity"],C),n}function kI(t,e){const n={},r=l(t,["generationConfig"]);e!==void 0&&r!=null&&a(e,["setup","generationConfig"],SI(r));const i=l(t,["responseModalities"]);e!==void 0&&i!=null&&a(e,["setup","generationConfig","responseModalities"],i);const o=l(t,["temperature"]);e!==void 0&&o!=null&&a(e,["setup","generationConfig","temperature"],o);const s=l(t,["topP"]);e!==void 0&&s!=null&&a(e,["setup","generationConfig","topP"],s);const u=l(t,["topK"]);e!==void 0&&u!=null&&a(e,["setup","generationConfig","topK"],u);const c=l(t,["maxOutputTokens"]);e!==void 0&&c!=null&&a(e,["setup","generationConfig","maxOutputTokens"],c);const d=l(t,["mediaResolution"]);e!==void 0&&d!=null&&a(e,["setup","generationConfig","mediaResolution"],d);const f=l(t,["seed"]);e!==void 0&&f!=null&&a(e,["setup","generationConfig","seed"],f);const p=l(t,["speechConfig"]);e!==void 0&&p!=null&&a(e,["setup","generationConfig","speechConfig"],_g(Ku(p)));const h=l(t,["thinkingConfig"]);e!==void 0&&h!=null&&a(e,["setup","generationConfig","thinkingConfig"],h);const y=l(t,["enableAffectiveDialog"]);e!==void 0&&y!=null&&a(e,["setup","generationConfig","enableAffectiveDialog"],y);const T=l(t,["systemInstruction"]);e!==void 0&&T!=null&&a(e,["setup","systemInstruction"],Pe(T));const E=l(t,["tools"]);if(e!==void 0&&E!=null){let w=$r(E);Array.isArray(w)&&(w=w.map(x=>HI(qr(x)))),a(e,["setup","tools"],w)}const S=l(t,["sessionResumption"]);e!==void 0&&S!=null&&a(e,["setup","sessionResumption"],S);const _=l(t,["inputAudioTranscription"]);e!==void 0&&_!=null&&a(e,["setup","inputAudioTranscription"],_);const g=l(t,["outputAudioTranscription"]);e!==void 0&&g!=null&&a(e,["setup","outputAudioTranscription"],g);const v=l(t,["realtimeInputConfig"]);e!==void 0&&v!=null&&a(e,["setup","realtimeInputConfig"],v);const I=l(t,["contextWindowCompression"]);e!==void 0&&I!=null&&a(e,["setup","contextWindowCompression"],I);const C=l(t,["proactivity"]);return e!==void 0&&C!=null&&a(e,["setup","proactivity"],C),n}function RI(t,e){const n={},r=l(e,["model"]);r!=null&&a(n,["setup","model"],Y(t,r));const i=l(e,["config"]);return i!=null&&a(n,["config"],NI(i,n)),n}function PI(t,e){const n={},r=l(e,["model"]);r!=null&&a(n,["setup","model"],Y(t,r));const i=l(e,["config"]);return i!=null&&a(n,["config"],kI(i,n)),n}function MI(t){const e={},n=l(t,["musicGenerationConfig"]);return n!=null&&a(e,["musicGenerationConfig"],n),e}function DI(t){const e={},n=l(t,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>i)),a(e,["weightedPrompts"],r)}return e}function bI(t){const e={},n=l(t,["media"]);if(n!=null){let d=sg(n);Array.isArray(d)&&(d=d.map(f=>Lo(f))),a(e,["mediaChunks"],d)}const r=l(t,["audio"]);r!=null&&a(e,["audio"],Lo(ag(r)));const i=l(t,["audioStreamEnd"]);i!=null&&a(e,["audioStreamEnd"],i);const o=l(t,["video"]);o!=null&&a(e,["video"],Lo(lg(o)));const s=l(t,["text"]);s!=null&&a(e,["text"],s);const u=l(t,["activityStart"]);u!=null&&a(e,["activityStart"],u);const c=l(t,["activityEnd"]);return c!=null&&a(e,["activityEnd"],c),e}function LI(t){const e={},n=l(t,["media"]);if(n!=null){let d=sg(n);Array.isArray(d)&&(d=d.map(f=>f)),a(e,["mediaChunks"],d)}const r=l(t,["audio"]);r!=null&&a(e,["audio"],ag(r));const i=l(t,["audioStreamEnd"]);i!=null&&a(e,["audioStreamEnd"],i);const o=l(t,["video"]);o!=null&&a(e,["video"],lg(o));const s=l(t,["text"]);s!=null&&a(e,["text"],s);const u=l(t,["activityStart"]);u!=null&&a(e,["activityStart"],u);const c=l(t,["activityEnd"]);return c!=null&&a(e,["activityEnd"],c),e}function UI(t){const e={},n=l(t,["setupComplete"]);n!=null&&a(e,["setupComplete"],n);const r=l(t,["serverContent"]);r!=null&&a(e,["serverContent"],r);const i=l(t,["toolCall"]);i!=null&&a(e,["toolCall"],i);const o=l(t,["toolCallCancellation"]);o!=null&&a(e,["toolCallCancellation"],o);const s=l(t,["usageMetadata"]);s!=null&&a(e,["usageMetadata"],BI(s));const u=l(t,["goAway"]);u!=null&&a(e,["goAway"],u);const c=l(t,["sessionResumptionUpdate"]);return c!=null&&a(e,["sessionResumptionUpdate"],c),e}function FI(t){const e={},n=l(t,["mediaResolution"]);n!=null&&a(e,["mediaResolution"],n);const r=l(t,["codeExecutionResult"]);r!=null&&a(e,["codeExecutionResult"],r);const i=l(t,["executableCode"]);i!=null&&a(e,["executableCode"],i);const o=l(t,["fileData"]);o!=null&&a(e,["fileData"],II(o));const s=l(t,["functionCall"]);s!=null&&a(e,["functionCall"],CI(s));const u=l(t,["functionResponse"]);u!=null&&a(e,["functionResponse"],u);const c=l(t,["inlineData"]);c!=null&&a(e,["inlineData"],Lo(c));const d=l(t,["text"]);d!=null&&a(e,["text"],d);const f=l(t,["thought"]);f!=null&&a(e,["thought"],f);const p=l(t,["thoughtSignature"]);p!=null&&a(e,["thoughtSignature"],p);const h=l(t,["videoMetadata"]);return h!=null&&a(e,["videoMetadata"],h),e}function OI(t){const e={},n=l(t,["handle"]);if(n!=null&&a(e,["handle"],n),l(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function _g(t){const e={},n=l(t,["languageCode"]);n!=null&&a(e,["languageCode"],n);const r=l(t,["voiceConfig"]);if(r!=null&&a(e,["voiceConfig"],r),l(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function VI(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(p=>p)),a(e,["functionDeclarations"],f)}if(l(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=l(t,["googleSearchRetrieval"]);r!=null&&a(e,["googleSearchRetrieval"],r);const i=l(t,["computerUse"]);i!=null&&a(e,["computerUse"],i);const o=l(t,["fileSearch"]);o!=null&&a(e,["fileSearch"],o);const s=l(t,["codeExecution"]);if(s!=null&&a(e,["codeExecution"],s),l(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=l(t,["googleMaps"]);u!=null&&a(e,["googleMaps"],xI(u));const c=l(t,["googleSearch"]);c!=null&&a(e,["googleSearch"],AI(c));const d=l(t,["urlContext"]);return d!=null&&a(e,["urlContext"],d),e}function HI(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(h=>wI(h))),a(e,["functionDeclarations"],p)}const r=l(t,["retrieval"]);r!=null&&a(e,["retrieval"],r);const i=l(t,["googleSearchRetrieval"]);i!=null&&a(e,["googleSearchRetrieval"],i);const o=l(t,["computerUse"]);if(o!=null&&a(e,["computerUse"],o),l(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const s=l(t,["codeExecution"]);s!=null&&a(e,["codeExecution"],s);const u=l(t,["enterpriseWebSearch"]);u!=null&&a(e,["enterpriseWebSearch"],u);const c=l(t,["googleMaps"]);c!=null&&a(e,["googleMaps"],c);const d=l(t,["googleSearch"]);d!=null&&a(e,["googleSearch"],d);const f=l(t,["urlContext"]);return f!=null&&a(e,["urlContext"],f),e}function BI(t){const e={},n=l(t,["promptTokenCount"]);n!=null&&a(e,["promptTokenCount"],n);const r=l(t,["cachedContentTokenCount"]);r!=null&&a(e,["cachedContentTokenCount"],r);const i=l(t,["candidatesTokenCount"]);i!=null&&a(e,["responseTokenCount"],i);const o=l(t,["toolUsePromptTokenCount"]);o!=null&&a(e,["toolUsePromptTokenCount"],o);const s=l(t,["thoughtsTokenCount"]);s!=null&&a(e,["thoughtsTokenCount"],s);const u=l(t,["totalTokenCount"]);u!=null&&a(e,["totalTokenCount"],u);const c=l(t,["promptTokensDetails"]);if(c!=null){let y=c;Array.isArray(y)&&(y=y.map(T=>T)),a(e,["promptTokensDetails"],y)}const d=l(t,["cacheTokensDetails"]);if(d!=null){let y=d;Array.isArray(y)&&(y=y.map(T=>T)),a(e,["cacheTokensDetails"],y)}const f=l(t,["candidatesTokensDetails"]);if(f!=null){let y=f;Array.isArray(y)&&(y=y.map(T=>T)),a(e,["responseTokensDetails"],y)}const p=l(t,["toolUsePromptTokensDetails"]);if(p!=null){let y=p;Array.isArray(y)&&(y=y.map(T=>T)),a(e,["toolUsePromptTokensDetails"],y)}const h=l(t,["trafficType"]);return h!=null&&a(e,["trafficType"],h),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function GI(t){const e={},n=l(t,["data"]);if(n!=null&&a(e,["data"],n),l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=l(t,["mimeType"]);return r!=null&&a(e,["mimeType"],r),e}function qI(t){const e={},n=l(t,["content"]);n!=null&&a(e,["content"],n);const r=l(t,["citationMetadata"]);r!=null&&a(e,["citationMetadata"],$I(r));const i=l(t,["tokenCount"]);i!=null&&a(e,["tokenCount"],i);const o=l(t,["finishReason"]);o!=null&&a(e,["finishReason"],o);const s=l(t,["avgLogprobs"]);s!=null&&a(e,["avgLogprobs"],s);const u=l(t,["groundingMetadata"]);u!=null&&a(e,["groundingMetadata"],u);const c=l(t,["index"]);c!=null&&a(e,["index"],c);const d=l(t,["logprobsResult"]);d!=null&&a(e,["logprobsResult"],d);const f=l(t,["safetyRatings"]);if(f!=null){let h=f;Array.isArray(h)&&(h=h.map(y=>y)),a(e,["safetyRatings"],h)}const p=l(t,["urlContextMetadata"]);return p!=null&&a(e,["urlContextMetadata"],p),e}function $I(t){const e={},n=l(t,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>i)),a(e,["citations"],r)}return e}function zI(t,e){const n={},r=l(e,["model"]);r!=null&&a(n,["_url","model"],Y(t,r));const i=l(e,["contents"]);if(i!=null){let o=it(i);Array.isArray(o)&&(o=o.map(s=>s)),a(n,["contents"],o)}return n}function WI(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const r=l(t,["tokensInfo"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>o)),a(e,["tokensInfo"],i)}return e}function JI(t){const e={},n=l(t,["values"]);n!=null&&a(e,["values"],n);const r=l(t,["statistics"]);return r!=null&&a(e,["statistics"],KI(r)),e}function KI(t){const e={},n=l(t,["truncated"]);n!=null&&a(e,["truncated"],n);const r=l(t,["token_count"]);return r!=null&&a(e,["tokenCount"],r),e}function Hs(t){const e={},n=l(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>rw(o))),a(e,["parts"],i)}const r=l(t,["role"]);return r!=null&&a(e,["role"],r),e}function YI(t){const e={},n=l(t,["controlType"]);n!=null&&a(e,["controlType"],n);const r=l(t,["enableControlImageComputation"]);return r!=null&&a(e,["computeControl"],r),e}function QI(t){const e={};if(l(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(l(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(l(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function XI(t,e){const n={},r=l(t,["systemInstruction"]);e!==void 0&&r!=null&&a(e,["systemInstruction"],Pe(r));const i=l(t,["tools"]);if(e!==void 0&&i!=null){let s=i;Array.isArray(s)&&(s=s.map(u=>wg(u))),a(e,["tools"],s)}const o=l(t,["generationConfig"]);return e!==void 0&&o!=null&&a(e,["generationConfig"],GC(o)),n}function ZI(t,e){const n={},r=l(e,["model"]);r!=null&&a(n,["_url","model"],Y(t,r));const i=l(e,["contents"]);if(i!=null){let s=it(i);Array.isArray(s)&&(s=s.map(u=>Hs(u))),a(n,["contents"],s)}const o=l(e,["config"]);return o!=null&&QI(o),n}function jI(t,e){const n={},r=l(e,["model"]);r!=null&&a(n,["_url","model"],Y(t,r));const i=l(e,["contents"]);if(i!=null){let s=it(i);Array.isArray(s)&&(s=s.map(u=>u)),a(n,["contents"],s)}const o=l(e,["config"]);return o!=null&&XI(o,n),n}function eC(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const r=l(t,["totalTokens"]);r!=null&&a(e,["totalTokens"],r);const i=l(t,["cachedContentTokenCount"]);return i!=null&&a(e,["cachedContentTokenCount"],i),e}function tC(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const r=l(t,["totalTokens"]);return r!=null&&a(e,["totalTokens"],r),e}function nC(t,e){const n={},r=l(e,["model"]);return r!=null&&a(n,["_url","name"],Y(t,r)),n}function rC(t,e){const n={},r=l(e,["model"]);return r!=null&&a(n,["_url","name"],Y(t,r)),n}function iC(t){const e={},n=l(t,["sdkHttpResponse"]);return n!=null&&a(e,["sdkHttpResponse"],n),e}function oC(t){const e={},n=l(t,["sdkHttpResponse"]);return n!=null&&a(e,["sdkHttpResponse"],n),e}function sC(t,e){const n={},r=l(t,["outputGcsUri"]);e!==void 0&&r!=null&&a(e,["parameters","storageUri"],r);const i=l(t,["negativePrompt"]);e!==void 0&&i!=null&&a(e,["parameters","negativePrompt"],i);const o=l(t,["numberOfImages"]);e!==void 0&&o!=null&&a(e,["parameters","sampleCount"],o);const s=l(t,["aspectRatio"]);e!==void 0&&s!=null&&a(e,["parameters","aspectRatio"],s);const u=l(t,["guidanceScale"]);e!==void 0&&u!=null&&a(e,["parameters","guidanceScale"],u);const c=l(t,["seed"]);e!==void 0&&c!=null&&a(e,["parameters","seed"],c);const d=l(t,["safetyFilterLevel"]);e!==void 0&&d!=null&&a(e,["parameters","safetySetting"],d);const f=l(t,["personGeneration"]);e!==void 0&&f!=null&&a(e,["parameters","personGeneration"],f);const p=l(t,["includeSafetyAttributes"]);e!==void 0&&p!=null&&a(e,["parameters","includeSafetyAttributes"],p);const h=l(t,["includeRaiReason"]);e!==void 0&&h!=null&&a(e,["parameters","includeRaiReason"],h);const y=l(t,["language"]);e!==void 0&&y!=null&&a(e,["parameters","language"],y);const T=l(t,["outputMimeType"]);e!==void 0&&T!=null&&a(e,["parameters","outputOptions","mimeType"],T);const E=l(t,["outputCompressionQuality"]);e!==void 0&&E!=null&&a(e,["parameters","outputOptions","compressionQuality"],E);const S=l(t,["addWatermark"]);e!==void 0&&S!=null&&a(e,["parameters","addWatermark"],S);const _=l(t,["labels"]);e!==void 0&&_!=null&&a(e,["labels"],_);const g=l(t,["editMode"]);e!==void 0&&g!=null&&a(e,["parameters","editMode"],g);const v=l(t,["baseSteps"]);return e!==void 0&&v!=null&&a(e,["parameters","editConfig","baseSteps"],v),n}function lC(t,e){const n={},r=l(e,["model"]);r!=null&&a(n,["_url","model"],Y(t,r));const i=l(e,["prompt"]);i!=null&&a(n,["instances[0]","prompt"],i);const o=l(e,["referenceImages"]);if(o!=null){let u=o;Array.isArray(u)&&(u=u.map(c=>uw(c))),a(n,["instances[0]","referenceImages"],u)}const s=l(e,["config"]);return s!=null&&sC(s,n),n}function aC(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const r=l(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>Bs(o))),a(e,["generatedImages"],i)}return e}function uC(t,e){const n={},r=l(t,["taskType"]);e!==void 0&&r!=null&&a(e,["requests[]","taskType"],r);const i=l(t,["title"]);e!==void 0&&i!=null&&a(e,["requests[]","title"],i);const o=l(t,["outputDimensionality"]);if(e!==void 0&&o!=null&&a(e,["requests[]","outputDimensionality"],o),l(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(l(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function cC(t,e){const n={},r=l(t,["taskType"]);e!==void 0&&r!=null&&a(e,["instances[]","task_type"],r);const i=l(t,["title"]);e!==void 0&&i!=null&&a(e,["instances[]","title"],i);const o=l(t,["outputDimensionality"]);e!==void 0&&o!=null&&a(e,["parameters","outputDimensionality"],o);const s=l(t,["mimeType"]);e!==void 0&&s!=null&&a(e,["instances[]","mimeType"],s);const u=l(t,["autoTruncate"]);return e!==void 0&&u!=null&&a(e,["parameters","autoTruncate"],u),n}function dC(t,e){const n={},r=l(e,["model"]);r!=null&&a(n,["_url","model"],Y(t,r));const i=l(e,["contents"]);if(i!=null){let u=zu(t,i);Array.isArray(u)&&(u=u.map(c=>c)),a(n,["requests[]","content"],u)}const o=l(e,["config"]);o!=null&&uC(o,n);const s=l(e,["model"]);return s!==void 0&&a(n,["requests[]","model"],Y(t,s)),n}function fC(t,e){const n={},r=l(e,["model"]);r!=null&&a(n,["_url","model"],Y(t,r));const i=l(e,["contents"]);if(i!=null){let s=zu(t,i);Array.isArray(s)&&(s=s.map(u=>u)),a(n,["instances[]","content"],s)}const o=l(e,["config"]);return o!=null&&cC(o,n),n}function pC(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const r=l(t,["embeddings"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>s)),a(e,["embeddings"],o)}const i=l(t,["metadata"]);return i!=null&&a(e,["metadata"],i),e}function hC(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const r=l(t,["predictions[]","embeddings"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>JI(s))),a(e,["embeddings"],o)}const i=l(t,["metadata"]);return i!=null&&a(e,["metadata"],i),e}function mC(t){const e={},n=l(t,["endpoint"]);n!=null&&a(e,["name"],n);const r=l(t,["deployedModelId"]);return r!=null&&a(e,["deployedModelId"],r),e}function gC(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["fileUri"]);n!=null&&a(e,["fileUri"],n);const r=l(t,["mimeType"]);return r!=null&&a(e,["mimeType"],r),e}function yC(t){const e={},n=l(t,["id"]);n!=null&&a(e,["id"],n);const r=l(t,["args"]);r!=null&&a(e,["args"],r);const i=l(t,["name"]);if(i!=null&&a(e,["name"],i),l(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(l(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function vC(t){const e={},n=l(t,["mode"]);n!=null&&a(e,["mode"],n);const r=l(t,["allowedFunctionNames"]);if(r!=null&&a(e,["allowedFunctionNames"],r),l(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function _C(t){const e={};if(l(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=l(t,["description"]);n!=null&&a(e,["description"],n);const r=l(t,["name"]);r!=null&&a(e,["name"],r);const i=l(t,["parameters"]);i!=null&&a(e,["parameters"],i);const o=l(t,["parametersJsonSchema"]);o!=null&&a(e,["parametersJsonSchema"],o);const s=l(t,["response"]);s!=null&&a(e,["response"],s);const u=l(t,["responseJsonSchema"]);return u!=null&&a(e,["responseJsonSchema"],u),e}function TC(t,e,n){const r={},i=l(e,["systemInstruction"]);n!==void 0&&i!=null&&a(n,["systemInstruction"],Hs(Pe(i)));const o=l(e,["temperature"]);o!=null&&a(r,["temperature"],o);const s=l(e,["topP"]);s!=null&&a(r,["topP"],s);const u=l(e,["topK"]);u!=null&&a(r,["topK"],u);const c=l(e,["candidateCount"]);c!=null&&a(r,["candidateCount"],c);const d=l(e,["maxOutputTokens"]);d!=null&&a(r,["maxOutputTokens"],d);const f=l(e,["stopSequences"]);f!=null&&a(r,["stopSequences"],f);const p=l(e,["responseLogprobs"]);p!=null&&a(r,["responseLogprobs"],p);const h=l(e,["logprobs"]);h!=null&&a(r,["logprobs"],h);const y=l(e,["presencePenalty"]);y!=null&&a(r,["presencePenalty"],y);const T=l(e,["frequencyPenalty"]);T!=null&&a(r,["frequencyPenalty"],T);const E=l(e,["seed"]);E!=null&&a(r,["seed"],E);const S=l(e,["responseMimeType"]);S!=null&&a(r,["responseMimeType"],S);const _=l(e,["responseSchema"]);_!=null&&a(r,["responseSchema"],Wu(_));const g=l(e,["responseJsonSchema"]);if(g!=null&&a(r,["responseJsonSchema"],g),l(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(l(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const v=l(e,["safetySettings"]);if(n!==void 0&&v!=null){let $=v;Array.isArray($)&&($=$.map(Z=>cw(Z))),a(n,["safetySettings"],$)}const I=l(e,["tools"]);if(n!==void 0&&I!=null){let $=$r(I);Array.isArray($)&&($=$.map(Z=>yw(qr(Z)))),a(n,["tools"],$)}const C=l(e,["toolConfig"]);if(n!==void 0&&C!=null&&a(n,["toolConfig"],gw(C)),l(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const w=l(e,["cachedContent"]);n!==void 0&&w!=null&&a(n,["cachedContent"],Zt(t,w));const x=l(e,["responseModalities"]);x!=null&&a(r,["responseModalities"],x);const A=l(e,["mediaResolution"]);A!=null&&a(r,["mediaResolution"],A);const P=l(e,["speechConfig"]);if(P!=null&&a(r,["speechConfig"],Ju(P)),l(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const R=l(e,["thinkingConfig"]);R!=null&&a(r,["thinkingConfig"],R);const B=l(e,["imageConfig"]);return B!=null&&a(r,["imageConfig"],JC(B)),r}function EC(t,e,n){const r={},i=l(e,["systemInstruction"]);n!==void 0&&i!=null&&a(n,["systemInstruction"],Pe(i));const o=l(e,["temperature"]);o!=null&&a(r,["temperature"],o);const s=l(e,["topP"]);s!=null&&a(r,["topP"],s);const u=l(e,["topK"]);u!=null&&a(r,["topK"],u);const c=l(e,["candidateCount"]);c!=null&&a(r,["candidateCount"],c);const d=l(e,["maxOutputTokens"]);d!=null&&a(r,["maxOutputTokens"],d);const f=l(e,["stopSequences"]);f!=null&&a(r,["stopSequences"],f);const p=l(e,["responseLogprobs"]);p!=null&&a(r,["responseLogprobs"],p);const h=l(e,["logprobs"]);h!=null&&a(r,["logprobs"],h);const y=l(e,["presencePenalty"]);y!=null&&a(r,["presencePenalty"],y);const T=l(e,["frequencyPenalty"]);T!=null&&a(r,["frequencyPenalty"],T);const E=l(e,["seed"]);E!=null&&a(r,["seed"],E);const S=l(e,["responseMimeType"]);S!=null&&a(r,["responseMimeType"],S);const _=l(e,["responseSchema"]);_!=null&&a(r,["responseSchema"],Wu(_));const g=l(e,["responseJsonSchema"]);g!=null&&a(r,["responseJsonSchema"],g);const v=l(e,["routingConfig"]);v!=null&&a(r,["routingConfig"],v);const I=l(e,["modelSelectionConfig"]);I!=null&&a(r,["modelConfig"],I);const C=l(e,["safetySettings"]);if(n!==void 0&&C!=null){let Ie=C;Array.isArray(Ie)&&(Ie=Ie.map(M=>M)),a(n,["safetySettings"],Ie)}const w=l(e,["tools"]);if(n!==void 0&&w!=null){let Ie=$r(w);Array.isArray(Ie)&&(Ie=Ie.map(M=>wg(qr(M)))),a(n,["tools"],Ie)}const x=l(e,["toolConfig"]);n!==void 0&&x!=null&&a(n,["toolConfig"],x);const A=l(e,["labels"]);n!==void 0&&A!=null&&a(n,["labels"],A);const P=l(e,["cachedContent"]);n!==void 0&&P!=null&&a(n,["cachedContent"],Zt(t,P));const R=l(e,["responseModalities"]);R!=null&&a(r,["responseModalities"],R);const B=l(e,["mediaResolution"]);B!=null&&a(r,["mediaResolution"],B);const $=l(e,["speechConfig"]);$!=null&&a(r,["speechConfig"],Cg(Ju($)));const Z=l(e,["audioTimestamp"]);Z!=null&&a(r,["audioTimestamp"],Z);const kt=l(e,["thinkingConfig"]);kt!=null&&a(r,["thinkingConfig"],kt);const ut=l(e,["imageConfig"]);return ut!=null&&a(r,["imageConfig"],KC(ut)),r}function zf(t,e){const n={},r=l(e,["model"]);r!=null&&a(n,["_url","model"],Y(t,r));const i=l(e,["contents"]);if(i!=null){let s=it(i);Array.isArray(s)&&(s=s.map(u=>Hs(u))),a(n,["contents"],s)}const o=l(e,["config"]);return o!=null&&a(n,["generationConfig"],TC(t,o,n)),n}function Wf(t,e){const n={},r=l(e,["model"]);r!=null&&a(n,["_url","model"],Y(t,r));const i=l(e,["contents"]);if(i!=null){let s=it(i);Array.isArray(s)&&(s=s.map(u=>u)),a(n,["contents"],s)}const o=l(e,["config"]);return o!=null&&a(n,["generationConfig"],EC(t,o,n)),n}function Jf(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const r=l(t,["candidates"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(d=>qI(d))),a(e,["candidates"],c)}const i=l(t,["modelVersion"]);i!=null&&a(e,["modelVersion"],i);const o=l(t,["promptFeedback"]);o!=null&&a(e,["promptFeedback"],o);const s=l(t,["responseId"]);s!=null&&a(e,["responseId"],s);const u=l(t,["usageMetadata"]);return u!=null&&a(e,["usageMetadata"],u),e}function Kf(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const r=l(t,["candidates"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(f=>f)),a(e,["candidates"],d)}const i=l(t,["createTime"]);i!=null&&a(e,["createTime"],i);const o=l(t,["modelVersion"]);o!=null&&a(e,["modelVersion"],o);const s=l(t,["promptFeedback"]);s!=null&&a(e,["promptFeedback"],s);const u=l(t,["responseId"]);u!=null&&a(e,["responseId"],u);const c=l(t,["usageMetadata"]);return c!=null&&a(e,["usageMetadata"],c),e}function IC(t,e){const n={};if(l(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(l(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=l(t,["numberOfImages"]);e!==void 0&&r!=null&&a(e,["parameters","sampleCount"],r);const i=l(t,["aspectRatio"]);e!==void 0&&i!=null&&a(e,["parameters","aspectRatio"],i);const o=l(t,["guidanceScale"]);if(e!==void 0&&o!=null&&a(e,["parameters","guidanceScale"],o),l(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const s=l(t,["safetyFilterLevel"]);e!==void 0&&s!=null&&a(e,["parameters","safetySetting"],s);const u=l(t,["personGeneration"]);e!==void 0&&u!=null&&a(e,["parameters","personGeneration"],u);const c=l(t,["includeSafetyAttributes"]);e!==void 0&&c!=null&&a(e,["parameters","includeSafetyAttributes"],c);const d=l(t,["includeRaiReason"]);e!==void 0&&d!=null&&a(e,["parameters","includeRaiReason"],d);const f=l(t,["language"]);e!==void 0&&f!=null&&a(e,["parameters","language"],f);const p=l(t,["outputMimeType"]);e!==void 0&&p!=null&&a(e,["parameters","outputOptions","mimeType"],p);const h=l(t,["outputCompressionQuality"]);if(e!==void 0&&h!=null&&a(e,["parameters","outputOptions","compressionQuality"],h),l(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(l(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const y=l(t,["imageSize"]);if(e!==void 0&&y!=null&&a(e,["parameters","sampleImageSize"],y),l(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function CC(t,e){const n={},r=l(t,["outputGcsUri"]);e!==void 0&&r!=null&&a(e,["parameters","storageUri"],r);const i=l(t,["negativePrompt"]);e!==void 0&&i!=null&&a(e,["parameters","negativePrompt"],i);const o=l(t,["numberOfImages"]);e!==void 0&&o!=null&&a(e,["parameters","sampleCount"],o);const s=l(t,["aspectRatio"]);e!==void 0&&s!=null&&a(e,["parameters","aspectRatio"],s);const u=l(t,["guidanceScale"]);e!==void 0&&u!=null&&a(e,["parameters","guidanceScale"],u);const c=l(t,["seed"]);e!==void 0&&c!=null&&a(e,["parameters","seed"],c);const d=l(t,["safetyFilterLevel"]);e!==void 0&&d!=null&&a(e,["parameters","safetySetting"],d);const f=l(t,["personGeneration"]);e!==void 0&&f!=null&&a(e,["parameters","personGeneration"],f);const p=l(t,["includeSafetyAttributes"]);e!==void 0&&p!=null&&a(e,["parameters","includeSafetyAttributes"],p);const h=l(t,["includeRaiReason"]);e!==void 0&&h!=null&&a(e,["parameters","includeRaiReason"],h);const y=l(t,["language"]);e!==void 0&&y!=null&&a(e,["parameters","language"],y);const T=l(t,["outputMimeType"]);e!==void 0&&T!=null&&a(e,["parameters","outputOptions","mimeType"],T);const E=l(t,["outputCompressionQuality"]);e!==void 0&&E!=null&&a(e,["parameters","outputOptions","compressionQuality"],E);const S=l(t,["addWatermark"]);e!==void 0&&S!=null&&a(e,["parameters","addWatermark"],S);const _=l(t,["labels"]);e!==void 0&&_!=null&&a(e,["labels"],_);const g=l(t,["imageSize"]);e!==void 0&&g!=null&&a(e,["parameters","sampleImageSize"],g);const v=l(t,["enhancePrompt"]);return e!==void 0&&v!=null&&a(e,["parameters","enhancePrompt"],v),n}function wC(t,e){const n={},r=l(e,["model"]);r!=null&&a(n,["_url","model"],Y(t,r));const i=l(e,["prompt"]);i!=null&&a(n,["instances[0]","prompt"],i);const o=l(e,["config"]);return o!=null&&IC(o,n),n}function SC(t,e){const n={},r=l(e,["model"]);r!=null&&a(n,["_url","model"],Y(t,r));const i=l(e,["prompt"]);i!=null&&a(n,["instances[0]","prompt"],i);const o=l(e,["config"]);return o!=null&&CC(o,n),n}function xC(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const r=l(t,["predictions"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>OC(s))),a(e,["generatedImages"],o)}const i=l(t,["positivePromptSafetyAttributes"]);return i!=null&&a(e,["positivePromptSafetyAttributes"],Eg(i)),e}function AC(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const r=l(t,["predictions"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>Bs(s))),a(e,["generatedImages"],o)}const i=l(t,["positivePromptSafetyAttributes"]);return i!=null&&a(e,["positivePromptSafetyAttributes"],Ig(i)),e}function NC(t,e){const n={},r=l(t,["numberOfVideos"]);if(e!==void 0&&r!=null&&a(e,["parameters","sampleCount"],r),l(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(l(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const i=l(t,["durationSeconds"]);if(e!==void 0&&i!=null&&a(e,["parameters","durationSeconds"],i),l(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const o=l(t,["aspectRatio"]);e!==void 0&&o!=null&&a(e,["parameters","aspectRatio"],o);const s=l(t,["resolution"]);e!==void 0&&s!=null&&a(e,["parameters","resolution"],s);const u=l(t,["personGeneration"]);if(e!==void 0&&u!=null&&a(e,["parameters","personGeneration"],u),l(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const c=l(t,["negativePrompt"]);e!==void 0&&c!=null&&a(e,["parameters","negativePrompt"],c);const d=l(t,["enhancePrompt"]);if(e!==void 0&&d!=null&&a(e,["parameters","enhancePrompt"],d),l(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const f=l(t,["lastFrame"]);e!==void 0&&f!=null&&a(e,["instances[0]","lastFrame"],Gs(f));const p=l(t,["referenceImages"]);if(e!==void 0&&p!=null){let h=p;Array.isArray(h)&&(h=h.map(y=>Rw(y))),a(e,["instances[0]","referenceImages"],h)}if(l(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(l(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function kC(t,e){const n={},r=l(t,["numberOfVideos"]);e!==void 0&&r!=null&&a(e,["parameters","sampleCount"],r);const i=l(t,["outputGcsUri"]);e!==void 0&&i!=null&&a(e,["parameters","storageUri"],i);const o=l(t,["fps"]);e!==void 0&&o!=null&&a(e,["parameters","fps"],o);const s=l(t,["durationSeconds"]);e!==void 0&&s!=null&&a(e,["parameters","durationSeconds"],s);const u=l(t,["seed"]);e!==void 0&&u!=null&&a(e,["parameters","seed"],u);const c=l(t,["aspectRatio"]);e!==void 0&&c!=null&&a(e,["parameters","aspectRatio"],c);const d=l(t,["resolution"]);e!==void 0&&d!=null&&a(e,["parameters","resolution"],d);const f=l(t,["personGeneration"]);e!==void 0&&f!=null&&a(e,["parameters","personGeneration"],f);const p=l(t,["pubsubTopic"]);e!==void 0&&p!=null&&a(e,["parameters","pubsubTopic"],p);const h=l(t,["negativePrompt"]);e!==void 0&&h!=null&&a(e,["parameters","negativePrompt"],h);const y=l(t,["enhancePrompt"]);e!==void 0&&y!=null&&a(e,["parameters","enhancePrompt"],y);const T=l(t,["generateAudio"]);e!==void 0&&T!=null&&a(e,["parameters","generateAudio"],T);const E=l(t,["lastFrame"]);e!==void 0&&E!=null&&a(e,["instances[0]","lastFrame"],_t(E));const S=l(t,["referenceImages"]);if(e!==void 0&&S!=null){let v=S;Array.isArray(v)&&(v=v.map(I=>Pw(I))),a(e,["instances[0]","referenceImages"],v)}const _=l(t,["mask"]);e!==void 0&&_!=null&&a(e,["instances[0]","mask"],kw(_));const g=l(t,["compressionQuality"]);return e!==void 0&&g!=null&&a(e,["parameters","compressionQuality"],g),n}function RC(t){const e={},n=l(t,["name"]);n!=null&&a(e,["name"],n);const r=l(t,["metadata"]);r!=null&&a(e,["metadata"],r);const i=l(t,["done"]);i!=null&&a(e,["done"],i);const o=l(t,["error"]);o!=null&&a(e,["error"],o);const s=l(t,["response","generateVideoResponse"]);return s!=null&&a(e,["response"],bC(s)),e}function PC(t){const e={},n=l(t,["name"]);n!=null&&a(e,["name"],n);const r=l(t,["metadata"]);r!=null&&a(e,["metadata"],r);const i=l(t,["done"]);i!=null&&a(e,["done"],i);const o=l(t,["error"]);o!=null&&a(e,["error"],o);const s=l(t,["response"]);return s!=null&&a(e,["response"],LC(s)),e}function MC(t,e){const n={},r=l(e,["model"]);r!=null&&a(n,["_url","model"],Y(t,r));const i=l(e,["prompt"]);i!=null&&a(n,["instances[0]","prompt"],i);const o=l(e,["image"]);o!=null&&a(n,["instances[0]","image"],Gs(o));const s=l(e,["video"]);s!=null&&a(n,["instances[0]","video"],Sg(s));const u=l(e,["source"]);u!=null&&UC(u,n);const c=l(e,["config"]);return c!=null&&NC(c,n),n}function DC(t,e){const n={},r=l(e,["model"]);r!=null&&a(n,["_url","model"],Y(t,r));const i=l(e,["prompt"]);i!=null&&a(n,["instances[0]","prompt"],i);const o=l(e,["image"]);o!=null&&a(n,["instances[0]","image"],_t(o));const s=l(e,["video"]);s!=null&&a(n,["instances[0]","video"],xg(s));const u=l(e,["source"]);u!=null&&FC(u,n);const c=l(e,["config"]);return c!=null&&kC(c,n),n}function bC(t){const e={},n=l(t,["generatedSamples"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>HC(s))),a(e,["generatedVideos"],o)}const r=l(t,["raiMediaFilteredCount"]);r!=null&&a(e,["raiMediaFilteredCount"],r);const i=l(t,["raiMediaFilteredReasons"]);return i!=null&&a(e,["raiMediaFilteredReasons"],i),e}function LC(t){const e={},n=l(t,["videos"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>BC(s))),a(e,["generatedVideos"],o)}const r=l(t,["raiMediaFilteredCount"]);r!=null&&a(e,["raiMediaFilteredCount"],r);const i=l(t,["raiMediaFilteredReasons"]);return i!=null&&a(e,["raiMediaFilteredReasons"],i),e}function UC(t,e){const n={},r=l(t,["prompt"]);e!==void 0&&r!=null&&a(e,["instances[0]","prompt"],r);const i=l(t,["image"]);e!==void 0&&i!=null&&a(e,["instances[0]","image"],Gs(i));const o=l(t,["video"]);return e!==void 0&&o!=null&&a(e,["instances[0]","video"],Sg(o)),n}function FC(t,e){const n={},r=l(t,["prompt"]);e!==void 0&&r!=null&&a(e,["instances[0]","prompt"],r);const i=l(t,["image"]);e!==void 0&&i!=null&&a(e,["instances[0]","image"],_t(i));const o=l(t,["video"]);return e!==void 0&&o!=null&&a(e,["instances[0]","video"],xg(o)),n}function OC(t){const e={},n=l(t,["_self"]);n!=null&&a(e,["image"],YC(n));const r=l(t,["raiFilteredReason"]);r!=null&&a(e,["raiFilteredReason"],r);const i=l(t,["_self"]);return i!=null&&a(e,["safetyAttributes"],Eg(i)),e}function Bs(t){const e={},n=l(t,["_self"]);n!=null&&a(e,["image"],Tg(n));const r=l(t,["raiFilteredReason"]);r!=null&&a(e,["raiFilteredReason"],r);const i=l(t,["_self"]);i!=null&&a(e,["safetyAttributes"],Ig(i));const o=l(t,["prompt"]);return o!=null&&a(e,["enhancedPrompt"],o),e}function VC(t){const e={},n=l(t,["_self"]);n!=null&&a(e,["mask"],Tg(n));const r=l(t,["labels"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>o)),a(e,["labels"],i)}return e}function HC(t){const e={},n=l(t,["video"]);return n!=null&&a(e,["video"],Aw(n)),e}function BC(t){const e={},n=l(t,["_self"]);return n!=null&&a(e,["video"],Nw(n)),e}function GC(t){const e={},n=l(t,["modelSelectionConfig"]);n!=null&&a(e,["modelConfig"],n);const r=l(t,["responseJsonSchema"]);r!=null&&a(e,["responseJsonSchema"],r);const i=l(t,["audioTimestamp"]);i!=null&&a(e,["audioTimestamp"],i);const o=l(t,["candidateCount"]);o!=null&&a(e,["candidateCount"],o);const s=l(t,["enableAffectiveDialog"]);s!=null&&a(e,["enableAffectiveDialog"],s);const u=l(t,["frequencyPenalty"]);u!=null&&a(e,["frequencyPenalty"],u);const c=l(t,["logprobs"]);c!=null&&a(e,["logprobs"],c);const d=l(t,["maxOutputTokens"]);d!=null&&a(e,["maxOutputTokens"],d);const f=l(t,["mediaResolution"]);f!=null&&a(e,["mediaResolution"],f);const p=l(t,["presencePenalty"]);p!=null&&a(e,["presencePenalty"],p);const h=l(t,["responseLogprobs"]);h!=null&&a(e,["responseLogprobs"],h);const y=l(t,["responseMimeType"]);y!=null&&a(e,["responseMimeType"],y);const T=l(t,["responseModalities"]);T!=null&&a(e,["responseModalities"],T);const E=l(t,["responseSchema"]);E!=null&&a(e,["responseSchema"],E);const S=l(t,["routingConfig"]);S!=null&&a(e,["routingConfig"],S);const _=l(t,["seed"]);_!=null&&a(e,["seed"],_);const g=l(t,["speechConfig"]);g!=null&&a(e,["speechConfig"],Cg(g));const v=l(t,["stopSequences"]);v!=null&&a(e,["stopSequences"],v);const I=l(t,["temperature"]);I!=null&&a(e,["temperature"],I);const C=l(t,["thinkingConfig"]);C!=null&&a(e,["thinkingConfig"],C);const w=l(t,["topK"]);w!=null&&a(e,["topK"],w);const x=l(t,["topP"]);if(x!=null&&a(e,["topP"],x),l(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function qC(t,e){const n={},r=l(e,["model"]);return r!=null&&a(n,["_url","name"],Y(t,r)),n}function $C(t,e){const n={},r=l(e,["model"]);return r!=null&&a(n,["_url","name"],Y(t,r)),n}function zC(t){const e={};if(l(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=l(t,["enableWidget"]);return n!=null&&a(e,["enableWidget"],n),e}function WC(t){const e={};if(l(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(l(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=l(t,["timeRangeFilter"]);return n!=null&&a(e,["timeRangeFilter"],n),e}function JC(t){const e={},n=l(t,["aspectRatio"]);n!=null&&a(e,["aspectRatio"],n);const r=l(t,["imageSize"]);if(r!=null&&a(e,["imageSize"],r),l(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(l(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function KC(t){const e={},n=l(t,["aspectRatio"]);n!=null&&a(e,["aspectRatio"],n);const r=l(t,["imageSize"]);r!=null&&a(e,["imageSize"],r);const i=l(t,["outputMimeType"]);i!=null&&a(e,["imageOutputOptions","mimeType"],i);const o=l(t,["outputCompressionQuality"]);return o!=null&&a(e,["imageOutputOptions","compressionQuality"],o),e}function YC(t){const e={},n=l(t,["bytesBase64Encoded"]);n!=null&&a(e,["imageBytes"],Mn(n));const r=l(t,["mimeType"]);return r!=null&&a(e,["mimeType"],r),e}function Tg(t){const e={},n=l(t,["gcsUri"]);n!=null&&a(e,["gcsUri"],n);const r=l(t,["bytesBase64Encoded"]);r!=null&&a(e,["imageBytes"],Mn(r));const i=l(t,["mimeType"]);return i!=null&&a(e,["mimeType"],i),e}function Gs(t){const e={};if(l(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=l(t,["imageBytes"]);n!=null&&a(e,["bytesBase64Encoded"],Mn(n));const r=l(t,["mimeType"]);return r!=null&&a(e,["mimeType"],r),e}function _t(t){const e={},n=l(t,["gcsUri"]);n!=null&&a(e,["gcsUri"],n);const r=l(t,["imageBytes"]);r!=null&&a(e,["bytesBase64Encoded"],Mn(r));const i=l(t,["mimeType"]);return i!=null&&a(e,["mimeType"],i),e}function QC(t,e,n){const r={},i=l(e,["pageSize"]);n!==void 0&&i!=null&&a(n,["_query","pageSize"],i);const o=l(e,["pageToken"]);n!==void 0&&o!=null&&a(n,["_query","pageToken"],o);const s=l(e,["filter"]);n!==void 0&&s!=null&&a(n,["_query","filter"],s);const u=l(e,["queryBase"]);return n!==void 0&&u!=null&&a(n,["_url","models_url"],fg(t,u)),r}function XC(t,e,n){const r={},i=l(e,["pageSize"]);n!==void 0&&i!=null&&a(n,["_query","pageSize"],i);const o=l(e,["pageToken"]);n!==void 0&&o!=null&&a(n,["_query","pageToken"],o);const s=l(e,["filter"]);n!==void 0&&s!=null&&a(n,["_query","filter"],s);const u=l(e,["queryBase"]);return n!==void 0&&u!=null&&a(n,["_url","models_url"],fg(t,u)),r}function ZC(t,e){const n={},r=l(e,["config"]);return r!=null&&QC(t,r,n),n}function jC(t,e){const n={},r=l(e,["config"]);return r!=null&&XC(t,r,n),n}function ew(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const r=l(t,["nextPageToken"]);r!=null&&a(e,["nextPageToken"],r);const i=l(t,["_self"]);if(i!=null){let o=pg(i);Array.isArray(o)&&(o=o.map(s=>Da(s))),a(e,["models"],o)}return e}function tw(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const r=l(t,["nextPageToken"]);r!=null&&a(e,["nextPageToken"],r);const i=l(t,["_self"]);if(i!=null){let o=pg(i);Array.isArray(o)&&(o=o.map(s=>ba(s))),a(e,["models"],o)}return e}function nw(t){const e={},n=l(t,["maskMode"]);n!=null&&a(e,["maskMode"],n);const r=l(t,["segmentationClasses"]);r!=null&&a(e,["maskClasses"],r);const i=l(t,["maskDilation"]);return i!=null&&a(e,["dilation"],i),e}function Da(t){const e={},n=l(t,["name"]);n!=null&&a(e,["name"],n);const r=l(t,["displayName"]);r!=null&&a(e,["displayName"],r);const i=l(t,["description"]);i!=null&&a(e,["description"],i);const o=l(t,["version"]);o!=null&&a(e,["version"],o);const s=l(t,["_self"]);s!=null&&a(e,["tunedModelInfo"],vw(s));const u=l(t,["inputTokenLimit"]);u!=null&&a(e,["inputTokenLimit"],u);const c=l(t,["outputTokenLimit"]);c!=null&&a(e,["outputTokenLimit"],c);const d=l(t,["supportedGenerationMethods"]);d!=null&&a(e,["supportedActions"],d);const f=l(t,["temperature"]);f!=null&&a(e,["temperature"],f);const p=l(t,["maxTemperature"]);p!=null&&a(e,["maxTemperature"],p);const h=l(t,["topP"]);h!=null&&a(e,["topP"],h);const y=l(t,["topK"]);y!=null&&a(e,["topK"],y);const T=l(t,["thinking"]);return T!=null&&a(e,["thinking"],T),e}function ba(t){const e={},n=l(t,["name"]);n!=null&&a(e,["name"],n);const r=l(t,["displayName"]);r!=null&&a(e,["displayName"],r);const i=l(t,["description"]);i!=null&&a(e,["description"],i);const o=l(t,["versionId"]);o!=null&&a(e,["version"],o);const s=l(t,["deployedModels"]);if(s!=null){let p=s;Array.isArray(p)&&(p=p.map(h=>mC(h))),a(e,["endpoints"],p)}const u=l(t,["labels"]);u!=null&&a(e,["labels"],u);const c=l(t,["_self"]);c!=null&&a(e,["tunedModelInfo"],_w(c));const d=l(t,["defaultCheckpointId"]);d!=null&&a(e,["defaultCheckpointId"],d);const f=l(t,["checkpoints"]);if(f!=null){let p=f;Array.isArray(p)&&(p=p.map(h=>h)),a(e,["checkpoints"],p)}return e}function rw(t){const e={},n=l(t,["mediaResolution"]);n!=null&&a(e,["mediaResolution"],n);const r=l(t,["codeExecutionResult"]);r!=null&&a(e,["codeExecutionResult"],r);const i=l(t,["executableCode"]);i!=null&&a(e,["executableCode"],i);const o=l(t,["fileData"]);o!=null&&a(e,["fileData"],gC(o));const s=l(t,["functionCall"]);s!=null&&a(e,["functionCall"],yC(s));const u=l(t,["functionResponse"]);u!=null&&a(e,["functionResponse"],u);const c=l(t,["inlineData"]);c!=null&&a(e,["inlineData"],GI(c));const d=l(t,["text"]);d!=null&&a(e,["text"],d);const f=l(t,["thought"]);f!=null&&a(e,["thought"],f);const p=l(t,["thoughtSignature"]);p!=null&&a(e,["thoughtSignature"],p);const h=l(t,["videoMetadata"]);return h!=null&&a(e,["videoMetadata"],h),e}function iw(t){const e={},n=l(t,["productImage"]);return n!=null&&a(e,["image"],_t(n)),e}function ow(t,e){const n={},r=l(t,["numberOfImages"]);e!==void 0&&r!=null&&a(e,["parameters","sampleCount"],r);const i=l(t,["baseSteps"]);e!==void 0&&i!=null&&a(e,["parameters","baseSteps"],i);const o=l(t,["outputGcsUri"]);e!==void 0&&o!=null&&a(e,["parameters","storageUri"],o);const s=l(t,["seed"]);e!==void 0&&s!=null&&a(e,["parameters","seed"],s);const u=l(t,["safetyFilterLevel"]);e!==void 0&&u!=null&&a(e,["parameters","safetySetting"],u);const c=l(t,["personGeneration"]);e!==void 0&&c!=null&&a(e,["parameters","personGeneration"],c);const d=l(t,["addWatermark"]);e!==void 0&&d!=null&&a(e,["parameters","addWatermark"],d);const f=l(t,["outputMimeType"]);e!==void 0&&f!=null&&a(e,["parameters","outputOptions","mimeType"],f);const p=l(t,["outputCompressionQuality"]);e!==void 0&&p!=null&&a(e,["parameters","outputOptions","compressionQuality"],p);const h=l(t,["enhancePrompt"]);e!==void 0&&h!=null&&a(e,["parameters","enhancePrompt"],h);const y=l(t,["labels"]);return e!==void 0&&y!=null&&a(e,["labels"],y),n}function sw(t,e){const n={},r=l(e,["model"]);r!=null&&a(n,["_url","model"],Y(t,r));const i=l(e,["source"]);i!=null&&aw(i,n);const o=l(e,["config"]);return o!=null&&ow(o,n),n}function lw(t){const e={},n=l(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>Bs(i))),a(e,["generatedImages"],r)}return e}function aw(t,e){const n={},r=l(t,["prompt"]);e!==void 0&&r!=null&&a(e,["instances[0]","prompt"],r);const i=l(t,["personImage"]);e!==void 0&&i!=null&&a(e,["instances[0]","personImage","image"],_t(i));const o=l(t,["productImages"]);if(e!==void 0&&o!=null){let s=o;Array.isArray(s)&&(s=s.map(u=>iw(u))),a(e,["instances[0]","productImages"],s)}return n}function uw(t){const e={},n=l(t,["referenceImage"]);n!=null&&a(e,["referenceImage"],_t(n));const r=l(t,["referenceId"]);r!=null&&a(e,["referenceId"],r);const i=l(t,["referenceType"]);i!=null&&a(e,["referenceType"],i);const o=l(t,["maskImageConfig"]);o!=null&&a(e,["maskImageConfig"],nw(o));const s=l(t,["controlImageConfig"]);s!=null&&a(e,["controlImageConfig"],YI(s));const u=l(t,["styleImageConfig"]);u!=null&&a(e,["styleImageConfig"],u);const c=l(t,["subjectImageConfig"]);return c!=null&&a(e,["subjectImageConfig"],c),e}function Eg(t){const e={},n=l(t,["safetyAttributes","categories"]);n!=null&&a(e,["categories"],n);const r=l(t,["safetyAttributes","scores"]);r!=null&&a(e,["scores"],r);const i=l(t,["contentType"]);return i!=null&&a(e,["contentType"],i),e}function Ig(t){const e={},n=l(t,["safetyAttributes","categories"]);n!=null&&a(e,["categories"],n);const r=l(t,["safetyAttributes","scores"]);r!=null&&a(e,["scores"],r);const i=l(t,["contentType"]);return i!=null&&a(e,["contentType"],i),e}function cw(t){const e={},n=l(t,["category"]);if(n!=null&&a(e,["category"],n),l(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=l(t,["threshold"]);return r!=null&&a(e,["threshold"],r),e}function dw(t){const e={},n=l(t,["image"]);return n!=null&&a(e,["image"],_t(n)),e}function fw(t,e){const n={},r=l(t,["mode"]);e!==void 0&&r!=null&&a(e,["parameters","mode"],r);const i=l(t,["maxPredictions"]);e!==void 0&&i!=null&&a(e,["parameters","maxPredictions"],i);const o=l(t,["confidenceThreshold"]);e!==void 0&&o!=null&&a(e,["parameters","confidenceThreshold"],o);const s=l(t,["maskDilation"]);e!==void 0&&s!=null&&a(e,["parameters","maskDilation"],s);const u=l(t,["binaryColorThreshold"]);e!==void 0&&u!=null&&a(e,["parameters","binaryColorThreshold"],u);const c=l(t,["labels"]);return e!==void 0&&c!=null&&a(e,["labels"],c),n}function pw(t,e){const n={},r=l(e,["model"]);r!=null&&a(n,["_url","model"],Y(t,r));const i=l(e,["source"]);i!=null&&mw(i,n);const o=l(e,["config"]);return o!=null&&fw(o,n),n}function hw(t){const e={},n=l(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>VC(i))),a(e,["generatedMasks"],r)}return e}function mw(t,e){const n={},r=l(t,["prompt"]);e!==void 0&&r!=null&&a(e,["instances[0]","prompt"],r);const i=l(t,["image"]);e!==void 0&&i!=null&&a(e,["instances[0]","image"],_t(i));const o=l(t,["scribbleImage"]);return e!==void 0&&o!=null&&a(e,["instances[0]","scribble"],dw(o)),n}function Cg(t){const e={},n=l(t,["languageCode"]);n!=null&&a(e,["languageCode"],n);const r=l(t,["voiceConfig"]);if(r!=null&&a(e,["voiceConfig"],r),l(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function gw(t){const e={},n=l(t,["functionCallingConfig"]);n!=null&&a(e,["functionCallingConfig"],vC(n));const r=l(t,["retrievalConfig"]);return r!=null&&a(e,["retrievalConfig"],r),e}function yw(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(p=>p)),a(e,["functionDeclarations"],f)}if(l(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=l(t,["googleSearchRetrieval"]);r!=null&&a(e,["googleSearchRetrieval"],r);const i=l(t,["computerUse"]);i!=null&&a(e,["computerUse"],i);const o=l(t,["fileSearch"]);o!=null&&a(e,["fileSearch"],o);const s=l(t,["codeExecution"]);if(s!=null&&a(e,["codeExecution"],s),l(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=l(t,["googleMaps"]);u!=null&&a(e,["googleMaps"],zC(u));const c=l(t,["googleSearch"]);c!=null&&a(e,["googleSearch"],WC(c));const d=l(t,["urlContext"]);return d!=null&&a(e,["urlContext"],d),e}function wg(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(h=>_C(h))),a(e,["functionDeclarations"],p)}const r=l(t,["retrieval"]);r!=null&&a(e,["retrieval"],r);const i=l(t,["googleSearchRetrieval"]);i!=null&&a(e,["googleSearchRetrieval"],i);const o=l(t,["computerUse"]);if(o!=null&&a(e,["computerUse"],o),l(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const s=l(t,["codeExecution"]);s!=null&&a(e,["codeExecution"],s);const u=l(t,["enterpriseWebSearch"]);u!=null&&a(e,["enterpriseWebSearch"],u);const c=l(t,["googleMaps"]);c!=null&&a(e,["googleMaps"],c);const d=l(t,["googleSearch"]);d!=null&&a(e,["googleSearch"],d);const f=l(t,["urlContext"]);return f!=null&&a(e,["urlContext"],f),e}function vw(t){const e={},n=l(t,["baseModel"]);n!=null&&a(e,["baseModel"],n);const r=l(t,["createTime"]);r!=null&&a(e,["createTime"],r);const i=l(t,["updateTime"]);return i!=null&&a(e,["updateTime"],i),e}function _w(t){const e={},n=l(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&a(e,["baseModel"],n);const r=l(t,["createTime"]);r!=null&&a(e,["createTime"],r);const i=l(t,["updateTime"]);return i!=null&&a(e,["updateTime"],i),e}function Tw(t,e){const n={},r=l(t,["displayName"]);e!==void 0&&r!=null&&a(e,["displayName"],r);const i=l(t,["description"]);e!==void 0&&i!=null&&a(e,["description"],i);const o=l(t,["defaultCheckpointId"]);return e!==void 0&&o!=null&&a(e,["defaultCheckpointId"],o),n}function Ew(t,e){const n={},r=l(t,["displayName"]);e!==void 0&&r!=null&&a(e,["displayName"],r);const i=l(t,["description"]);e!==void 0&&i!=null&&a(e,["description"],i);const o=l(t,["defaultCheckpointId"]);return e!==void 0&&o!=null&&a(e,["defaultCheckpointId"],o),n}function Iw(t,e){const n={},r=l(e,["model"]);r!=null&&a(n,["_url","name"],Y(t,r));const i=l(e,["config"]);return i!=null&&Tw(i,n),n}function Cw(t,e){const n={},r=l(e,["model"]);r!=null&&a(n,["_url","model"],Y(t,r));const i=l(e,["config"]);return i!=null&&Ew(i,n),n}function ww(t,e){const n={},r=l(t,["outputGcsUri"]);e!==void 0&&r!=null&&a(e,["parameters","storageUri"],r);const i=l(t,["safetyFilterLevel"]);e!==void 0&&i!=null&&a(e,["parameters","safetySetting"],i);const o=l(t,["personGeneration"]);e!==void 0&&o!=null&&a(e,["parameters","personGeneration"],o);const s=l(t,["includeRaiReason"]);e!==void 0&&s!=null&&a(e,["parameters","includeRaiReason"],s);const u=l(t,["outputMimeType"]);e!==void 0&&u!=null&&a(e,["parameters","outputOptions","mimeType"],u);const c=l(t,["outputCompressionQuality"]);e!==void 0&&c!=null&&a(e,["parameters","outputOptions","compressionQuality"],c);const d=l(t,["enhanceInputImage"]);e!==void 0&&d!=null&&a(e,["parameters","upscaleConfig","enhanceInputImage"],d);const f=l(t,["imagePreservationFactor"]);e!==void 0&&f!=null&&a(e,["parameters","upscaleConfig","imagePreservationFactor"],f);const p=l(t,["labels"]);e!==void 0&&p!=null&&a(e,["labels"],p);const h=l(t,["numberOfImages"]);e!==void 0&&h!=null&&a(e,["parameters","sampleCount"],h);const y=l(t,["mode"]);return e!==void 0&&y!=null&&a(e,["parameters","mode"],y),n}function Sw(t,e){const n={},r=l(e,["model"]);r!=null&&a(n,["_url","model"],Y(t,r));const i=l(e,["image"]);i!=null&&a(n,["instances[0]","image"],_t(i));const o=l(e,["upscaleFactor"]);o!=null&&a(n,["parameters","upscaleConfig","upscaleFactor"],o);const s=l(e,["config"]);return s!=null&&ww(s,n),n}function xw(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const r=l(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>Bs(o))),a(e,["generatedImages"],i)}return e}function Aw(t){const e={},n=l(t,["uri"]);n!=null&&a(e,["uri"],n);const r=l(t,["encodedVideo"]);r!=null&&a(e,["videoBytes"],Mn(r));const i=l(t,["encoding"]);return i!=null&&a(e,["mimeType"],i),e}function Nw(t){const e={},n=l(t,["gcsUri"]);n!=null&&a(e,["uri"],n);const r=l(t,["bytesBase64Encoded"]);r!=null&&a(e,["videoBytes"],Mn(r));const i=l(t,["mimeType"]);return i!=null&&a(e,["mimeType"],i),e}function kw(t){const e={},n=l(t,["image"]);n!=null&&a(e,["_self"],_t(n));const r=l(t,["maskMode"]);return r!=null&&a(e,["maskMode"],r),e}function Rw(t){const e={},n=l(t,["image"]);n!=null&&a(e,["image"],Gs(n));const r=l(t,["referenceType"]);return r!=null&&a(e,["referenceType"],r),e}function Pw(t){const e={},n=l(t,["image"]);n!=null&&a(e,["image"],_t(n));const r=l(t,["referenceType"]);return r!=null&&a(e,["referenceType"],r),e}function Sg(t){const e={},n=l(t,["uri"]);n!=null&&a(e,["uri"],n);const r=l(t,["videoBytes"]);r!=null&&a(e,["encodedVideo"],Mn(r));const i=l(t,["mimeType"]);return i!=null&&a(e,["encoding"],i),e}function xg(t){const e={},n=l(t,["uri"]);n!=null&&a(e,["gcsUri"],n);const r=l(t,["videoBytes"]);r!=null&&a(e,["bytesBase64Encoded"],Mn(r));const i=l(t,["mimeType"]);return i!=null&&a(e,["mimeType"],i),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Mw="Content-Type",Dw="X-Server-Timeout",bw="User-Agent",La="x-goog-api-client",Lw="1.30.0",Uw=`google-genai-sdk/${Lw}`,Fw="v1beta1",Ow="v1beta",Yf=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class Vw{constructor(e){var n,r;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const i={};this.clientOptions.vertexai?(i.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:Fw,i.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(i.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:Ow,i.baseUrl="https://generativelanguage.googleapis.com/"),i.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=i,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(i,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const r=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&r.push(e.apiVersion),r.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,r){const i=[this.getRequestUrlInternal(n)];return r&&i.push(this.getBaseResourcePath()),e!==""&&i.push(e),new URL(`${i.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,n,r);if(e.queryParams)for(const[s,u]of Object.entries(e.queryParams))i.searchParams.append(s,String(u));let o={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else o.body=e.body;return o=await this.includeExtraHttpOptionsToRequestInit(o,n,i.toString(),e.abortSignal),this.unaryApiCall(i,o,e.httpMethod)}patchHttpOptions(e,n){const r=JSON.parse(JSON.stringify(e));for(const[i,o]of Object.entries(n))typeof o=="object"?r[i]=Object.assign(Object.assign({},r[i]),o):o!==void 0&&(r[i]=o);return r}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,n,r);(!i.searchParams.has("alt")||i.searchParams.get("alt")!=="sse")&&i.searchParams.set("alt","sse");let o={};return o.body=e.body,o=await this.includeExtraHttpOptionsToRequestInit(o,n,i.toString(),e.abortSignal),this.streamApiCall(i,o,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,r,i){if(n&&n.timeout||i){const o=new AbortController,s=o.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const u=setTimeout(()=>o.abort(),n.timeout);u&&typeof u.unref=="function"&&u.unref()}i&&i.addEventListener("abort",()=>{o.abort()}),e.signal=s}return n&&n.extraBody!==null&&Hw(e,n.extraBody),e.headers=await this.getHeadersInternal(n,r),e}async unaryApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async i=>(await Qf(i),new Ra(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}async streamApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async i=>(await Qf(i),this.processStreamResponse(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}processStreamResponse(e){var n;return Nr(this,arguments,function*(){const i=(n=e==null?void 0:e.body)===null||n===void 0?void 0:n.getReader(),o=new TextDecoder("utf-8");if(!i)throw new Error("Response body is empty");try{let s="";for(;;){const{done:u,value:c}=yield ie(i.read());if(u){if(s.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const d=o.decode(c,{stream:!0});try{const p=JSON.parse(d);if("error"in p){const h=JSON.parse(JSON.stringify(p.error)),y=h.status,T=h.code,E=`got status: ${y}. ${JSON.stringify(p)}`;if(T>=400&&T<600)throw new Vs({message:E,status:T})}}catch(p){if(p.name==="ApiError")throw p}s+=d;let f=s.match(Yf);for(;f;){const p=f[1];try{const h=new Response(p,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield ie(new Ra(h)),s=s.slice(f[0].length),f=s.match(Yf)}catch(h){throw new Error(`exception parsing stream chunk ${p}. ${h}`)}}}}finally{i.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(r=>{throw new Error(`exception ${r} sending request`)})}getDefaultHeaders(){const e={},n=Uw+" "+this.clientOptions.userAgentExtra;return e[bw]=n,e[La]=n,e[Mw]="application/json",e}async getHeadersInternal(e,n){const r=new Headers;if(e&&e.headers){for(const[i,o]of Object.entries(e.headers))r.append(i,o);e.timeout&&e.timeout>0&&r.append(Dw,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(r,n),r}getFileName(e){var n;let r="";return typeof e=="string"&&(r=e.replace(/[/\\]+$/,""),r=(n=r.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),r}async uploadFile(e,n){var r;const i={};n!=null&&(i.mimeType=n.mimeType,i.name=n.name,i.displayName=n.displayName),i.name&&!i.name.startsWith("files/")&&(i.name=`files/${i.name}`);const o=this.clientOptions.uploader,s=await o.stat(e);i.sizeBytes=String(s.size);const u=(r=n==null?void 0:n.mimeType)!==null&&r!==void 0?r:s.type;if(u===void 0||u==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");i.mimeType=u;const c={file:i},d=this.getFileName(e),f=b("upload/v1beta/files",c._url),p=await this.fetchUploadUrl(f,i.sizeBytes,i.mimeType,d,c,n==null?void 0:n.httpOptions);return o.upload(e,p,this)}async uploadFileToFileSearchStore(e,n,r){var i;const o=this.clientOptions.uploader,s=await o.stat(n),u=String(s.size),c=(i=r==null?void 0:r.mimeType)!==null&&i!==void 0?i:s.type;if(c===void 0||c==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const d=`upload/v1beta/${e}:uploadToFileSearchStore`,f=this.getFileName(n),p={};r!=null&&r.customMetadata&&(p.customMetadata=r.customMetadata),r!=null&&r.chunkingConfig&&(p.chunkingConfig=r.chunkingConfig);const h=await this.fetchUploadUrl(d,u,c,f,p,r==null?void 0:r.httpOptions);return o.uploadToFileSearchStore(n,h,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,r,i,o,s){var u;let c={};s?c=s:c={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${r}`},i?{"X-Goog-Upload-File-Name":i}:{})};const d=await this.request({path:e,body:JSON.stringify(o),httpMethod:"POST",httpOptions:c});if(!d||!(d!=null&&d.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const f=(u=d==null?void 0:d.headers)===null||u===void 0?void 0:u["x-goog-upload-url"];if(f===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return f}}async function Qf(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let r;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?r=await t.json():r={error:{message:await t.text(),code:t.status,status:t.statusText}};const i=JSON.stringify(r);throw n>=400&&n<600?new Vs({message:i,status:n}):new Error(i)}}function Hw(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const o=JSON.parse(t.body);if(typeof o=="object"&&o!==null&&!Array.isArray(o))n=o;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function r(o,s){const u=Object.assign({},o);for(const c in s)if(Object.prototype.hasOwnProperty.call(s,c)){const d=s[c],f=u[c];d&&typeof d=="object"&&!Array.isArray(d)&&f&&typeof f=="object"&&!Array.isArray(f)?u[c]=r(f,d):(f&&d&&typeof f!=typeof d&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${c}". Original type: ${typeof f}, New type: ${typeof d}. Overwriting.`),u[c]=d)}return u}const i=r(n,e);t.body=JSON.stringify(i)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Bw="mcp_used/unknown";let Gw=!1;function Ag(t){for(const e of t)if(qw(e)||typeof e=="object"&&"inputSchema"in e)return!0;return Gw}function Ng(t){var e;const n=(e=t[La])!==null&&e!==void 0?e:"";t[La]=(n+` ${Bw}`).trimStart()}function qw(t){return t!==null&&typeof t=="object"&&t instanceof Yu}function $w(t,e=100){return Nr(this,arguments,function*(){let r,i=0;for(;i<e;){const o=yield ie(t.listTools({cursor:r}));for(const s of o.tools)yield yield ie(s),i++;if(!o.nextCursor)break;r=o.nextCursor}})}class Yu{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new Yu(e,n)}async initialize(){var e,n,r,i;if(this.mcpTools.length>0)return;const o={},s=[];for(const f of this.mcpClients)try{for(var u=!0,c=(n=void 0,_i($w(f))),d;d=await c.next(),e=d.done,!e;u=!0){i=d.value,u=!1;const p=i;s.push(p);const h=p.name;if(o[h])throw new Error(`Duplicate function name ${h} found in MCP tools. Please ensure function names are unique.`);o[h]=f}}catch(p){n={error:p}}finally{try{!u&&!e&&(r=c.return)&&await r.call(c)}finally{if(n)throw n.error}}this.mcpTools=s,this.functionNameToMcpClient=o}async tool(){return await this.initialize(),UT(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const r of e)if(r.name in this.functionNameToMcpClient){const i=this.functionNameToMcpClient[r.name];let o;this.config.timeout&&(o={timeout:this.config.timeout});const s=await i.callTool({name:r.name,arguments:r.args},void 0,o);n.push({functionResponse:{name:r.name,response:s.isError?{error:s}:s}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function zw(t,e,n){const r=new NT;let i;n.data instanceof Blob?i=JSON.parse(await n.data.text()):i=JSON.parse(n.data),Object.assign(r,i),e(r)}class Ww{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r}async connect(e){var n,r;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const i=this.apiClient.getWebsocketBaseUrl(),o=this.apiClient.getApiVersion(),s=Yw(this.apiClient.getDefaultHeaders()),u=this.apiClient.getApiKey(),c=`${i}/ws/google.ai.generativelanguage.${o}.GenerativeService.BidiGenerateMusic?key=${u}`;let d=()=>{};const f=new Promise(v=>{d=v}),p=e.callbacks,h=function(){d({})},y=this.apiClient,T={onopen:h,onmessage:v=>{zw(y,p.onmessage,v)},onerror:(n=p==null?void 0:p.onerror)!==null&&n!==void 0?n:function(v){},onclose:(r=p==null?void 0:p.onclose)!==null&&r!==void 0?r:function(v){}},E=this.webSocketFactory.create(c,Kw(s),T);E.connect(),await f;const g={setup:{model:Y(this.apiClient,e.model)}};return E.send(JSON.stringify(g)),new Jw(E,this.apiClient)}}class Jw{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=DI(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=MI(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(_r.PLAY)}pause(){this.sendPlaybackControl(_r.PAUSE)}stop(){this.sendPlaybackControl(_r.STOP)}resetContext(){this.sendPlaybackControl(_r.RESET_CONTEXT)}close(){this.conn.close()}}function Kw(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function Yw(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Qw="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function Xw(t,e,n){const r=new AT;let i;n.data instanceof Blob?i=await n.data.text():n.data instanceof ArrayBuffer?i=new TextDecoder().decode(n.data):i=n.data;const o=JSON.parse(i);if(t.isVertexAI()){const s=UI(o);Object.assign(r,s)}else Object.assign(r,o);e(r)}class Zw{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r,this.music=new Ww(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,r,i,o,s,u;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const c=this.apiClient.getWebsocketBaseUrl(),d=this.apiClient.getApiVersion();let f;const p=this.apiClient.getHeaders();e.config&&e.config.tools&&Ag(e.config.tools)&&Ng(p);const h=nS(p);if(this.apiClient.isVertexAI())f=`${c}/ws/google.cloud.aiplatform.${d}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(h,f);else{const P=this.apiClient.getApiKey();let R="BidiGenerateContent",B="key";P!=null&&P.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),d!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),R="BidiGenerateContentConstrained",B="access_token"),f=`${c}/ws/google.ai.generativelanguage.${d}.GenerativeService.${R}?${B}=${P}`}let y=()=>{};const T=new Promise(P=>{y=P}),E=e.callbacks,S=function(){var P;(P=E==null?void 0:E.onopen)===null||P===void 0||P.call(E),y({})},_=this.apiClient,g={onopen:S,onmessage:P=>{Xw(_,E.onmessage,P)},onerror:(n=E==null?void 0:E.onerror)!==null&&n!==void 0?n:function(P){},onclose:(r=E==null?void 0:E.onclose)!==null&&r!==void 0?r:function(P){}},v=this.webSocketFactory.create(f,tS(h),g);v.connect(),await T;let I=Y(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&I.startsWith("publishers/")){const P=this.apiClient.getProject(),R=this.apiClient.getLocation();I=`projects/${P}/locations/${R}/`+I}let C={};this.apiClient.isVertexAI()&&((i=e.config)===null||i===void 0?void 0:i.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[cs.AUDIO]}:e.config.responseModalities=[cs.AUDIO]),!((o=e.config)===null||o===void 0)&&o.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const w=(u=(s=e.config)===null||s===void 0?void 0:s.tools)!==null&&u!==void 0?u:[],x=[];for(const P of w)if(this.isCallableTool(P)){const R=P;x.push(await R.tool())}else x.push(P);x.length>0&&(e.config.tools=x);const A={model:I,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?C=PI(this.apiClient,A):C=RI(this.apiClient,A),delete C.config,v.send(JSON.stringify(C)),new eS(v,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const jw={turnComplete:!0};class eS{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let r=[];try{r=it(n.turns),e.isVertexAI()||(r=r.map(i=>Hs(i)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:r,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let r=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?r=n.functionResponses:r=[n.functionResponses],r.length===0)throw new Error("functionResponses is required.");for(const o of r){if(typeof o!="object"||o===null||!("name"in o)||!("response"in o))throw new Error(`Could not parse function response, type '${typeof o}'.`);if(!e.isVertexAI()&&!("id"in o))throw new Error(Qw)}return{toolResponse:{functionResponses:r}}}sendClientContent(e){e=Object.assign(Object.assign({},jw),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:LI(e)}:n={realtimeInput:bI(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function tS(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function nS(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Xf=10;function Zf(t){var e,n,r;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let i=!1;for(const s of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(kr(s)){i=!0;break}if(!i)return!0;const o=(r=t==null?void 0:t.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls;return o&&(o<0||!Number.isInteger(o))||o==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",o),!0):!1}function kr(t){return"callTool"in t&&typeof t.callTool=="function"}function rS(t){var e,n,r;return(r=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(i=>kr(i)))!==null&&r!==void 0?r:!1}function jf(t){var e;const n=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((r,i)=>{if(kr(r))return;const o=r;o.functionDeclarations&&o.functionDeclarations.length>0&&n.push(i)}),n}function ep(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class iS extends Xt{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var r,i,o,s,u;const c=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!rS(n)||Zf(n.config))return await this.generateContentInternal(c);const d=jf(n);if(d.length>0){const E=d.map(S=>`tools[${S}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${E}.`)}let f,p;const h=it(c.contents),y=(o=(i=(r=c.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&o!==void 0?o:Xf;let T=0;for(;T<y&&(f=await this.generateContentInternal(c),!(!f.functionCalls||f.functionCalls.length===0));){const E=f.candidates[0].content,S=[];for(const _ of(u=(s=n.config)===null||s===void 0?void 0:s.tools)!==null&&u!==void 0?u:[])if(kr(_)){const v=await _.callTool(f.functionCalls);S.push(...v)}T++,p={role:"user",parts:S},c.contents=it(c.contents),c.contents.push(E),c.contents.push(p),ep(c.config)&&(h.push(E),h.push(p))}return ep(c.config)&&(f.automaticFunctionCallingHistory=h),f},this.generateContentStream=async n=>{var r,i,o,s,u;if(this.maybeMoveToResponseJsonSchem(n),Zf(n.config)){const p=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(p)}const c=jf(n);if(c.length>0){const p=c.map(h=>`tools[${h}]`).join(", ");throw new Error(`Incompatible tools found at ${p}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const d=(o=(i=(r=n==null?void 0:n.config)===null||r===void 0?void 0:r.toolConfig)===null||i===void 0?void 0:i.functionCallingConfig)===null||o===void 0?void 0:o.streamFunctionCallArguments,f=(u=(s=n==null?void 0:n.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||u===void 0?void 0:u.disable;if(d&&!f)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(r=>{var i;let o;const s=[];if(r!=null&&r.generatedImages)for(const c of r.generatedImages)c&&(c!=null&&c.safetyAttributes)&&((i=c==null?void 0:c.safetyAttributes)===null||i===void 0?void 0:i.contentType)==="Positive Prompt"?o=c==null?void 0:c.safetyAttributes:s.push(c);let u;return o?u={generatedImages:s,positivePromptSafetyAttributes:o,sdkHttpResponse:r.sdkHttpResponse}:u={generatedImages:s,sdkHttpResponse:r.sdkHttpResponse},u}),this.list=async n=>{var r;const s={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!s.config.queryBase){if(!((r=s.config)===null||r===void 0)&&r.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");s.config.filter="labels.tune-type:*"}return new er(Wt.PAGED_ITEM_MODELS,u=>this.listInternal(u),await this.listInternal(s),s)},this.editImage=async n=>{const r={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(r.referenceImages=n.referenceImages.map(i=>i.toReferenceImageAPI())),await this.editImageInternal(r)},this.upscaleImage=async n=>{let r={numberOfImages:1,mode:"upscale"};n.config&&(r=Object.assign(Object.assign({},r),n.config));const i={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:r};return await this.upscaleImageInternal(i)},this.generateVideos=async n=>{var r,i,o,s,u,c;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((r=n.video)===null||r===void 0)&&r.uri&&(!((i=n.video)===null||i===void 0)&&i.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((s=(o=n.source)===null||o===void 0?void 0:o.video)===null||s===void 0)&&s.uri&&(!((c=(u=n.source)===null||u===void 0?void 0:u.video)===null||c===void 0)&&c.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,r,i;const o=(n=e.config)===null||n===void 0?void 0:n.tools;if(!o)return e;const s=await Promise.all(o.map(async c=>kr(c)?await c.tool():c)),u={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:s})};if(u.config.tools=s,e.config&&e.config.tools&&Ag(e.config.tools)){const c=(i=(r=e.config.httpOptions)===null||r===void 0?void 0:r.headers)!==null&&i!==void 0?i:{};let d=Object.assign({},c);Object.keys(d).length===0&&(d=this.apiClient.getDefaultHeaders()),Ng(d),u.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:d})}return u}async initAfcToolsMap(e){var n,r,i;const o=new Map;for(const s of(r=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&r!==void 0?r:[])if(kr(s)){const u=s,c=await u.tool();for(const d of(i=c.functionDeclarations)!==null&&i!==void 0?i:[]){if(!d.name)throw new Error("Function declaration name is required.");if(o.has(d.name))throw new Error(`Duplicate tool declaration name: ${d.name}`);o.set(d.name,u)}}return o}async processAfcStream(e){var n,r,i;const o=(i=(r=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&i!==void 0?i:Xf;let s=!1,u=0;const c=await this.initAfcToolsMap(e);return function(d,f,p){var h,y;return Nr(this,arguments,function*(){for(var T,E,S,_;u<o;){s&&(u++,s=!1);const C=yield ie(d.processParamsMaybeAddMcpUsage(p)),w=yield ie(d.generateContentStreamInternal(C)),x=[],A=[];try{for(var g=!0,v=(E=void 0,_i(w)),I;I=yield ie(v.next()),T=I.done,!T;g=!0){_=I.value,g=!1;const P=_;if(yield yield ie(P),P.candidates&&(!((h=P.candidates[0])===null||h===void 0)&&h.content)){A.push(P.candidates[0].content);for(const R of(y=P.candidates[0].content.parts)!==null&&y!==void 0?y:[])if(u<o&&R.functionCall){if(!R.functionCall.name)throw new Error("Function call name was not returned by the model.");if(f.has(R.functionCall.name)){const B=yield ie(f.get(R.functionCall.name).callTool([R.functionCall]));x.push(...B)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${f.keys()}, mising tool: ${R.functionCall.name}`)}}}}catch(P){E={error:P}}finally{try{!g&&!T&&(S=v.return)&&(yield ie(S.call(v)))}finally{if(E)throw E.error}}if(x.length>0){s=!0;const P=new ri;P.candidates=[{content:{role:"user",parts:x}}],yield yield ie(P);const R=[];R.push(...A),R.push({role:"user",parts:x});const B=it(p.contents).concat(R);p.contents=B}else break}})}(this,c,e)}async generateContentInternal(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=Wf(this.apiClient,e);return u=b("{model}:generateContent",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=Kf(f),h=new ri;return Object.assign(h,p),h})}else{const d=zf(this.apiClient,e);return u=b("{model}:generateContent",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=Jf(f),h=new ri;return Object.assign(h,p),h})}}async generateContentStreamInternal(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=Wf(this.apiClient,e);return u=b("{model}:streamGenerateContent?alt=sse",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.requestStream({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}),s.then(function(p){return Nr(this,arguments,function*(){var h,y,T,E;try{for(var S=!0,_=_i(p),g;g=yield ie(_.next()),h=g.done,!h;S=!0){E=g.value,S=!1;const v=E,I=Kf(yield ie(v.json()));I.sdkHttpResponse={headers:v.headers};const C=new ri;Object.assign(C,I),yield yield ie(C)}}catch(v){y={error:v}}finally{try{!S&&!h&&(T=_.return)&&(yield ie(T.call(_)))}finally{if(y)throw y.error}}})})}else{const d=zf(this.apiClient,e);return u=b("{model}:streamGenerateContent?alt=sse",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.requestStream({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),s.then(function(p){return Nr(this,arguments,function*(){var h,y,T,E;try{for(var S=!0,_=_i(p),g;g=yield ie(_.next()),h=g.done,!h;S=!0){E=g.value,S=!1;const v=E,I=Jf(yield ie(v.json()));I.sdkHttpResponse={headers:v.headers};const C=new ri;Object.assign(C,I),yield yield ie(C)}}catch(v){y={error:v}}finally{try{!S&&!h&&(T=_.return)&&(yield ie(T.call(_)))}finally{if(y)throw y.error}}})})}}async embedContent(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=fC(this.apiClient,e);return u=b("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=hC(f),h=new kf;return Object.assign(h,p),h})}else{const d=dC(this.apiClient,e);return u=b("{model}:batchEmbedContents",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=pC(f),h=new kf;return Object.assign(h,p),h})}}async generateImagesInternal(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=SC(this.apiClient,e);return u=b("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=AC(f),h=new Rf;return Object.assign(h,p),h})}else{const d=wC(this.apiClient,e);return u=b("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=xC(f),h=new Rf;return Object.assign(h,p),h})}}async editImageInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const u=lC(this.apiClient,e);return o=b("{model}:predict",u._url),s=u._query,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),i.then(c=>{const d=aC(c),f=new gT;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const u=Sw(this.apiClient,e);return o=b("{model}:predict",u._url),s=u._query,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),i.then(c=>{const d=xw(c),f=new yT;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const u=sw(this.apiClient,e);return o=b("{model}:predict",u._url),s=u._query,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>{const d=lw(c),f=new vT;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const u=pw(this.apiClient,e);return o=b("{model}:predict",u._url),s=u._query,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>{const d=hw(c),f=new _T;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=$C(this.apiClient,e);return u=b("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>ba(f))}else{const d=qC(this.apiClient,e);return u=b("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>Da(f))}}async listInternal(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=jC(this.apiClient,e);return u=b("{models_url}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=tw(f),h=new Pf;return Object.assign(h,p),h})}else{const d=ZC(this.apiClient,e);return u=b("{models_url}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=ew(f),h=new Pf;return Object.assign(h,p),h})}}async update(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=Cw(this.apiClient,e);return u=b("{model}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>ba(f))}else{const d=Iw(this.apiClient,e);return u=b("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>Da(f))}}async delete(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=rC(this.apiClient,e);return u=b("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=oC(f),h=new Mf;return Object.assign(h,p),h})}else{const d=nC(this.apiClient,e);return u=b("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=iC(f),h=new Mf;return Object.assign(h,p),h})}}async countTokens(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=jI(this.apiClient,e);return u=b("{model}:countTokens",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=tC(f),h=new Df;return Object.assign(h,p),h})}else{const d=ZI(this.apiClient,e);return u=b("{model}:countTokens",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=eC(f),h=new Df;return Object.assign(h,p),h})}}async computeTokens(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const u=zI(this.apiClient,e);return o=b("{model}:computeTokens",u._url),s=u._query,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),i.then(c=>{const d=WI(c),f=new TT;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=DC(this.apiClient,e);return u=b("{model}:predictLongRunning",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>{const p=PC(f),h=new ds;return Object.assign(h,p),h})}else{const d=MC(this.apiClient,e);return u=b("{model}:predictLongRunning",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>{const p=RC(f),h=new ds;return Object.assign(h,p),h})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class oS extends Xt{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=n.name.split("/operations/")[0];let o;r&&"httpOptions"in r&&(o=r.httpOptions);const s=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:o}});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:i,_isVertexAI:!1})}}async get(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=n.name.split("/operations/")[0];let o;r&&"httpOptions"in r&&(o=r.httpOptions);const s=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:o}});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:i,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=cT(e);return u=b("{operationName}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s}else{const d=uT(e);return u=b("{operationName}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s}}async fetchPredictVideosOperationInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const u=nT(e);return o=b("{resourceName}:fetchPredictOperation",u._url),s=u._query,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function sS(t){const e={},n=l(t,["data"]);if(n!=null&&a(e,["data"],n),l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=l(t,["mimeType"]);return r!=null&&a(e,["mimeType"],r),e}function lS(t){const e={},n=l(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>gS(o))),a(e,["parts"],i)}const r=l(t,["role"]);return r!=null&&a(e,["role"],r),e}function aS(t,e,n){const r={},i=l(e,["expireTime"]);n!==void 0&&i!=null&&a(n,["expireTime"],i);const o=l(e,["newSessionExpireTime"]);n!==void 0&&o!=null&&a(n,["newSessionExpireTime"],o);const s=l(e,["uses"]);n!==void 0&&s!=null&&a(n,["uses"],s);const u=l(e,["liveConnectConstraints"]);n!==void 0&&u!=null&&a(n,["bidiGenerateContentSetup"],mS(t,u));const c=l(e,["lockAdditionalFields"]);return n!==void 0&&c!=null&&a(n,["fieldMask"],c),r}function uS(t,e){const n={},r=l(e,["config"]);return r!=null&&a(n,["config"],aS(t,r,n)),n}function cS(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["fileUri"]);n!=null&&a(e,["fileUri"],n);const r=l(t,["mimeType"]);return r!=null&&a(e,["mimeType"],r),e}function dS(t){const e={},n=l(t,["id"]);n!=null&&a(e,["id"],n);const r=l(t,["args"]);r!=null&&a(e,["args"],r);const i=l(t,["name"]);if(i!=null&&a(e,["name"],i),l(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(l(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function fS(t){const e={};if(l(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=l(t,["enableWidget"]);return n!=null&&a(e,["enableWidget"],n),e}function pS(t){const e={};if(l(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(l(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=l(t,["timeRangeFilter"]);return n!=null&&a(e,["timeRangeFilter"],n),e}function hS(t,e){const n={},r=l(t,["generationConfig"]);e!==void 0&&r!=null&&a(e,["setup","generationConfig"],r);const i=l(t,["responseModalities"]);e!==void 0&&i!=null&&a(e,["setup","generationConfig","responseModalities"],i);const o=l(t,["temperature"]);e!==void 0&&o!=null&&a(e,["setup","generationConfig","temperature"],o);const s=l(t,["topP"]);e!==void 0&&s!=null&&a(e,["setup","generationConfig","topP"],s);const u=l(t,["topK"]);e!==void 0&&u!=null&&a(e,["setup","generationConfig","topK"],u);const c=l(t,["maxOutputTokens"]);e!==void 0&&c!=null&&a(e,["setup","generationConfig","maxOutputTokens"],c);const d=l(t,["mediaResolution"]);e!==void 0&&d!=null&&a(e,["setup","generationConfig","mediaResolution"],d);const f=l(t,["seed"]);e!==void 0&&f!=null&&a(e,["setup","generationConfig","seed"],f);const p=l(t,["speechConfig"]);e!==void 0&&p!=null&&a(e,["setup","generationConfig","speechConfig"],Ku(p));const h=l(t,["thinkingConfig"]);e!==void 0&&h!=null&&a(e,["setup","generationConfig","thinkingConfig"],h);const y=l(t,["enableAffectiveDialog"]);e!==void 0&&y!=null&&a(e,["setup","generationConfig","enableAffectiveDialog"],y);const T=l(t,["systemInstruction"]);e!==void 0&&T!=null&&a(e,["setup","systemInstruction"],lS(Pe(T)));const E=l(t,["tools"]);if(e!==void 0&&E!=null){let w=$r(E);Array.isArray(w)&&(w=w.map(x=>vS(qr(x)))),a(e,["setup","tools"],w)}const S=l(t,["sessionResumption"]);e!==void 0&&S!=null&&a(e,["setup","sessionResumption"],yS(S));const _=l(t,["inputAudioTranscription"]);e!==void 0&&_!=null&&a(e,["setup","inputAudioTranscription"],_);const g=l(t,["outputAudioTranscription"]);e!==void 0&&g!=null&&a(e,["setup","outputAudioTranscription"],g);const v=l(t,["realtimeInputConfig"]);e!==void 0&&v!=null&&a(e,["setup","realtimeInputConfig"],v);const I=l(t,["contextWindowCompression"]);e!==void 0&&I!=null&&a(e,["setup","contextWindowCompression"],I);const C=l(t,["proactivity"]);return e!==void 0&&C!=null&&a(e,["setup","proactivity"],C),n}function mS(t,e){const n={},r=l(e,["model"]);r!=null&&a(n,["setup","model"],Y(t,r));const i=l(e,["config"]);return i!=null&&a(n,["config"],hS(i,n)),n}function gS(t){const e={},n=l(t,["mediaResolution"]);n!=null&&a(e,["mediaResolution"],n);const r=l(t,["codeExecutionResult"]);r!=null&&a(e,["codeExecutionResult"],r);const i=l(t,["executableCode"]);i!=null&&a(e,["executableCode"],i);const o=l(t,["fileData"]);o!=null&&a(e,["fileData"],cS(o));const s=l(t,["functionCall"]);s!=null&&a(e,["functionCall"],dS(s));const u=l(t,["functionResponse"]);u!=null&&a(e,["functionResponse"],u);const c=l(t,["inlineData"]);c!=null&&a(e,["inlineData"],sS(c));const d=l(t,["text"]);d!=null&&a(e,["text"],d);const f=l(t,["thought"]);f!=null&&a(e,["thought"],f);const p=l(t,["thoughtSignature"]);p!=null&&a(e,["thoughtSignature"],p);const h=l(t,["videoMetadata"]);return h!=null&&a(e,["videoMetadata"],h),e}function yS(t){const e={},n=l(t,["handle"]);if(n!=null&&a(e,["handle"],n),l(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function vS(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(p=>p)),a(e,["functionDeclarations"],f)}if(l(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=l(t,["googleSearchRetrieval"]);r!=null&&a(e,["googleSearchRetrieval"],r);const i=l(t,["computerUse"]);i!=null&&a(e,["computerUse"],i);const o=l(t,["fileSearch"]);o!=null&&a(e,["fileSearch"],o);const s=l(t,["codeExecution"]);if(s!=null&&a(e,["codeExecution"],s),l(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=l(t,["googleMaps"]);u!=null&&a(e,["googleMaps"],fS(u));const c=l(t,["googleSearch"]);c!=null&&a(e,["googleSearch"],pS(c));const d=l(t,["urlContext"]);return d!=null&&a(e,["urlContext"],d),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function _S(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const r=t[n];if(typeof r=="object"&&r!=null&&Object.keys(r).length>0){const i=Object.keys(r).map(o=>`${n}.${o}`);e.push(...i)}else e.push(n)}return e.join(",")}function TS(t,e){let n=null;const r=t.bidiGenerateContentSetup;if(typeof r=="object"&&r!==null&&"setup"in r){const o=r.setup;typeof o=="object"&&o!==null?(t.bidiGenerateContentSetup=o,n=o):delete t.bidiGenerateContentSetup}else r!==void 0&&delete t.bidiGenerateContentSetup;const i=t.fieldMask;if(n){const o=_S(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)o?t.fieldMask=o:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&i!==null&&Array.isArray(i)&&i.length>0){const s=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let u=[];i.length>0&&(u=i.map(d=>s.includes(d)?`generationConfig.${d}`:d));const c=[];o&&c.push(o),u.length>0&&c.push(...u),c.length>0?t.fieldMask=c.join(","):delete t.fieldMask}else delete t.fieldMask}else i!==null&&Array.isArray(i)&&i.length>0?t.fieldMask=i.join(","):delete t.fieldMask;return t}class ES extends Xt{constructor(e){super(),this.apiClient=e}async create(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const u=uS(this.apiClient,e);o=b("auth_tokens",u._url),s=u._query,delete u.config,delete u._url,delete u._query;const c=TS(u,e.config);return i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),i.then(d=>d)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function IS(t,e){const n={},r=l(t,["displayName"]);return e!==void 0&&r!=null&&a(e,["displayName"],r),n}function CS(t){const e={},n=l(t,["config"]);return n!=null&&IS(n,e),e}function wS(t,e){const n={},r=l(t,["force"]);return e!==void 0&&r!=null&&a(e,["_query","force"],r),n}function SS(t){const e={},n=l(t,["name"]);n!=null&&a(e,["_url","name"],n);const r=l(t,["config"]);return r!=null&&wS(r,e),e}function xS(t){const e={},n=l(t,["name"]);return n!=null&&a(e,["_url","name"],n),e}function AS(t,e){const n={},r=l(t,["customMetadata"]);if(e!==void 0&&r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>s)),a(e,["customMetadata"],o)}const i=l(t,["chunkingConfig"]);return e!==void 0&&i!=null&&a(e,["chunkingConfig"],i),n}function NS(t){const e={},n=l(t,["name"]);n!=null&&a(e,["name"],n);const r=l(t,["metadata"]);r!=null&&a(e,["metadata"],r);const i=l(t,["done"]);i!=null&&a(e,["done"],i);const o=l(t,["error"]);o!=null&&a(e,["error"],o);const s=l(t,["response"]);return s!=null&&a(e,["response"],RS(s)),e}function kS(t){const e={},n=l(t,["fileSearchStoreName"]);n!=null&&a(e,["_url","file_search_store_name"],n);const r=l(t,["fileName"]);r!=null&&a(e,["fileName"],r);const i=l(t,["config"]);return i!=null&&AS(i,e),e}function RS(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const r=l(t,["parent"]);r!=null&&a(e,["parent"],r);const i=l(t,["documentName"]);return i!=null&&a(e,["documentName"],i),e}function PS(t,e){const n={},r=l(t,["pageSize"]);e!==void 0&&r!=null&&a(e,["_query","pageSize"],r);const i=l(t,["pageToken"]);return e!==void 0&&i!=null&&a(e,["_query","pageToken"],i),n}function MS(t){const e={},n=l(t,["config"]);return n!=null&&PS(n,e),e}function DS(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const r=l(t,["nextPageToken"]);r!=null&&a(e,["nextPageToken"],r);const i=l(t,["fileSearchStores"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),a(e,["fileSearchStores"],o)}return e}function bS(t,e){const n={},r=l(t,["mimeType"]);e!==void 0&&r!=null&&a(e,["mimeType"],r);const i=l(t,["displayName"]);e!==void 0&&i!=null&&a(e,["displayName"],i);const o=l(t,["customMetadata"]);if(e!==void 0&&o!=null){let u=o;Array.isArray(u)&&(u=u.map(c=>c)),a(e,["customMetadata"],u)}const s=l(t,["chunkingConfig"]);return e!==void 0&&s!=null&&a(e,["chunkingConfig"],s),n}function LS(t){const e={},n=l(t,["fileSearchStoreName"]);n!=null&&a(e,["_url","file_search_store_name"],n);const r=l(t,["config"]);return r!=null&&bS(r,e),e}function US(t){const e={},n=l(t,["sdkHttpResponse"]);return n!=null&&a(e,["sdkHttpResponse"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function FS(t,e){const n={},r=l(t,["force"]);return e!==void 0&&r!=null&&a(e,["_query","force"],r),n}function OS(t){const e={},n=l(t,["name"]);n!=null&&a(e,["_url","name"],n);const r=l(t,["config"]);return r!=null&&FS(r,e),e}function VS(t){const e={},n=l(t,["name"]);return n!=null&&a(e,["_url","name"],n),e}function HS(t,e){const n={},r=l(t,["pageSize"]);e!==void 0&&r!=null&&a(e,["_query","pageSize"],r);const i=l(t,["pageToken"]);return e!==void 0&&i!=null&&a(e,["_query","pageToken"],i),n}function BS(t){const e={},n=l(t,["parent"]);n!=null&&a(e,["_url","parent"],n);const r=l(t,["config"]);return r!=null&&HS(r,e),e}function GS(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const r=l(t,["nextPageToken"]);r!=null&&a(e,["nextPageToken"],r);const i=l(t,["documents"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),a(e,["documents"],o)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class qS extends Xt{constructor(e){super(),this.apiClient=e,this.list=async n=>new er(Wt.PAGED_ITEM_DOCUMENTS,r=>this.listInternal({parent:n.parent,config:r.config}),await this.listInternal(n),n)}async get(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=VS(e);return o=b("{name}",u._url),s=u._query,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>c)}}async delete(e){var n,r;let i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=OS(e);i=b("{name}",s._url),o=s._query,delete s._url,delete s._query,await this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(s),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=BS(e);return o=b("{parent}/documents",u._url),s=u._query,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>{const d=GS(c),f=new ET;return Object.assign(f,d),f})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class $S extends Xt{constructor(e,n=new qS(e)){super(),this.apiClient=e,this.documents=n,this.list=async(r={})=>new er(Wt.PAGED_ITEM_FILE_SEARCH_STORES,i=>this.listInternal(i),await this.listInternal(r),r)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=CS(e);return o=b("fileSearchStores",u._url),s=u._query,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>c)}}async get(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=xS(e);return o=b("{name}",u._url),s=u._query,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>c)}}async delete(e){var n,r;let i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=SS(e);i=b("{name}",s._url),o=s._query,delete s._url,delete s._query,await this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(s),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=MS(e);return o=b("fileSearchStores",u._url),s=u._query,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>{const d=DS(c),f=new IT;return Object.assign(f,d),f})}}async uploadToFileSearchStoreInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=LS(e);return o=b("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",u._url),s=u._query,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>{const d=US(c),f=new CT;return Object.assign(f,d),f})}}async importFile(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=kS(e);return o=b("{file_search_store_name}:importFile",u._url),s=u._query,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>{const d=NS(c),f=new qu;return Object.assign(f,d),f})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function zS(t,e){const n={},r=l(t,["name"]);return r!=null&&a(n,["_url","name"],r),n}function WS(t,e){const n={},r=l(t,["name"]);return r!=null&&a(n,["_url","name"],r),n}function JS(t,e,n){const r={};if(l(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const i=l(t,["tunedModelDisplayName"]);if(e!==void 0&&i!=null&&a(e,["displayName"],i),l(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const o=l(t,["epochCount"]);e!==void 0&&o!=null&&a(e,["tuningTask","hyperparameters","epochCount"],o);const s=l(t,["learningRateMultiplier"]);if(s!=null&&a(r,["tuningTask","hyperparameters","learningRateMultiplier"],s),l(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(l(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(l(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const u=l(t,["batchSize"]);e!==void 0&&u!=null&&a(e,["tuningTask","hyperparameters","batchSize"],u);const c=l(t,["learningRate"]);if(e!==void 0&&c!=null&&a(e,["tuningTask","hyperparameters","learningRate"],c),l(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(l(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return r}function KS(t,e,n){const r={};let i=l(n,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){const y=l(t,["validationDataset"]);e!==void 0&&y!=null&&a(e,["supervisedTuningSpec"],tp(y))}else if(i==="PREFERENCE_TUNING"){const y=l(t,["validationDataset"]);e!==void 0&&y!=null&&a(e,["preferenceOptimizationSpec"],tp(y))}const o=l(t,["tunedModelDisplayName"]);e!==void 0&&o!=null&&a(e,["tunedModelDisplayName"],o);const s=l(t,["description"]);e!==void 0&&s!=null&&a(e,["description"],s);let u=l(n,["config","method"]);if(u===void 0&&(u="SUPERVISED_FINE_TUNING"),u==="SUPERVISED_FINE_TUNING"){const y=l(t,["epochCount"]);e!==void 0&&y!=null&&a(e,["supervisedTuningSpec","hyperParameters","epochCount"],y)}else if(u==="PREFERENCE_TUNING"){const y=l(t,["epochCount"]);e!==void 0&&y!=null&&a(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],y)}let c=l(n,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){const y=l(t,["learningRateMultiplier"]);e!==void 0&&y!=null&&a(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],y)}else if(c==="PREFERENCE_TUNING"){const y=l(t,["learningRateMultiplier"]);e!==void 0&&y!=null&&a(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],y)}let d=l(n,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const y=l(t,["exportLastCheckpointOnly"]);e!==void 0&&y!=null&&a(e,["supervisedTuningSpec","exportLastCheckpointOnly"],y)}else if(d==="PREFERENCE_TUNING"){const y=l(t,["exportLastCheckpointOnly"]);e!==void 0&&y!=null&&a(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],y)}let f=l(n,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const y=l(t,["adapterSize"]);e!==void 0&&y!=null&&a(e,["supervisedTuningSpec","hyperParameters","adapterSize"],y)}else if(f==="PREFERENCE_TUNING"){const y=l(t,["adapterSize"]);e!==void 0&&y!=null&&a(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],y)}if(l(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(l(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const p=l(t,["labels"]);e!==void 0&&p!=null&&a(e,["labels"],p);const h=l(t,["beta"]);return e!==void 0&&h!=null&&a(e,["preferenceOptimizationSpec","hyperParameters","beta"],h),r}function YS(t,e){const n={},r=l(t,["baseModel"]);r!=null&&a(n,["baseModel"],r);const i=l(t,["preTunedModel"]);i!=null&&a(n,["preTunedModel"],i);const o=l(t,["trainingDataset"]);o!=null&&sx(o);const s=l(t,["config"]);return s!=null&&JS(s,n),n}function QS(t,e){const n={},r=l(t,["baseModel"]);r!=null&&a(n,["baseModel"],r);const i=l(t,["preTunedModel"]);i!=null&&a(n,["preTunedModel"],i);const o=l(t,["trainingDataset"]);o!=null&&lx(o,n,e);const s=l(t,["config"]);return s!=null&&KS(s,n,e),n}function XS(t,e){const n={},r=l(t,["name"]);return r!=null&&a(n,["_url","name"],r),n}function ZS(t,e){const n={},r=l(t,["name"]);return r!=null&&a(n,["_url","name"],r),n}function jS(t,e,n){const r={},i=l(t,["pageSize"]);e!==void 0&&i!=null&&a(e,["_query","pageSize"],i);const o=l(t,["pageToken"]);e!==void 0&&o!=null&&a(e,["_query","pageToken"],o);const s=l(t,["filter"]);return e!==void 0&&s!=null&&a(e,["_query","filter"],s),r}function ex(t,e,n){const r={},i=l(t,["pageSize"]);e!==void 0&&i!=null&&a(e,["_query","pageSize"],i);const o=l(t,["pageToken"]);e!==void 0&&o!=null&&a(e,["_query","pageToken"],o);const s=l(t,["filter"]);return e!==void 0&&s!=null&&a(e,["_query","filter"],s),r}function tx(t,e){const n={},r=l(t,["config"]);return r!=null&&jS(r,n),n}function nx(t,e){const n={},r=l(t,["config"]);return r!=null&&ex(r,n),n}function rx(t,e){const n={},r=l(t,["sdkHttpResponse"]);r!=null&&a(n,["sdkHttpResponse"],r);const i=l(t,["nextPageToken"]);i!=null&&a(n,["nextPageToken"],i);const o=l(t,["tunedModels"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(u=>kg(u))),a(n,["tuningJobs"],s)}return n}function ix(t,e){const n={},r=l(t,["sdkHttpResponse"]);r!=null&&a(n,["sdkHttpResponse"],r);const i=l(t,["nextPageToken"]);i!=null&&a(n,["nextPageToken"],i);const o=l(t,["tuningJobs"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(u=>Ua(u))),a(n,["tuningJobs"],s)}return n}function ox(t,e){const n={},r=l(t,["name"]);r!=null&&a(n,["model"],r);const i=l(t,["name"]);return i!=null&&a(n,["endpoint"],i),n}function sx(t,e){const n={};if(l(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(l(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const r=l(t,["examples"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>o)),a(n,["examples","examples"],i)}return n}function lx(t,e,n){const r={};let i=l(n,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){const s=l(t,["gcsUri"]);e!==void 0&&s!=null&&a(e,["supervisedTuningSpec","trainingDatasetUri"],s)}else if(i==="PREFERENCE_TUNING"){const s=l(t,["gcsUri"]);e!==void 0&&s!=null&&a(e,["preferenceOptimizationSpec","trainingDatasetUri"],s)}let o=l(n,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const s=l(t,["vertexDatasetResource"]);e!==void 0&&s!=null&&a(e,["supervisedTuningSpec","trainingDatasetUri"],s)}else if(o==="PREFERENCE_TUNING"){const s=l(t,["vertexDatasetResource"]);e!==void 0&&s!=null&&a(e,["preferenceOptimizationSpec","trainingDatasetUri"],s)}if(l(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return r}function kg(t,e){const n={},r=l(t,["sdkHttpResponse"]);r!=null&&a(n,["sdkHttpResponse"],r);const i=l(t,["name"]);i!=null&&a(n,["name"],i);const o=l(t,["state"]);o!=null&&a(n,["state"],cg(o));const s=l(t,["createTime"]);s!=null&&a(n,["createTime"],s);const u=l(t,["tuningTask","startTime"]);u!=null&&a(n,["startTime"],u);const c=l(t,["tuningTask","completeTime"]);c!=null&&a(n,["endTime"],c);const d=l(t,["updateTime"]);d!=null&&a(n,["updateTime"],d);const f=l(t,["description"]);f!=null&&a(n,["description"],f);const p=l(t,["baseModel"]);p!=null&&a(n,["baseModel"],p);const h=l(t,["_self"]);return h!=null&&a(n,["tunedModel"],ox(h)),n}function Ua(t,e){const n={},r=l(t,["sdkHttpResponse"]);r!=null&&a(n,["sdkHttpResponse"],r);const i=l(t,["name"]);i!=null&&a(n,["name"],i);const o=l(t,["state"]);o!=null&&a(n,["state"],cg(o));const s=l(t,["createTime"]);s!=null&&a(n,["createTime"],s);const u=l(t,["startTime"]);u!=null&&a(n,["startTime"],u);const c=l(t,["endTime"]);c!=null&&a(n,["endTime"],c);const d=l(t,["updateTime"]);d!=null&&a(n,["updateTime"],d);const f=l(t,["error"]);f!=null&&a(n,["error"],f);const p=l(t,["description"]);p!=null&&a(n,["description"],p);const h=l(t,["baseModel"]);h!=null&&a(n,["baseModel"],h);const y=l(t,["tunedModel"]);y!=null&&a(n,["tunedModel"],y);const T=l(t,["preTunedModel"]);T!=null&&a(n,["preTunedModel"],T);const E=l(t,["supervisedTuningSpec"]);E!=null&&a(n,["supervisedTuningSpec"],E);const S=l(t,["preferenceOptimizationSpec"]);S!=null&&a(n,["preferenceOptimizationSpec"],S);const _=l(t,["tuningDataStats"]);_!=null&&a(n,["tuningDataStats"],_);const g=l(t,["encryptionSpec"]);g!=null&&a(n,["encryptionSpec"],g);const v=l(t,["partnerModelTuningSpec"]);v!=null&&a(n,["partnerModelTuningSpec"],v);const I=l(t,["customBaseModel"]);I!=null&&a(n,["customBaseModel"],I);const C=l(t,["experiment"]);C!=null&&a(n,["experiment"],C);const w=l(t,["labels"]);w!=null&&a(n,["labels"],w);const x=l(t,["outputUri"]);x!=null&&a(n,["outputUri"],x);const A=l(t,["pipelineJob"]);A!=null&&a(n,["pipelineJob"],A);const P=l(t,["serviceAccount"]);P!=null&&a(n,["serviceAccount"],P);const R=l(t,["tunedModelDisplayName"]);R!=null&&a(n,["tunedModelDisplayName"],R);const B=l(t,["veoTuningSpec"]);return B!=null&&a(n,["veoTuningSpec"],B),n}function ax(t,e){const n={},r=l(t,["sdkHttpResponse"]);r!=null&&a(n,["sdkHttpResponse"],r);const i=l(t,["name"]);i!=null&&a(n,["name"],i);const o=l(t,["metadata"]);o!=null&&a(n,["metadata"],o);const s=l(t,["done"]);s!=null&&a(n,["done"],s);const u=l(t,["error"]);return u!=null&&a(n,["error"],u),n}function tp(t,e){const n={},r=l(t,["gcsUri"]);r!=null&&a(n,["validationDatasetUri"],r);const i=l(t,["vertexDatasetResource"]);return i!=null&&a(n,["validationDatasetUri"],i),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ux extends Xt{constructor(e){super(),this.apiClient=e,this.get=async n=>await this.getInternal(n),this.list=async(n={})=>new er(Wt.PAGED_ITEM_TUNING_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.tune=async n=>{var r;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const i={tunedModelName:n.baseModel};!((r=n.config)===null||r===void 0)&&r.preTunedModelCheckpointId&&(i.checkpointId=n.config.preTunedModelCheckpointId);const o=Object.assign(Object.assign({},n),{preTunedModel:i});return o.baseModel=void 0,await this.tuneInternal(o)}else{const i=Object.assign({},n);return await this.tuneInternal(i)}else{const i=Object.assign({},n),o=await this.tuneMldevInternal(i);let s="";return o.metadata!==void 0&&o.metadata.tunedModel!==void 0?s=o.metadata.tunedModel:o.name!==void 0&&o.name.includes("/operations/")&&(s=o.name.split("/operations/")[0]),{name:s,state:ka.JOB_STATE_QUEUED}}}}async getInternal(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=ZS(e);return u=b("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>Ua(f))}else{const d=XS(e);return u=b("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>kg(f))}}async listInternal(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=nx(e);return u=b("tuningJobs",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=ix(f),h=new bf;return Object.assign(h,p),h})}else{const d=tx(e);return u=b("tunedModels",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=rx(f),h=new bf;return Object.assign(h,p),h})}}async cancel(e){var n,r,i,o;let s="",u={};if(this.apiClient.isVertexAI()){const c=WS(e);s=b("{name}:cancel",c._url),u=c._query,delete c._url,delete c._query,await this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{const c=zS(e);s=b("{name}:cancel",c._url),u=c._query,delete c._url,delete c._query,await this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async tuneInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const u=QS(e,e);return o=b("tuningJobs",u._url),s=u._query,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),i.then(c=>Ua(c))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=YS(e);return o=b("tunedModels",u._url),s=u._query,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),i.then(c=>ax(c))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class cx{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const dx=1024*1024*8,fx=3,px=1e3,hx=2,ps="x-goog-upload-status";async function mx(t,e,n){var r;const i=await Rg(t,e,n),o=await(i==null?void 0:i.json());if(((r=i==null?void 0:i.headers)===null||r===void 0?void 0:r[ps])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return o.file}async function gx(t,e,n){var r;const i=await Rg(t,e,n),o=await(i==null?void 0:i.json());if(((r=i==null?void 0:i.headers)===null||r===void 0?void 0:r[ps])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const s=ig(o),u=new $u;return Object.assign(u,s),u}async function Rg(t,e,n){var r,i;let o=0,s=0,u=new Ra(new Response),c="upload";for(o=t.size;s<o;){const d=Math.min(dx,o-s),f=t.slice(s,s+d);s+d>=o&&(c+=", finalize");let p=0,h=px;for(;p<fx&&(u=await n.request({path:"",body:f,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":c,"X-Goog-Upload-Offset":String(s),"Content-Length":String(d)}}}),!(!((r=u==null?void 0:u.headers)===null||r===void 0)&&r[ps]));)p++,await vx(h),h=h*hx;if(s+=d,((i=u==null?void 0:u.headers)===null||i===void 0?void 0:i[ps])!=="active")break;if(o<=s)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return u}async function yx(t){return{size:t.size,type:t.type}}function vx(t){return new Promise(e=>setTimeout(e,t))}class _x{async upload(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await mx(e,n,r)}async uploadToFileSearchStore(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await gx(e,n,r)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await yx(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Tx{create(e,n,r){return new Ex(e,n,r)}}class Ex{constructor(e,n,r){this.url=e,this.headers=n,this.callbacks=r}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const np="x-goog-api-key";class Ix{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(np)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(np,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Cx="gl-node/";class wx{constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const r=eT(e.httpOptions,e.vertexai,void 0,void 0);r&&(e.httpOptions?e.httpOptions.baseUrl=r:e.httpOptions={baseUrl:r}),this.apiVersion=e.apiVersion;const i=new Ix(this.apiKey);this.apiClient=new Vw({auth:i,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:Cx+"web",uploader:new _x,downloader:new cx}),this.models=new iS(this.apiClient),this.live=new Zw(this.apiClient,i,new Tx),this.batches=new kE(this.apiClient),this.chats=new cI(this.models,this.apiClient),this.caches=new lI(this.apiClient),this.files=new TI(this.apiClient),this.operations=new oS(this.apiClient),this.authTokens=new ES(this.apiClient),this.tunings=new ux(this.apiClient),this.fileSearchStores=new $S(this.apiClient)}}var Sx={API_KEY:'""'};const Pg=()=>{const t=Sx.API_KEY;return new wx({apiKey:t})},xx=async t=>{var n,r,i;const e=Pg();if(!e)return null;try{const s=(i=(r=(n=(await e.models.generateImages({model:"imagen-4.0-generate-001",prompt:`STRICTLY NO TEXT. NO WORDS. NO LETTERS. NO SIGNS. NO LABELS. NO SPEECH BUBBLES. NO SPLIT SCREEN. NO COLLAGE. ONE UNIFIED SCENE. A clean, text-free vector art illustration in digital city style, flat design, modern colors. The scene depicts: ${t}. The image must be purely visual with absolutely no written language or symbols representing text.`,config:{numberOfImages:1,outputMimeType:"image/jpeg",aspectRatio:"16:9"}})).generatedImages)==null?void 0:n[0])==null?void 0:r.image)==null?void 0:i.imageBytes;return s?`data:image/jpeg;base64,${s}`:null}catch(o){return console.error("Error generating image:",o),null}},Ax=async(t,e="neutral")=>{var r,i,o;const n=Pg();if(!n)return null;try{const u=(o=(i=(r=(await n.models.generateImages({model:"imagen-4.0-generate-001",prompt:`STRICTLY NO TEXT. NO WORDS. NO LETTERS. NO NAME TAGS. Vector art avatar portrait of a character named "${t}", looking ${e}. Digital city style, flat design, circle background. Minimalist features. Purely visual character design.`,config:{numberOfImages:1,outputMimeType:"image/jpeg",aspectRatio:"1:1"}})).generatedImages)==null?void 0:r[0])==null?void 0:i.image)==null?void 0:o.imageBytes;return u?`data:image/jpeg;base64,${u}`:null}catch(s){return console.error("Error generating character image:",s),null}};var rp={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mg=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},Nx=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=t[n++],s=t[n++],u=t[n++],c=((i&7)<<18|(o&63)<<12|(s&63)<<6|u&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const o=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},Dg={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const o=t[i],s=i+1<t.length,u=s?t[i+1]:0,c=i+2<t.length,d=c?t[i+2]:0,f=o>>2,p=(o&3)<<4|u>>4;let h=(u&15)<<2|d>>6,y=d&63;c||(y=64,s||(h=64)),r.push(n[f],n[p],n[h],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Mg(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Nx(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const o=n[t.charAt(i++)],u=i<t.length?n[t.charAt(i)]:0;++i;const d=i<t.length?n[t.charAt(i)]:64;++i;const p=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||u==null||d==null||p==null)throw new kx;const h=o<<2|u>>4;if(r.push(h),d!==64){const y=u<<4&240|d>>2;if(r.push(y),p!==64){const T=d<<6&192|p;r.push(T)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class kx extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Rx=function(t){const e=Mg(t);return Dg.encodeByteArray(e,!0)},hs=function(t){return Rx(t).replace(/\./g,"")},bg=function(t){try{return Dg.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Px(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mx=()=>Px().__FIREBASE_DEFAULTS__,Dx=()=>{if(typeof process>"u"||typeof rp>"u")return;const t=rp.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},bx=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&bg(t[1]);return e&&JSON.parse(e)},Qu=()=>{try{return Mx()||Dx()||bx()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Lg=t=>{var e,n;return(n=(e=Qu())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Lx=t=>{const e=Lg(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Ug=()=>{var t;return(t=Qu())===null||t===void 0?void 0:t.config},Fg=t=>{var e;return(e=Qu())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ux{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fx(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[hs(JSON.stringify(n)),hs(JSON.stringify(s)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ue(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Ox(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ue())}function Vx(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Og(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Hx(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Bx(){const t=Ue();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Vg(){try{return typeof indexedDB=="object"}catch{return!1}}function Hg(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}function Gx(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qx="FirebaseError";class Tt extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=qx,Object.setPrototypeOf(this,Tt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,tr.prototype.create)}}class tr{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?$x(o,r):"Error",u=`${this.serviceName}: ${s} (${i}).`;return new Tt(i,u,r)}}function $x(t,e){return t.replace(zx,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const zx=/\{\$([^}]+)}/g;function Wx(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Hi(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const o=t[i],s=e[i];if(ip(o)&&ip(s)){if(!Hi(o,s))return!1}else if(o!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function ip(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ki(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Jx(t,e){const n=new Kx(t,e);return n.subscribe.bind(n)}class Kx{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");Yx(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Il),i.error===void 0&&(i.error=Il),i.complete===void 0&&(i.complete=Il);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Yx(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Il(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qx=1e3,Xx=2,Zx=4*60*60*1e3,jx=.5;function op(t,e=Qx,n=Xx){const r=e*Math.pow(n,t),i=Math.round(jx*r*(Math.random()-.5)*2);return Math.min(Zx,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function at(t){return t&&t._delegate?t._delegate:t}class vt{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ln="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eA{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Ux;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(nA(e))try{this.getOrInitializeService({instanceIdentifier:Ln})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Ln){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ln){return this.instances.has(e)}getOptions(e=Ln){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[o,s]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(o);r===u&&s.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);const s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:tA(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ln){return this.component?this.component.multipleInstances?e:Ln:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function tA(t){return t===Ln?void 0:t}function nA(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rA{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new eA(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var j;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(j||(j={}));const iA={debug:j.DEBUG,verbose:j.VERBOSE,info:j.INFO,warn:j.WARN,error:j.ERROR,silent:j.SILENT},oA=j.INFO,sA={[j.DEBUG]:"log",[j.VERBOSE]:"log",[j.INFO]:"info",[j.WARN]:"warn",[j.ERROR]:"error"},lA=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=sA[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Xu{constructor(e){this.name=e,this._logLevel=oA,this._logHandler=lA,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in j))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?iA[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,j.DEBUG,...e),this._logHandler(this,j.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,j.VERBOSE,...e),this._logHandler(this,j.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,j.INFO,...e),this._logHandler(this,j.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,j.WARN,...e),this._logHandler(this,j.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,j.ERROR,...e),this._logHandler(this,j.ERROR,...e)}}const aA=(t,e)=>e.some(n=>t instanceof n);let sp,lp;function uA(){return sp||(sp=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function cA(){return lp||(lp=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Bg=new WeakMap,Fa=new WeakMap,Gg=new WeakMap,Cl=new WeakMap,Zu=new WeakMap;function dA(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(Cn(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&Bg.set(n,t)}).catch(()=>{}),Zu.set(e,t),e}function fA(t){if(Fa.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});Fa.set(t,e)}let Oa={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Fa.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Gg.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Cn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function pA(t){Oa=t(Oa)}function hA(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(wl(this),e,...n);return Gg.set(r,e.sort?e.sort():[e]),Cn(r)}:cA().includes(t)?function(...e){return t.apply(wl(this),e),Cn(Bg.get(this))}:function(...e){return Cn(t.apply(wl(this),e))}}function mA(t){return typeof t=="function"?hA(t):(t instanceof IDBTransaction&&fA(t),aA(t,uA())?new Proxy(t,Oa):t)}function Cn(t){if(t instanceof IDBRequest)return dA(t);if(Cl.has(t))return Cl.get(t);const e=mA(t);return e!==t&&(Cl.set(t,e),Zu.set(e,t)),e}const wl=t=>Zu.get(t);function qg(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){const s=indexedDB.open(t,e),u=Cn(s);return r&&s.addEventListener("upgradeneeded",c=>{r(Cn(s.result),c.oldVersion,c.newVersion,Cn(s.transaction),c)}),n&&s.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),u.then(c=>{o&&c.addEventListener("close",()=>o()),i&&c.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),u}const gA=["get","getKey","getAll","getAllKeys","count"],yA=["put","add","delete","clear"],Sl=new Map;function ap(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Sl.get(e))return Sl.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=yA.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||gA.includes(n)))return;const o=async function(s,...u){const c=this.transaction(s,i?"readwrite":"readonly");let d=c.store;return r&&(d=d.index(u.shift())),(await Promise.all([d[n](...u),i&&c.done]))[0]};return Sl.set(e,o),o}pA(t=>({...t,get:(e,n,r)=>ap(e,n)||t.get(e,n,r),has:(e,n)=>!!ap(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(_A(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function _A(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Va="@firebase/app",up="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jt=new Xu("@firebase/app"),TA="@firebase/app-compat",EA="@firebase/analytics-compat",IA="@firebase/analytics",CA="@firebase/app-check-compat",wA="@firebase/app-check",SA="@firebase/auth",xA="@firebase/auth-compat",AA="@firebase/database",NA="@firebase/data-connect",kA="@firebase/database-compat",RA="@firebase/functions",PA="@firebase/functions-compat",MA="@firebase/installations",DA="@firebase/installations-compat",bA="@firebase/messaging",LA="@firebase/messaging-compat",UA="@firebase/performance",FA="@firebase/performance-compat",OA="@firebase/remote-config",VA="@firebase/remote-config-compat",HA="@firebase/storage",BA="@firebase/storage-compat",GA="@firebase/firestore",qA="@firebase/vertexai-preview",$A="@firebase/firestore-compat",zA="firebase",WA="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ha="[DEFAULT]",JA={[Va]:"fire-core",[TA]:"fire-core-compat",[IA]:"fire-analytics",[EA]:"fire-analytics-compat",[wA]:"fire-app-check",[CA]:"fire-app-check-compat",[SA]:"fire-auth",[xA]:"fire-auth-compat",[AA]:"fire-rtdb",[NA]:"fire-data-connect",[kA]:"fire-rtdb-compat",[RA]:"fire-fn",[PA]:"fire-fn-compat",[MA]:"fire-iid",[DA]:"fire-iid-compat",[bA]:"fire-fcm",[LA]:"fire-fcm-compat",[UA]:"fire-perf",[FA]:"fire-perf-compat",[OA]:"fire-rc",[VA]:"fire-rc-compat",[HA]:"fire-gcs",[BA]:"fire-gcs-compat",[GA]:"fire-fst",[$A]:"fire-fst-compat",[qA]:"fire-vertex","fire-js":"fire-js",[zA]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ms=new Map,KA=new Map,Ba=new Map;function cp(t,e){try{t.container.addComponent(e)}catch(n){Jt.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Nt(t){const e=t.name;if(Ba.has(e))return Jt.debug(`There were multiple attempts to register component ${e}.`),!1;Ba.set(e,t);for(const n of ms.values())cp(n,t);for(const n of KA.values())cp(n,t);return!0}function nr(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Ft(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},wn=new tr("app","Firebase",YA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QA{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new vt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw wn.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wr=WA;function $g(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Ha,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw wn.create("bad-app-name",{appName:String(i)});if(n||(n=Ug()),!n)throw wn.create("no-options");const o=ms.get(i);if(o){if(Hi(n,o.options)&&Hi(r,o.config))return o;throw wn.create("duplicate-app",{appName:i})}const s=new rA(i);for(const c of Ba.values())s.addComponent(c);const u=new QA(n,r,s);return ms.set(i,u),u}function ju(t=Ha){const e=ms.get(t);if(!e&&t===Ha&&Ug())return $g();if(!e)throw wn.create("no-app",{appName:t});return e}function ot(t,e,n){var r;let i=(r=JA[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){const u=[`Unable to register library "${i}" with version "${e}":`];o&&u.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&u.push("and"),s&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Jt.warn(u.join(" "));return}Nt(new vt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XA="firebase-heartbeat-database",ZA=1,Bi="firebase-heartbeat-store";let xl=null;function zg(){return xl||(xl=qg(XA,ZA,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Bi)}catch(n){console.warn(n)}}}}).catch(t=>{throw wn.create("idb-open",{originalErrorMessage:t.message})})),xl}async function jA(t){try{const n=(await zg()).transaction(Bi),r=await n.objectStore(Bi).get(Wg(t));return await n.done,r}catch(e){if(e instanceof Tt)Jt.warn(e.message);else{const n=wn.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Jt.warn(n.message)}}}async function dp(t,e){try{const r=(await zg()).transaction(Bi,"readwrite");await r.objectStore(Bi).put(e,Wg(t)),await r.done}catch(n){if(n instanceof Tt)Jt.warn(n.message);else{const r=wn.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Jt.warn(r.message)}}}function Wg(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eN=1024,tN=30*24*60*60*1e3;class nN{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new iN(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=fp();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o)?void 0:(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{const u=new Date(s.date).valueOf();return Date.now()-u<=tN}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Jt.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=fp(),{heartbeatsToSend:r,unsentEntries:i}=rN(this._heartbeatsCache.heartbeats),o=hs(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return Jt.warn(n),""}}}function fp(){return new Date().toISOString().substring(0,10)}function rN(t,e=eN){const n=[];let r=t.slice();for(const i of t){const o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),pp(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),pp(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class iN{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Vg()?Hg().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await jA(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return dp(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return dp(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function pp(t){return hs(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oN(t){Nt(new vt("platform-logger",e=>new vA(e),"PRIVATE")),Nt(new vt("heartbeat",e=>new nN(e),"PRIVATE")),ot(Va,up,t),ot(Va,up,"esm2017"),ot("fire-js","")}oN("");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jg="firebasestorage.googleapis.com",Kg="storageBucket",sN=2*60*1e3,lN=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class me extends Tt{constructor(e,n,r=0){super(Al(e),`Firebase Storage: ${n} (${Al(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,me.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Al(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var he;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(he||(he={}));function Al(t){return"storage/"+t}function ec(){const t="An unknown error occurred, please check the error payload for server response.";return new me(he.UNKNOWN,t)}function aN(t){return new me(he.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function uN(t){return new me(he.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function cN(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new me(he.UNAUTHENTICATED,t)}function dN(){return new me(he.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function fN(t){return new me(he.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function pN(){return new me(he.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function hN(){return new me(he.CANCELED,"User canceled the upload/download.")}function mN(t){return new me(he.INVALID_URL,"Invalid URL '"+t+"'.")}function gN(t){return new me(he.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function yN(){return new me(he.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Kg+"' property when initializing the app?")}function vN(){return new me(he.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function _N(){return new me(he.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function TN(t){return new me(he.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Ga(t){return new me(he.INVALID_ARGUMENT,t)}function Yg(){return new me(he.APP_DELETED,"The Firebase app was deleted.")}function EN(t){return new me(he.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Ti(t,e){return new me(he.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function ii(t){throw new me(he.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Je.makeFromUrl(e,n)}catch{return new Je(e,"")}if(r.path==="")return r;throw gN(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function o(I){I.path.charAt(I.path.length-1)==="/"&&(I.path_=I.path_.slice(0,-1))}const s="(/(.*))?$",u=new RegExp("^gs://"+i+s,"i"),c={bucket:1,path:3};function d(I){I.path_=decodeURIComponent(I.path)}const f="v[A-Za-z0-9_]+",p=n.replace(/[.]/g,"\\."),h="(/([^?#]*).*)?$",y=new RegExp(`^https?://${p}/${f}/b/${i}/o${h}`,"i"),T={bucket:1,path:3},E=n===Jg?"(?:storage.googleapis.com|storage.cloud.google.com)":n,S="([^?#]*)",_=new RegExp(`^https?://${E}/${i}/${S}`,"i"),v=[{regex:u,indices:c,postModify:o},{regex:y,indices:T,postModify:d},{regex:_,indices:{bucket:1,path:2},postModify:d}];for(let I=0;I<v.length;I++){const C=v[I],w=C.regex.exec(e);if(w){const x=w[C.indices.bucket];let A=w[C.indices.path];A||(A=""),r=new Je(x,A),C.postModify(r);break}}if(r==null)throw mN(e);return r}}class IN{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CN(t,e,n){let r=1,i=null,o=null,s=!1,u=0;function c(){return u===2}let d=!1;function f(...S){d||(d=!0,e.apply(null,S))}function p(S){i=setTimeout(()=>{i=null,t(y,c())},S)}function h(){o&&clearTimeout(o)}function y(S,..._){if(d){h();return}if(S){h(),f.call(null,S,..._);return}if(c()||s){h(),f.call(null,S,..._);return}r<64&&(r*=2);let v;u===1?(u=2,v=0):v=(r+Math.random())*1e3,p(v)}let T=!1;function E(S){T||(T=!0,h(),!d&&(i!==null?(S||(u=2),clearTimeout(i),p(0)):S||(u=1)))}return p(0),o=setTimeout(()=>{s=!0,E(!0)},n),E}function wN(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SN(t){return t!==void 0}function xN(t){return typeof t=="object"&&!Array.isArray(t)}function tc(t){return typeof t=="string"||t instanceof String}function hp(t){return nc()&&t instanceof Blob}function nc(){return typeof Blob<"u"}function mp(t,e,n,r){if(r<e)throw Ga(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Ga(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rc(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function Qg(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var Gn;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Gn||(Gn={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AN(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,o=e.indexOf(t)!==-1;return n||i||o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NN{constructor(e,n,r,i,o,s,u,c,d,f,p,h=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=s,this.callback_=u,this.errorCallback_=c,this.timeout_=d,this.progressCallback_=f,this.connectionFactory_=p,this.retry=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((y,T)=>{this.resolve_=y,this.reject_=T,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new vo(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const s=u=>{const c=u.loaded,d=u.lengthComputable?u.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,d)};this.progressCallback_!==null&&o.addUploadProgressListener(s),o.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(s),this.pendingConnection_=null;const u=o.getErrorCode()===Gn.NO_ERROR,c=o.getStatus();if(!u||AN(c,this.additionalRetryCodes_)&&this.retry){const f=o.getErrorCode()===Gn.ABORT;r(!1,new vo(!1,null,f));return}const d=this.successCodes_.indexOf(c)!==-1;r(!0,new vo(d,o))})},n=(r,i)=>{const o=this.resolve_,s=this.reject_,u=i.connection;if(i.wasSuccessCode)try{const c=this.callback_(u,u.getResponse());SN(c)?o(c):o()}catch(c){s(c)}else if(u!==null){const c=ec();c.serverResponse=u.getErrorText(),this.errorCallback_?s(this.errorCallback_(u,c)):s(c)}else if(i.canceled){const c=this.appDelete_?Yg():hN();s(c)}else{const c=pN();s(c)}};this.canceled_?n(!1,new vo(!1,null,!0)):this.backoffId_=CN(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&wN(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class vo{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function kN(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function RN(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function PN(t,e){e&&(t["X-Firebase-GMPID"]=e)}function MN(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function DN(t,e,n,r,i,o,s=!0){const u=Qg(t.urlParams),c=t.url+u,d=Object.assign({},t.headers);return PN(d,e),kN(d,n),RN(d,o),MN(d,r),new NN(c,t.method,d,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bN(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function LN(...t){const e=bN();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(nc())return new Blob(t);throw new me(he.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function UN(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FN(t){if(typeof atob>"u")throw TN("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ht={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Nl{constructor(e,n){this.data=e,this.contentType=n||null}}function Xg(t,e){switch(t){case ht.RAW:return new Nl(Zg(e));case ht.BASE64:case ht.BASE64URL:return new Nl(jg(t,e));case ht.DATA_URL:return new Nl(VN(e),HN(e))}throw ec()}function Zg(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const o=r,s=t.charCodeAt(++n);r=65536|(o&1023)<<10|s&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function ON(t){let e;try{e=decodeURIComponent(t)}catch{throw Ti(ht.DATA_URL,"Malformed data URL.")}return Zg(e)}function jg(t,e){switch(t){case ht.BASE64:{const i=e.indexOf("-")!==-1,o=e.indexOf("_")!==-1;if(i||o)throw Ti(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case ht.BASE64URL:{const i=e.indexOf("+")!==-1,o=e.indexOf("/")!==-1;if(i||o)throw Ti(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=FN(e)}catch(i){throw i.message.includes("polyfill")?i:Ti(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class ey{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Ti(ht.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=BN(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function VN(t){const e=new ey(t);return e.base64?jg(ht.BASE64,e.rest):ON(e.rest)}function HN(t){return new ey(t).contentType}function BN(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e,n){let r=0,i="";hp(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(hp(this.data_)){const r=this.data_,i=UN(r,e,n);return i===null?null:new ln(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new ln(r,!0)}}static getBlob(...e){if(nc()){const n=e.map(r=>r instanceof ln?r.data_:r);return new ln(LN.apply(null,n))}else{const n=e.map(s=>tc(s)?Xg(ht.RAW,s).data:s.data_);let r=0;n.forEach(s=>{r+=s.byteLength});const i=new Uint8Array(r);let o=0;return n.forEach(s=>{for(let u=0;u<s.length;u++)i[o++]=s[u]}),new ln(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ty(t){let e;try{e=JSON.parse(t)}catch{return null}return xN(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GN(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function qN(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function ny(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $N(t,e){return e}class De{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||$N}}let _o=null;function zN(t){return!tc(t)||t.length<2?t:ny(t)}function ry(){if(_o)return _o;const t=[];t.push(new De("bucket")),t.push(new De("generation")),t.push(new De("metageneration")),t.push(new De("name","fullPath",!0));function e(o,s){return zN(s)}const n=new De("name");n.xform=e,t.push(n);function r(o,s){return s!==void 0?Number(s):s}const i=new De("size");return i.xform=r,t.push(i),t.push(new De("timeCreated")),t.push(new De("updated")),t.push(new De("md5Hash",null,!0)),t.push(new De("cacheControl",null,!0)),t.push(new De("contentDisposition",null,!0)),t.push(new De("contentEncoding",null,!0)),t.push(new De("contentLanguage",null,!0)),t.push(new De("contentType",null,!0)),t.push(new De("metadata","customMetadata",!0)),_o=t,_o}function WN(t,e){function n(){const r=t.bucket,i=t.fullPath,o=new Je(r,i);return e._makeStorageReference(o)}Object.defineProperty(t,"ref",{get:n})}function JN(t,e,n){const r={};r.type="file";const i=n.length;for(let o=0;o<i;o++){const s=n[o];r[s.local]=s.xform(r,e[s.server])}return WN(r,t),r}function iy(t,e,n){const r=ty(e);return r===null?null:JN(t,r,n)}function KN(t,e,n,r){const i=ty(e);if(i===null||!tc(i.downloadTokens))return null;const o=i.downloadTokens;if(o.length===0)return null;const s=encodeURIComponent;return o.split(",").map(d=>{const f=t.bucket,p=t.fullPath,h="/b/"+s(f)+"/o/"+s(p),y=rc(h,n,r),T=Qg({alt:"media",token:d});return y+T})[0]}function YN(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}class oy{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sy(t){if(!t)throw ec()}function QN(t,e){function n(r,i){const o=iy(t,i,e);return sy(o!==null),o}return n}function XN(t,e){function n(r,i){const o=iy(t,i,e);return sy(o!==null),KN(o,i,t.host,t._protocol)}return n}function ly(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=dN():i=cN():n.getStatus()===402?i=uN(t.bucket):n.getStatus()===403?i=fN(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function ZN(t){const e=ly(t);function n(r,i){let o=e(r,i);return r.getStatus()===404&&(o=aN(t.path)),o.serverResponse=i.serverResponse,o}return n}function jN(t,e,n){const r=e.fullServerUrl(),i=rc(r,t.host,t._protocol),o="GET",s=t.maxOperationRetryTime,u=new oy(i,o,XN(t,n),s);return u.errorHandler=ZN(e),u}function ek(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function tk(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=ek(null,e)),r}function nk(t,e,n,r,i){const o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"};function u(){let v="";for(let I=0;I<2;I++)v=v+Math.random().toString().slice(2);return v}const c=u();s["Content-Type"]="multipart/related; boundary="+c;const d=tk(e,r,i),f=YN(d,n),p="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+f+`\r
--`+c+`\r
Content-Type: `+d.contentType+`\r
\r
`,h=`\r
--`+c+"--",y=ln.getBlob(p,r,h);if(y===null)throw vN();const T={name:d.fullPath},E=rc(o,t.host,t._protocol),S="POST",_=t.maxUploadRetryTime,g=new oy(E,S,QN(t,n),_);return g.urlParams=T,g.headers=s,g.body=y.uploadData(),g.errorHandler=ly(e),g}class rk{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Gn.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Gn.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Gn.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i){if(this.sent_)throw ii("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw ii("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw ii("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw ii("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw ii("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class ik extends rk{initXhr(){this.xhr_.responseType="text"}}function ay(){return new ik}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(e,n){this._service=e,n instanceof Je?this._location=n:this._location=Je.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Kn(e,n)}get root(){const e=new Je(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return ny(this._location.path)}get storage(){return this._service}get parent(){const e=GN(this._location.path);if(e===null)return null;const n=new Je(this._location.bucket,e);return new Kn(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw EN(e)}}function ok(t,e,n){t._throwIfRoot("uploadBytes");const r=nk(t.storage,t._location,ry(),new ln(e,!0),n);return t.storage.makeRequestWithTokens(r,ay).then(i=>({metadata:i,ref:t}))}function sk(t,e,n=ht.RAW,r){t._throwIfRoot("uploadString");const i=Xg(n,e),o=Object.assign({},r);return o.contentType==null&&i.contentType!=null&&(o.contentType=i.contentType),ok(t,i.data,o)}function lk(t){t._throwIfRoot("getDownloadURL");const e=jN(t.storage,t._location,ry());return t.storage.makeRequestWithTokens(e,ay).then(n=>{if(n===null)throw _N();return n})}function ak(t,e){const n=qN(t._location.path,e),r=new Je(t._location.bucket,n);return new Kn(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uk(t){return/^[A-Za-z]+:\/\//.test(t)}function ck(t,e){return new Kn(t,e)}function uy(t,e){if(t instanceof ic){const n=t;if(n._bucket==null)throw yN();const r=new Kn(n,n._bucket);return e!=null?uy(r,e):r}else return e!==void 0?ak(t,e):t}function dk(t,e){if(e&&uk(e)){if(t instanceof ic)return ck(t,e);throw Ga("To use ref(service, url), the first argument must be a Storage instance.")}else return uy(t,e)}function gp(t,e){const n=e==null?void 0:e[Kg];return n==null?null:Je.makeFromBucketSpec(n,t)}function fk(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:Fx(i,t.app.options.projectId))}class ic{constructor(e,n,r,i,o){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host=Jg,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=sN,this._maxUploadRetryTime=lN,this._requests=new Set,i!=null?this._bucket=Je.makeFromBucketSpec(i,this._host):this._bucket=gp(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Je.makeFromBucketSpec(this._url,e):this._bucket=gp(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){mp("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){mp("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Kn(this,e)}_makeRequest(e,n,r,i,o=!0){if(this._deleted)return new IN(Yg());{const s=DN(e,this._appId,r,i,n,this._firebaseVersion,o);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const yp="@firebase/storage",vp="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cy="storage";function pk(t,e,n,r){return t=at(t),sk(t,e,n,r)}function hk(t){return t=at(t),lk(t)}function mk(t,e){return t=at(t),dk(t,e)}function gk(t=ju(),e){t=at(t);const r=nr(t,cy).getImmediate({identifier:e}),i=Lx("storage");return i&&yk(r,...i),r}function yk(t,e,n,r={}){fk(t,e,n,r)}function vk(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new ic(n,r,i,e,Wr)}function _k(){Nt(new vt(cy,vk,"PUBLIC").setMultipleInstances(!0)),ot(yp,vp,""),ot(yp,vp,"esm2017")}_k();function oc(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function dy(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Tk=dy,fy=new tr("auth","Firebase",dy());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gs=new Xu("@firebase/auth");function Ek(t,...e){gs.logLevel<=j.WARN&&gs.warn(`Auth (${Wr}): ${t}`,...e)}function Uo(t,...e){gs.logLevel<=j.ERROR&&gs.error(`Auth (${Wr}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kt(t,...e){throw sc(t,...e)}function xt(t,...e){return sc(t,...e)}function py(t,e,n){const r=Object.assign(Object.assign({},Tk()),{[e]:n});return new tr("auth","Firebase",r).create(e,{appName:t.name})}function Sn(t){return py(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function sc(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return fy.create(t,...e)}function V(t,e,...n){if(!t)throw sc(e,...n)}function Ot(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Uo(e),new Error(e)}function Yt(t,e){t||Ot(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qa(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function Ik(){return _p()==="http:"||_p()==="https:"}function _p(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ck(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Ik()||Og()||"connection"in navigator)?navigator.onLine:!0}function wk(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi{constructor(e,n){this.shortDelay=e,this.longDelay=n,Yt(n>e,"Short delay should be less than long delay!"),this.isMobile=Ox()||Hx()}get(){return Ck()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lc(t,e){Yt(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hy{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ot("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ot("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ot("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sk={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xk=new Yi(3e4,6e4);function qs(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Jr(t,e,n,r,i={}){return my(t,i,async()=>{let o={},s={};r&&(e==="GET"?s=r:o={body:JSON.stringify(r)});const u=Ki(Object.assign({key:t.config.apiKey},s)).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const d=Object.assign({method:e,headers:c},o);return Vx()||(d.referrerPolicy="no-referrer"),hy.fetch()(yy(t,t.config.apiHost,n,u),d)})}async function my(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},Sk),e);try{const i=new Ak(t),o=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const s=await o.json();if("needConfirmation"in s)throw To(t,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{const u=o.ok?s.errorMessage:s.error.message,[c,d]=u.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw To(t,"credential-already-in-use",s);if(c==="EMAIL_EXISTS")throw To(t,"email-already-in-use",s);if(c==="USER_DISABLED")throw To(t,"user-disabled",s);const f=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw py(t,f,d);Kt(t,f)}}catch(i){if(i instanceof Tt)throw i;Kt(t,"network-request-failed",{message:String(i)})}}async function gy(t,e,n,r,i={}){const o=await Jr(t,e,n,r,i);return"mfaPendingCredential"in o&&Kt(t,"multi-factor-auth-required",{_serverResponse:o}),o}function yy(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?lc(t.config,i):`${t.config.apiScheme}://${i}`}class Ak{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(xt(this.auth,"network-request-failed")),xk.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function To(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=xt(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nk(t,e){return Jr(t,"POST","/v1/accounts:delete",e)}async function vy(t,e){return Jr(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ei(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function kk(t,e=!1){const n=at(t),r=await n.getIdToken(e),i=ac(r);V(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const o=typeof i.firebase=="object"?i.firebase:void 0,s=o==null?void 0:o.sign_in_provider;return{claims:i,token:r,authTime:Ei(kl(i.auth_time)),issuedAtTime:Ei(kl(i.iat)),expirationTime:Ei(kl(i.exp)),signInProvider:s||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function kl(t){return Number(t)*1e3}function ac(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Uo("JWT malformed, contained fewer than 3 sections"),null;try{const i=bg(n);return i?JSON.parse(i):(Uo("Failed to decode base64 JWT payload"),null)}catch(i){return Uo("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function Tp(t){const e=ac(t);return V(e,"internal-error"),V(typeof e.exp<"u","internal-error"),V(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gi(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Tt&&Rk(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function Rk({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pk{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $a{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ei(this.lastLoginAt),this.creationTime=Ei(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ys(t){var e;const n=t.auth,r=await t.getIdToken(),i=await Gi(t,vy(n,{idToken:r}));V(i==null?void 0:i.users.length,n,"internal-error");const o=i.users[0];t._notifyReloadListener(o);const s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?_y(o.providerUserInfo):[],u=Dk(t.providerData,s),c=t.isAnonymous,d=!(t.email&&o.passwordHash)&&!(u!=null&&u.length),f=c?d:!1,p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new $a(o.createdAt,o.lastLoginAt),isAnonymous:f};Object.assign(t,p)}async function Mk(t){const e=at(t);await ys(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Dk(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function _y(t){return t.map(e=>{var{providerId:n}=e,r=oc(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bk(t,e){const n=await my(t,{},async()=>{const r=Ki({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,s=yy(t,i,"/v1/token",`key=${o}`),u=await t._getAdditionalHeaders();return u["Content-Type"]="application/x-www-form-urlencoded",hy.fetch()(s,{method:"POST",headers:u,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Lk(t,e){return Jr(t,"POST","/v2/accounts:revokeToken",qs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){V(e.idToken,"internal-error"),V(typeof e.idToken<"u","internal-error"),V(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Tp(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){V(e.length!==0,"internal-error");const n=Tp(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(V(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:o}=await bk(e,n);this.updateTokensAndExpiration(r,i,Number(o))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:o}=n,s=new Rr;return r&&(V(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(V(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(V(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Rr,this.toJSON())}_performRefresh(){return Ot("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tn(t,e){V(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Vt{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,o=oc(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Pk(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new $a(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await Gi(this,this.stsTokenManager.getToken(this.auth,e));return V(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return kk(this,e)}reload(){return Mk(this)}_assign(e){this!==e&&(V(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Vt(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){V(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await ys(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ft(this.auth.app))return Promise.reject(Sn(this.auth));const e=await this.getIdToken();return await Gi(this,Nk(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,o,s,u,c,d,f;const p=(r=n.displayName)!==null&&r!==void 0?r:void 0,h=(i=n.email)!==null&&i!==void 0?i:void 0,y=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,T=(s=n.photoURL)!==null&&s!==void 0?s:void 0,E=(u=n.tenantId)!==null&&u!==void 0?u:void 0,S=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,_=(d=n.createdAt)!==null&&d!==void 0?d:void 0,g=(f=n.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:v,emailVerified:I,isAnonymous:C,providerData:w,stsTokenManager:x}=n;V(v&&x,e,"internal-error");const A=Rr.fromJSON(this.name,x);V(typeof v=="string",e,"internal-error"),tn(p,e.name),tn(h,e.name),V(typeof I=="boolean",e,"internal-error"),V(typeof C=="boolean",e,"internal-error"),tn(y,e.name),tn(T,e.name),tn(E,e.name),tn(S,e.name),tn(_,e.name),tn(g,e.name);const P=new Vt({uid:v,auth:e,email:h,emailVerified:I,displayName:p,isAnonymous:C,photoURL:T,phoneNumber:y,tenantId:E,stsTokenManager:A,createdAt:_,lastLoginAt:g});return w&&Array.isArray(w)&&(P.providerData=w.map(R=>Object.assign({},R))),S&&(P._redirectEventId=S),P}static async _fromIdTokenResponse(e,n,r=!1){const i=new Rr;i.updateFromServerResponse(n);const o=new Vt({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await ys(o),o}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];V(i.localId!==void 0,"internal-error");const o=i.providerUserInfo!==void 0?_y(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!(o!=null&&o.length),u=new Rr;u.updateFromIdToken(r);const c=new Vt({uid:i.localId,auth:e,stsTokenManager:u,isAnonymous:s}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new $a(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(o!=null&&o.length)};return Object.assign(c,d),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ep=new Map;function Ht(t){Yt(t instanceof Function,"Expected a class definition");let e=Ep.get(t);return e?(Yt(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Ep.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ty{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Ty.type="NONE";const Ip=Ty;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fo(t,e,n){return`firebase:${t}:${e}:${n}`}class Pr{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:o}=this.auth;this.fullUserKey=Fo(this.userKey,i.apiKey,o),this.fullPersistenceKey=Fo("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Vt._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Pr(Ht(Ip),e,r);const i=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let o=i[0]||Ht(Ip);const s=Fo(r,e.config.apiKey,e.name);let u=null;for(const d of n)try{const f=await d._get(s);if(f){const p=Vt._fromJSON(e,f);d!==o&&(u=p),o=d;break}}catch{}const c=i.filter(d=>d._shouldAllowMigration);return!o._shouldAllowMigration||!c.length?new Pr(o,e,r):(o=c[0],u&&await o._set(s,u.toJSON()),await Promise.all(n.map(async d=>{if(d!==o)try{await d._remove(s)}catch{}})),new Pr(o,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cp(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(wy(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Ey(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(xy(e))return"Blackberry";if(Ay(e))return"Webos";if(Iy(e))return"Safari";if((e.includes("chrome/")||Cy(e))&&!e.includes("edge/"))return"Chrome";if(Sy(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Ey(t=Ue()){return/firefox\//i.test(t)}function Iy(t=Ue()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Cy(t=Ue()){return/crios\//i.test(t)}function wy(t=Ue()){return/iemobile/i.test(t)}function Sy(t=Ue()){return/android/i.test(t)}function xy(t=Ue()){return/blackberry/i.test(t)}function Ay(t=Ue()){return/webos/i.test(t)}function uc(t=Ue()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Uk(t=Ue()){var e;return uc(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Fk(){return Bx()&&document.documentMode===10}function Ny(t=Ue()){return uc(t)||Sy(t)||Ay(t)||xy(t)||/windows phone/i.test(t)||wy(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ky(t,e=[]){let n;switch(t){case"Browser":n=Cp(Ue());break;case"Worker":n=`${Cp(Ue())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Wr}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ok{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=o=>new Promise((s,u)=>{try{const c=e(o);s(c)}catch(c){u(c)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vk(t,e={}){return Jr(t,"GET","/v2/passwordPolicy",qs(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hk=6;class Bk{constructor(e){var n,r,i,o;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=s.minPasswordLength)!==null&&n!==void 0?n:Hk,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,o,s,u;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(o=c.containsUppercaseLetter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(s=c.containsNumericCharacter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(u=c.containsNonAlphanumericCharacter)!==null&&u!==void 0?u:!0),c}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gk{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new wp(this),this.idTokenSubscription=new wp(this),this.beforeStateQueue=new Ok(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=fy,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ht(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Pr.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await vy(this,{idToken:e}),r=await Vt._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Ft(this.app)){const s=this.app.settings.authIdToken;return s?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(u,u))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const s=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,u=i==null?void 0:i._redirectEventId,c=await this.tryRedirectSignIn(e);(!s||s===u)&&(c!=null&&c.user)&&(i=c.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return V(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await ys(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=wk()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ft(this.app))return Promise.reject(Sn(this));const n=e?at(e):null;return n&&V(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&V(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ft(this.app)?Promise.reject(Sn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ft(this.app)?Promise.reject(Sn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ht(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Vk(this),n=new Bk(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new tr("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await Lk(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ht(e)||this._popupRedirectResolver;V(n,this,"argument-error"),this.redirectPersistenceManager=await Pr.create(this,[Ht(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let s=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(V(u,this,"internal-error"),u.then(()=>{s||o(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,i);return()=>{s=!0,c()}}else{const c=e.addObserver(n);return()=>{s=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return V(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ky(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&Ek(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function $s(t){return at(t)}class wp{constructor(e){this.auth=e,this.observer=null,this.addObserver=Jx(n=>this.observer=n)}get next(){return V(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function qk(t){cc=t}function $k(t){return cc.loadJS(t)}function zk(){return cc.gapiScript}function Wk(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jk(t,e){const n=nr(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),o=n.getOptions();if(Hi(o,e??{}))return i;Kt(i,"already-initialized")}return n.initialize({options:e})}function Kk(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Ht);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function Yk(t,e,n){const r=$s(t);V(r._canInitEmulator,r,"emulator-config-failed"),V(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,o=Ry(e),{host:s,port:u}=Qk(e),c=u===null?"":`:${u}`;r.config.emulator={url:`${o}//${s}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:s,port:u,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})}),Xk()}function Ry(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Qk(t){const e=Ry(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const o=i[1];return{host:o,port:Sp(r.substr(o.length+1))}}else{const[o,s]=r.split(":");return{host:o,port:Sp(s)}}}function Sp(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function Xk(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Py{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ot("not implemented")}_getIdTokenResponse(e){return Ot("not implemented")}_linkToIdToken(e,n){return Ot("not implemented")}_getReauthenticationResolver(e){return Ot("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mr(t,e){return gy(t,"POST","/v1/accounts:signInWithIdp",qs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zk="http://localhost";class Yn extends Py{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Yn(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Kt("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,o=oc(n,["providerId","signInMethod"]);if(!r||!i)return null;const s=new Yn(r,i);return s.idToken=o.idToken||void 0,s.accessToken=o.accessToken||void 0,s.secret=o.secret,s.nonce=o.nonce,s.pendingToken=o.pendingToken||null,s}_getIdTokenResponse(e){const n=this.buildRequest();return Mr(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Mr(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Mr(e,n)}buildRequest(){const e={requestUri:Zk,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Ki(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class My{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qi extends My{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an extends Qi{constructor(){super("facebook.com")}static credential(e){return Yn._fromParams({providerId:an.PROVIDER_ID,signInMethod:an.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return an.credentialFromTaggedObject(e)}static credentialFromError(e){return an.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return an.credential(e.oauthAccessToken)}catch{return null}}}an.FACEBOOK_SIGN_IN_METHOD="facebook.com";an.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un extends Qi{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Yn._fromParams({providerId:un.PROVIDER_ID,signInMethod:un.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return un.credentialFromTaggedObject(e)}static credentialFromError(e){return un.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return un.credential(n,r)}catch{return null}}}un.GOOGLE_SIGN_IN_METHOD="google.com";un.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn extends Qi{constructor(){super("github.com")}static credential(e){return Yn._fromParams({providerId:cn.PROVIDER_ID,signInMethod:cn.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return cn.credentialFromTaggedObject(e)}static credentialFromError(e){return cn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return cn.credential(e.oauthAccessToken)}catch{return null}}}cn.GITHUB_SIGN_IN_METHOD="github.com";cn.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn extends Qi{constructor(){super("twitter.com")}static credential(e,n){return Yn._fromParams({providerId:dn.PROVIDER_ID,signInMethod:dn.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return dn.credentialFromTaggedObject(e)}static credentialFromError(e){return dn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return dn.credential(n,r)}catch{return null}}}dn.TWITTER_SIGN_IN_METHOD="twitter.com";dn.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jk(t,e){return gy(t,"POST","/v1/accounts:signUp",qs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const o=await Vt._fromIdTokenResponse(e,r,i),s=xp(r);return new Nn({user:o,providerId:s,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=xp(r);return new Nn({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function xp(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dy(t){var e;if(Ft(t.app))return Promise.reject(Sn(t));const n=$s(t);if(await n._initializationPromise,!((e=n.currentUser)===null||e===void 0)&&e.isAnonymous)return new Nn({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await jk(n,{returnSecureToken:!0}),i=await Nn._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs extends Tt{constructor(e,n,r,i){var o;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,vs.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new vs(e,n,r,i)}}function by(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?vs._fromErrorAndOperation(t,o,e,r):o})}async function eR(t,e,n=!1){const r=await Gi(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Nn._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tR(t,e,n=!1){const{auth:r}=t;if(Ft(r.app))return Promise.reject(Sn(r));const i="reauthenticate";try{const o=await Gi(t,by(r,i,e,t),n);V(o.idToken,r,"internal-error");const s=ac(o.idToken);V(s,r,"internal-error");const{sub:u}=s;return V(t.uid===u,r,"user-mismatch"),Nn._forOperation(t,i,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&Kt(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nR(t,e,n=!1){if(Ft(t.app))return Promise.reject(Sn(t));const r="signIn",i=await by(t,r,e),o=await Nn._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(o.user),o}function rR(t,e,n,r){return at(t).onIdTokenChanged(e,n,r)}function iR(t,e,n){return at(t).beforeAuthStateChanged(e,n)}const _s="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ly{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(_s,"1"),this.storage.removeItem(_s),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oR=1e3,sR=10;class Uy extends Ly{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Ny(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((s,u,c)=>{this.notifyListeners(s,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const s=this.storage.getItem(r);!n&&this.localCache[r]===s||this.notifyListeners(r,s)},o=this.storage.getItem(r);Fk()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,sR):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},oR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Uy.type="LOCAL";const lR=Uy;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fy extends Ly{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Fy.type="SESSION";const Oy=Fy;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aR(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new zs(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:o}=n.data,s=this.handlersMap[i];if(!(s!=null&&s.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const u=Array.from(s).map(async d=>d(n.origin,o)),c=await aR(u);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}zs.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dc(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uR{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((u,c)=>{const d=dc("",20);i.port1.start();const f=setTimeout(()=>{c(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(p){const h=p;if(h.data.eventId===d)switch(h.data.status){case"ack":clearTimeout(f),o=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),u(h.data.response);break;default:clearTimeout(f),clearTimeout(o),c(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function At(){return window}function cR(t){At().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vy(){return typeof At().WorkerGlobalScope<"u"&&typeof At().importScripts=="function"}async function dR(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function fR(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function pR(){return Vy()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hy="firebaseLocalStorageDb",hR=1,Ts="firebaseLocalStorage",By="fbase_key";class Xi{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Ws(t,e){return t.transaction([Ts],e?"readwrite":"readonly").objectStore(Ts)}function mR(){const t=indexedDB.deleteDatabase(Hy);return new Xi(t).toPromise()}function za(){const t=indexedDB.open(Hy,hR);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Ts,{keyPath:By})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Ts)?e(r):(r.close(),await mR(),e(await za()))})})}async function Ap(t,e,n){const r=Ws(t,!0).put({[By]:e,value:n});return new Xi(r).toPromise()}async function gR(t,e){const n=Ws(t,!1).get(e),r=await new Xi(n).toPromise();return r===void 0?null:r.value}function Np(t,e){const n=Ws(t,!0).delete(e);return new Xi(n).toPromise()}const yR=800,vR=3;class Gy{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await za(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>vR)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Vy()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=zs._getInstance(pR()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await dR(),!this.activeServiceWorker)return;this.sender=new uR(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||fR()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await za();return await Ap(e,_s,"1"),await Np(e,_s),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Ap(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>gR(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Np(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const o=Ws(i,!1).getAll();return new Xi(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:o}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(o)&&(this.notifyListeners(i,o),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),yR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Gy.type="LOCAL";const _R=Gy;new Yi(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TR(t,e){return e?Ht(e):(V(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fc extends Py{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Mr(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Mr(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Mr(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function ER(t){return nR(t.auth,new fc(t),t.bypassAuthState)}function IR(t){const{auth:e,user:n}=t;return V(n,e,"internal-error"),tR(n,new fc(t),t.bypassAuthState)}async function CR(t){const{auth:e,user:n}=t;return V(n,e,"internal-error"),eR(n,new fc(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qy{constructor(e,n,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:o,error:s,type:u}=e;if(s){this.reject(s);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(c))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return ER;case"linkViaPopup":case"linkViaRedirect":return CR;case"reauthViaPopup":case"reauthViaRedirect":return IR;default:Kt(this.auth,"internal-error")}}resolve(e){Yt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Yt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wR=new Yi(2e3,1e4);class Tr extends qy{constructor(e,n,r,i,o){super(e,n,i,o),this.provider=r,this.authWindow=null,this.pollId=null,Tr.currentPopupAction&&Tr.currentPopupAction.cancel(),Tr.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return V(e,this.auth,"internal-error"),e}async onExecution(){Yt(this.filter.length===1,"Popup operations only handle one event");const e=dc();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(xt(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(xt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Tr.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(xt(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,wR.get())};e()}}Tr.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SR="pendingRedirect",Oo=new Map;class xR extends qy{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Oo.get(this.auth._key());if(!e){try{const r=await AR(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Oo.set(this.auth._key(),e)}return this.bypassAuthState||Oo.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function AR(t,e){const n=RR(e),r=kR(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function NR(t,e){Oo.set(t._key(),e)}function kR(t){return Ht(t._redirectPersistence)}function RR(t){return Fo(SR,t.config.apiKey,t.name)}async function PR(t,e,n=!1){if(Ft(t.app))return Promise.reject(Sn(t));const r=$s(t),i=TR(r,e),s=await new xR(r,i,n).execute();return s&&!n&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,e)),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MR=10*60*1e3;class DR{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!bR(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!$y(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(xt(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=MR&&this.cachedEventUids.clear(),this.cachedEventUids.has(kp(e))}saveEventToCache(e){this.cachedEventUids.add(kp(e)),this.lastProcessedEventTime=Date.now()}}function kp(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function $y({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function bR(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return $y(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LR(t,e={}){return Jr(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UR=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,FR=/^https?/;async function OR(t){if(t.config.emulator)return;const{authorizedDomains:e}=await LR(t);for(const n of e)try{if(VR(n))return}catch{}Kt(t,"unauthorized-domain")}function VR(t){const e=qa(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const s=new URL(t);return s.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&s.hostname===r}if(!FR.test(n))return!1;if(UR.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HR=new Yi(3e4,6e4);function Rp(){const t=At().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function BR(t){return new Promise((e,n)=>{var r,i,o;function s(){Rp(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Rp(),n(xt(t,"network-request-failed"))},timeout:HR.get()})}if(!((i=(r=At().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=At().gapi)===null||o===void 0)&&o.load)s();else{const u=Wk("iframefcb");return At()[u]=()=>{gapi.load?s():n(xt(t,"network-request-failed"))},$k(`${zk()}?onload=${u}`).catch(c=>n(c))}}).catch(e=>{throw Vo=null,e})}let Vo=null;function GR(t){return Vo=Vo||BR(t),Vo}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qR=new Yi(5e3,15e3),$R="__/auth/iframe",zR="emulator/auth/iframe",WR={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},JR=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function KR(t){const e=t.config;V(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?lc(e,zR):`https://${t.config.authDomain}/${$R}`,r={apiKey:e.apiKey,appName:t.name,v:Wr},i=JR.get(t.config.apiHost);i&&(r.eid=i);const o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${Ki(r).slice(1)}`}async function YR(t){const e=await GR(t),n=At().gapi;return V(n,t,"internal-error"),e.open({where:document.body,url:KR(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:WR,dontclear:!0},r=>new Promise(async(i,o)=>{await r.restyle({setHideOnLeave:!1});const s=xt(t,"network-request-failed"),u=At().setTimeout(()=>{o(s)},qR.get());function c(){At().clearTimeout(u),i(r)}r.ping(c).then(c,()=>{o(s)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QR={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},XR=500,ZR=600,jR="_blank",eP="http://localhost";class Pp{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function tP(t,e,n,r=XR,i=ZR){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString();let u="";const c=Object.assign(Object.assign({},QR),{width:r.toString(),height:i.toString(),top:o,left:s}),d=Ue().toLowerCase();n&&(u=Cy(d)?jR:n),Ey(d)&&(e=e||eP,c.scrollbars="yes");const f=Object.entries(c).reduce((h,[y,T])=>`${h}${y}=${T},`,"");if(Uk(d)&&u!=="_self")return nP(e||"",u),new Pp(null);const p=window.open(e||"",u,f);V(p,t,"popup-blocked");try{p.focus()}catch{}return new Pp(p)}function nP(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rP="__/auth/handler",iP="emulator/auth/handler",oP=encodeURIComponent("fac");async function Mp(t,e,n,r,i,o){V(t.config.authDomain,t,"auth-domain-config-required"),V(t.config.apiKey,t,"invalid-api-key");const s={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Wr,eventId:i};if(e instanceof My){e.setDefaultLanguage(t.languageCode),s.providerId=e.providerId||"",Wx(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,p]of Object.entries({}))s[f]=p}if(e instanceof Qi){const f=e.getScopes().filter(p=>p!=="");f.length>0&&(s.scopes=f.join(","))}t.tenantId&&(s.tid=t.tenantId);const u=s;for(const f of Object.keys(u))u[f]===void 0&&delete u[f];const c=await t._getAppCheckToken(),d=c?`#${oP}=${encodeURIComponent(c)}`:"";return`${sP(t)}?${Ki(u).slice(1)}${d}`}function sP({config:t}){return t.emulator?lc(t,iP):`https://${t.authDomain}/${rP}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rl="webStorageSupport";class lP{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Oy,this._completeRedirectFn=PR,this._overrideRedirectResult=NR}async _openPopup(e,n,r,i){var o;Yt((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const s=await Mp(e,n,r,qa(),i);return tP(e,s,dc())}async _openRedirect(e,n,r,i){await this._originValidation(e);const o=await Mp(e,n,r,qa(),i);return cR(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:o}=this.eventManagers[n];return i?Promise.resolve(i):(Yt(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await YR(e),r=new DR(e);return n.register("authEvent",i=>(V(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Rl,{type:Rl},i=>{var o;const s=(o=i==null?void 0:i[0])===null||o===void 0?void 0:o[Rl];s!==void 0&&n(!!s),Kt(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=OR(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Ny()||Iy()||uc()}}const aP=lP;var Dp="@firebase/auth",bp="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uP{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){V(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cP(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function dP(t){Nt(new vt("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:u}=r.options;V(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:s,authDomain:u,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ky(t)},d=new Gk(r,i,o,c);return Kk(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Nt(new vt("auth-internal",e=>{const n=$s(e.getProvider("auth").getImmediate());return(r=>new uP(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ot(Dp,bp,cP(t)),ot(Dp,bp,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fP=5*60,pP=Fg("authIdTokenMaxAge")||fP;let Lp=null;const hP=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>pP)return;const i=n==null?void 0:n.token;Lp!==i&&(Lp=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function mP(t=ju()){const e=nr(t,"auth");if(e.isInitialized())return e.getImmediate();const n=Jk(t,{popupRedirectResolver:aP,persistence:[_R,lR,Oy]}),r=Fg("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const s=hP(o.toString());iR(n,s,()=>s(n.currentUser)),rR(n,u=>s(u))}}const i=Lg("auth");return i&&Yk(n,`http://${i}`),n}function gP(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}qk({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const o=xt("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",gP().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});dP("Browser");var yP="firebase",vP="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ot(yP,vP,"app");const zy="@firebase/installations",pc="0.6.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wy=1e4,Jy=`w:${pc}`,Ky="FIS_v2",_P="https://firebaseinstallations.googleapis.com/v1",TP=60*60*1e3,EP="installations",IP="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CP={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Qn=new tr(EP,IP,CP);function Yy(t){return t instanceof Tt&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qy({projectId:t}){return`${_P}/projects/${t}/installations`}function Xy(t){return{token:t.token,requestStatus:2,expiresIn:SP(t.expiresIn),creationTime:Date.now()}}async function Zy(t,e){const r=(await e.json()).error;return Qn.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function jy({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function wP(t,{refreshToken:e}){const n=jy(t);return n.append("Authorization",xP(e)),n}async function ev(t){const e=await t();return e.status>=500&&e.status<600?t():e}function SP(t){return Number(t.replace("s","000"))}function xP(t){return`${Ky} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AP({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=Qy(t),i=jy(t),o=e.getImmediate({optional:!0});if(o){const d=await o.getHeartbeatsHeader();d&&i.append("x-firebase-client",d)}const s={fid:n,authVersion:Ky,appId:t.appId,sdkVersion:Jy},u={method:"POST",headers:i,body:JSON.stringify(s)},c=await ev(()=>fetch(r,u));if(c.ok){const d=await c.json();return{fid:d.fid||n,registrationStatus:2,refreshToken:d.refreshToken,authToken:Xy(d.authToken)}}else throw await Zy("Create Installation",c)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tv(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NP(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kP=/^[cdef][\w-]{21}$/,Wa="";function RP(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=PP(t);return kP.test(n)?n:Wa}catch{return Wa}}function PP(t){return NP(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Js(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nv=new Map;function rv(t,e){const n=Js(t);iv(n,e),MP(n,e)}function iv(t,e){const n=nv.get(t);if(n)for(const r of n)r(e)}function MP(t,e){const n=DP();n&&n.postMessage({key:t,fid:e}),bP()}let Vn=null;function DP(){return!Vn&&"BroadcastChannel"in self&&(Vn=new BroadcastChannel("[Firebase] FID Change"),Vn.onmessage=t=>{iv(t.data.key,t.data.fid)}),Vn}function bP(){nv.size===0&&Vn&&(Vn.close(),Vn=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LP="firebase-installations-database",UP=1,Xn="firebase-installations-store";let Pl=null;function hc(){return Pl||(Pl=qg(LP,UP,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Xn)}}})),Pl}async function Es(t,e){const n=Js(t),i=(await hc()).transaction(Xn,"readwrite"),o=i.objectStore(Xn),s=await o.get(n);return await o.put(e,n),await i.done,(!s||s.fid!==e.fid)&&rv(t,e.fid),e}async function ov(t){const e=Js(t),r=(await hc()).transaction(Xn,"readwrite");await r.objectStore(Xn).delete(e),await r.done}async function Ks(t,e){const n=Js(t),i=(await hc()).transaction(Xn,"readwrite"),o=i.objectStore(Xn),s=await o.get(n),u=e(s);return u===void 0?await o.delete(n):await o.put(u,n),await i.done,u&&(!s||s.fid!==u.fid)&&rv(t,u.fid),u}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mc(t){let e;const n=await Ks(t.appConfig,r=>{const i=FP(r),o=OP(t,i);return e=o.registrationPromise,o.installationEntry});return n.fid===Wa?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function FP(t){const e=t||{fid:RP(),registrationStatus:0};return sv(e)}function OP(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(Qn.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=VP(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:HP(t)}:{installationEntry:e}}async function VP(t,e){try{const n=await AP(t,e);return Es(t.appConfig,n)}catch(n){throw Yy(n)&&n.customData.serverCode===409?await ov(t.appConfig):await Es(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function HP(t){let e=await Up(t.appConfig);for(;e.registrationStatus===1;)await tv(100),e=await Up(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await mc(t);return r||n}return e}function Up(t){return Ks(t,e=>{if(!e)throw Qn.create("installation-not-found");return sv(e)})}function sv(t){return BP(t)?{fid:t.fid,registrationStatus:0}:t}function BP(t){return t.registrationStatus===1&&t.registrationTime+Wy<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GP({appConfig:t,heartbeatServiceProvider:e},n){const r=qP(t,n),i=wP(t,n),o=e.getImmediate({optional:!0});if(o){const d=await o.getHeartbeatsHeader();d&&i.append("x-firebase-client",d)}const s={installation:{sdkVersion:Jy,appId:t.appId}},u={method:"POST",headers:i,body:JSON.stringify(s)},c=await ev(()=>fetch(r,u));if(c.ok){const d=await c.json();return Xy(d)}else throw await Zy("Generate Auth Token",c)}function qP(t,{fid:e}){return`${Qy(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gc(t,e=!1){let n;const r=await Ks(t.appConfig,o=>{if(!lv(o))throw Qn.create("not-registered");const s=o.authToken;if(!e&&WP(s))return o;if(s.requestStatus===1)return n=$P(t,e),o;{if(!navigator.onLine)throw Qn.create("app-offline");const u=KP(o);return n=zP(t,u),u}});return n?await n:r.authToken}async function $P(t,e){let n=await Fp(t.appConfig);for(;n.authToken.requestStatus===1;)await tv(100),n=await Fp(t.appConfig);const r=n.authToken;return r.requestStatus===0?gc(t,e):r}function Fp(t){return Ks(t,e=>{if(!lv(e))throw Qn.create("not-registered");const n=e.authToken;return YP(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function zP(t,e){try{const n=await GP(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await Es(t.appConfig,r),n}catch(n){if(Yy(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await ov(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Es(t.appConfig,r)}throw n}}function lv(t){return t!==void 0&&t.registrationStatus===2}function WP(t){return t.requestStatus===2&&!JP(t)}function JP(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+TP}function KP(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function YP(t){return t.requestStatus===1&&t.requestTime+Wy<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QP(t){const e=t,{installationEntry:n,registrationPromise:r}=await mc(e);return r?r.catch(console.error):gc(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XP(t,e=!1){const n=t;return await ZP(n),(await gc(n,e)).token}async function ZP(t){const{registrationPromise:e}=await mc(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jP(t){if(!t||!t.options)throw Ml("App Configuration");if(!t.name)throw Ml("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw Ml(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Ml(t){return Qn.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const av="installations",eM="installations-internal",tM=t=>{const e=t.getProvider("app").getImmediate(),n=jP(e),r=nr(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},nM=t=>{const e=t.getProvider("app").getImmediate(),n=nr(e,av).getImmediate();return{getId:()=>QP(n),getToken:i=>XP(n,i)}};function rM(){Nt(new vt(av,tM,"PUBLIC")),Nt(new vt(eM,nM,"PRIVATE"))}rM();ot(zy,pc);ot(zy,pc,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Is="analytics",iM="firebase_id",oM="origin",sM=60*1e3,lM="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",yc="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $e=new Xu("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aM={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Ye=new tr("analytics","Analytics",aM);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uM(t){if(!t.startsWith(yc)){const e=Ye.create("invalid-gtag-resource",{gtagURL:t});return $e.warn(e.message),""}return t}function uv(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function cM(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function dM(t,e){const n=cM("firebase-js-sdk-policy",{createScriptURL:uM}),r=document.createElement("script"),i=`${yc}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function fM(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function pM(t,e,n,r,i,o){const s=r[i];try{if(s)await e[s];else{const c=(await uv(n)).find(d=>d.measurementId===i);c&&await e[c.appId]}}catch(u){$e.error(u)}t("config",i,o)}async function hM(t,e,n,r,i){try{let o=[];if(i&&i.send_to){let s=i.send_to;Array.isArray(s)||(s=[s]);const u=await uv(n);for(const c of s){const d=u.find(p=>p.measurementId===c),f=d&&e[d.appId];if(f)o.push(f);else{o=[];break}}}o.length===0&&(o=Object.values(e)),await Promise.all(o),t("event",r,i||{})}catch(o){$e.error(o)}}function mM(t,e,n,r){async function i(o,...s){try{if(o==="event"){const[u,c]=s;await hM(t,e,n,u,c)}else if(o==="config"){const[u,c]=s;await pM(t,e,n,r,u,c)}else if(o==="consent"){const[u,c]=s;t("consent",u,c)}else if(o==="get"){const[u,c,d]=s;t("get",u,c,d)}else if(o==="set"){const[u]=s;t("set",u)}else t(o,...s)}catch(u){$e.error(u)}}return i}function gM(t,e,n,r,i){let o=function(...s){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(o=window[i]),window[i]=mM(o,t,e,n),{gtagCore:o,wrappedGtag:window[i]}}function yM(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(yc)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vM=30,_M=1e3;class TM{constructor(e={},n=_M){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const cv=new TM;function EM(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function IM(t){var e;const{appId:n,apiKey:r}=t,i={method:"GET",headers:EM(r)},o=lM.replace("{app-id}",n),s=await fetch(o,i);if(s.status!==200&&s.status!==304){let u="";try{const c=await s.json();!((e=c.error)===null||e===void 0)&&e.message&&(u=c.error.message)}catch{}throw Ye.create("config-fetch-failed",{httpStatus:s.status,responseMessage:u})}return s.json()}async function CM(t,e=cv,n){const{appId:r,apiKey:i,measurementId:o}=t.options;if(!r)throw Ye.create("no-app-id");if(!i){if(o)return{measurementId:o,appId:r};throw Ye.create("no-api-key")}const s=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},u=new xM;return setTimeout(async()=>{u.abort()},sM),dv({appId:r,apiKey:i,measurementId:o},s,u,e)}async function dv(t,{throttleEndTimeMillis:e,backoffCount:n},r,i=cv){var o;const{appId:s,measurementId:u}=t;try{await wM(r,e)}catch(c){if(u)return $e.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${u} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:s,measurementId:u};throw c}try{const c=await IM(t);return i.deleteThrottleMetadata(s),c}catch(c){const d=c;if(!SM(d)){if(i.deleteThrottleMetadata(s),u)return $e.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${u} provided in the "measurementId" field in the local Firebase config. [${d==null?void 0:d.message}]`),{appId:s,measurementId:u};throw c}const f=Number((o=d==null?void 0:d.customData)===null||o===void 0?void 0:o.httpStatus)===503?op(n,i.intervalMillis,vM):op(n,i.intervalMillis),p={throttleEndTimeMillis:Date.now()+f,backoffCount:n+1};return i.setThrottleMetadata(s,p),$e.debug(`Calling attemptFetch again in ${f} millis`),dv(t,p,r,i)}}function wM(t,e){return new Promise((n,r)=>{const i=Math.max(e-Date.now(),0),o=setTimeout(n,i);t.addEventListener(()=>{clearTimeout(o),r(Ye.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function SM(t){if(!(t instanceof Tt)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class xM{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function AM(t,e,n,r,i){if(i&&i.global){t("event",n,r);return}else{const o=await e,s=Object.assign(Object.assign({},r),{send_to:o});t("event",n,s)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NM(){if(Vg())try{await Hg()}catch(t){return $e.warn(Ye.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return $e.warn(Ye.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function kM(t,e,n,r,i,o,s){var u;const c=CM(t);c.then(y=>{n[y.measurementId]=y.appId,t.options.measurementId&&y.measurementId!==t.options.measurementId&&$e.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${y.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(y=>$e.error(y)),e.push(c);const d=NM().then(y=>{if(y)return r.getId()}),[f,p]=await Promise.all([c,d]);yM(o)||dM(o,f.measurementId),i("js",new Date);const h=(u=s==null?void 0:s.config)!==null&&u!==void 0?u:{};return h[oM]="firebase",h.update=!0,p!=null&&(h[iM]=p),i("config",f.measurementId,h),f.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RM{constructor(e){this.app=e}_delete(){return delete Ii[this.app.options.appId],Promise.resolve()}}let Ii={},Op=[];const Vp={};let Dl="dataLayer",PM="gtag",Hp,fv,Bp=!1;function MM(){const t=[];if(Og()&&t.push("This is a browser extension environment."),Gx()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,i)=>`(${i+1}) ${r}`).join(" "),n=Ye.create("invalid-analytics-context",{errorInfo:e});$e.warn(n.message)}}function DM(t,e,n){MM();const r=t.options.appId;if(!r)throw Ye.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)$e.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Ye.create("no-api-key");if(Ii[r]!=null)throw Ye.create("already-exists",{id:r});if(!Bp){fM(Dl);const{wrappedGtag:o,gtagCore:s}=gM(Ii,Op,Vp,Dl,PM);fv=o,Hp=s,Bp=!0}return Ii[r]=kM(t,Op,Vp,e,Hp,Dl,n),new RM(t)}function bM(t=ju()){t=at(t);const e=nr(t,Is);return e.isInitialized()?e.getImmediate():LM(t)}function LM(t,e={}){const n=nr(t,Is);if(n.isInitialized()){const i=n.getImmediate();if(Hi(e,n.getOptions()))return i;throw Ye.create("already-initialized")}return n.initialize({options:e})}function UM(t,e,n,r){t=at(t),AM(fv,Ii[t.app.options.appId],e,n,r).catch(i=>$e.error(i))}const Gp="@firebase/analytics",qp="0.10.8";function FM(){Nt(new vt(Is,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return DM(r,i,n)},"PUBLIC")),Nt(new vt("analytics-internal",t,"PRIVATE")),ot(Gp,qp),ot(Gp,qp,"esm2017");function t(e){try{const n=e.getProvider(Is).getImmediate();return{logEvent:(r,i,o)=>UM(n,r,i,o)}}catch(n){throw Ye.create("interop-component-reg-failed",{reason:n})}}}FM();const OM={apiKey:"AIzaSyB0BSDI-T2UWNJt0_shdB3GA3PncZt3d40",authDomain:"neve-or.firebaseapp.com",projectId:"neve-or",storageBucket:"neve-or.firebasestorage.app",messagingSenderId:"49659169778",appId:"1:49659169778:web:c7e1089fcef9f529e9b96b",measurementId:"G-TGC0CQR7N1"},vc=$g(OM);let VM;try{VM=bM(vc)}catch(t){console.warn("Firebase Analytics could not be initialized (likely blocked by client).",t)}const HM=gk(vc),Ja=mP(vc),$p=async(t,e)=>{try{Ja.currentUser||(console.log("User not signed in, attempting anonymous sign-in..."),await Dy(Ja));const n=mk(HM,e);return await pk(n,t,"data_url"),await hk(n)}catch(n){return console.error("Error uploading image to Firebase:",n),n.code==="storage/unauthorized"?alert(" :  -Authentication  -Firebase Console   -Rules."):n.message&&n.message.includes("CORS")&&alert(" CORS:     gsutil  ."),null}},BM=({gameState:t,onUpdateGameState:e,onClose:n,isStorageFull:r})=>{var ut,Ie;const[i,o]=q.useState(t.nodes.length>0?t.nodes[0].id:""),[s,u]=q.useState("ASSETS"),[c,d]=q.useState(null),[f,p]=q.useState(0),[h,y]=q.useState(null),T=t.nodes.find(M=>M.id===i),E=h!==null,S=E?(ut=T==null?void 0:T.data.subScenes)==null?void 0:ut.find(M=>M.id===h):null,_=E?S==null?void 0:S.backgroundImage:T==null?void 0:T.data.backgroundImage,g=T&&T.data&&T.data.dialog?Array.from(new Set(T.data.dialog.map(M=>M.speaker))):[];q.useEffect(()=>{const M=JSON.stringify(t),D=new Blob([M]).size/(1024*1024);p(D)},[t]);const v=M=>{var N,D;return!!((N=M.data.backgroundImage)!=null&&N.startsWith("data:")||Object.values(M.data.characterImages||{}).some(L=>L.startsWith("data:"))||(D=M.data.subScenes)!=null&&D.some(L=>{var O;return(O=L.backgroundImage)==null?void 0:O.startsWith("data:")}))},I=(M,N)=>{var L,O;const D=(L=M.data.subScenes)==null?void 0:L.find(Q=>Q.id===N);return(O=D==null?void 0:D.backgroundImage)==null?void 0:O.startsWith("data:")},C=M=>{T&&(E?R(T.id,{description:M.target.value}):R(T.id,{description:M.target.value}))},w=async()=>{if(!T)return;d("gen_bg");let M=T.data.description;if(T.id==="town_square"&&!E&&(M="A beautiful wide city square in a modern digital city. Sunny day. People walking peacefully, open paved space, a few trees, benches, city skyline in background. Wide angle view, single unified composition, vector art style. No split screen."),T.id==="newspaper_office"&&!E&&(M="A close-up view of a modern journalist's desk. Aesthetic and clean office interior. Includes a computer screen (blank), a coffee cup, notebooks, and pens. Soft lighting. Digital city vector art style. STRICTLY NO TEXT, NO HEADLINES, NO LETTERS anywhere."),E&&S){let D="";const L=S.id.toLowerCase(),O=S.title;L.includes("school")||O.includes(" ")?D="Interior of a modern high school classroom. Rows of student desks, a large whiteboard or blackboard, educational posters on walls, school hallway, lockers. Bright educational setting.":L.includes("cafe")||O.includes("")?D="Interior of a cozy urban coffee shop. Espresso machine, small round tables, customers sitting with laptops, warm lighting, coffee cups.":L.includes("square")||O.includes("")?D="A public city square outdoors. Wide open paved space, a central fountain or statue, benches, city skyline in background, people walking.":(L.includes("neighborhood")||O.includes(""))&&(D="A quiet residential street view. Apartment building facades, sidewalk, street lamps, some greenery, parked cars."),M=`Specific location scene: ${S.title}. ${D} (Context from story: ${T.data.description})`}const N=await xx(M);d(null),N?E&&S?B(T.id,S.id,{backgroundImage:N}):R(T.id,{backgroundImage:N}):alert("  .   API KEY.")},x=async M=>{var L;if(!T)return;d(`gen_char_${M}`);const N=((L=T.data.dialog.find(O=>O.speaker===M))==null?void 0:L.mood)||"neutral",D=await Ax(M,N);if(d(null),D){const O=T.data.characterImages||{};R(T.id,{characterImages:{...O,[M]:D}})}},A=async()=>{if(!T)return;const M=_;if(!M||!M.startsWith("data:")){alert("    (  ).");return}d("up_bg");const N=E?`_sub_${S==null?void 0:S.id}`:"",D=`backgrounds/${T.id}${N}_${Date.now()}.jpg`,L=await $p(M,D);d(null),L?(E&&S?B(T.id,S.id,{backgroundImage:L}):R(T.id,{backgroundImage:L}),alert("   !")):alert("   .")},P=async M=>{var Q;if(!T||!((Q=T.data.characterImages)!=null&&Q[M]))return;const N=T.data.characterImages[M];if(!N.startsWith("data:"))return;d(`up_char_${M}`);const D=M.replace(/[^a-z0-9]/gi,"_").toLowerCase(),L=`characters/${T.id}_${D}_${Date.now()}.jpg`,O=await $p(N,L);if(d(null),O){const je=T.data.characterImages||{};R(T.id,{characterImages:{...je,[M]:O}}),alert(` ${M}  !`)}},R=(M,N)=>{const D=t.nodes.map(L=>L.id===M?{...L,data:{...L.data,...N}}:L);e({...t,nodes:D})},B=(M,N,D)=>{const L=t.nodes.map(O=>{if(O.id===M&&O.data.subScenes){const Q=O.data.subScenes.map(je=>je.id===N?{...je,...D}:je);return{...O,data:{...O.data,subScenes:Q}}}return O});e({...t,nodes:L})},$=()=>{confirm("  ?            .")&&(localStorage.removeItem(Aa),window.location.reload())},Z=Math.min(f/4.8*100,100),kt=Z>90?"bg-red-500":Z>70?"bg-orange-500":"bg-green-500";return m.jsxs("div",{className:"fixed inset-0 bg-white z-50 overflow-hidden flex flex-col",dir:"rtl",children:[m.jsxs("header",{className:"bg-gray-900 text-white p-4 flex justify-between items-center shadow-md z-10 shrink-0",children:[m.jsxs("div",{className:"flex items-center gap-4",children:[m.jsx("h2",{className:"text-xl font-bold",children:" Dev Panel"}),m.jsxs("div",{className:"flex bg-gray-800 rounded-lg p-1",children:[m.jsx("button",{onClick:()=>u("ASSETS"),className:`px-4 py-1 rounded-md text-sm font-bold transition ${s==="ASSETS"?"bg-blue-600 text-white":"text-gray-400 hover:text-white"}`,children:" (AI & Cloud)"}),m.jsx("button",{onClick:()=>u("CONTENT"),className:`px-4 py-1 rounded-md text-sm font-bold transition ${s==="CONTENT"?"bg-blue-600 text-white":"text-gray-400 hover:text-white"}`,children:" "})]})]}),m.jsxs("div",{className:"flex gap-2 items-center",children:[m.jsxs("div",{className:"flex flex-col items-end mr-4",children:[m.jsxs("div",{className:"text-[10px] text-gray-400",children:[" : ",f.toFixed(2),"MB / 5.00MB"]}),m.jsx("div",{className:"w-32 h-1.5 bg-gray-700 rounded-full overflow-hidden",children:m.jsx("div",{className:`h-full ${kt} transition-all duration-500`,style:{width:`${Z}%`}})})]}),m.jsx(fe,{variant:"secondary",onClick:$,className:"py-1 px-3 text-sm bg-red-100 text-red-600 hover:bg-red-200 border-none shadow-none",children:""}),m.jsx(fe,{variant:"danger",onClick:n,className:"py-1 px-3 text-sm",children:""})]})]}),(r||Z>95)&&m.jsx("div",{className:"bg-red-600 text-white p-2 text-center text-sm font-bold animate-pulse shadow-lg shrink-0",children:"   !   .     -      ."}),m.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[m.jsxs("aside",{className:"w-72 bg-gray-100 border-l border-gray-200 flex flex-col shrink-0",children:[m.jsx("div",{className:"p-4 border-b bg-gray-50 font-bold text-gray-700",children:"  :"}),m.jsx("div",{className:"overflow-y-auto flex-1 p-2 space-y-1",children:t.nodes.map(M=>{const N=v(M);return m.jsxs("div",{onClick:()=>{o(M.id),y(null)},className:`p-3 rounded-lg cursor-pointer text-sm font-medium transition-colors flex justify-between items-center ${i===M.id?"bg-blue-600 text-white shadow-md":"bg-white hover:bg-gray-200 text-gray-700"}`,children:[m.jsx("span",{className:"truncate flex-1",children:M.title}),N&&m.jsx("span",{title:"    ",className:"text-[10px] bg-orange-500 text-white px-2 py-0.5 rounded-full shadow-sm animate-pulse ml-2 font-bold",children:" "})]},M.id)})})]}),m.jsx("main",{className:"flex-1 overflow-y-auto bg-slate-50 p-8",children:T?m.jsxs("div",{className:"max-w-4xl mx-auto space-y-8 pb-20",children:[T.data.subScenes&&T.data.subScenes.length>0&&m.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-blue-200 flex flex-col gap-2",children:[m.jsxs("div",{className:"flex items-center gap-2 mb-1 justify-between",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("span",{className:"font-bold text-blue-900",children:"   :"}),m.jsx("span",{className:"text-xs text-gray-500",children:"(    )"})]}),m.jsx("div",{className:"text-xs text-orange-600 font-bold bg-orange-50 px-2 py-1 rounded",children:"   "})]}),m.jsxs("div",{className:"flex gap-2 flex-wrap",children:[m.jsxs("button",{onClick:()=>y(null),className:`px-3 py-2 rounded-lg text-sm transition-all border flex items-center gap-2 ${h===null?"bg-blue-600 text-white border-blue-600 shadow-md":"bg-white text-gray-600 hover:bg-gray-50"}`,children:[m.jsx("span",{children:" "}),((Ie=T.data.backgroundImage)==null?void 0:Ie.startsWith("data:"))&&m.jsx("span",{className:"w-2.5 h-2.5 bg-orange-500 rounded-full animate-pulse border border-white"})]}),T.data.subScenes.map(M=>{const N=I(T,M.id);return m.jsxs("button",{onClick:()=>y(M.id),className:`px-3 py-2 rounded-lg text-sm transition-all border relative flex items-center gap-2 ${h===M.id?"bg-blue-600 text-white border-blue-600 shadow-md":"bg-white text-gray-600 hover:bg-gray-50"}`,children:[m.jsxs("span",{children:[M.icon," ",M.title]}),N&&m.jsx("span",{className:"w-2.5 h-2.5 bg-orange-500 rounded-full animate-pulse border border-white",title:"  "})]},M.id)})]})]}),s==="ASSETS"&&m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-gray-200",children:[m.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2 justify-between",children:[m.jsxs("span",{children:["   ",E?`( ${S==null?void 0:S.title})`:"()"]}),(_==null?void 0:_.startsWith("data:"))&&m.jsx("span",{className:"text-xs bg-orange-100 text-orange-700 px-2 py-1 rounded font-bold",children:"   "})]}),m.jsxs("div",{className:"flex gap-6 items-start",children:[m.jsxs("div",{className:"flex-1 space-y-4",children:[m.jsxs("div",{className:"bg-blue-50 p-3 rounded border border-blue-100 text-sm text-blue-800",children:[m.jsx("strong",{children:"  :"}),m.jsx("br",{}),"1.  ",m.jsx("b",{children:'" "'}),"     -AI.",m.jsx("br",{}),"2. ",m.jsx("span",{className:"text-red-600 font-black",children:"!"}),"  ",m.jsx("b",{children:'" "'}),"   .",m.jsx("br",{}),"        ."]}),m.jsx("p",{className:"text-xs text-gray-500",children:E?`  AI: "Scene in ${S==null?void 0:S.title}..."`:`  AI: "${T.data.description.substring(0,50)}..."`}),m.jsxs("div",{className:"flex gap-2",children:[m.jsx(fe,{onClick:w,disabled:!!c,className:"flex-1",children:c==="gen_bg"?" ...":"  "}),_&&_.startsWith("data:")&&m.jsx(fe,{onClick:A,variant:"secondary",disabled:!!c,className:"flex-1 bg-orange-500 hover:bg-orange-600 text-white shadow-orange-200 animate-pulse font-black",children:c==="up_bg"?" ...":"   (!)"})]})]}),m.jsx("div",{className:"w-1/2 aspect-video bg-gray-100 rounded-xl overflow-hidden border-2 border-dashed border-gray-300 flex items-center justify-center relative group",children:_?m.jsxs(m.Fragment,{children:[m.jsx("img",{src:_,alt:"BG",className:"w-full h-full object-cover"}),_.startsWith("data:")&&m.jsx("div",{className:"absolute top-2 right-2 bg-orange-500 text-white text-xs px-2 py-1 rounded shadow animate-pulse",children:"  ()"})]}):m.jsx("span",{className:"text-gray-400",children:" "})})]})]}),!E&&m.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-gray-200",children:[m.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:"  ( )"}),g.length===0?m.jsx("p",{className:"text-gray-500",children:"   ."}):m.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-6",children:g.map(M=>{var L,O,Q;const N=!!((L=T.data.characterImages)!=null&&L[M]),D=N&&!((O=T.data.characterImages)!=null&&O[M].startsWith("data:"));return m.jsxs("div",{className:"border rounded-xl p-4 flex flex-col items-center gap-3 bg-gray-50 relative",children:[N&&!D&&m.jsx("div",{className:"absolute top-2 right-2 text-orange-500 text-xs font-bold animate-pulse",children:"  "}),m.jsx("div",{className:"w-24 h-24 rounded-full bg-gray-200 overflow-hidden shadow-inner border-2 border-white",children:N?m.jsx("img",{src:(Q=T.data.characterImages)==null?void 0:Q[M],alt:M,className:"w-full h-full object-cover"}):m.jsx("div",{className:"w-full h-full flex items-center justify-center text-2xl",children:""})}),m.jsx("div",{className:"font-bold text-gray-800",children:M}),m.jsxs("div",{className:"w-full flex flex-col gap-2",children:[m.jsx(fe,{variant:"outline",className:"text-xs py-1 px-3 w-full",onClick:()=>x(M),disabled:!!c,children:c===`gen_char_${M}`?"":" "}),N&&!D&&m.jsx(fe,{variant:"secondary",className:"text-xs py-1 px-3 w-full bg-orange-500 text-white hover:bg-orange-600",onClick:()=>P(M),disabled:!!c,children:c===`up_char_${M}`?"...":" "})]})]},M)})})]})]}),s==="CONTENT"&&!E&&m.jsx("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-gray-200 space-y-6",children:m.jsxs("div",{children:[m.jsx("label",{className:"block font-bold mb-2 text-gray-700",children:"  ()"}),m.jsx("textarea",{className:"w-full p-4 border border-gray-300 rounded-xl h-32 focus:ring-2 focus:ring-blue-500",value:T.data.description,onChange:C})]})})]}):m.jsx("div",{className:"flex items-center justify-center h-full text-gray-400",children:"   "})})]})]})},GM=({currentLang:t,onLanguageChange:e,className:n=""})=>{const r=n.includes("bg-black")||n.includes("text-white"),o=n||"bg-white shadow-lg border border-gray-100";return m.jsx("div",{className:`flex gap-0.5 p-1 rounded-full ${o}`,children:["he","ar","en"].map(s=>{const u=t===s;let c="px-3 py-1 rounded-full text-xs font-bold transition-all duration-200 ";return r?u?c+="bg-white text-blue-900 shadow-sm":c+="text-white/80 hover:bg-white/10":u?c+="bg-blue-600 text-white shadow-md":c+="text-gray-600 hover:bg-gray-100 hover:text-blue-600",m.jsx("button",{onClick:()=>e(s),className:c,children:s==="he"?"":s==="ar"?"":"English"},s)})})},qM=()=>{const[t,e]=q.useState("he"),[n,r]=q.useState(!1),[i,o]=q.useState(!1),[s,u]=q.useState(!1),[c,d]=q.useState(!1),[f,p]=q.useState({currentNodeId:null,nodes:Do("he"),score:0,devMode:!1});q.useEffect(()=>{(async()=>{try{await Dy(Ja),console.log("Signed in anonymously to Firebase")}catch(v){console.error("Error signing in anonymously:",v)}})()},[]),q.useEffect(()=>{try{const g=localStorage.getItem(Aa);if(g){const v=JSON.parse(g);if(!v||!Array.isArray(v.nodes))throw new Error("Invalid save data structure");const C=Do("he").map(w=>{var A,P,R;const x=v.nodes.find(B=>B.id===w.id);return x?{...w,isLocked:x.isLocked,isCompleted:x.isCompleted,data:{...w.data,backgroundImage:typeof((A=x.data)==null?void 0:A.backgroundImage)=="string"?x.data.backgroundImage:w.data.backgroundImage,characterImages:(P=x.data)!=null&&P.characterImages?x.data.characterImages:w.data.characterImages,subScenes:(R=x.data)!=null&&R.subScenes&&Array.isArray(x.data.subScenes)&&w.data.subScenes?w.data.subScenes.map(B=>{const $=x.data.subScenes.find(Z=>Z.id===B.id);return $?{...B,backgroundImage:$.backgroundImage||B.backgroundImage}:B}):w.data.subScenes}}:w});p(w=>({...w,nodes:C,score:typeof v.score=="number"?v.score:0}))}}catch(g){console.warn("Corrupted local save detected or empty. Starting fresh.",g)}},[]),q.useEffect(()=>{var g;try{const v={nodes:f.nodes.map(C=>{var w;return{id:C.id,isLocked:C.isLocked,isCompleted:C.isCompleted,data:{backgroundImage:C.data.backgroundImage,characterImages:C.data.characterImages,subScenes:(w=C.data.subScenes)==null?void 0:w.map(x=>({id:x.id,backgroundImage:x.backgroundImage}))}}}),score:f.score},I=JSON.stringify(v);localStorage.setItem(Aa,I),n&&(console.log("Storage recovered. Size:",I.length),r(!1))}catch(v){v.name==="QuotaExceededError"||v.name==="NS_ERROR_DOM_QUOTA_REACHED"||(g=v.message)!=null&&g.includes("exceeded")?(console.error("LocalStorage Full! Cannot save changes.",v),r(!0)):console.error("Error saving state",v)}},[f]),q.useEffect(()=>{},[]),q.useEffect(()=>{const g=()=>{const I=window.innerWidth<1024,C=window.innerHeight>window.innerWidth;o(I&&C)};g(),window.addEventListener("resize",g),window.addEventListener("orientationchange",g);const v=()=>{d(!!document.fullscreenElement)};return document.addEventListener("fullscreenchange",v),()=>{window.removeEventListener("resize",g),window.removeEventListener("orientationchange",g),document.removeEventListener("fullscreenchange",v)}},[]);const h=async()=>{try{document.fullscreenElement?await document.exitFullscreen():await document.documentElement.requestFullscreen()}catch(g){console.error("Error toggling fullscreen:",g)}},y=J0(t),T=g=>{e(g);const I=Do(g).map(C=>{var x;const w=f.nodes.find(A=>A.id===C.id);return w?{...C,isLocked:w.isLocked,isCompleted:w.isCompleted,data:{...C.data,backgroundImage:w.data.backgroundImage||C.data.backgroundImage,characterImages:w.data.characterImages||C.data.characterImages,subScenes:(x=w.data)!=null&&x.subScenes&&C.data.subScenes?C.data.subScenes.map(A=>{const P=w.data.subScenes.find(R=>R.id===A.id);return P?{...A,backgroundImage:P.backgroundImage||A.backgroundImage}:A}):C.data.subScenes}}:C});p(C=>({...C,nodes:I}))},E=g=>{p(v=>({...v,currentNodeId:g}))},S=()=>{p(g=>{const v=g.nodes.findIndex(w=>w.id===g.currentNodeId),I=[...g.nodes];v!==-1&&(I[v].isCompleted=!0,v+1<I.length&&(I[v+1].isLocked=!1));let C="HUB";return g.currentNodeId==="city_hall"?C="intro_freedom_speech":g.currentNodeId==="newspaper_office"&&(C="supreme_court"),{...g,nodes:I,currentNodeId:C}})},_=f.nodes.find(g=>g.id===f.currentNodeId);if(f.devMode)return m.jsx(BM,{gameState:f,onUpdateGameState:p,onClose:()=>p(g=>({...g,devMode:!1})),isStorageFull:n});if(i&&!s)return m.jsxs("div",{className:"fixed inset-0 z-[100] bg-slate-900 flex flex-col items-center justify-center p-8 text-center",dir:y,children:[m.jsx("div",{className:"text-6xl mb-6 animate-rotate-phone",children:""}),m.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:H("rotateDevice",t)}),m.jsx("p",{className:"text-gray-400 text-sm mb-8",children:"This game is designed for landscape mode."}),m.jsxs("div",{className:"flex flex-col gap-3 w-full max-w-xs",children:[m.jsx(fe,{onClick:h,variant:"secondary",className:"text-sm",children:H(c?"exitFullScreen":"fullScreen",t)}),m.jsx("button",{onClick:()=>u(!0),className:"text-white/60 text-xs hover:text-white underline mt-6 transition-colors",children:"   (  )"})]})]});if(f.currentNodeId===null||_&&_.type===le.INTRO){const g=f.nodes.find(v=>v.id==="intro")||f.nodes.find(v=>v.type===le.INTRO);return g?m.jsxs("div",{className:"h-[100dvh] bg-slate-900 flex items-center justify-center p-4 relative overflow-hidden",dir:y,children:[g.data.backgroundImage&&m.jsxs("div",{className:"absolute inset-0 z-0 animate-fade-in",children:[m.jsx("img",{src:g.data.backgroundImage,className:"w-full h-full object-cover transition-transform duration-[30s] hover:scale-105",alt:"Intro Background",onError:v=>v.currentTarget.style.display="none"}),m.jsx("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-[2px]"})]}),m.jsxs("div",{className:"absolute top-4 left-4 z-20 flex gap-2",children:[m.jsx(GM,{currentLang:t,onLanguageChange:T,className:"!bg-black/30 border border-white/20"}),m.jsx("button",{onClick:h,className:"px-3 py-1 rounded-full text-xs font-bold transition-all duration-200 bg-black/30 border border-white/20 text-white hover:bg-white/20",title:H("fullScreen",t),children:c?"":""})]}),m.jsxs("div",{className:"relative z-10 w-full max-w-md bg-white/95 backdrop-blur-xl rounded-2xl shadow-2xl p-6 sm:p-8 text-center border border-white/20 animate-fade-in-up",children:[m.jsxs("div",{className:"mb-4",children:[m.jsx("h1",{className:"text-4xl sm:text-5xl font-black tracking-tight text-blue-900 drop-shadow-sm mb-2",children:H("gameTitle",t)}),m.jsx("div",{className:"h-1 w-16 bg-blue-500 mx-auto rounded-full"})]}),m.jsx("div",{className:"mb-6 text-gray-600 text-sm sm:text-base leading-relaxed font-medium",children:g.data.description}),m.jsx("div",{className:"flex flex-col items-center gap-3",children:m.jsx(fe,{onClick:()=>S(),className:"text-lg py-3 px-10 rounded-xl shadow-lg shadow-blue-200 bg-gradient-to-r from-blue-600 to-blue-500 hover:from-blue-700 hover:to-blue-600 transform transition-all hover:scale-105",children:H("start",t)})})]}),m.jsx("div",{className:"absolute bottom-4 text-white/40 text-xs font-mono z-10",children:"Neve Or Human Rights Simulator  2025"})]}):m.jsx("div",{className:"flex items-center justify-center h-screen bg-slate-900 text-white",children:"Error: Intro content not found"})}return m.jsxs("div",{className:"w-full h-[100dvh] overflow-hidden",dir:y,children:[!f.currentNodeId&&m.jsx("div",{className:"fixed top-4 right-4 z-[60] opacity-50 hover:opacity-100 transition-opacity",children:m.jsx("button",{onClick:h,className:"bg-black/40 text-white w-8 h-8 rounded-full flex items-center justify-center border border-white/20",children:c?"":""})}),f.currentNodeId==="HUB"?m.jsx(Y0,{nodes:f.nodes,onNodeSelect:E,language:t,onLanguageChange:T,onOpenDevMode:()=>p(g=>({...g,devMode:!0}))}):_?m.jsx(Q0,{node:_,onComplete:S,onBack:()=>p(g=>({...g,currentNodeId:"HUB"})),language:t}):m.jsx("div",{className:"flex items-center justify-center h-screen bg-slate-900 text-white",children:H("loading",t)})]})},pv=document.getElementById("root");if(!pv)throw new Error("Could not find root element to mount to");const $M=bl.createRoot(pv);$M.render(m.jsx(Dv.StrictMode,{children:m.jsx(qM,{})}));
