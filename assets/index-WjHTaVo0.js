(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();function Pv(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var th={exports:{}},Ns={},nh={exports:{}},Y={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kr=Symbol.for("react.element"),Mv=Symbol.for("react.portal"),bv=Symbol.for("react.fragment"),Dv=Symbol.for("react.strict_mode"),Lv=Symbol.for("react.profiler"),Uv=Symbol.for("react.provider"),Fv=Symbol.for("react.context"),Ov=Symbol.for("react.forward_ref"),Vv=Symbol.for("react.suspense"),Hv=Symbol.for("react.memo"),Bv=Symbol.for("react.lazy"),Pc=Symbol.iterator;function Gv(t){return t===null||typeof t!="object"?null:(t=Pc&&t[Pc]||t["@@iterator"],typeof t=="function"?t:null)}var ih={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},rh=Object.assign,oh={};function zi(t,e,n){this.props=t,this.context=e,this.refs=oh,this.updater=n||ih}zi.prototype.isReactComponent={};zi.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};zi.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function sh(){}sh.prototype=zi.prototype;function iu(t,e,n){this.props=t,this.context=e,this.refs=oh,this.updater=n||ih}var ru=iu.prototype=new sh;ru.constructor=iu;rh(ru,zi.prototype);ru.isPureReactComponent=!0;var Mc=Array.isArray,ah=Object.prototype.hasOwnProperty,ou={current:null},lh={key:!0,ref:!0,__self:!0,__source:!0};function uh(t,e,n){var i,r={},o=null,s=null;if(e!=null)for(i in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(o=""+e.key),e)ah.call(e,i)&&!lh.hasOwnProperty(i)&&(r[i]=e[i]);var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){for(var c=Array(u),d=0;d<u;d++)c[d]=arguments[d+2];r.children=c}if(t&&t.defaultProps)for(i in u=t.defaultProps,u)r[i]===void 0&&(r[i]=u[i]);return{$$typeof:Kr,type:t,key:o,ref:s,props:r,_owner:ou.current}}function qv(t,e){return{$$typeof:Kr,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function su(t){return typeof t=="object"&&t!==null&&t.$$typeof===Kr}function $v(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var bc=/\/+/g;function ia(t,e){return typeof t=="object"&&t!==null&&t.key!=null?$v(""+t.key):e.toString(36)}function Ao(t,e,n,i,r){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case Kr:case Mv:s=!0}}if(s)return s=t,r=r(s),t=i===""?"."+ia(s,0):i,Mc(r)?(n="",t!=null&&(n=t.replace(bc,"$&/")+"/"),Ao(r,e,n,"",function(d){return d})):r!=null&&(su(r)&&(r=qv(r,n+(!r.key||s&&s.key===r.key?"":(""+r.key).replace(bc,"$&/")+"/")+t)),e.push(r)),1;if(s=0,i=i===""?".":i+":",Mc(t))for(var u=0;u<t.length;u++){o=t[u];var c=i+ia(o,u);s+=Ao(o,e,n,c,r)}else if(c=Gv(t),typeof c=="function")for(t=c.call(t),u=0;!(o=t.next()).done;)o=o.value,c=i+ia(o,u++),s+=Ao(o,e,n,c,r);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function oo(t,e,n){if(t==null)return t;var i=[],r=0;return Ao(t,i,"","",function(o){return e.call(n,o,r++)}),i}function zv(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Be={current:null},ko={transition:null},Wv={ReactCurrentDispatcher:Be,ReactCurrentBatchConfig:ko,ReactCurrentOwner:ou};function ch(){throw Error("act(...) is not supported in production builds of React.")}Y.Children={map:oo,forEach:function(t,e,n){oo(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return oo(t,function(){e++}),e},toArray:function(t){return oo(t,function(e){return e})||[]},only:function(t){if(!su(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Y.Component=zi;Y.Fragment=bv;Y.Profiler=Lv;Y.PureComponent=iu;Y.StrictMode=Dv;Y.Suspense=Vv;Y.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Wv;Y.act=ch;Y.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=rh({},t.props),r=t.key,o=t.ref,s=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,s=ou.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var u=t.type.defaultProps;for(c in e)ah.call(e,c)&&!lh.hasOwnProperty(c)&&(i[c]=e[c]===void 0&&u!==void 0?u[c]:e[c])}var c=arguments.length-2;if(c===1)i.children=n;else if(1<c){u=Array(c);for(var d=0;d<c;d++)u[d]=arguments[d+2];i.children=u}return{$$typeof:Kr,type:t.type,key:r,ref:o,props:i,_owner:s}};Y.createContext=function(t){return t={$$typeof:Fv,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Uv,_context:t},t.Consumer=t};Y.createElement=uh;Y.createFactory=function(t){var e=uh.bind(null,t);return e.type=t,e};Y.createRef=function(){return{current:null}};Y.forwardRef=function(t){return{$$typeof:Ov,render:t}};Y.isValidElement=su;Y.lazy=function(t){return{$$typeof:Bv,_payload:{_status:-1,_result:t},_init:zv}};Y.memo=function(t,e){return{$$typeof:Hv,type:t,compare:e===void 0?null:e}};Y.startTransition=function(t){var e=ko.transition;ko.transition={};try{t()}finally{ko.transition=e}};Y.unstable_act=ch;Y.useCallback=function(t,e){return Be.current.useCallback(t,e)};Y.useContext=function(t){return Be.current.useContext(t)};Y.useDebugValue=function(){};Y.useDeferredValue=function(t){return Be.current.useDeferredValue(t)};Y.useEffect=function(t,e){return Be.current.useEffect(t,e)};Y.useId=function(){return Be.current.useId()};Y.useImperativeHandle=function(t,e,n){return Be.current.useImperativeHandle(t,e,n)};Y.useInsertionEffect=function(t,e){return Be.current.useInsertionEffect(t,e)};Y.useLayoutEffect=function(t,e){return Be.current.useLayoutEffect(t,e)};Y.useMemo=function(t,e){return Be.current.useMemo(t,e)};Y.useReducer=function(t,e,n){return Be.current.useReducer(t,e,n)};Y.useRef=function(t){return Be.current.useRef(t)};Y.useState=function(t){return Be.current.useState(t)};Y.useSyncExternalStore=function(t,e,n){return Be.current.useSyncExternalStore(t,e,n)};Y.useTransition=function(){return Be.current.useTransition()};Y.version="18.3.1";nh.exports=Y;var z=nh.exports;const Jv=Pv(z);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kv=z,Yv=Symbol.for("react.element"),Qv=Symbol.for("react.fragment"),Xv=Object.prototype.hasOwnProperty,Zv=Kv.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,jv={key:!0,ref:!0,__self:!0,__source:!0};function dh(t,e,n){var i,r={},o=null,s=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(s=e.ref);for(i in e)Xv.call(e,i)&&!jv.hasOwnProperty(i)&&(r[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:Yv,type:t,key:o,ref:s,props:r,_owner:Zv.current}}Ns.Fragment=Qv;Ns.jsx=dh;Ns.jsxs=dh;th.exports=Ns;var m=th.exports,qa={},fh={exports:{}},rt={},ph={exports:{}},hh={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(b,O){var G=b.length;b.push(O);e:for(;0<G;){var S=G-1>>>1,D=b[S];if(0<r(D,O))b[S]=O,b[G]=D,G=S;else break e}}function n(b){return b.length===0?null:b[0]}function i(b){if(b.length===0)return null;var O=b[0],G=b.pop();if(G!==O){b[0]=G;e:for(var S=0,D=b.length,F=D>>>1;S<F;){var q=2*(S+1)-1,W=b[q],oe=q+1,Pe=b[oe];if(0>r(W,G))oe<D&&0>r(Pe,W)?(b[S]=Pe,b[oe]=G,S=oe):(b[S]=W,b[q]=G,S=q);else if(oe<D&&0>r(Pe,G))b[S]=Pe,b[oe]=G,S=oe;else break e}}return O}function r(b,O){var G=b.sortIndex-O.sortIndex;return G!==0?G:b.id-O.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,u=s.now();t.unstable_now=function(){return s.now()-u}}var c=[],d=[],f=1,p=null,h=3,y=!1,T=!1,E=!1,w=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(b){for(var O=n(d);O!==null;){if(O.callback===null)i(d);else if(O.startTime<=b)i(d),O.sortIndex=O.expirationTime,e(c,O);else break;O=n(d)}}function I(b){if(E=!1,v(b),!T)if(n(c)!==null)T=!0,Ee(C);else{var O=n(d);O!==null&&qe(I,O.startTime-b)}}function C(b,O){T=!1,E&&(E=!1,_(N),N=-1),y=!0;var G=h;try{for(v(O),p=n(c);p!==null&&(!(p.expirationTime>O)||b&&!K());){var S=p.callback;if(typeof S=="function"){p.callback=null,h=p.priorityLevel;var D=S(p.expirationTime<=O);O=t.unstable_now(),typeof D=="function"?p.callback=D:p===n(c)&&i(c),v(O)}else i(c);p=n(c)}if(p!==null)var F=!0;else{var q=n(d);q!==null&&qe(I,q.startTime-O),F=!1}return F}finally{p=null,h=G,y=!1}}var x=!1,A=null,N=-1,P=5,R=-1;function K(){return!(t.unstable_now()-R<P)}function Q(){if(A!==null){var b=t.unstable_now();R=b;var O=!0;try{O=A(!0,b)}finally{O?te():(x=!1,A=null)}}else x=!1}var te;if(typeof g=="function")te=function(){g(Q)};else if(typeof MessageChannel<"u"){var Qe=new MessageChannel,xt=Qe.port2;Qe.port1.onmessage=Q,te=function(){xt.postMessage(null)}}else te=function(){w(Q,0)};function Ee(b){A=b,x||(x=!0,te())}function qe(b,O){N=w(function(){b(t.unstable_now())},O)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(b){b.callback=null},t.unstable_continueExecution=function(){T||y||(T=!0,Ee(C))},t.unstable_forceFrameRate=function(b){0>b||125<b?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<b?Math.floor(1e3/b):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(b){switch(h){case 1:case 2:case 3:var O=3;break;default:O=h}var G=h;h=O;try{return b()}finally{h=G}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(b,O){switch(b){case 1:case 2:case 3:case 4:case 5:break;default:b=3}var G=h;h=b;try{return O()}finally{h=G}},t.unstable_scheduleCallback=function(b,O,G){var S=t.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?S+G:S):G=S,b){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=G+D,b={id:f++,callback:O,priorityLevel:b,startTime:G,expirationTime:D,sortIndex:-1},G>S?(b.sortIndex=G,e(d,b),n(c)===null&&b===n(d)&&(E?(_(N),N=-1):E=!0,qe(I,G-S))):(b.sortIndex=D,e(c,b),T||y||(T=!0,Ee(C))),b},t.unstable_shouldYield=K,t.unstable_wrapCallback=function(b){var O=h;return function(){var G=h;h=O;try{return b.apply(this,arguments)}finally{h=G}}}})(hh);ph.exports=hh;var e_=ph.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var t_=z,it=e_;function k(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var mh=new Set,kr={};function oi(t,e){Oi(t,e),Oi(t+"Capture",e)}function Oi(t,e){for(kr[t]=e,t=0;t<e.length;t++)mh.add(e[t])}var Jt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),$a=Object.prototype.hasOwnProperty,n_=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Dc={},Lc={};function i_(t){return $a.call(Lc,t)?!0:$a.call(Dc,t)?!1:n_.test(t)?Lc[t]=!0:(Dc[t]=!0,!1)}function r_(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function o_(t,e,n,i){if(e===null||typeof e>"u"||r_(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ge(t,e,n,i,r,o,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=s}var Re={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Re[t]=new Ge(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Re[e]=new Ge(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Re[t]=new Ge(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Re[t]=new Ge(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Re[t]=new Ge(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Re[t]=new Ge(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Re[t]=new Ge(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Re[t]=new Ge(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Re[t]=new Ge(t,5,!1,t.toLowerCase(),null,!1,!1)});var au=/[\-:]([a-z])/g;function lu(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(au,lu);Re[e]=new Ge(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(au,lu);Re[e]=new Ge(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(au,lu);Re[e]=new Ge(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Re[t]=new Ge(t,1,!1,t.toLowerCase(),null,!1,!1)});Re.xlinkHref=new Ge("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Re[t]=new Ge(t,1,!1,t.toLowerCase(),null,!0,!0)});function uu(t,e,n,i){var r=Re.hasOwnProperty(e)?Re[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(o_(e,n,r,i)&&(n=null),i||r===null?i_(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,i=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var tn=t_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,so=Symbol.for("react.element"),fi=Symbol.for("react.portal"),pi=Symbol.for("react.fragment"),cu=Symbol.for("react.strict_mode"),za=Symbol.for("react.profiler"),gh=Symbol.for("react.provider"),yh=Symbol.for("react.context"),du=Symbol.for("react.forward_ref"),Wa=Symbol.for("react.suspense"),Ja=Symbol.for("react.suspense_list"),fu=Symbol.for("react.memo"),ln=Symbol.for("react.lazy"),vh=Symbol.for("react.offscreen"),Uc=Symbol.iterator;function er(t){return t===null||typeof t!="object"?null:(t=Uc&&t[Uc]||t["@@iterator"],typeof t=="function"?t:null)}var ge=Object.assign,ra;function dr(t){if(ra===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);ra=e&&e[1]||""}return`
`+ra+t}var oa=!1;function sa(t,e){if(!t||oa)return"";oa=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var i=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){i=d}t.call(e.prototype)}else{try{throw Error()}catch(d){i=d}t()}}catch(d){if(d&&i&&typeof d.stack=="string"){for(var r=d.stack.split(`
`),o=i.stack.split(`
`),s=r.length-1,u=o.length-1;1<=s&&0<=u&&r[s]!==o[u];)u--;for(;1<=s&&0<=u;s--,u--)if(r[s]!==o[u]){if(s!==1||u!==1)do if(s--,u--,0>u||r[s]!==o[u]){var c=`
`+r[s].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=s&&0<=u);break}}}finally{oa=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?dr(t):""}function s_(t){switch(t.tag){case 5:return dr(t.type);case 16:return dr("Lazy");case 13:return dr("Suspense");case 19:return dr("SuspenseList");case 0:case 2:case 15:return t=sa(t.type,!1),t;case 11:return t=sa(t.type.render,!1),t;case 1:return t=sa(t.type,!0),t;default:return""}}function Ka(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case pi:return"Fragment";case fi:return"Portal";case za:return"Profiler";case cu:return"StrictMode";case Wa:return"Suspense";case Ja:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case yh:return(t.displayName||"Context")+".Consumer";case gh:return(t._context.displayName||"Context")+".Provider";case du:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case fu:return e=t.displayName||null,e!==null?e:Ka(t.type)||"Memo";case ln:e=t._payload,t=t._init;try{return Ka(t(e))}catch{}}return null}function a_(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ka(e);case 8:return e===cu?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Pn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function _h(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function l_(t){var e=_h(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(s){i=""+s,o.call(this,s)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(s){i=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ao(t){t._valueTracker||(t._valueTracker=l_(t))}function Th(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=_h(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function Wo(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Ya(t,e){var n=e.checked;return ge({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Fc(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=Pn(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Eh(t,e){e=e.checked,e!=null&&uu(t,"checked",e,!1)}function Qa(t,e){Eh(t,e);var n=Pn(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Xa(t,e.type,n):e.hasOwnProperty("defaultValue")&&Xa(t,e.type,Pn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Oc(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Xa(t,e,n){(e!=="number"||Wo(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var fr=Array.isArray;function xi(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+Pn(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function Za(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(k(91));return ge({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Vc(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(k(92));if(fr(n)){if(1<n.length)throw Error(k(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Pn(n)}}function Ih(t,e){var n=Pn(e.value),i=Pn(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function Hc(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function wh(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ja(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?wh(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var lo,Ch=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(lo=lo||document.createElement("div"),lo.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=lo.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Nr(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var mr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},u_=["Webkit","ms","Moz","O"];Object.keys(mr).forEach(function(t){u_.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),mr[e]=mr[t]})});function Sh(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||mr.hasOwnProperty(t)&&mr[t]?(""+e).trim():e+"px"}function xh(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=Sh(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}var c_=ge({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function el(t,e){if(e){if(c_[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(k(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(k(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(k(61))}if(e.style!=null&&typeof e.style!="object")throw Error(k(62))}}function tl(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var nl=null;function pu(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var il=null,Ai=null,ki=null;function Bc(t){if(t=Xr(t)){if(typeof il!="function")throw Error(k(280));var e=t.stateNode;e&&(e=Ds(e),il(t.stateNode,t.type,e))}}function Ah(t){Ai?ki?ki.push(t):ki=[t]:Ai=t}function kh(){if(Ai){var t=Ai,e=ki;if(ki=Ai=null,Bc(t),e)for(t=0;t<e.length;t++)Bc(e[t])}}function Nh(t,e){return t(e)}function Rh(){}var aa=!1;function Ph(t,e,n){if(aa)return t(e,n);aa=!0;try{return Nh(t,e,n)}finally{aa=!1,(Ai!==null||ki!==null)&&(Rh(),kh())}}function Rr(t,e){var n=t.stateNode;if(n===null)return null;var i=Ds(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(k(231,e,typeof n));return n}var rl=!1;if(Jt)try{var tr={};Object.defineProperty(tr,"passive",{get:function(){rl=!0}}),window.addEventListener("test",tr,tr),window.removeEventListener("test",tr,tr)}catch{rl=!1}function d_(t,e,n,i,r,o,s,u,c){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(f){this.onError(f)}}var gr=!1,Jo=null,Ko=!1,ol=null,f_={onError:function(t){gr=!0,Jo=t}};function p_(t,e,n,i,r,o,s,u,c){gr=!1,Jo=null,d_.apply(f_,arguments)}function h_(t,e,n,i,r,o,s,u,c){if(p_.apply(this,arguments),gr){if(gr){var d=Jo;gr=!1,Jo=null}else throw Error(k(198));Ko||(Ko=!0,ol=d)}}function si(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Mh(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Gc(t){if(si(t)!==t)throw Error(k(188))}function m_(t){var e=t.alternate;if(!e){if(e=si(t),e===null)throw Error(k(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var o=r.alternate;if(o===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===o.child){for(o=r.child;o;){if(o===n)return Gc(r),t;if(o===i)return Gc(r),e;o=o.sibling}throw Error(k(188))}if(n.return!==i.return)n=r,i=o;else{for(var s=!1,u=r.child;u;){if(u===n){s=!0,n=r,i=o;break}if(u===i){s=!0,i=r,n=o;break}u=u.sibling}if(!s){for(u=o.child;u;){if(u===n){s=!0,n=o,i=r;break}if(u===i){s=!0,i=o,n=r;break}u=u.sibling}if(!s)throw Error(k(189))}}if(n.alternate!==i)throw Error(k(190))}if(n.tag!==3)throw Error(k(188));return n.stateNode.current===n?t:e}function bh(t){return t=m_(t),t!==null?Dh(t):null}function Dh(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Dh(t);if(e!==null)return e;t=t.sibling}return null}var Lh=it.unstable_scheduleCallback,qc=it.unstable_cancelCallback,g_=it.unstable_shouldYield,y_=it.unstable_requestPaint,Te=it.unstable_now,v_=it.unstable_getCurrentPriorityLevel,hu=it.unstable_ImmediatePriority,Uh=it.unstable_UserBlockingPriority,Yo=it.unstable_NormalPriority,__=it.unstable_LowPriority,Fh=it.unstable_IdlePriority,Rs=null,Pt=null;function T_(t){if(Pt&&typeof Pt.onCommitFiberRoot=="function")try{Pt.onCommitFiberRoot(Rs,t,void 0,(t.current.flags&128)===128)}catch{}}var Tt=Math.clz32?Math.clz32:w_,E_=Math.log,I_=Math.LN2;function w_(t){return t>>>=0,t===0?32:31-(E_(t)/I_|0)|0}var uo=64,co=4194304;function pr(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Qo(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,r=t.suspendedLanes,o=t.pingedLanes,s=n&268435455;if(s!==0){var u=s&~r;u!==0?i=pr(u):(o&=s,o!==0&&(i=pr(o)))}else s=n&~r,s!==0?i=pr(s):o!==0&&(i=pr(o));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,o=e&-e,r>=o||r===16&&(o&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-Tt(e),r=1<<n,i|=t[n],e&=~r;return i}function C_(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function S_(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,o=t.pendingLanes;0<o;){var s=31-Tt(o),u=1<<s,c=r[s];c===-1?(!(u&n)||u&i)&&(r[s]=C_(u,e)):c<=e&&(t.expiredLanes|=u),o&=~u}}function sl(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Oh(){var t=uo;return uo<<=1,!(uo&4194240)&&(uo=64),t}function la(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Yr(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Tt(e),t[e]=n}function x_(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-Tt(n),o=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~o}}function mu(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-Tt(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var ne=0;function Vh(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Hh,gu,Bh,Gh,qh,al=!1,fo=[],Tn=null,En=null,In=null,Pr=new Map,Mr=new Map,cn=[],A_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function $c(t,e){switch(t){case"focusin":case"focusout":Tn=null;break;case"dragenter":case"dragleave":En=null;break;case"mouseover":case"mouseout":In=null;break;case"pointerover":case"pointerout":Pr.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Mr.delete(e.pointerId)}}function nr(t,e,n,i,r,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:o,targetContainers:[r]},e!==null&&(e=Xr(e),e!==null&&gu(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function k_(t,e,n,i,r){switch(e){case"focusin":return Tn=nr(Tn,t,e,n,i,r),!0;case"dragenter":return En=nr(En,t,e,n,i,r),!0;case"mouseover":return In=nr(In,t,e,n,i,r),!0;case"pointerover":var o=r.pointerId;return Pr.set(o,nr(Pr.get(o)||null,t,e,n,i,r)),!0;case"gotpointercapture":return o=r.pointerId,Mr.set(o,nr(Mr.get(o)||null,t,e,n,i,r)),!0}return!1}function $h(t){var e=qn(t.target);if(e!==null){var n=si(e);if(n!==null){if(e=n.tag,e===13){if(e=Mh(n),e!==null){t.blockedOn=e,qh(t.priority,function(){Bh(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function No(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=ll(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);nl=i,n.target.dispatchEvent(i),nl=null}else return e=Xr(n),e!==null&&gu(e),t.blockedOn=n,!1;e.shift()}return!0}function zc(t,e,n){No(t)&&n.delete(e)}function N_(){al=!1,Tn!==null&&No(Tn)&&(Tn=null),En!==null&&No(En)&&(En=null),In!==null&&No(In)&&(In=null),Pr.forEach(zc),Mr.forEach(zc)}function ir(t,e){t.blockedOn===e&&(t.blockedOn=null,al||(al=!0,it.unstable_scheduleCallback(it.unstable_NormalPriority,N_)))}function br(t){function e(r){return ir(r,t)}if(0<fo.length){ir(fo[0],t);for(var n=1;n<fo.length;n++){var i=fo[n];i.blockedOn===t&&(i.blockedOn=null)}}for(Tn!==null&&ir(Tn,t),En!==null&&ir(En,t),In!==null&&ir(In,t),Pr.forEach(e),Mr.forEach(e),n=0;n<cn.length;n++)i=cn[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<cn.length&&(n=cn[0],n.blockedOn===null);)$h(n),n.blockedOn===null&&cn.shift()}var Ni=tn.ReactCurrentBatchConfig,Xo=!0;function R_(t,e,n,i){var r=ne,o=Ni.transition;Ni.transition=null;try{ne=1,yu(t,e,n,i)}finally{ne=r,Ni.transition=o}}function P_(t,e,n,i){var r=ne,o=Ni.transition;Ni.transition=null;try{ne=4,yu(t,e,n,i)}finally{ne=r,Ni.transition=o}}function yu(t,e,n,i){if(Xo){var r=ll(t,e,n,i);if(r===null)va(t,e,i,Zo,n),$c(t,i);else if(k_(r,t,e,n,i))i.stopPropagation();else if($c(t,i),e&4&&-1<A_.indexOf(t)){for(;r!==null;){var o=Xr(r);if(o!==null&&Hh(o),o=ll(t,e,n,i),o===null&&va(t,e,i,Zo,n),o===r)break;r=o}r!==null&&i.stopPropagation()}else va(t,e,i,null,n)}}var Zo=null;function ll(t,e,n,i){if(Zo=null,t=pu(i),t=qn(t),t!==null)if(e=si(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Mh(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Zo=t,null}function zh(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(v_()){case hu:return 1;case Uh:return 4;case Yo:case __:return 16;case Fh:return 536870912;default:return 16}default:return 16}}var yn=null,vu=null,Ro=null;function Wh(){if(Ro)return Ro;var t,e=vu,n=e.length,i,r="value"in yn?yn.value:yn.textContent,o=r.length;for(t=0;t<n&&e[t]===r[t];t++);var s=n-t;for(i=1;i<=s&&e[n-i]===r[o-i];i++);return Ro=r.slice(t,1<i?1-i:void 0)}function Po(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function po(){return!0}function Wc(){return!1}function ot(t){function e(n,i,r,o,s){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=o,this.target=s,this.currentTarget=null;for(var u in t)t.hasOwnProperty(u)&&(n=t[u],this[u]=n?n(o):o[u]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?po:Wc,this.isPropagationStopped=Wc,this}return ge(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=po)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=po)},persist:function(){},isPersistent:po}),e}var Wi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},_u=ot(Wi),Qr=ge({},Wi,{view:0,detail:0}),M_=ot(Qr),ua,ca,rr,Ps=ge({},Qr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tu,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==rr&&(rr&&t.type==="mousemove"?(ua=t.screenX-rr.screenX,ca=t.screenY-rr.screenY):ca=ua=0,rr=t),ua)},movementY:function(t){return"movementY"in t?t.movementY:ca}}),Jc=ot(Ps),b_=ge({},Ps,{dataTransfer:0}),D_=ot(b_),L_=ge({},Qr,{relatedTarget:0}),da=ot(L_),U_=ge({},Wi,{animationName:0,elapsedTime:0,pseudoElement:0}),F_=ot(U_),O_=ge({},Wi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),V_=ot(O_),H_=ge({},Wi,{data:0}),Kc=ot(H_),B_={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},G_={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},q_={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function $_(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=q_[t])?!!e[t]:!1}function Tu(){return $_}var z_=ge({},Qr,{key:function(t){if(t.key){var e=B_[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Po(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?G_[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tu,charCode:function(t){return t.type==="keypress"?Po(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Po(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),W_=ot(z_),J_=ge({},Ps,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Yc=ot(J_),K_=ge({},Qr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tu}),Y_=ot(K_),Q_=ge({},Wi,{propertyName:0,elapsedTime:0,pseudoElement:0}),X_=ot(Q_),Z_=ge({},Ps,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),j_=ot(Z_),e0=[9,13,27,32],Eu=Jt&&"CompositionEvent"in window,yr=null;Jt&&"documentMode"in document&&(yr=document.documentMode);var t0=Jt&&"TextEvent"in window&&!yr,Jh=Jt&&(!Eu||yr&&8<yr&&11>=yr),Qc=" ",Xc=!1;function Kh(t,e){switch(t){case"keyup":return e0.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Yh(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var hi=!1;function n0(t,e){switch(t){case"compositionend":return Yh(e);case"keypress":return e.which!==32?null:(Xc=!0,Qc);case"textInput":return t=e.data,t===Qc&&Xc?null:t;default:return null}}function i0(t,e){if(hi)return t==="compositionend"||!Eu&&Kh(t,e)?(t=Wh(),Ro=vu=yn=null,hi=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Jh&&e.locale!=="ko"?null:e.data;default:return null}}var r0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Zc(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!r0[t.type]:e==="textarea"}function Qh(t,e,n,i){Ah(i),e=jo(e,"onChange"),0<e.length&&(n=new _u("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var vr=null,Dr=null;function o0(t){am(t,0)}function Ms(t){var e=yi(t);if(Th(e))return t}function s0(t,e){if(t==="change")return e}var Xh=!1;if(Jt){var fa;if(Jt){var pa="oninput"in document;if(!pa){var jc=document.createElement("div");jc.setAttribute("oninput","return;"),pa=typeof jc.oninput=="function"}fa=pa}else fa=!1;Xh=fa&&(!document.documentMode||9<document.documentMode)}function ed(){vr&&(vr.detachEvent("onpropertychange",Zh),Dr=vr=null)}function Zh(t){if(t.propertyName==="value"&&Ms(Dr)){var e=[];Qh(e,Dr,t,pu(t)),Ph(o0,e)}}function a0(t,e,n){t==="focusin"?(ed(),vr=e,Dr=n,vr.attachEvent("onpropertychange",Zh)):t==="focusout"&&ed()}function l0(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ms(Dr)}function u0(t,e){if(t==="click")return Ms(e)}function c0(t,e){if(t==="input"||t==="change")return Ms(e)}function d0(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var It=typeof Object.is=="function"?Object.is:d0;function Lr(t,e){if(It(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!$a.call(e,r)||!It(t[r],e[r]))return!1}return!0}function td(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function nd(t,e){var n=td(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=td(n)}}function jh(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?jh(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function em(){for(var t=window,e=Wo();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Wo(t.document)}return e}function Iu(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function f0(t){var e=em(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&jh(n.ownerDocument.documentElement,n)){if(i!==null&&Iu(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,o=Math.min(i.start,r);i=i.end===void 0?o:Math.min(i.end,r),!t.extend&&o>i&&(r=i,i=o,o=r),r=nd(n,o);var s=nd(n,i);r&&s&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),o>i?(t.addRange(e),t.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var p0=Jt&&"documentMode"in document&&11>=document.documentMode,mi=null,ul=null,_r=null,cl=!1;function id(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;cl||mi==null||mi!==Wo(i)||(i=mi,"selectionStart"in i&&Iu(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),_r&&Lr(_r,i)||(_r=i,i=jo(ul,"onSelect"),0<i.length&&(e=new _u("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=mi)))}function ho(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var gi={animationend:ho("Animation","AnimationEnd"),animationiteration:ho("Animation","AnimationIteration"),animationstart:ho("Animation","AnimationStart"),transitionend:ho("Transition","TransitionEnd")},ha={},tm={};Jt&&(tm=document.createElement("div").style,"AnimationEvent"in window||(delete gi.animationend.animation,delete gi.animationiteration.animation,delete gi.animationstart.animation),"TransitionEvent"in window||delete gi.transitionend.transition);function bs(t){if(ha[t])return ha[t];if(!gi[t])return t;var e=gi[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in tm)return ha[t]=e[n];return t}var nm=bs("animationend"),im=bs("animationiteration"),rm=bs("animationstart"),om=bs("transitionend"),sm=new Map,rd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Dn(t,e){sm.set(t,e),oi(e,[t])}for(var ma=0;ma<rd.length;ma++){var ga=rd[ma],h0=ga.toLowerCase(),m0=ga[0].toUpperCase()+ga.slice(1);Dn(h0,"on"+m0)}Dn(nm,"onAnimationEnd");Dn(im,"onAnimationIteration");Dn(rm,"onAnimationStart");Dn("dblclick","onDoubleClick");Dn("focusin","onFocus");Dn("focusout","onBlur");Dn(om,"onTransitionEnd");Oi("onMouseEnter",["mouseout","mouseover"]);Oi("onMouseLeave",["mouseout","mouseover"]);Oi("onPointerEnter",["pointerout","pointerover"]);Oi("onPointerLeave",["pointerout","pointerover"]);oi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));oi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));oi("onBeforeInput",["compositionend","keypress","textInput","paste"]);oi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));oi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));oi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var hr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),g0=new Set("cancel close invalid load scroll toggle".split(" ").concat(hr));function od(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,h_(i,e,void 0,t),t.currentTarget=null}function am(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var o=void 0;if(e)for(var s=i.length-1;0<=s;s--){var u=i[s],c=u.instance,d=u.currentTarget;if(u=u.listener,c!==o&&r.isPropagationStopped())break e;od(r,u,d),o=c}else for(s=0;s<i.length;s++){if(u=i[s],c=u.instance,d=u.currentTarget,u=u.listener,c!==o&&r.isPropagationStopped())break e;od(r,u,d),o=c}}}if(Ko)throw t=ol,Ko=!1,ol=null,t}function se(t,e){var n=e[ml];n===void 0&&(n=e[ml]=new Set);var i=t+"__bubble";n.has(i)||(lm(e,t,2,!1),n.add(i))}function ya(t,e,n){var i=0;e&&(i|=4),lm(n,t,i,e)}var mo="_reactListening"+Math.random().toString(36).slice(2);function Ur(t){if(!t[mo]){t[mo]=!0,mh.forEach(function(n){n!=="selectionchange"&&(g0.has(n)||ya(n,!1,t),ya(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[mo]||(e[mo]=!0,ya("selectionchange",!1,e))}}function lm(t,e,n,i){switch(zh(e)){case 1:var r=R_;break;case 4:r=P_;break;default:r=yu}n=r.bind(null,e,n,t),r=void 0,!rl||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function va(t,e,n,i,r){var o=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var s=i.tag;if(s===3||s===4){var u=i.stateNode.containerInfo;if(u===r||u.nodeType===8&&u.parentNode===r)break;if(s===4)for(s=i.return;s!==null;){var c=s.tag;if((c===3||c===4)&&(c=s.stateNode.containerInfo,c===r||c.nodeType===8&&c.parentNode===r))return;s=s.return}for(;u!==null;){if(s=qn(u),s===null)return;if(c=s.tag,c===5||c===6){i=o=s;continue e}u=u.parentNode}}i=i.return}Ph(function(){var d=o,f=pu(n),p=[];e:{var h=sm.get(t);if(h!==void 0){var y=_u,T=t;switch(t){case"keypress":if(Po(n)===0)break e;case"keydown":case"keyup":y=W_;break;case"focusin":T="focus",y=da;break;case"focusout":T="blur",y=da;break;case"beforeblur":case"afterblur":y=da;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=Jc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=D_;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=Y_;break;case nm:case im:case rm:y=F_;break;case om:y=X_;break;case"scroll":y=M_;break;case"wheel":y=j_;break;case"copy":case"cut":case"paste":y=V_;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=Yc}var E=(e&4)!==0,w=!E&&t==="scroll",_=E?h!==null?h+"Capture":null:h;E=[];for(var g=d,v;g!==null;){v=g;var I=v.stateNode;if(v.tag===5&&I!==null&&(v=I,_!==null&&(I=Rr(g,_),I!=null&&E.push(Fr(g,I,v)))),w)break;g=g.return}0<E.length&&(h=new y(h,T,null,n,f),p.push({event:h,listeners:E}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",h&&n!==nl&&(T=n.relatedTarget||n.fromElement)&&(qn(T)||T[Kt]))break e;if((y||h)&&(h=f.window===f?f:(h=f.ownerDocument)?h.defaultView||h.parentWindow:window,y?(T=n.relatedTarget||n.toElement,y=d,T=T?qn(T):null,T!==null&&(w=si(T),T!==w||T.tag!==5&&T.tag!==6)&&(T=null)):(y=null,T=d),y!==T)){if(E=Jc,I="onMouseLeave",_="onMouseEnter",g="mouse",(t==="pointerout"||t==="pointerover")&&(E=Yc,I="onPointerLeave",_="onPointerEnter",g="pointer"),w=y==null?h:yi(y),v=T==null?h:yi(T),h=new E(I,g+"leave",y,n,f),h.target=w,h.relatedTarget=v,I=null,qn(f)===d&&(E=new E(_,g+"enter",T,n,f),E.target=v,E.relatedTarget=w,I=E),w=I,y&&T)t:{for(E=y,_=T,g=0,v=E;v;v=di(v))g++;for(v=0,I=_;I;I=di(I))v++;for(;0<g-v;)E=di(E),g--;for(;0<v-g;)_=di(_),v--;for(;g--;){if(E===_||_!==null&&E===_.alternate)break t;E=di(E),_=di(_)}E=null}else E=null;y!==null&&sd(p,h,y,E,!1),T!==null&&w!==null&&sd(p,w,T,E,!0)}}e:{if(h=d?yi(d):window,y=h.nodeName&&h.nodeName.toLowerCase(),y==="select"||y==="input"&&h.type==="file")var C=s0;else if(Zc(h))if(Xh)C=c0;else{C=l0;var x=a0}else(y=h.nodeName)&&y.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(C=u0);if(C&&(C=C(t,d))){Qh(p,C,n,f);break e}x&&x(t,h,d),t==="focusout"&&(x=h._wrapperState)&&x.controlled&&h.type==="number"&&Xa(h,"number",h.value)}switch(x=d?yi(d):window,t){case"focusin":(Zc(x)||x.contentEditable==="true")&&(mi=x,ul=d,_r=null);break;case"focusout":_r=ul=mi=null;break;case"mousedown":cl=!0;break;case"contextmenu":case"mouseup":case"dragend":cl=!1,id(p,n,f);break;case"selectionchange":if(p0)break;case"keydown":case"keyup":id(p,n,f)}var A;if(Eu)e:{switch(t){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else hi?Kh(t,n)&&(N="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(N="onCompositionStart");N&&(Jh&&n.locale!=="ko"&&(hi||N!=="onCompositionStart"?N==="onCompositionEnd"&&hi&&(A=Wh()):(yn=f,vu="value"in yn?yn.value:yn.textContent,hi=!0)),x=jo(d,N),0<x.length&&(N=new Kc(N,t,null,n,f),p.push({event:N,listeners:x}),A?N.data=A:(A=Yh(n),A!==null&&(N.data=A)))),(A=t0?n0(t,n):i0(t,n))&&(d=jo(d,"onBeforeInput"),0<d.length&&(f=new Kc("onBeforeInput","beforeinput",null,n,f),p.push({event:f,listeners:d}),f.data=A))}am(p,e)})}function Fr(t,e,n){return{instance:t,listener:e,currentTarget:n}}function jo(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,o=r.stateNode;r.tag===5&&o!==null&&(r=o,o=Rr(t,n),o!=null&&i.unshift(Fr(t,o,r)),o=Rr(t,e),o!=null&&i.push(Fr(t,o,r))),t=t.return}return i}function di(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function sd(t,e,n,i,r){for(var o=e._reactName,s=[];n!==null&&n!==i;){var u=n,c=u.alternate,d=u.stateNode;if(c!==null&&c===i)break;u.tag===5&&d!==null&&(u=d,r?(c=Rr(n,o),c!=null&&s.unshift(Fr(n,c,u))):r||(c=Rr(n,o),c!=null&&s.push(Fr(n,c,u)))),n=n.return}s.length!==0&&t.push({event:e,listeners:s})}var y0=/\r\n?/g,v0=/\u0000|\uFFFD/g;function ad(t){return(typeof t=="string"?t:""+t).replace(y0,`
`).replace(v0,"")}function go(t,e,n){if(e=ad(e),ad(t)!==e&&n)throw Error(k(425))}function es(){}var dl=null,fl=null;function pl(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var hl=typeof setTimeout=="function"?setTimeout:void 0,_0=typeof clearTimeout=="function"?clearTimeout:void 0,ld=typeof Promise=="function"?Promise:void 0,T0=typeof queueMicrotask=="function"?queueMicrotask:typeof ld<"u"?function(t){return ld.resolve(null).then(t).catch(E0)}:hl;function E0(t){setTimeout(function(){throw t})}function _a(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){t.removeChild(r),br(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);br(e)}function wn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function ud(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ji=Math.random().toString(36).slice(2),Rt="__reactFiber$"+Ji,Or="__reactProps$"+Ji,Kt="__reactContainer$"+Ji,ml="__reactEvents$"+Ji,I0="__reactListeners$"+Ji,w0="__reactHandles$"+Ji;function qn(t){var e=t[Rt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Kt]||n[Rt]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=ud(t);t!==null;){if(n=t[Rt])return n;t=ud(t)}return e}t=n,n=t.parentNode}return null}function Xr(t){return t=t[Rt]||t[Kt],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function yi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(k(33))}function Ds(t){return t[Or]||null}var gl=[],vi=-1;function Ln(t){return{current:t}}function ue(t){0>vi||(t.current=gl[vi],gl[vi]=null,vi--)}function re(t,e){vi++,gl[vi]=t.current,t.current=e}var Mn={},Ue=Ln(Mn),We=Ln(!1),Qn=Mn;function Vi(t,e){var n=t.type.contextTypes;if(!n)return Mn;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},o;for(o in n)r[o]=e[o];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function Je(t){return t=t.childContextTypes,t!=null}function ts(){ue(We),ue(Ue)}function cd(t,e,n){if(Ue.current!==Mn)throw Error(k(168));re(Ue,e),re(We,n)}function um(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(k(108,a_(t)||"Unknown",r));return ge({},n,i)}function ns(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Mn,Qn=Ue.current,re(Ue,t),re(We,We.current),!0}function dd(t,e,n){var i=t.stateNode;if(!i)throw Error(k(169));n?(t=um(t,e,Qn),i.__reactInternalMemoizedMergedChildContext=t,ue(We),ue(Ue),re(Ue,t)):ue(We),re(We,n)}var Vt=null,Ls=!1,Ta=!1;function cm(t){Vt===null?Vt=[t]:Vt.push(t)}function C0(t){Ls=!0,cm(t)}function Un(){if(!Ta&&Vt!==null){Ta=!0;var t=0,e=ne;try{var n=Vt;for(ne=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}Vt=null,Ls=!1}catch(r){throw Vt!==null&&(Vt=Vt.slice(t+1)),Lh(hu,Un),r}finally{ne=e,Ta=!1}}return null}var _i=[],Ti=0,is=null,rs=0,st=[],at=0,Xn=null,Ht=1,Bt="";function Hn(t,e){_i[Ti++]=rs,_i[Ti++]=is,is=t,rs=e}function dm(t,e,n){st[at++]=Ht,st[at++]=Bt,st[at++]=Xn,Xn=t;var i=Ht;t=Bt;var r=32-Tt(i)-1;i&=~(1<<r),n+=1;var o=32-Tt(e)+r;if(30<o){var s=r-r%5;o=(i&(1<<s)-1).toString(32),i>>=s,r-=s,Ht=1<<32-Tt(e)+r|n<<r|i,Bt=o+t}else Ht=1<<o|n<<r|i,Bt=t}function wu(t){t.return!==null&&(Hn(t,1),dm(t,1,0))}function Cu(t){for(;t===is;)is=_i[--Ti],_i[Ti]=null,rs=_i[--Ti],_i[Ti]=null;for(;t===Xn;)Xn=st[--at],st[at]=null,Bt=st[--at],st[at]=null,Ht=st[--at],st[at]=null}var tt=null,je=null,fe=!1,vt=null;function fm(t,e){var n=lt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function fd(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,tt=t,je=wn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,tt=t,je=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Xn!==null?{id:Ht,overflow:Bt}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=lt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,tt=t,je=null,!0):!1;default:return!1}}function yl(t){return(t.mode&1)!==0&&(t.flags&128)===0}function vl(t){if(fe){var e=je;if(e){var n=e;if(!fd(t,e)){if(yl(t))throw Error(k(418));e=wn(n.nextSibling);var i=tt;e&&fd(t,e)?fm(i,n):(t.flags=t.flags&-4097|2,fe=!1,tt=t)}}else{if(yl(t))throw Error(k(418));t.flags=t.flags&-4097|2,fe=!1,tt=t}}}function pd(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;tt=t}function yo(t){if(t!==tt)return!1;if(!fe)return pd(t),fe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!pl(t.type,t.memoizedProps)),e&&(e=je)){if(yl(t))throw pm(),Error(k(418));for(;e;)fm(t,e),e=wn(e.nextSibling)}if(pd(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(k(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){je=wn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}je=null}}else je=tt?wn(t.stateNode.nextSibling):null;return!0}function pm(){for(var t=je;t;)t=wn(t.nextSibling)}function Hi(){je=tt=null,fe=!1}function Su(t){vt===null?vt=[t]:vt.push(t)}var S0=tn.ReactCurrentBatchConfig;function or(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(k(309));var i=n.stateNode}if(!i)throw Error(k(147,t));var r=i,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(s){var u=r.refs;s===null?delete u[o]:u[o]=s},e._stringRef=o,e)}if(typeof t!="string")throw Error(k(284));if(!n._owner)throw Error(k(290,t))}return t}function vo(t,e){throw t=Object.prototype.toString.call(e),Error(k(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function hd(t){var e=t._init;return e(t._payload)}function hm(t){function e(_,g){if(t){var v=_.deletions;v===null?(_.deletions=[g],_.flags|=16):v.push(g)}}function n(_,g){if(!t)return null;for(;g!==null;)e(_,g),g=g.sibling;return null}function i(_,g){for(_=new Map;g!==null;)g.key!==null?_.set(g.key,g):_.set(g.index,g),g=g.sibling;return _}function r(_,g){return _=An(_,g),_.index=0,_.sibling=null,_}function o(_,g,v){return _.index=v,t?(v=_.alternate,v!==null?(v=v.index,v<g?(_.flags|=2,g):v):(_.flags|=2,g)):(_.flags|=1048576,g)}function s(_){return t&&_.alternate===null&&(_.flags|=2),_}function u(_,g,v,I){return g===null||g.tag!==6?(g=Aa(v,_.mode,I),g.return=_,g):(g=r(g,v),g.return=_,g)}function c(_,g,v,I){var C=v.type;return C===pi?f(_,g,v.props.children,I,v.key):g!==null&&(g.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===ln&&hd(C)===g.type)?(I=r(g,v.props),I.ref=or(_,g,v),I.return=_,I):(I=Oo(v.type,v.key,v.props,null,_.mode,I),I.ref=or(_,g,v),I.return=_,I)}function d(_,g,v,I){return g===null||g.tag!==4||g.stateNode.containerInfo!==v.containerInfo||g.stateNode.implementation!==v.implementation?(g=ka(v,_.mode,I),g.return=_,g):(g=r(g,v.children||[]),g.return=_,g)}function f(_,g,v,I,C){return g===null||g.tag!==7?(g=Kn(v,_.mode,I,C),g.return=_,g):(g=r(g,v),g.return=_,g)}function p(_,g,v){if(typeof g=="string"&&g!==""||typeof g=="number")return g=Aa(""+g,_.mode,v),g.return=_,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case so:return v=Oo(g.type,g.key,g.props,null,_.mode,v),v.ref=or(_,null,g),v.return=_,v;case fi:return g=ka(g,_.mode,v),g.return=_,g;case ln:var I=g._init;return p(_,I(g._payload),v)}if(fr(g)||er(g))return g=Kn(g,_.mode,v,null),g.return=_,g;vo(_,g)}return null}function h(_,g,v,I){var C=g!==null?g.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return C!==null?null:u(_,g,""+v,I);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case so:return v.key===C?c(_,g,v,I):null;case fi:return v.key===C?d(_,g,v,I):null;case ln:return C=v._init,h(_,g,C(v._payload),I)}if(fr(v)||er(v))return C!==null?null:f(_,g,v,I,null);vo(_,v)}return null}function y(_,g,v,I,C){if(typeof I=="string"&&I!==""||typeof I=="number")return _=_.get(v)||null,u(g,_,""+I,C);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case so:return _=_.get(I.key===null?v:I.key)||null,c(g,_,I,C);case fi:return _=_.get(I.key===null?v:I.key)||null,d(g,_,I,C);case ln:var x=I._init;return y(_,g,v,x(I._payload),C)}if(fr(I)||er(I))return _=_.get(v)||null,f(g,_,I,C,null);vo(g,I)}return null}function T(_,g,v,I){for(var C=null,x=null,A=g,N=g=0,P=null;A!==null&&N<v.length;N++){A.index>N?(P=A,A=null):P=A.sibling;var R=h(_,A,v[N],I);if(R===null){A===null&&(A=P);break}t&&A&&R.alternate===null&&e(_,A),g=o(R,g,N),x===null?C=R:x.sibling=R,x=R,A=P}if(N===v.length)return n(_,A),fe&&Hn(_,N),C;if(A===null){for(;N<v.length;N++)A=p(_,v[N],I),A!==null&&(g=o(A,g,N),x===null?C=A:x.sibling=A,x=A);return fe&&Hn(_,N),C}for(A=i(_,A);N<v.length;N++)P=y(A,_,N,v[N],I),P!==null&&(t&&P.alternate!==null&&A.delete(P.key===null?N:P.key),g=o(P,g,N),x===null?C=P:x.sibling=P,x=P);return t&&A.forEach(function(K){return e(_,K)}),fe&&Hn(_,N),C}function E(_,g,v,I){var C=er(v);if(typeof C!="function")throw Error(k(150));if(v=C.call(v),v==null)throw Error(k(151));for(var x=C=null,A=g,N=g=0,P=null,R=v.next();A!==null&&!R.done;N++,R=v.next()){A.index>N?(P=A,A=null):P=A.sibling;var K=h(_,A,R.value,I);if(K===null){A===null&&(A=P);break}t&&A&&K.alternate===null&&e(_,A),g=o(K,g,N),x===null?C=K:x.sibling=K,x=K,A=P}if(R.done)return n(_,A),fe&&Hn(_,N),C;if(A===null){for(;!R.done;N++,R=v.next())R=p(_,R.value,I),R!==null&&(g=o(R,g,N),x===null?C=R:x.sibling=R,x=R);return fe&&Hn(_,N),C}for(A=i(_,A);!R.done;N++,R=v.next())R=y(A,_,N,R.value,I),R!==null&&(t&&R.alternate!==null&&A.delete(R.key===null?N:R.key),g=o(R,g,N),x===null?C=R:x.sibling=R,x=R);return t&&A.forEach(function(Q){return e(_,Q)}),fe&&Hn(_,N),C}function w(_,g,v,I){if(typeof v=="object"&&v!==null&&v.type===pi&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case so:e:{for(var C=v.key,x=g;x!==null;){if(x.key===C){if(C=v.type,C===pi){if(x.tag===7){n(_,x.sibling),g=r(x,v.props.children),g.return=_,_=g;break e}}else if(x.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===ln&&hd(C)===x.type){n(_,x.sibling),g=r(x,v.props),g.ref=or(_,x,v),g.return=_,_=g;break e}n(_,x);break}else e(_,x);x=x.sibling}v.type===pi?(g=Kn(v.props.children,_.mode,I,v.key),g.return=_,_=g):(I=Oo(v.type,v.key,v.props,null,_.mode,I),I.ref=or(_,g,v),I.return=_,_=I)}return s(_);case fi:e:{for(x=v.key;g!==null;){if(g.key===x)if(g.tag===4&&g.stateNode.containerInfo===v.containerInfo&&g.stateNode.implementation===v.implementation){n(_,g.sibling),g=r(g,v.children||[]),g.return=_,_=g;break e}else{n(_,g);break}else e(_,g);g=g.sibling}g=ka(v,_.mode,I),g.return=_,_=g}return s(_);case ln:return x=v._init,w(_,g,x(v._payload),I)}if(fr(v))return T(_,g,v,I);if(er(v))return E(_,g,v,I);vo(_,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,g!==null&&g.tag===6?(n(_,g.sibling),g=r(g,v),g.return=_,_=g):(n(_,g),g=Aa(v,_.mode,I),g.return=_,_=g),s(_)):n(_,g)}return w}var Bi=hm(!0),mm=hm(!1),os=Ln(null),ss=null,Ei=null,xu=null;function Au(){xu=Ei=ss=null}function ku(t){var e=os.current;ue(os),t._currentValue=e}function _l(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function Ri(t,e){ss=t,xu=Ei=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(ze=!0),t.firstContext=null)}function ft(t){var e=t._currentValue;if(xu!==t)if(t={context:t,memoizedValue:e,next:null},Ei===null){if(ss===null)throw Error(k(308));Ei=t,ss.dependencies={lanes:0,firstContext:t}}else Ei=Ei.next=t;return e}var $n=null;function Nu(t){$n===null?$n=[t]:$n.push(t)}function gm(t,e,n,i){var r=e.interleaved;return r===null?(n.next=n,Nu(e)):(n.next=r.next,r.next=n),e.interleaved=n,Yt(t,i)}function Yt(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var un=!1;function Ru(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ym(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Wt(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Cn(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,j&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,Yt(t,n)}return r=i.interleaved,r===null?(e.next=e,Nu(i)):(e.next=r.next,r.next=e),i.interleaved=e,Yt(t,n)}function Mo(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,mu(t,n)}}function md(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?r=o=s:o=o.next=s,n=n.next}while(n!==null);o===null?r=o=e:o=o.next=e}else r=o=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:o,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function as(t,e,n,i){var r=t.updateQueue;un=!1;var o=r.firstBaseUpdate,s=r.lastBaseUpdate,u=r.shared.pending;if(u!==null){r.shared.pending=null;var c=u,d=c.next;c.next=null,s===null?o=d:s.next=d,s=c;var f=t.alternate;f!==null&&(f=f.updateQueue,u=f.lastBaseUpdate,u!==s&&(u===null?f.firstBaseUpdate=d:u.next=d,f.lastBaseUpdate=c))}if(o!==null){var p=r.baseState;s=0,f=d=c=null,u=o;do{var h=u.lane,y=u.eventTime;if((i&h)===h){f!==null&&(f=f.next={eventTime:y,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var T=t,E=u;switch(h=e,y=n,E.tag){case 1:if(T=E.payload,typeof T=="function"){p=T.call(y,p,h);break e}p=T;break e;case 3:T.flags=T.flags&-65537|128;case 0:if(T=E.payload,h=typeof T=="function"?T.call(y,p,h):T,h==null)break e;p=ge({},p,h);break e;case 2:un=!0}}u.callback!==null&&u.lane!==0&&(t.flags|=64,h=r.effects,h===null?r.effects=[u]:h.push(u))}else y={eventTime:y,lane:h,tag:u.tag,payload:u.payload,callback:u.callback,next:null},f===null?(d=f=y,c=p):f=f.next=y,s|=h;if(u=u.next,u===null){if(u=r.shared.pending,u===null)break;h=u,u=h.next,h.next=null,r.lastBaseUpdate=h,r.shared.pending=null}}while(!0);if(f===null&&(c=p),r.baseState=c,r.firstBaseUpdate=d,r.lastBaseUpdate=f,e=r.shared.interleaved,e!==null){r=e;do s|=r.lane,r=r.next;while(r!==e)}else o===null&&(r.shared.lanes=0);jn|=s,t.lanes=s,t.memoizedState=p}}function gd(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error(k(191,r));r.call(i)}}}var Zr={},Mt=Ln(Zr),Vr=Ln(Zr),Hr=Ln(Zr);function zn(t){if(t===Zr)throw Error(k(174));return t}function Pu(t,e){switch(re(Hr,e),re(Vr,t),re(Mt,Zr),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:ja(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=ja(e,t)}ue(Mt),re(Mt,e)}function Gi(){ue(Mt),ue(Vr),ue(Hr)}function vm(t){zn(Hr.current);var e=zn(Mt.current),n=ja(e,t.type);e!==n&&(re(Vr,t),re(Mt,n))}function Mu(t){Vr.current===t&&(ue(Mt),ue(Vr))}var he=Ln(0);function ls(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Ea=[];function bu(){for(var t=0;t<Ea.length;t++)Ea[t]._workInProgressVersionPrimary=null;Ea.length=0}var bo=tn.ReactCurrentDispatcher,Ia=tn.ReactCurrentBatchConfig,Zn=0,me=null,Ce=null,xe=null,us=!1,Tr=!1,Br=0,x0=0;function Me(){throw Error(k(321))}function Du(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!It(t[n],e[n]))return!1;return!0}function Lu(t,e,n,i,r,o){if(Zn=o,me=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,bo.current=t===null||t.memoizedState===null?R0:P0,t=n(i,r),Tr){o=0;do{if(Tr=!1,Br=0,25<=o)throw Error(k(301));o+=1,xe=Ce=null,e.updateQueue=null,bo.current=M0,t=n(i,r)}while(Tr)}if(bo.current=cs,e=Ce!==null&&Ce.next!==null,Zn=0,xe=Ce=me=null,us=!1,e)throw Error(k(300));return t}function Uu(){var t=Br!==0;return Br=0,t}function Nt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xe===null?me.memoizedState=xe=t:xe=xe.next=t,xe}function pt(){if(Ce===null){var t=me.alternate;t=t!==null?t.memoizedState:null}else t=Ce.next;var e=xe===null?me.memoizedState:xe.next;if(e!==null)xe=e,Ce=t;else{if(t===null)throw Error(k(310));Ce=t,t={memoizedState:Ce.memoizedState,baseState:Ce.baseState,baseQueue:Ce.baseQueue,queue:Ce.queue,next:null},xe===null?me.memoizedState=xe=t:xe=xe.next=t}return xe}function Gr(t,e){return typeof e=="function"?e(t):e}function wa(t){var e=pt(),n=e.queue;if(n===null)throw Error(k(311));n.lastRenderedReducer=t;var i=Ce,r=i.baseQueue,o=n.pending;if(o!==null){if(r!==null){var s=r.next;r.next=o.next,o.next=s}i.baseQueue=r=o,n.pending=null}if(r!==null){o=r.next,i=i.baseState;var u=s=null,c=null,d=o;do{var f=d.lane;if((Zn&f)===f)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),i=d.hasEagerState?d.eagerState:t(i,d.action);else{var p={lane:f,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(u=c=p,s=i):c=c.next=p,me.lanes|=f,jn|=f}d=d.next}while(d!==null&&d!==o);c===null?s=i:c.next=u,It(i,e.memoizedState)||(ze=!0),e.memoizedState=i,e.baseState=s,e.baseQueue=c,n.lastRenderedState=i}if(t=n.interleaved,t!==null){r=t;do o=r.lane,me.lanes|=o,jn|=o,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Ca(t){var e=pt(),n=e.queue;if(n===null)throw Error(k(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,o=e.memoizedState;if(r!==null){n.pending=null;var s=r=r.next;do o=t(o,s.action),s=s.next;while(s!==r);It(o,e.memoizedState)||(ze=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,i]}function _m(){}function Tm(t,e){var n=me,i=pt(),r=e(),o=!It(i.memoizedState,r);if(o&&(i.memoizedState=r,ze=!0),i=i.queue,Fu(wm.bind(null,n,i,t),[t]),i.getSnapshot!==e||o||xe!==null&&xe.memoizedState.tag&1){if(n.flags|=2048,qr(9,Im.bind(null,n,i,r,e),void 0,null),Ae===null)throw Error(k(349));Zn&30||Em(n,e,r)}return r}function Em(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=me.updateQueue,e===null?(e={lastEffect:null,stores:null},me.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Im(t,e,n,i){e.value=n,e.getSnapshot=i,Cm(e)&&Sm(t)}function wm(t,e,n){return n(function(){Cm(e)&&Sm(t)})}function Cm(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!It(t,n)}catch{return!0}}function Sm(t){var e=Yt(t,1);e!==null&&Et(e,t,1,-1)}function yd(t){var e=Nt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Gr,lastRenderedState:t},e.queue=t,t=t.dispatch=N0.bind(null,me,t),[e.memoizedState,t]}function qr(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=me.updateQueue,e===null?(e={lastEffect:null,stores:null},me.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function xm(){return pt().memoizedState}function Do(t,e,n,i){var r=Nt();me.flags|=t,r.memoizedState=qr(1|e,n,void 0,i===void 0?null:i)}function Us(t,e,n,i){var r=pt();i=i===void 0?null:i;var o=void 0;if(Ce!==null){var s=Ce.memoizedState;if(o=s.destroy,i!==null&&Du(i,s.deps)){r.memoizedState=qr(e,n,o,i);return}}me.flags|=t,r.memoizedState=qr(1|e,n,o,i)}function vd(t,e){return Do(8390656,8,t,e)}function Fu(t,e){return Us(2048,8,t,e)}function Am(t,e){return Us(4,2,t,e)}function km(t,e){return Us(4,4,t,e)}function Nm(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Rm(t,e,n){return n=n!=null?n.concat([t]):null,Us(4,4,Nm.bind(null,e,t),n)}function Ou(){}function Pm(t,e){var n=pt();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Du(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function Mm(t,e){var n=pt();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Du(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function bm(t,e,n){return Zn&21?(It(n,e)||(n=Oh(),me.lanes|=n,jn|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,ze=!0),t.memoizedState=n)}function A0(t,e){var n=ne;ne=n!==0&&4>n?n:4,t(!0);var i=Ia.transition;Ia.transition={};try{t(!1),e()}finally{ne=n,Ia.transition=i}}function Dm(){return pt().memoizedState}function k0(t,e,n){var i=xn(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},Lm(t))Um(e,n);else if(n=gm(t,e,n,i),n!==null){var r=Ve();Et(n,t,i,r),Fm(n,e,i)}}function N0(t,e,n){var i=xn(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(Lm(t))Um(e,r);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var s=e.lastRenderedState,u=o(s,n);if(r.hasEagerState=!0,r.eagerState=u,It(u,s)){var c=e.interleaved;c===null?(r.next=r,Nu(e)):(r.next=c.next,c.next=r),e.interleaved=r;return}}catch{}finally{}n=gm(t,e,r,i),n!==null&&(r=Ve(),Et(n,t,i,r),Fm(n,e,i))}}function Lm(t){var e=t.alternate;return t===me||e!==null&&e===me}function Um(t,e){Tr=us=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Fm(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,mu(t,n)}}var cs={readContext:ft,useCallback:Me,useContext:Me,useEffect:Me,useImperativeHandle:Me,useInsertionEffect:Me,useLayoutEffect:Me,useMemo:Me,useReducer:Me,useRef:Me,useState:Me,useDebugValue:Me,useDeferredValue:Me,useTransition:Me,useMutableSource:Me,useSyncExternalStore:Me,useId:Me,unstable_isNewReconciler:!1},R0={readContext:ft,useCallback:function(t,e){return Nt().memoizedState=[t,e===void 0?null:e],t},useContext:ft,useEffect:vd,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Do(4194308,4,Nm.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Do(4194308,4,t,e)},useInsertionEffect:function(t,e){return Do(4,2,t,e)},useMemo:function(t,e){var n=Nt();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=Nt();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=k0.bind(null,me,t),[i.memoizedState,t]},useRef:function(t){var e=Nt();return t={current:t},e.memoizedState=t},useState:yd,useDebugValue:Ou,useDeferredValue:function(t){return Nt().memoizedState=t},useTransition:function(){var t=yd(!1),e=t[0];return t=A0.bind(null,t[1]),Nt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=me,r=Nt();if(fe){if(n===void 0)throw Error(k(407));n=n()}else{if(n=e(),Ae===null)throw Error(k(349));Zn&30||Em(i,e,n)}r.memoizedState=n;var o={value:n,getSnapshot:e};return r.queue=o,vd(wm.bind(null,i,o,t),[t]),i.flags|=2048,qr(9,Im.bind(null,i,o,n,e),void 0,null),n},useId:function(){var t=Nt(),e=Ae.identifierPrefix;if(fe){var n=Bt,i=Ht;n=(i&~(1<<32-Tt(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=Br++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=x0++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},P0={readContext:ft,useCallback:Pm,useContext:ft,useEffect:Fu,useImperativeHandle:Rm,useInsertionEffect:Am,useLayoutEffect:km,useMemo:Mm,useReducer:wa,useRef:xm,useState:function(){return wa(Gr)},useDebugValue:Ou,useDeferredValue:function(t){var e=pt();return bm(e,Ce.memoizedState,t)},useTransition:function(){var t=wa(Gr)[0],e=pt().memoizedState;return[t,e]},useMutableSource:_m,useSyncExternalStore:Tm,useId:Dm,unstable_isNewReconciler:!1},M0={readContext:ft,useCallback:Pm,useContext:ft,useEffect:Fu,useImperativeHandle:Rm,useInsertionEffect:Am,useLayoutEffect:km,useMemo:Mm,useReducer:Ca,useRef:xm,useState:function(){return Ca(Gr)},useDebugValue:Ou,useDeferredValue:function(t){var e=pt();return Ce===null?e.memoizedState=t:bm(e,Ce.memoizedState,t)},useTransition:function(){var t=Ca(Gr)[0],e=pt().memoizedState;return[t,e]},useMutableSource:_m,useSyncExternalStore:Tm,useId:Dm,unstable_isNewReconciler:!1};function gt(t,e){if(t&&t.defaultProps){e=ge({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Tl(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:ge({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Fs={isMounted:function(t){return(t=t._reactInternals)?si(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=Ve(),r=xn(t),o=Wt(i,r);o.payload=e,n!=null&&(o.callback=n),e=Cn(t,o,r),e!==null&&(Et(e,t,r,i),Mo(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=Ve(),r=xn(t),o=Wt(i,r);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=Cn(t,o,r),e!==null&&(Et(e,t,r,i),Mo(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ve(),i=xn(t),r=Wt(n,i);r.tag=2,e!=null&&(r.callback=e),e=Cn(t,r,i),e!==null&&(Et(e,t,i,n),Mo(e,t,i))}};function _d(t,e,n,i,r,o,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,o,s):e.prototype&&e.prototype.isPureReactComponent?!Lr(n,i)||!Lr(r,o):!0}function Om(t,e,n){var i=!1,r=Mn,o=e.contextType;return typeof o=="object"&&o!==null?o=ft(o):(r=Je(e)?Qn:Ue.current,i=e.contextTypes,o=(i=i!=null)?Vi(t,r):Mn),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Fs,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=o),e}function Td(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&Fs.enqueueReplaceState(e,e.state,null)}function El(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},Ru(t);var o=e.contextType;typeof o=="object"&&o!==null?r.context=ft(o):(o=Je(e)?Qn:Ue.current,r.context=Vi(t,o)),r.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(Tl(t,e,o,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&Fs.enqueueReplaceState(r,r.state,null),as(t,n,r,i),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function qi(t,e){try{var n="",i=e;do n+=s_(i),i=i.return;while(i);var r=n}catch(o){r=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:r,digest:null}}function Sa(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Il(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var b0=typeof WeakMap=="function"?WeakMap:Map;function Vm(t,e,n){n=Wt(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){fs||(fs=!0,Ml=i),Il(t,e)},n}function Hm(t,e,n){n=Wt(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){Il(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){Il(t,e),typeof i!="function"&&(Sn===null?Sn=new Set([this]):Sn.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),n}function Ed(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new b0;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=J0.bind(null,t,e,n),e.then(t,t))}function Id(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function wd(t,e,n,i,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Wt(-1,1),e.tag=2,Cn(n,e,1))),n.lanes|=1),t)}var D0=tn.ReactCurrentOwner,ze=!1;function Oe(t,e,n,i){e.child=t===null?mm(e,null,n,i):Bi(e,t.child,n,i)}function Cd(t,e,n,i,r){n=n.render;var o=e.ref;return Ri(e,r),i=Lu(t,e,n,i,o,r),n=Uu(),t!==null&&!ze?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Qt(t,e,r)):(fe&&n&&wu(e),e.flags|=1,Oe(t,e,i,r),e.child)}function Sd(t,e,n,i,r){if(t===null){var o=n.type;return typeof o=="function"&&!Wu(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,Bm(t,e,o,i,r)):(t=Oo(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&r)){var s=o.memoizedProps;if(n=n.compare,n=n!==null?n:Lr,n(s,i)&&t.ref===e.ref)return Qt(t,e,r)}return e.flags|=1,t=An(o,i),t.ref=e.ref,t.return=e,e.child=t}function Bm(t,e,n,i,r){if(t!==null){var o=t.memoizedProps;if(Lr(o,i)&&t.ref===e.ref)if(ze=!1,e.pendingProps=i=o,(t.lanes&r)!==0)t.flags&131072&&(ze=!0);else return e.lanes=t.lanes,Qt(t,e,r)}return wl(t,e,n,i,r)}function Gm(t,e,n){var i=e.pendingProps,r=i.children,o=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},re(wi,Ze),Ze|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,re(wi,Ze),Ze|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=o!==null?o.baseLanes:n,re(wi,Ze),Ze|=i}else o!==null?(i=o.baseLanes|n,e.memoizedState=null):i=n,re(wi,Ze),Ze|=i;return Oe(t,e,r,n),e.child}function qm(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function wl(t,e,n,i,r){var o=Je(n)?Qn:Ue.current;return o=Vi(e,o),Ri(e,r),n=Lu(t,e,n,i,o,r),i=Uu(),t!==null&&!ze?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Qt(t,e,r)):(fe&&i&&wu(e),e.flags|=1,Oe(t,e,n,r),e.child)}function xd(t,e,n,i,r){if(Je(n)){var o=!0;ns(e)}else o=!1;if(Ri(e,r),e.stateNode===null)Lo(t,e),Om(e,n,i),El(e,n,i,r),i=!0;else if(t===null){var s=e.stateNode,u=e.memoizedProps;s.props=u;var c=s.context,d=n.contextType;typeof d=="object"&&d!==null?d=ft(d):(d=Je(n)?Qn:Ue.current,d=Vi(e,d));var f=n.getDerivedStateFromProps,p=typeof f=="function"||typeof s.getSnapshotBeforeUpdate=="function";p||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(u!==i||c!==d)&&Td(e,s,i,d),un=!1;var h=e.memoizedState;s.state=h,as(e,i,s,r),c=e.memoizedState,u!==i||h!==c||We.current||un?(typeof f=="function"&&(Tl(e,n,f,i),c=e.memoizedState),(u=un||_d(e,n,u,i,h,c,d))?(p||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=c),s.props=i,s.state=c,s.context=d,i=u):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{s=e.stateNode,ym(t,e),u=e.memoizedProps,d=e.type===e.elementType?u:gt(e.type,u),s.props=d,p=e.pendingProps,h=s.context,c=n.contextType,typeof c=="object"&&c!==null?c=ft(c):(c=Je(n)?Qn:Ue.current,c=Vi(e,c));var y=n.getDerivedStateFromProps;(f=typeof y=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(u!==p||h!==c)&&Td(e,s,i,c),un=!1,h=e.memoizedState,s.state=h,as(e,i,s,r);var T=e.memoizedState;u!==p||h!==T||We.current||un?(typeof y=="function"&&(Tl(e,n,y,i),T=e.memoizedState),(d=un||_d(e,n,d,i,h,T,c)||!1)?(f||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(i,T,c),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(i,T,c)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||u===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=T),s.props=i,s.state=T,s.context=c,i=d):(typeof s.componentDidUpdate!="function"||u===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),i=!1)}return Cl(t,e,n,i,o,r)}function Cl(t,e,n,i,r,o){qm(t,e);var s=(e.flags&128)!==0;if(!i&&!s)return r&&dd(e,n,!1),Qt(t,e,o);i=e.stateNode,D0.current=e;var u=s&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&s?(e.child=Bi(e,t.child,null,o),e.child=Bi(e,null,u,o)):Oe(t,e,u,o),e.memoizedState=i.state,r&&dd(e,n,!0),e.child}function $m(t){var e=t.stateNode;e.pendingContext?cd(t,e.pendingContext,e.pendingContext!==e.context):e.context&&cd(t,e.context,!1),Pu(t,e.containerInfo)}function Ad(t,e,n,i,r){return Hi(),Su(r),e.flags|=256,Oe(t,e,n,i),e.child}var Sl={dehydrated:null,treeContext:null,retryLane:0};function xl(t){return{baseLanes:t,cachePool:null,transitions:null}}function zm(t,e,n){var i=e.pendingProps,r=he.current,o=!1,s=(e.flags&128)!==0,u;if((u=s)||(u=t!==null&&t.memoizedState===null?!1:(r&2)!==0),u?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),re(he,r&1),t===null)return vl(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(s=i.children,t=i.fallback,o?(i=e.mode,o=e.child,s={mode:"hidden",children:s},!(i&1)&&o!==null?(o.childLanes=0,o.pendingProps=s):o=Hs(s,i,0,null),t=Kn(t,i,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=xl(n),e.memoizedState=Sl,t):Vu(e,s));if(r=t.memoizedState,r!==null&&(u=r.dehydrated,u!==null))return L0(t,e,s,i,u,r,n);if(o){o=i.fallback,s=e.mode,r=t.child,u=r.sibling;var c={mode:"hidden",children:i.children};return!(s&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=c,e.deletions=null):(i=An(r,c),i.subtreeFlags=r.subtreeFlags&14680064),u!==null?o=An(u,o):(o=Kn(o,s,n,null),o.flags|=2),o.return=e,i.return=e,i.sibling=o,e.child=i,i=o,o=e.child,s=t.child.memoizedState,s=s===null?xl(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},o.memoizedState=s,o.childLanes=t.childLanes&~n,e.memoizedState=Sl,i}return o=t.child,t=o.sibling,i=An(o,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function Vu(t,e){return e=Hs({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function _o(t,e,n,i){return i!==null&&Su(i),Bi(e,t.child,null,n),t=Vu(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function L0(t,e,n,i,r,o,s){if(n)return e.flags&256?(e.flags&=-257,i=Sa(Error(k(422))),_o(t,e,s,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=i.fallback,r=e.mode,i=Hs({mode:"visible",children:i.children},r,0,null),o=Kn(o,r,s,null),o.flags|=2,i.return=e,o.return=e,i.sibling=o,e.child=i,e.mode&1&&Bi(e,t.child,null,s),e.child.memoizedState=xl(s),e.memoizedState=Sl,o);if(!(e.mode&1))return _o(t,e,s,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var u=i.dgst;return i=u,o=Error(k(419)),i=Sa(o,i,void 0),_o(t,e,s,i)}if(u=(s&t.childLanes)!==0,ze||u){if(i=Ae,i!==null){switch(s&-s){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|s)?0:r,r!==0&&r!==o.retryLane&&(o.retryLane=r,Yt(t,r),Et(i,t,r,-1))}return zu(),i=Sa(Error(k(421))),_o(t,e,s,i)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=K0.bind(null,t),r._reactRetry=e,null):(t=o.treeContext,je=wn(r.nextSibling),tt=e,fe=!0,vt=null,t!==null&&(st[at++]=Ht,st[at++]=Bt,st[at++]=Xn,Ht=t.id,Bt=t.overflow,Xn=e),e=Vu(e,i.children),e.flags|=4096,e)}function kd(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),_l(t.return,e,n)}function xa(t,e,n,i,r){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=i,o.tail=n,o.tailMode=r)}function Wm(t,e,n){var i=e.pendingProps,r=i.revealOrder,o=i.tail;if(Oe(t,e,i.children,n),i=he.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&kd(t,n,e);else if(t.tag===19)kd(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(re(he,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&ls(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),xa(e,!1,r,n,o);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&ls(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}xa(e,!0,n,null,o);break;case"together":xa(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Lo(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Qt(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),jn|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(k(153));if(e.child!==null){for(t=e.child,n=An(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=An(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function U0(t,e,n){switch(e.tag){case 3:$m(e),Hi();break;case 5:vm(e);break;case 1:Je(e.type)&&ns(e);break;case 4:Pu(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;re(os,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(re(he,he.current&1),e.flags|=128,null):n&e.child.childLanes?zm(t,e,n):(re(he,he.current&1),t=Qt(t,e,n),t!==null?t.sibling:null);re(he,he.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return Wm(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),re(he,he.current),i)break;return null;case 22:case 23:return e.lanes=0,Gm(t,e,n)}return Qt(t,e,n)}var Jm,Al,Km,Ym;Jm=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Al=function(){};Km=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,zn(Mt.current);var o=null;switch(n){case"input":r=Ya(t,r),i=Ya(t,i),o=[];break;case"select":r=ge({},r,{value:void 0}),i=ge({},i,{value:void 0}),o=[];break;case"textarea":r=Za(t,r),i=Za(t,i),o=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=es)}el(n,i);var s;n=null;for(d in r)if(!i.hasOwnProperty(d)&&r.hasOwnProperty(d)&&r[d]!=null)if(d==="style"){var u=r[d];for(s in u)u.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(kr.hasOwnProperty(d)?o||(o=[]):(o=o||[]).push(d,null));for(d in i){var c=i[d];if(u=r!=null?r[d]:void 0,i.hasOwnProperty(d)&&c!==u&&(c!=null||u!=null))if(d==="style")if(u){for(s in u)!u.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&u[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(o||(o=[]),o.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,u=u?u.__html:void 0,c!=null&&u!==c&&(o=o||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(o=o||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(kr.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&se("scroll",t),o||u===c||(o=[])):(o=o||[]).push(d,c))}n&&(o=o||[]).push("style",n);var d=o;(e.updateQueue=d)&&(e.flags|=4)}};Ym=function(t,e,n,i){n!==i&&(e.flags|=4)};function sr(t,e){if(!fe)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function be(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function F0(t,e,n){var i=e.pendingProps;switch(Cu(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return be(e),null;case 1:return Je(e.type)&&ts(),be(e),null;case 3:return i=e.stateNode,Gi(),ue(We),ue(Ue),bu(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(yo(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,vt!==null&&(Ll(vt),vt=null))),Al(t,e),be(e),null;case 5:Mu(e);var r=zn(Hr.current);if(n=e.type,t!==null&&e.stateNode!=null)Km(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(k(166));return be(e),null}if(t=zn(Mt.current),yo(e)){i=e.stateNode,n=e.type;var o=e.memoizedProps;switch(i[Rt]=e,i[Or]=o,t=(e.mode&1)!==0,n){case"dialog":se("cancel",i),se("close",i);break;case"iframe":case"object":case"embed":se("load",i);break;case"video":case"audio":for(r=0;r<hr.length;r++)se(hr[r],i);break;case"source":se("error",i);break;case"img":case"image":case"link":se("error",i),se("load",i);break;case"details":se("toggle",i);break;case"input":Fc(i,o),se("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!o.multiple},se("invalid",i);break;case"textarea":Vc(i,o),se("invalid",i)}el(n,o),r=null;for(var s in o)if(o.hasOwnProperty(s)){var u=o[s];s==="children"?typeof u=="string"?i.textContent!==u&&(o.suppressHydrationWarning!==!0&&go(i.textContent,u,t),r=["children",u]):typeof u=="number"&&i.textContent!==""+u&&(o.suppressHydrationWarning!==!0&&go(i.textContent,u,t),r=["children",""+u]):kr.hasOwnProperty(s)&&u!=null&&s==="onScroll"&&se("scroll",i)}switch(n){case"input":ao(i),Oc(i,o,!0);break;case"textarea":ao(i),Hc(i);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(i.onclick=es)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{s=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=wh(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=s.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=s.createElement(n,{is:i.is}):(t=s.createElement(n),n==="select"&&(s=t,i.multiple?s.multiple=!0:i.size&&(s.size=i.size))):t=s.createElementNS(t,n),t[Rt]=e,t[Or]=i,Jm(t,e,!1,!1),e.stateNode=t;e:{switch(s=tl(n,i),n){case"dialog":se("cancel",t),se("close",t),r=i;break;case"iframe":case"object":case"embed":se("load",t),r=i;break;case"video":case"audio":for(r=0;r<hr.length;r++)se(hr[r],t);r=i;break;case"source":se("error",t),r=i;break;case"img":case"image":case"link":se("error",t),se("load",t),r=i;break;case"details":se("toggle",t),r=i;break;case"input":Fc(t,i),r=Ya(t,i),se("invalid",t);break;case"option":r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=ge({},i,{value:void 0}),se("invalid",t);break;case"textarea":Vc(t,i),r=Za(t,i),se("invalid",t);break;default:r=i}el(n,r),u=r;for(o in u)if(u.hasOwnProperty(o)){var c=u[o];o==="style"?xh(t,c):o==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Ch(t,c)):o==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Nr(t,c):typeof c=="number"&&Nr(t,""+c):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(kr.hasOwnProperty(o)?c!=null&&o==="onScroll"&&se("scroll",t):c!=null&&uu(t,o,c,s))}switch(n){case"input":ao(t),Oc(t,i,!1);break;case"textarea":ao(t),Hc(t);break;case"option":i.value!=null&&t.setAttribute("value",""+Pn(i.value));break;case"select":t.multiple=!!i.multiple,o=i.value,o!=null?xi(t,!!i.multiple,o,!1):i.defaultValue!=null&&xi(t,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=es)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return be(e),null;case 6:if(t&&e.stateNode!=null)Ym(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(k(166));if(n=zn(Hr.current),zn(Mt.current),yo(e)){if(i=e.stateNode,n=e.memoizedProps,i[Rt]=e,(o=i.nodeValue!==n)&&(t=tt,t!==null))switch(t.tag){case 3:go(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&go(i.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[Rt]=e,e.stateNode=i}return be(e),null;case 13:if(ue(he),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(fe&&je!==null&&e.mode&1&&!(e.flags&128))pm(),Hi(),e.flags|=98560,o=!1;else if(o=yo(e),i!==null&&i.dehydrated!==null){if(t===null){if(!o)throw Error(k(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(k(317));o[Rt]=e}else Hi(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;be(e),o=!1}else vt!==null&&(Ll(vt),vt=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||he.current&1?Se===0&&(Se=3):zu())),e.updateQueue!==null&&(e.flags|=4),be(e),null);case 4:return Gi(),Al(t,e),t===null&&Ur(e.stateNode.containerInfo),be(e),null;case 10:return ku(e.type._context),be(e),null;case 17:return Je(e.type)&&ts(),be(e),null;case 19:if(ue(he),o=e.memoizedState,o===null)return be(e),null;if(i=(e.flags&128)!==0,s=o.rendering,s===null)if(i)sr(o,!1);else{if(Se!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=ls(t),s!==null){for(e.flags|=128,sr(o,!1),i=s.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)o=n,t=i,o.flags&=14680066,s=o.alternate,s===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,t=s.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return re(he,he.current&1|2),e.child}t=t.sibling}o.tail!==null&&Te()>$i&&(e.flags|=128,i=!0,sr(o,!1),e.lanes=4194304)}else{if(!i)if(t=ls(s),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),sr(o,!0),o.tail===null&&o.tailMode==="hidden"&&!s.alternate&&!fe)return be(e),null}else 2*Te()-o.renderingStartTime>$i&&n!==1073741824&&(e.flags|=128,i=!0,sr(o,!1),e.lanes=4194304);o.isBackwards?(s.sibling=e.child,e.child=s):(n=o.last,n!==null?n.sibling=s:e.child=s,o.last=s)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=Te(),e.sibling=null,n=he.current,re(he,i?n&1|2:n&1),e):(be(e),null);case 22:case 23:return $u(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?Ze&1073741824&&(be(e),e.subtreeFlags&6&&(e.flags|=8192)):be(e),null;case 24:return null;case 25:return null}throw Error(k(156,e.tag))}function O0(t,e){switch(Cu(e),e.tag){case 1:return Je(e.type)&&ts(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Gi(),ue(We),ue(Ue),bu(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Mu(e),null;case 13:if(ue(he),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(k(340));Hi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ue(he),null;case 4:return Gi(),null;case 10:return ku(e.type._context),null;case 22:case 23:return $u(),null;case 24:return null;default:return null}}var To=!1,De=!1,V0=typeof WeakSet=="function"?WeakSet:Set,U=null;function Ii(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){ye(t,e,i)}else n.current=null}function kl(t,e,n){try{n()}catch(i){ye(t,e,i)}}var Nd=!1;function H0(t,e){if(dl=Xo,t=em(),Iu(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,o=i.focusNode;i=i.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var s=0,u=-1,c=-1,d=0,f=0,p=t,h=null;t:for(;;){for(var y;p!==n||r!==0&&p.nodeType!==3||(u=s+r),p!==o||i!==0&&p.nodeType!==3||(c=s+i),p.nodeType===3&&(s+=p.nodeValue.length),(y=p.firstChild)!==null;)h=p,p=y;for(;;){if(p===t)break t;if(h===n&&++d===r&&(u=s),h===o&&++f===i&&(c=s),(y=p.nextSibling)!==null)break;p=h,h=p.parentNode}p=y}n=u===-1||c===-1?null:{start:u,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(fl={focusedElem:t,selectionRange:n},Xo=!1,U=e;U!==null;)if(e=U,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,U=t;else for(;U!==null;){e=U;try{var T=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(T!==null){var E=T.memoizedProps,w=T.memoizedState,_=e.stateNode,g=_.getSnapshotBeforeUpdate(e.elementType===e.type?E:gt(e.type,E),w);_.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(k(163))}}catch(I){ye(e,e.return,I)}if(t=e.sibling,t!==null){t.return=e.return,U=t;break}U=e.return}return T=Nd,Nd=!1,T}function Er(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&t)===t){var o=r.destroy;r.destroy=void 0,o!==void 0&&kl(e,n,o)}r=r.next}while(r!==i)}}function Os(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function Nl(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Qm(t){var e=t.alternate;e!==null&&(t.alternate=null,Qm(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Rt],delete e[Or],delete e[ml],delete e[I0],delete e[w0])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Xm(t){return t.tag===5||t.tag===3||t.tag===4}function Rd(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Xm(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Rl(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=es));else if(i!==4&&(t=t.child,t!==null))for(Rl(t,e,n),t=t.sibling;t!==null;)Rl(t,e,n),t=t.sibling}function Pl(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(Pl(t,e,n),t=t.sibling;t!==null;)Pl(t,e,n),t=t.sibling}var ke=null,yt=!1;function on(t,e,n){for(n=n.child;n!==null;)Zm(t,e,n),n=n.sibling}function Zm(t,e,n){if(Pt&&typeof Pt.onCommitFiberUnmount=="function")try{Pt.onCommitFiberUnmount(Rs,n)}catch{}switch(n.tag){case 5:De||Ii(n,e);case 6:var i=ke,r=yt;ke=null,on(t,e,n),ke=i,yt=r,ke!==null&&(yt?(t=ke,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ke.removeChild(n.stateNode));break;case 18:ke!==null&&(yt?(t=ke,n=n.stateNode,t.nodeType===8?_a(t.parentNode,n):t.nodeType===1&&_a(t,n),br(t)):_a(ke,n.stateNode));break;case 4:i=ke,r=yt,ke=n.stateNode.containerInfo,yt=!0,on(t,e,n),ke=i,yt=r;break;case 0:case 11:case 14:case 15:if(!De&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var o=r,s=o.destroy;o=o.tag,s!==void 0&&(o&2||o&4)&&kl(n,e,s),r=r.next}while(r!==i)}on(t,e,n);break;case 1:if(!De&&(Ii(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(u){ye(n,e,u)}on(t,e,n);break;case 21:on(t,e,n);break;case 22:n.mode&1?(De=(i=De)||n.memoizedState!==null,on(t,e,n),De=i):on(t,e,n);break;default:on(t,e,n)}}function Pd(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new V0),e.forEach(function(i){var r=Y0.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}}function mt(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var o=t,s=e,u=s;e:for(;u!==null;){switch(u.tag){case 5:ke=u.stateNode,yt=!1;break e;case 3:ke=u.stateNode.containerInfo,yt=!0;break e;case 4:ke=u.stateNode.containerInfo,yt=!0;break e}u=u.return}if(ke===null)throw Error(k(160));Zm(o,s,r),ke=null,yt=!1;var c=r.alternate;c!==null&&(c.return=null),r.return=null}catch(d){ye(r,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)jm(e,t),e=e.sibling}function jm(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(mt(e,t),At(t),i&4){try{Er(3,t,t.return),Os(3,t)}catch(E){ye(t,t.return,E)}try{Er(5,t,t.return)}catch(E){ye(t,t.return,E)}}break;case 1:mt(e,t),At(t),i&512&&n!==null&&Ii(n,n.return);break;case 5:if(mt(e,t),At(t),i&512&&n!==null&&Ii(n,n.return),t.flags&32){var r=t.stateNode;try{Nr(r,"")}catch(E){ye(t,t.return,E)}}if(i&4&&(r=t.stateNode,r!=null)){var o=t.memoizedProps,s=n!==null?n.memoizedProps:o,u=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{u==="input"&&o.type==="radio"&&o.name!=null&&Eh(r,o),tl(u,s);var d=tl(u,o);for(s=0;s<c.length;s+=2){var f=c[s],p=c[s+1];f==="style"?xh(r,p):f==="dangerouslySetInnerHTML"?Ch(r,p):f==="children"?Nr(r,p):uu(r,f,p,d)}switch(u){case"input":Qa(r,o);break;case"textarea":Ih(r,o);break;case"select":var h=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!o.multiple;var y=o.value;y!=null?xi(r,!!o.multiple,y,!1):h!==!!o.multiple&&(o.defaultValue!=null?xi(r,!!o.multiple,o.defaultValue,!0):xi(r,!!o.multiple,o.multiple?[]:"",!1))}r[Or]=o}catch(E){ye(t,t.return,E)}}break;case 6:if(mt(e,t),At(t),i&4){if(t.stateNode===null)throw Error(k(162));r=t.stateNode,o=t.memoizedProps;try{r.nodeValue=o}catch(E){ye(t,t.return,E)}}break;case 3:if(mt(e,t),At(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{br(e.containerInfo)}catch(E){ye(t,t.return,E)}break;case 4:mt(e,t),At(t);break;case 13:mt(e,t),At(t),r=t.child,r.flags&8192&&(o=r.memoizedState!==null,r.stateNode.isHidden=o,!o||r.alternate!==null&&r.alternate.memoizedState!==null||(Gu=Te())),i&4&&Pd(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(De=(d=De)||f,mt(e,t),De=d):mt(e,t),At(t),i&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!f&&t.mode&1)for(U=t,f=t.child;f!==null;){for(p=U=f;U!==null;){switch(h=U,y=h.child,h.tag){case 0:case 11:case 14:case 15:Er(4,h,h.return);break;case 1:Ii(h,h.return);var T=h.stateNode;if(typeof T.componentWillUnmount=="function"){i=h,n=h.return;try{e=i,T.props=e.memoizedProps,T.state=e.memoizedState,T.componentWillUnmount()}catch(E){ye(i,n,E)}}break;case 5:Ii(h,h.return);break;case 22:if(h.memoizedState!==null){bd(p);continue}}y!==null?(y.return=h,U=y):bd(p)}f=f.sibling}e:for(f=null,p=t;;){if(p.tag===5){if(f===null){f=p;try{r=p.stateNode,d?(o=r.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(u=p.stateNode,c=p.memoizedProps.style,s=c!=null&&c.hasOwnProperty("display")?c.display:null,u.style.display=Sh("display",s))}catch(E){ye(t,t.return,E)}}}else if(p.tag===6){if(f===null)try{p.stateNode.nodeValue=d?"":p.memoizedProps}catch(E){ye(t,t.return,E)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;f===p&&(f=null),p=p.return}f===p&&(f=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:mt(e,t),At(t),i&4&&Pd(t);break;case 21:break;default:mt(e,t),At(t)}}function At(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Xm(n)){var i=n;break e}n=n.return}throw Error(k(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(Nr(r,""),i.flags&=-33);var o=Rd(t);Pl(t,o,r);break;case 3:case 4:var s=i.stateNode.containerInfo,u=Rd(t);Rl(t,u,s);break;default:throw Error(k(161))}}catch(c){ye(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function B0(t,e,n){U=t,eg(t)}function eg(t,e,n){for(var i=(t.mode&1)!==0;U!==null;){var r=U,o=r.child;if(r.tag===22&&i){var s=r.memoizedState!==null||To;if(!s){var u=r.alternate,c=u!==null&&u.memoizedState!==null||De;u=To;var d=De;if(To=s,(De=c)&&!d)for(U=r;U!==null;)s=U,c=s.child,s.tag===22&&s.memoizedState!==null?Dd(r):c!==null?(c.return=s,U=c):Dd(r);for(;o!==null;)U=o,eg(o),o=o.sibling;U=r,To=u,De=d}Md(t)}else r.subtreeFlags&8772&&o!==null?(o.return=r,U=o):Md(t)}}function Md(t){for(;U!==null;){var e=U;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:De||Os(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!De)if(n===null)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:gt(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&gd(e,o,i);break;case 3:var s=e.updateQueue;if(s!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}gd(e,s,n)}break;case 5:var u=e.stateNode;if(n===null&&e.flags&4){n=u;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var f=d.memoizedState;if(f!==null){var p=f.dehydrated;p!==null&&br(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(k(163))}De||e.flags&512&&Nl(e)}catch(h){ye(e,e.return,h)}}if(e===t){U=null;break}if(n=e.sibling,n!==null){n.return=e.return,U=n;break}U=e.return}}function bd(t){for(;U!==null;){var e=U;if(e===t){U=null;break}var n=e.sibling;if(n!==null){n.return=e.return,U=n;break}U=e.return}}function Dd(t){for(;U!==null;){var e=U;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Os(4,e)}catch(c){ye(e,n,c)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(c){ye(e,r,c)}}var o=e.return;try{Nl(e)}catch(c){ye(e,o,c)}break;case 5:var s=e.return;try{Nl(e)}catch(c){ye(e,s,c)}}}catch(c){ye(e,e.return,c)}if(e===t){U=null;break}var u=e.sibling;if(u!==null){u.return=e.return,U=u;break}U=e.return}}var G0=Math.ceil,ds=tn.ReactCurrentDispatcher,Hu=tn.ReactCurrentOwner,ut=tn.ReactCurrentBatchConfig,j=0,Ae=null,we=null,Ne=0,Ze=0,wi=Ln(0),Se=0,$r=null,jn=0,Vs=0,Bu=0,Ir=null,$e=null,Gu=0,$i=1/0,Ot=null,fs=!1,Ml=null,Sn=null,Eo=!1,vn=null,ps=0,wr=0,bl=null,Uo=-1,Fo=0;function Ve(){return j&6?Te():Uo!==-1?Uo:Uo=Te()}function xn(t){return t.mode&1?j&2&&Ne!==0?Ne&-Ne:S0.transition!==null?(Fo===0&&(Fo=Oh()),Fo):(t=ne,t!==0||(t=window.event,t=t===void 0?16:zh(t.type)),t):1}function Et(t,e,n,i){if(50<wr)throw wr=0,bl=null,Error(k(185));Yr(t,n,i),(!(j&2)||t!==Ae)&&(t===Ae&&(!(j&2)&&(Vs|=n),Se===4&&dn(t,Ne)),Ke(t,i),n===1&&j===0&&!(e.mode&1)&&($i=Te()+500,Ls&&Un()))}function Ke(t,e){var n=t.callbackNode;S_(t,e);var i=Qo(t,t===Ae?Ne:0);if(i===0)n!==null&&qc(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&qc(n),e===1)t.tag===0?C0(Ld.bind(null,t)):cm(Ld.bind(null,t)),T0(function(){!(j&6)&&Un()}),n=null;else{switch(Vh(i)){case 1:n=hu;break;case 4:n=Uh;break;case 16:n=Yo;break;case 536870912:n=Fh;break;default:n=Yo}n=lg(n,tg.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function tg(t,e){if(Uo=-1,Fo=0,j&6)throw Error(k(327));var n=t.callbackNode;if(Pi()&&t.callbackNode!==n)return null;var i=Qo(t,t===Ae?Ne:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=hs(t,i);else{e=i;var r=j;j|=2;var o=ig();(Ae!==t||Ne!==e)&&(Ot=null,$i=Te()+500,Jn(t,e));do try{z0();break}catch(u){ng(t,u)}while(!0);Au(),ds.current=o,j=r,we!==null?e=0:(Ae=null,Ne=0,e=Se)}if(e!==0){if(e===2&&(r=sl(t),r!==0&&(i=r,e=Dl(t,r))),e===1)throw n=$r,Jn(t,0),dn(t,i),Ke(t,Te()),n;if(e===6)dn(t,i);else{if(r=t.current.alternate,!(i&30)&&!q0(r)&&(e=hs(t,i),e===2&&(o=sl(t),o!==0&&(i=o,e=Dl(t,o))),e===1))throw n=$r,Jn(t,0),dn(t,i),Ke(t,Te()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(k(345));case 2:Bn(t,$e,Ot);break;case 3:if(dn(t,i),(i&130023424)===i&&(e=Gu+500-Te(),10<e)){if(Qo(t,0)!==0)break;if(r=t.suspendedLanes,(r&i)!==i){Ve(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=hl(Bn.bind(null,t,$e,Ot),e);break}Bn(t,$e,Ot);break;case 4:if(dn(t,i),(i&4194240)===i)break;for(e=t.eventTimes,r=-1;0<i;){var s=31-Tt(i);o=1<<s,s=e[s],s>r&&(r=s),i&=~o}if(i=r,i=Te()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*G0(i/1960))-i,10<i){t.timeoutHandle=hl(Bn.bind(null,t,$e,Ot),i);break}Bn(t,$e,Ot);break;case 5:Bn(t,$e,Ot);break;default:throw Error(k(329))}}}return Ke(t,Te()),t.callbackNode===n?tg.bind(null,t):null}function Dl(t,e){var n=Ir;return t.current.memoizedState.isDehydrated&&(Jn(t,e).flags|=256),t=hs(t,e),t!==2&&(e=$e,$e=n,e!==null&&Ll(e)),t}function Ll(t){$e===null?$e=t:$e.push.apply($e,t)}function q0(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],o=r.getSnapshot;r=r.value;try{if(!It(o(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function dn(t,e){for(e&=~Bu,e&=~Vs,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Tt(e),i=1<<n;t[n]=-1,e&=~i}}function Ld(t){if(j&6)throw Error(k(327));Pi();var e=Qo(t,0);if(!(e&1))return Ke(t,Te()),null;var n=hs(t,e);if(t.tag!==0&&n===2){var i=sl(t);i!==0&&(e=i,n=Dl(t,i))}if(n===1)throw n=$r,Jn(t,0),dn(t,e),Ke(t,Te()),n;if(n===6)throw Error(k(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Bn(t,$e,Ot),Ke(t,Te()),null}function qu(t,e){var n=j;j|=1;try{return t(e)}finally{j=n,j===0&&($i=Te()+500,Ls&&Un())}}function ei(t){vn!==null&&vn.tag===0&&!(j&6)&&Pi();var e=j;j|=1;var n=ut.transition,i=ne;try{if(ut.transition=null,ne=1,t)return t()}finally{ne=i,ut.transition=n,j=e,!(j&6)&&Un()}}function $u(){Ze=wi.current,ue(wi)}function Jn(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,_0(n)),we!==null)for(n=we.return;n!==null;){var i=n;switch(Cu(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&ts();break;case 3:Gi(),ue(We),ue(Ue),bu();break;case 5:Mu(i);break;case 4:Gi();break;case 13:ue(he);break;case 19:ue(he);break;case 10:ku(i.type._context);break;case 22:case 23:$u()}n=n.return}if(Ae=t,we=t=An(t.current,null),Ne=Ze=e,Se=0,$r=null,Bu=Vs=jn=0,$e=Ir=null,$n!==null){for(e=0;e<$n.length;e++)if(n=$n[e],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,o=n.pending;if(o!==null){var s=o.next;o.next=r,i.next=s}n.pending=i}$n=null}return t}function ng(t,e){do{var n=we;try{if(Au(),bo.current=cs,us){for(var i=me.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}us=!1}if(Zn=0,xe=Ce=me=null,Tr=!1,Br=0,Hu.current=null,n===null||n.return===null){Se=1,$r=e,we=null;break}e:{var o=t,s=n.return,u=n,c=e;if(e=Ne,u.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,f=u,p=f.tag;if(!(f.mode&1)&&(p===0||p===11||p===15)){var h=f.alternate;h?(f.updateQueue=h.updateQueue,f.memoizedState=h.memoizedState,f.lanes=h.lanes):(f.updateQueue=null,f.memoizedState=null)}var y=Id(s);if(y!==null){y.flags&=-257,wd(y,s,u,o,e),y.mode&1&&Ed(o,d,e),e=y,c=d;var T=e.updateQueue;if(T===null){var E=new Set;E.add(c),e.updateQueue=E}else T.add(c);break e}else{if(!(e&1)){Ed(o,d,e),zu();break e}c=Error(k(426))}}else if(fe&&u.mode&1){var w=Id(s);if(w!==null){!(w.flags&65536)&&(w.flags|=256),wd(w,s,u,o,e),Su(qi(c,u));break e}}o=c=qi(c,u),Se!==4&&(Se=2),Ir===null?Ir=[o]:Ir.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var _=Vm(o,c,e);md(o,_);break e;case 1:u=c;var g=o.type,v=o.stateNode;if(!(o.flags&128)&&(typeof g.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Sn===null||!Sn.has(v)))){o.flags|=65536,e&=-e,o.lanes|=e;var I=Hm(o,u,e);md(o,I);break e}}o=o.return}while(o!==null)}og(n)}catch(C){e=C,we===n&&n!==null&&(we=n=n.return);continue}break}while(!0)}function ig(){var t=ds.current;return ds.current=cs,t===null?cs:t}function zu(){(Se===0||Se===3||Se===2)&&(Se=4),Ae===null||!(jn&268435455)&&!(Vs&268435455)||dn(Ae,Ne)}function hs(t,e){var n=j;j|=2;var i=ig();(Ae!==t||Ne!==e)&&(Ot=null,Jn(t,e));do try{$0();break}catch(r){ng(t,r)}while(!0);if(Au(),j=n,ds.current=i,we!==null)throw Error(k(261));return Ae=null,Ne=0,Se}function $0(){for(;we!==null;)rg(we)}function z0(){for(;we!==null&&!g_();)rg(we)}function rg(t){var e=ag(t.alternate,t,Ze);t.memoizedProps=t.pendingProps,e===null?og(t):we=e,Hu.current=null}function og(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=O0(n,e),n!==null){n.flags&=32767,we=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Se=6,we=null;return}}else if(n=F0(n,e,Ze),n!==null){we=n;return}if(e=e.sibling,e!==null){we=e;return}we=e=t}while(e!==null);Se===0&&(Se=5)}function Bn(t,e,n){var i=ne,r=ut.transition;try{ut.transition=null,ne=1,W0(t,e,n,i)}finally{ut.transition=r,ne=i}return null}function W0(t,e,n,i){do Pi();while(vn!==null);if(j&6)throw Error(k(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(k(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(x_(t,o),t===Ae&&(we=Ae=null,Ne=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Eo||(Eo=!0,lg(Yo,function(){return Pi(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=ut.transition,ut.transition=null;var s=ne;ne=1;var u=j;j|=4,Hu.current=null,H0(t,n),jm(n,t),f0(fl),Xo=!!dl,fl=dl=null,t.current=n,B0(n),y_(),j=u,ne=s,ut.transition=o}else t.current=n;if(Eo&&(Eo=!1,vn=t,ps=r),o=t.pendingLanes,o===0&&(Sn=null),T_(n.stateNode),Ke(t,Te()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(fs)throw fs=!1,t=Ml,Ml=null,t;return ps&1&&t.tag!==0&&Pi(),o=t.pendingLanes,o&1?t===bl?wr++:(wr=0,bl=t):wr=0,Un(),null}function Pi(){if(vn!==null){var t=Vh(ps),e=ut.transition,n=ne;try{if(ut.transition=null,ne=16>t?16:t,vn===null)var i=!1;else{if(t=vn,vn=null,ps=0,j&6)throw Error(k(331));var r=j;for(j|=4,U=t.current;U!==null;){var o=U,s=o.child;if(U.flags&16){var u=o.deletions;if(u!==null){for(var c=0;c<u.length;c++){var d=u[c];for(U=d;U!==null;){var f=U;switch(f.tag){case 0:case 11:case 15:Er(8,f,o)}var p=f.child;if(p!==null)p.return=f,U=p;else for(;U!==null;){f=U;var h=f.sibling,y=f.return;if(Qm(f),f===d){U=null;break}if(h!==null){h.return=y,U=h;break}U=y}}}var T=o.alternate;if(T!==null){var E=T.child;if(E!==null){T.child=null;do{var w=E.sibling;E.sibling=null,E=w}while(E!==null)}}U=o}}if(o.subtreeFlags&2064&&s!==null)s.return=o,U=s;else e:for(;U!==null;){if(o=U,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Er(9,o,o.return)}var _=o.sibling;if(_!==null){_.return=o.return,U=_;break e}U=o.return}}var g=t.current;for(U=g;U!==null;){s=U;var v=s.child;if(s.subtreeFlags&2064&&v!==null)v.return=s,U=v;else e:for(s=g;U!==null;){if(u=U,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:Os(9,u)}}catch(C){ye(u,u.return,C)}if(u===s){U=null;break e}var I=u.sibling;if(I!==null){I.return=u.return,U=I;break e}U=u.return}}if(j=r,Un(),Pt&&typeof Pt.onPostCommitFiberRoot=="function")try{Pt.onPostCommitFiberRoot(Rs,t)}catch{}i=!0}return i}finally{ne=n,ut.transition=e}}return!1}function Ud(t,e,n){e=qi(n,e),e=Vm(t,e,1),t=Cn(t,e,1),e=Ve(),t!==null&&(Yr(t,1,e),Ke(t,e))}function ye(t,e,n){if(t.tag===3)Ud(t,t,n);else for(;e!==null;){if(e.tag===3){Ud(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Sn===null||!Sn.has(i))){t=qi(n,t),t=Hm(e,t,1),e=Cn(e,t,1),t=Ve(),e!==null&&(Yr(e,1,t),Ke(e,t));break}}e=e.return}}function J0(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=Ve(),t.pingedLanes|=t.suspendedLanes&n,Ae===t&&(Ne&n)===n&&(Se===4||Se===3&&(Ne&130023424)===Ne&&500>Te()-Gu?Jn(t,0):Bu|=n),Ke(t,e)}function sg(t,e){e===0&&(t.mode&1?(e=co,co<<=1,!(co&130023424)&&(co=4194304)):e=1);var n=Ve();t=Yt(t,e),t!==null&&(Yr(t,e,n),Ke(t,n))}function K0(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),sg(t,n)}function Y0(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(k(314))}i!==null&&i.delete(e),sg(t,n)}var ag;ag=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||We.current)ze=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return ze=!1,U0(t,e,n);ze=!!(t.flags&131072)}else ze=!1,fe&&e.flags&1048576&&dm(e,rs,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;Lo(t,e),t=e.pendingProps;var r=Vi(e,Ue.current);Ri(e,n),r=Lu(null,e,i,t,r,n);var o=Uu();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Je(i)?(o=!0,ns(e)):o=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,Ru(e),r.updater=Fs,e.stateNode=r,r._reactInternals=e,El(e,i,t,n),e=Cl(null,e,i,!0,o,n)):(e.tag=0,fe&&o&&wu(e),Oe(null,e,r,n),e=e.child),e;case 16:i=e.elementType;e:{switch(Lo(t,e),t=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=X0(i),t=gt(i,t),r){case 0:e=wl(null,e,i,t,n);break e;case 1:e=xd(null,e,i,t,n);break e;case 11:e=Cd(null,e,i,t,n);break e;case 14:e=Sd(null,e,i,gt(i.type,t),n);break e}throw Error(k(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:gt(i,r),wl(t,e,i,r,n);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:gt(i,r),xd(t,e,i,r,n);case 3:e:{if($m(e),t===null)throw Error(k(387));i=e.pendingProps,o=e.memoizedState,r=o.element,ym(t,e),as(e,i,null,n);var s=e.memoizedState;if(i=s.element,o.isDehydrated)if(o={element:i,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){r=qi(Error(k(423)),e),e=Ad(t,e,i,n,r);break e}else if(i!==r){r=qi(Error(k(424)),e),e=Ad(t,e,i,n,r);break e}else for(je=wn(e.stateNode.containerInfo.firstChild),tt=e,fe=!0,vt=null,n=mm(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Hi(),i===r){e=Qt(t,e,n);break e}Oe(t,e,i,n)}e=e.child}return e;case 5:return vm(e),t===null&&vl(e),i=e.type,r=e.pendingProps,o=t!==null?t.memoizedProps:null,s=r.children,pl(i,r)?s=null:o!==null&&pl(i,o)&&(e.flags|=32),qm(t,e),Oe(t,e,s,n),e.child;case 6:return t===null&&vl(e),null;case 13:return zm(t,e,n);case 4:return Pu(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=Bi(e,null,i,n):Oe(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:gt(i,r),Cd(t,e,i,r,n);case 7:return Oe(t,e,e.pendingProps,n),e.child;case 8:return Oe(t,e,e.pendingProps.children,n),e.child;case 12:return Oe(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,o=e.memoizedProps,s=r.value,re(os,i._currentValue),i._currentValue=s,o!==null)if(It(o.value,s)){if(o.children===r.children&&!We.current){e=Qt(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var u=o.dependencies;if(u!==null){s=o.child;for(var c=u.firstContext;c!==null;){if(c.context===i){if(o.tag===1){c=Wt(-1,n&-n),c.tag=2;var d=o.updateQueue;if(d!==null){d=d.shared;var f=d.pending;f===null?c.next=c:(c.next=f.next,f.next=c),d.pending=c}}o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),_l(o.return,n,e),u.lanes|=n;break}c=c.next}}else if(o.tag===10)s=o.type===e.type?null:o.child;else if(o.tag===18){if(s=o.return,s===null)throw Error(k(341));s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),_l(s,n,e),s=o.sibling}else s=o.child;if(s!==null)s.return=o;else for(s=o;s!==null;){if(s===e){s=null;break}if(o=s.sibling,o!==null){o.return=s.return,s=o;break}s=s.return}o=s}Oe(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,Ri(e,n),r=ft(r),i=i(r),e.flags|=1,Oe(t,e,i,n),e.child;case 14:return i=e.type,r=gt(i,e.pendingProps),r=gt(i.type,r),Sd(t,e,i,r,n);case 15:return Bm(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:gt(i,r),Lo(t,e),e.tag=1,Je(i)?(t=!0,ns(e)):t=!1,Ri(e,n),Om(e,i,r),El(e,i,r,n),Cl(null,e,i,!0,t,n);case 19:return Wm(t,e,n);case 22:return Gm(t,e,n)}throw Error(k(156,e.tag))};function lg(t,e){return Lh(t,e)}function Q0(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function lt(t,e,n,i){return new Q0(t,e,n,i)}function Wu(t){return t=t.prototype,!(!t||!t.isReactComponent)}function X0(t){if(typeof t=="function")return Wu(t)?1:0;if(t!=null){if(t=t.$$typeof,t===du)return 11;if(t===fu)return 14}return 2}function An(t,e){var n=t.alternate;return n===null?(n=lt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Oo(t,e,n,i,r,o){var s=2;if(i=t,typeof t=="function")Wu(t)&&(s=1);else if(typeof t=="string")s=5;else e:switch(t){case pi:return Kn(n.children,r,o,e);case cu:s=8,r|=8;break;case za:return t=lt(12,n,e,r|2),t.elementType=za,t.lanes=o,t;case Wa:return t=lt(13,n,e,r),t.elementType=Wa,t.lanes=o,t;case Ja:return t=lt(19,n,e,r),t.elementType=Ja,t.lanes=o,t;case vh:return Hs(n,r,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case gh:s=10;break e;case yh:s=9;break e;case du:s=11;break e;case fu:s=14;break e;case ln:s=16,i=null;break e}throw Error(k(130,t==null?t:typeof t,""))}return e=lt(s,n,e,r),e.elementType=t,e.type=i,e.lanes=o,e}function Kn(t,e,n,i){return t=lt(7,t,i,e),t.lanes=n,t}function Hs(t,e,n,i){return t=lt(22,t,i,e),t.elementType=vh,t.lanes=n,t.stateNode={isHidden:!1},t}function Aa(t,e,n){return t=lt(6,t,null,e),t.lanes=n,t}function ka(t,e,n){return e=lt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Z0(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=la(0),this.expirationTimes=la(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=la(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Ju(t,e,n,i,r,o,s,u,c){return t=new Z0(t,e,n,u,c),e===1?(e=1,o===!0&&(e|=8)):e=0,o=lt(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ru(o),t}function j0(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:fi,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function ug(t){if(!t)return Mn;t=t._reactInternals;e:{if(si(t)!==t||t.tag!==1)throw Error(k(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Je(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(k(171))}if(t.tag===1){var n=t.type;if(Je(n))return um(t,n,e)}return e}function cg(t,e,n,i,r,o,s,u,c){return t=Ju(n,i,!0,t,r,o,s,u,c),t.context=ug(null),n=t.current,i=Ve(),r=xn(n),o=Wt(i,r),o.callback=e??null,Cn(n,o,r),t.current.lanes=r,Yr(t,r,i),Ke(t,i),t}function Bs(t,e,n,i){var r=e.current,o=Ve(),s=xn(r);return n=ug(n),e.context===null?e.context=n:e.pendingContext=n,e=Wt(o,s),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=Cn(r,e,s),t!==null&&(Et(t,r,s,o),Mo(t,r,s)),s}function ms(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Fd(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Ku(t,e){Fd(t,e),(t=t.alternate)&&Fd(t,e)}function eT(){return null}var dg=typeof reportError=="function"?reportError:function(t){console.error(t)};function Yu(t){this._internalRoot=t}Gs.prototype.render=Yu.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(k(409));Bs(t,e,null,null)};Gs.prototype.unmount=Yu.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ei(function(){Bs(null,t,null,null)}),e[Kt]=null}};function Gs(t){this._internalRoot=t}Gs.prototype.unstable_scheduleHydration=function(t){if(t){var e=Gh();t={blockedOn:null,target:t,priority:e};for(var n=0;n<cn.length&&e!==0&&e<cn[n].priority;n++);cn.splice(n,0,t),n===0&&$h(t)}};function Qu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function qs(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Od(){}function tT(t,e,n,i,r){if(r){if(typeof i=="function"){var o=i;i=function(){var d=ms(s);o.call(d)}}var s=cg(e,i,t,0,null,!1,!1,"",Od);return t._reactRootContainer=s,t[Kt]=s.current,Ur(t.nodeType===8?t.parentNode:t),ei(),s}for(;r=t.lastChild;)t.removeChild(r);if(typeof i=="function"){var u=i;i=function(){var d=ms(c);u.call(d)}}var c=Ju(t,0,!1,null,null,!1,!1,"",Od);return t._reactRootContainer=c,t[Kt]=c.current,Ur(t.nodeType===8?t.parentNode:t),ei(function(){Bs(e,c,n,i)}),c}function $s(t,e,n,i,r){var o=n._reactRootContainer;if(o){var s=o;if(typeof r=="function"){var u=r;r=function(){var c=ms(s);u.call(c)}}Bs(e,s,t,r)}else s=tT(n,e,t,r,i);return ms(s)}Hh=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=pr(e.pendingLanes);n!==0&&(mu(e,n|1),Ke(e,Te()),!(j&6)&&($i=Te()+500,Un()))}break;case 13:ei(function(){var i=Yt(t,1);if(i!==null){var r=Ve();Et(i,t,1,r)}}),Ku(t,1)}};gu=function(t){if(t.tag===13){var e=Yt(t,134217728);if(e!==null){var n=Ve();Et(e,t,134217728,n)}Ku(t,134217728)}};Bh=function(t){if(t.tag===13){var e=xn(t),n=Yt(t,e);if(n!==null){var i=Ve();Et(n,t,e,i)}Ku(t,e)}};Gh=function(){return ne};qh=function(t,e){var n=ne;try{return ne=t,e()}finally{ne=n}};il=function(t,e,n){switch(e){case"input":if(Qa(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=Ds(i);if(!r)throw Error(k(90));Th(i),Qa(i,r)}}}break;case"textarea":Ih(t,n);break;case"select":e=n.value,e!=null&&xi(t,!!n.multiple,e,!1)}};Nh=qu;Rh=ei;var nT={usingClientEntryPoint:!1,Events:[Xr,yi,Ds,Ah,kh,qu]},ar={findFiberByHostInstance:qn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},iT={bundleType:ar.bundleType,version:ar.version,rendererPackageName:ar.rendererPackageName,rendererConfig:ar.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:tn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=bh(t),t===null?null:t.stateNode},findFiberByHostInstance:ar.findFiberByHostInstance||eT,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Io=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Io.isDisabled&&Io.supportsFiber)try{Rs=Io.inject(iT),Pt=Io}catch{}}rt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nT;rt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Qu(e))throw Error(k(200));return j0(t,e,null,n)};rt.createRoot=function(t,e){if(!Qu(t))throw Error(k(299));var n=!1,i="",r=dg;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=Ju(t,1,!1,null,null,n,!1,i,r),t[Kt]=e.current,Ur(t.nodeType===8?t.parentNode:t),new Yu(e)};rt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(k(188)):(t=Object.keys(t).join(","),Error(k(268,t)));return t=bh(e),t=t===null?null:t.stateNode,t};rt.flushSync=function(t){return ei(t)};rt.hydrate=function(t,e,n){if(!qs(e))throw Error(k(200));return $s(null,t,e,!0,n)};rt.hydrateRoot=function(t,e,n){if(!Qu(t))throw Error(k(405));var i=n!=null&&n.hydratedSources||null,r=!1,o="",s=dg;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),e=cg(e,null,t,1,n??null,r,!1,o,s),t[Kt]=e.current,Ur(t),i)for(t=0;t<i.length;t++)n=i[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new Gs(e)};rt.render=function(t,e,n){if(!qs(e))throw Error(k(200));return $s(null,t,e,!1,n)};rt.unmountComponentAtNode=function(t){if(!qs(t))throw Error(k(40));return t._reactRootContainer?(ei(function(){$s(null,null,t,!1,function(){t._reactRootContainer=null,t[Kt]=null})}),!0):!1};rt.unstable_batchedUpdates=qu;rt.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!qs(n))throw Error(k(200));if(t==null||t._reactInternals===void 0)throw Error(k(38));return $s(t,e,n,!1,i)};rt.version="18.3.1-next-f1338f8080-20240426";function fg(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(fg)}catch(t){console.error(t)}}fg(),fh.exports=rt;var rT=fh.exports,Vd=rT;qa.createRoot=Vd.createRoot,qa.hydrateRoot=Vd.hydrateRoot;var Z=(t=>(t.INTRO="INTRO",t.SCENARIO="SCENARIO",t.HUB="HUB",t.QUIZ="QUIZ",t))(Z||{}),$=(t=>(t.NONE="NONE",t.BALLOONS="BALLOONS",t.DRAG_SHIELD="DRAG_SHIELD",t.MULTIPLE_CHOICE="MULTIPLE_CHOICE",t.CODE_CRACKER="CODE_CRACKER",t.CITY_HALL_SUB_LOCATIONS="CITY_HALL_SUB_LOCATIONS",t))($||{});const Ul="neve_or_game_state_v18_gh_assets",J={INTRO:"./assets/intro.jpg",HUB:"./assets/hub.jpg",SCHOOL_LIOR:"./assets/school_lior.jpg",TOWN_SQUARE:"./assets/town_square.jpg",CITY_HALL:"./assets/city_hall.jpg",CITY_HALL_SQUARE:"./assets/city_hall_sub_sub_square.jpg",CITY_HALL_CAFE:"./assets/city_hall_sub_sub_cafe.jpg",CITY_HALL_NEIGHBORHOOD:"./assets/city_hall_sub_sub_neighborhood.jpg",CITY_HALL_SCHOOL:"./assets/city_hall_sub_sub_school.jpg",FREEDOM_INTRO:"./assets/city_hall.jpg",SCHOOL_TAMARA:"./assets/school_tamara.jpg",NEWSPAPER:"./assets/newspaper.jpg",COURT:"./assets/supreme_court.jpg"},de={TOWN_SQUARE_1:"https://firebasestorage.googleapis.com/v0/b/neve-or.firebasestorage.app/o/items%2Ftown_square_item_1_1764689621233.jpg?alt=media",TOWN_SQUARE_2:"https://firebasestorage.googleapis.com/v0/b/neve-or.firebasestorage.app/o/items%2Ftown_square_item_2_1764689655281.jpg?alt=media",TOWN_SQUARE_3:"https://firebasestorage.googleapis.com/v0/b/neve-or.firebasestorage.app/o/items%2Ftown_square_item_3_1764689637587.jpg?alt=media",TOWN_SQUARE_4:"https://firebasestorage.googleapis.com/v0/b/neve-or.firebasestorage.app/o/items%2Ftown_square_item_4_1764689673228.jpg?alt=media",FREEDOM_1:"https://firebasestorage.googleapis.com/v0/b/neve-or.firebasestorage.app/o/items%2Fintro_freedom_speech_item_1_1764689708232.jpg?alt=media",FREEDOM_2:"https://firebasestorage.googleapis.com/v0/b/neve-or.firebasestorage.app/o/items%2Fintro_freedom_speech_item_2_1764689735483.jpg?alt=media",FREEDOM_3:"https://firebasestorage.googleapis.com/v0/b/neve-or.firebasestorage.app/o/items%2Fintro_freedom_speech_item_3_1764689722534.jpg?alt=media",FREEDOM_4:"https://firebasestorage.googleapis.com/v0/b/neve-or.firebasestorage.app/o/items%2Fintro_freedom_speech_item_4_1764689748089.jpg?alt=media"},oT=[{id:"HUB_CONFIG",title:" ",type:Z.HUB,isLocked:!1,isCompleted:!1,data:{description:"",backgroundImage:J.HUB,dialog:[],interactionType:$.NONE,decisionQuestion:"",options:[]}},{id:"intro",title:" -  ",type:Z.INTRO,isLocked:!1,isCompleted:!1,data:{description:'   ,           .        .      , , .      , ,    .  " "     .     ?',backgroundImage:J.INTRO,decisionQuestion:"    ?",options:[{id:"start",text:"  ",feedback:"  ."}],dialog:[],interactionType:$.NONE}},{id:"school_lior",title:"1.   ",type:Z.SCENARIO,isLocked:!1,isCompleted:!1,coordinates:{x:15,y:28},data:{description:'         ,    .   ,   : "   ".',backgroundImage:J.SCHOOL_LIOR,dialog:[{id:"1",speaker:"",text:",  !   .",mood:"concerned"},{id:"2",speaker:"",text:" ,     .  .",mood:"neutral"}],interactionType:$.MULTIPLE_CHOICE,interactionData:{question:"    ?",answers:[{id:"1",text:" ",correct:!1},{id:"2",text:"   ",correct:!0},{id:"3",text:" ",correct:!1},{id:"4",text:" ",correct:!1}]},decisionQuestion:"   :            ?",options:[{id:"opt1",text:"        .",feedback:":     . :    ."},{id:"opt2",text:"     ,   .",feedback:":    . :     ."},{id:"opt3",text:"     .",feedback:":       . :        ."},{id:"opt4",text:'    "      ".',feedback:":    . :  ,   ."}],moreInfoTitle:"  ",moreInfoContent:"        ,    .  ,     .        ."}},{id:"town_square",title:"2.   ",type:Z.SCENARIO,isLocked:!0,isCompleted:!1,coordinates:{x:35,y:65},data:{description:':            .   ""      .',backgroundImage:J.TOWN_SQUARE,dialog:[],interactionType:$.DRAG_SHIELD,interactionData:{items:[{id:"1",text:"     ",isDanger:!0,image:de.TOWN_SQUARE_1},{id:"2",text:"   ",isDanger:!1,image:de.TOWN_SQUARE_2},{id:"3",text:"   ",isDanger:!0,image:de.TOWN_SQUARE_3},{id:"4",text:"     ",isDanger:!1,image:de.TOWN_SQUARE_4}]},decisionQuestion:"   ?",options:[{id:"ok",text:"",feedback:"            ."}],moreInfoTitle:" ",moreInfoContent:"   :   ,   ,       .   ."}},{id:"city_hall",title:"3.   ",type:Z.SCENARIO,isLocked:!0,isCompleted:!1,coordinates:{x:50,y:25},data:{description:"     .       AI   .   ,   ,     .",backgroundImage:J.CITY_HALL,dialog:[{id:"1",speaker:" ",text:"          .        .",mood:"neutral"}],interactionType:$.CITY_HALL_SUB_LOCATIONS,subScenes:[{id:"sub_square",title:" ",icon:"",backgroundImage:J.CITY_HALL_SQUARE,dialog:[{id:"1",speaker:" ",text:"    .   ,     .       .   .",mood:"happy"},{id:"2",speaker:"",text:" :          .",mood:"neutral"}]},{id:"sub_cafe",title:" ",icon:"",backgroundImage:J.CITY_HALL_CAFE,dialog:[{id:"1",speaker:"  ",text:" ?     ,       .    .    . ? .   .",mood:"concerned"},{id:"2",speaker:"",text:" :          .",mood:"neutral"}]},{id:"sub_neighborhood",title:" ",icon:"",backgroundImage:J.CITY_HALL_NEIGHBORHOOD,dialog:[{id:"1",speaker:"",text:"   .        ,      .",mood:"concerned"},{id:"2",speaker:"",text:" :            .",mood:"neutral"}]},{id:"sub_school",title:" ",icon:"",backgroundImage:J.CITY_HALL_SCHOOL,dialog:[{id:"1",speaker:"",text:"     ,    ,      .       ,     .",mood:"neutral"},{id:"2",speaker:"",text:" :           .",mood:"neutral"}]}],decisionQuestion:'       " "?',options:[{id:"1",text:"    ",feedback:"  ,       . :   ,   ."},{id:"2",text:"    ",feedback:"    ,       . :   ,    ."},{id:"3",text:"      ",feedback:"    ,   .   ,   .       ."}],moreInfoTitle:" ",moreInfoContent:`                .

       ,      -:   .
 ,         ;  ,               .
,              :
                .
         (,      ).
                .
             .
 ,         ,           ,       .`}},{id:"intro_freedom_speech",title:"4.  ",type:Z.SCENARIO,isLocked:!0,isCompleted:!1,coordinates:{x:72,y:56},data:{description:":        !",backgroundImage:J.FREEDOM_INTRO,dialog:[],interactionType:$.BALLOONS,interactionData:{items:[{id:"1",text:"        ",isCorrect:!1,image:de.FREEDOM_1},{id:"2",text:"    ",isCorrect:!0,image:de.FREEDOM_2},{id:"3",text:"      ",isCorrect:!0,image:de.FREEDOM_3},{id:"4",text:"    ",isCorrect:!1,image:de.FREEDOM_4}]},decisionQuestion:"  ",options:[{id:"ok",text:"",feedback:"     ,   .     (     ),    ."}],moreInfoTitle:" ",moreInfoContent:"      ,    , .             ."}},{id:"school_tamara",title:"5.  ",type:Z.SCENARIO,isLocked:!0,isCompleted:!1,coordinates:{x:88,y:35},data:{description:`,  ',           .    "".`,backgroundImage:J.SCHOOL_TAMARA,digitalContent:{type:"POST",author:"",content:"     !       .        ?",likes:150},dialog:[{id:"1",speaker:" ' ",text:",      !    .",mood:"angry"},{id:"2",speaker:"",text:"    !      .",mood:"concerned"},{id:"3",speaker:" ",text:'  .  ,  ""   .',mood:"neutral"}],interactionType:$.NONE,decisionQuestion:" ':     ?",options:[{id:"1",text:"   ! -     '' .",feedback:"  .     ."},{id:"2",text:"    ,       .",feedback:".      .     ."},{id:"3",text:"      -   .",feedback:" .      ."}],moreInfoTitle:"  -  ",moreInfoContent:"   ( 13)        ,        .",secondaryDecisionQuestion:" ':      ?",secondaryOptions:[{id:"1",text:",    -     ",feedback:" .      ."},{id:"2",text:"   ,       ",feedback:" !       ."},{id:"3",text:"        ",feedback:" .         ."}],secondaryMoreInfoTitle:"   -  13",secondaryMoreInfoContent:"   ( 13)              .        . ,      .     ,      ."}},{id:"newspaper_office",title:"6.  ",type:Z.SCENARIO,isLocked:!0,isCompleted:!1,coordinates:{x:20,y:70},data:{description:'  ""  : "    ".       -10    .',backgroundImage:J.NEWSPAPER,digitalContent:{type:"ARTICLE",title:"",content:":        .",author:" "},dialog:[{id:"1",speaker:" ",text:"    !  ?",mood:"concerned"},{id:"2",speaker:"",text:"  .   .",mood:"angry"}],interactionType:$.NONE,decisionQuestion:"   ?",options:[{id:"1",text:'   : "  !"',feedback:"    ."},{id:"2",text:'     "',feedback:" .      ."},{id:"3",text:"   ",feedback:"     ."}],moreInfoTitle:" ",moreInfoContent:'      .     " " (1953)     .'}},{id:"supreme_court",title:"7.  ",type:Z.SCENARIO,isLocked:!0,isCompleted:!1,coordinates:{x:50,y:85},data:{description:'   ".     .',backgroundImage:J.COURT,dialog:[{id:"1",speaker:" ",text:"     .     .",mood:"neutral"},{id:"2",speaker:" ",text:"   ,  .     .",mood:"neutral"}],interactionType:$.NONE,decisionQuestion:",   ?",options:[{id:"1",text:"      ",feedback:' .    "   (1953).'},{id:"2",text:"      ",feedback:"     ."},{id:"3",text:"     ",feedback:"     ."}],moreInfoTitle:"  ",moreInfoContent:'  " "   :        "     ".'}},{id:"quiz_finale",title:"8.  ",type:Z.QUIZ,isLocked:!0,isCompleted:!1,coordinates:{x:85,y:70},data:{description:"           .",dialog:[],interactionType:$.CODE_CRACKER,interactionData:{questions:[{id:"q1",question:"       ?",options:[{text:"1947",value:0},{text:"1967",value:0},{text:"1948",value:3},{text:"1946",value:0}],explanation:"1948 -    3"},{id:"q2",question:"       ?",options:[{text:"1996",value:0},{text:"1992",value:2},{text:"1987",value:0},{text:"1990",value:0}],explanation:"1992 -    2"},{id:"q3",question:"    -?     ",options:[{text:"9",value:0},{text:"5",value:0},{text:"8",value:0},{text:"7",value:4}],explanation:"   4.           (   ,  ,  ,     ,      ,  ,       )."},{id:"q4",question:"       ?",options:[{text:"",value:0},{text:"",value:2},{text:"",value:0},{text:"",value:0}],explanation:" -    2"}]},decisionQuestion:" !",options:[],moreInfoTitle:" ! ",moreInfoContent:`          ,  .       ,      .

      ,     ,       ,  .            .`}}],sT=[{id:"HUB_CONFIG",title:" ",type:Z.HUB,isLocked:!1,isCompleted:!1,data:{description:"",backgroundImage:J.HUB,dialog:[],interactionType:$.NONE,decisionQuestion:"",options:[]}},{id:"intro",title:" -  ",type:Z.INTRO,isLocked:!1,isCompleted:!1,data:{description:'     /            .         .       .          .   " "    .     ',backgroundImage:J.INTRO,decisionQuestion:"    ",options:[{id:"start",text:" ",feedback:"  ."}],dialog:[],interactionType:$.NONE}},{id:"school_lior",title:"1.  ",type:Z.SCENARIO,isLocked:!1,isCompleted:!1,coordinates:{x:15,y:28},data:{description:'              .     : "    ".',backgroundImage:J.SCHOOL_LIOR,dialog:[{id:"1",speaker:"",text:"      !   .",mood:"concerned"},{id:"2",speaker:"",text:"  .      .      .",mood:"neutral"}],interactionType:$.MULTIPLE_CHOICE,interactionData:{question:"   ",answers:[{id:"1",text:"  ",correct:!1},{id:"2",text:"    ",correct:!0},{id:"3",text:" ",correct:!1},{id:"4",text:"  ",correct:!1}]},decisionQuestion:"   :         ",options:[{id:"opt1",text:"        .",feedback:":      . :    ."},{id:"opt2",text:"     .",feedback:":    . :     ."},{id:"opt3",text:"    .",feedback:":       . :        ."},{id:"opt4",text:'    - "    ".',feedback:":   . :      ."}],moreInfoTitle:"   ",moreInfoContent:"                 .         .        ."}},{id:"town_square",title:"2.  ",type:Z.SCENARIO,isLocked:!0,isCompleted:!1,coordinates:{x:35,y:65},data:{description:':       .  ""        .',backgroundImage:J.TOWN_SQUARE,dialog:[],interactionType:$.DRAG_SHIELD,interactionData:{items:[{id:"1",text:"      ",isDanger:!0,image:de.TOWN_SQUARE_1},{id:"2",text:"   ",isDanger:!1,image:de.TOWN_SQUARE_2},{id:"3",text:"    ",isDanger:!0,image:de.TOWN_SQUARE_3},{id:"4",text:"   ",isDanger:!1,image:de.TOWN_SQUARE_4}]},decisionQuestion:"   ",options:[{id:"ok",text:"",feedback:"           ."}],moreInfoTitle:" ",moreInfoContent:"    :              ."}},{id:"city_hall",title:"3. ",type:Z.SCENARIO,isLocked:!0,isCompleted:!1,coordinates:{x:50,y:25},data:{description:'  " "   .        (AI).        .',backgroundImage:J.CITY_HALL,dialog:[{id:"1",speaker:" ",text:"  /       .       ",mood:"neutral"}],interactionType:$.CITY_HALL_SUB_LOCATIONS,subScenes:[{id:"sub_square",title:" ",icon:"",backgroundImage:J.CITY_HALL_SQUARE,dialog:[{id:"1",speaker:" ",text:"      .       .         .",mood:"happy"},{id:"2",speaker:"",text:" :           .",mood:"neutral"}]},{id:"sub_cafe",title:"",icon:"",backgroundImage:J.CITY_HALL_CAFE,dialog:[{id:"1",speaker:"",text:"          .     .    .",mood:"concerned"},{id:"2",speaker:"",text:" :           .",mood:"neutral"}]},{id:"sub_neighborhood",title:" ",icon:"",backgroundImage:J.CITY_HALL_NEIGHBORHOOD,dialog:[{id:"1",speaker:"",text:'  .              ""   .',mood:"concerned"},{id:"2",speaker:"",text:" :            .",mood:"neutral"}]},{id:"sub_school",title:"",icon:"",backgroundImage:J.CITY_HALL_SCHOOL,dialog:[{id:"1",speaker:"",text:"               .     .",mood:"neutral"},{id:"2",speaker:"",text:" :          .",mood:"neutral"}]}],decisionQuestion:"       ",options:[{id:"1",text:"      ",feedback:"       .      ."},{id:"2",text:"   ",feedback:"      ."},{id:"3",text:"     ",feedback:"       .     .    ."}],moreInfoTitle:" ",moreInfoContent:`                .

                 :   .
                                .
              :
               .
         (        ).
                     .
             .
                           .`}},{id:"intro_freedom_speech",title:"4. ",type:Z.SCENARIO,isLocked:!0,isCompleted:!1,coordinates:{x:72,y:56},data:{description:":        .",backgroundImage:J.FREEDOM_INTRO,dialog:[],interactionType:$.BALLOONS,interactionData:{items:[{id:"1",text:"         ",isCorrect:!1,image:de.FREEDOM_1},{id:"2",text:"      ",isCorrect:!0,image:de.FREEDOM_2},{id:"3",text:"     ",isCorrect:!0,image:de.FREEDOM_3},{id:"4",text:"     ",isCorrect:!1,image:de.FREEDOM_4}]},decisionQuestion:" ",options:[{id:"ok",text:"",feedback:"  -   ."}],moreInfoTitle:" ",moreInfoContent:"      .         .        ."}},{id:"school_tamara",title:"5. ",type:Z.SCENARIO,isLocked:!0,isCompleted:!1,coordinates:{x:88,y:35},data:{description:'                  "".',backgroundImage:J.SCHOOL_TAMARA,digitalContent:{type:"POST",author:"",content:"    !      .       ",likes:150},dialog:[{id:"1",speaker:"  ",text:"      !     .",mood:"angry"},{id:"2",speaker:"",text:"   !         .",mood:"concerned"},{id:"3",speaker:" ",text:"  .           .",mood:"neutral"}],interactionType:$.NONE,decisionQuestion:" :     ",options:[{id:"1",text:'    ! -      "" .',feedback:"   .     ."},{id:"2",text:"           .",feedback:".      .    ."},{id:"3",text:"     -   .",feedback:" .     ."}],moreInfoTitle:" ",moreInfoContent:"         .",secondaryDecisionQuestion:" :         ",secondaryOptions:[{id:"1",text:"    -     ",feedback:".     ."},{id:"2",text:"            ",feedback:" !     ."},{id:"3",text:"         ",feedback:" .        ."}],secondaryMoreInfoTitle:"  ",secondaryMoreInfoContent:"    ( )                   .             .       .            ."}},{id:"newspaper_office",title:'6.  ""',type:Z.SCENARIO,isLocked:!0,isCompleted:!1,coordinates:{x:20,y:70},data:{description:'  "" : "    ".        10 .',backgroundImage:J.NEWSPAPER,digitalContent:{type:"ARTICLE",title:"",content:"       .",author:" "},dialog:[{id:"1",speaker:"",text:"  !  ",mood:"concerned"},{id:"2",speaker:"",text:"   .   .",mood:"angry"}],interactionType:$.NONE,decisionQuestion:"   ",options:[{id:"1",text:'    : " !"',feedback:"    ."},{id:"2",text:"    ",feedback:" .     ."},{id:"3",text:"  ",feedback:"    ."}],moreInfoTitle:" ",moreInfoContent:'     .    " " (1953)      .'}},{id:"supreme_court",title:"7.  ",type:Z.SCENARIO,isLocked:!0,isCompleted:!1,coordinates:{x:50,y:85},data:{description:"    .     .",backgroundImage:J.COURT,dialog:[{id:"1",speaker:" ",text:"    .      .",mood:"neutral"},{id:"2",speaker:" ",text:"    .   .     .",mood:"neutral"}],interactionType:$.NONE,decisionQuestion:"  ",options:[{id:"1",text:"   -   ",feedback:".          ."},{id:"2",text:"  -    ",feedback:"     ."},{id:"3",text:"   ",feedback:"      ."}],moreInfoTitle:"  ",moreInfoContent:' :          "       ".'}},{id:"quiz_finale",title:"8.  ",type:Z.QUIZ,isLocked:!0,isCompleted:!1,coordinates:{x:85,y:70},data:{description:"         .",dialog:[],interactionType:$.CODE_CRACKER,interactionData:{questions:[{id:"q1",question:"      ",options:[{text:"1947",value:0},{text:"1967",value:0},{text:"1948",value:3},{text:"1946",value:0}],explanation:"1948 -    3"},{id:"q2",question:"           ",options:[{text:"1996",value:0},{text:"1992",value:2},{text:"1987",value:0},{text:"1990",value:0}],explanation:"1992 -    2"},{id:"q3",question:"     ----      ",options:[{text:"9",value:0},{text:"5",value:0},{text:"8",value:0},{text:"7",value:4}],explanation:"   4.             (                             )"},{id:"q4",question:"       ",options:[{text:" ",value:0},{text:"",value:2},{text:"",value:0},{text:"",value:0}],explanation:" -    2"}]},decisionQuestion:"  !",options:[],moreInfoTitle:"  !",moreInfoContent:`             .             .

                      .           .`}}],aT=[{id:"HUB_CONFIG",title:"Map Settings",type:Z.HUB,isLocked:!1,isCompleted:!1,data:{description:"",backgroundImage:J.HUB,dialog:[],interactionType:$.NONE,decisionQuestion:"",options:[]}},{id:"intro",title:"Intro - Neve Or",type:Z.INTRO,isLocked:!1,isCompleted:!1,data:{description:'Welcome to Neve Or, a digital city where every decision you make affects the lives of its residents. Here you will discover that human rights are not always easily realized. Throughout the game, you will step into the shoes of students, journalists, and judges. Your choices will determine if a right is protected, violated, or balanced properly. There is no "perfect solution"  only responsibility and critical thinking. Will you manage to find the balance?',backgroundImage:J.INTRO,decisionQuestion:"Will you manage to find the balance?",options:[{id:"start",text:"Start Game",feedback:"The game begins now."}],dialog:[],interactionType:$.NONE}},{id:"school_lior",title:"1. Lior's Choice",type:Z.SCENARIO,isLocked:!1,isCompleted:!1,coordinates:{x:15,y:28},data:{description:'Lior discovers that his school building has dangerous cracks in the ceiling, with a definite risk of collapse. He reports it to the principal, but the principal says: "There is no budget for repairs right now."',backgroundImage:J.SCHOOL_LIOR,dialog:[{id:"1",speaker:"Lior",text:"Principal, the ceiling is crumbling! It's really dangerous.",mood:"concerned"},{id:"2",speaker:"Principal",text:"I know, but there is no budget for repairs at the moment. It will be fine.",mood:"neutral"}],interactionType:$.MULTIPLE_CHOICE,interactionData:{question:"Which right is being violated here?",answers:[{id:"1",text:"Right to Education",correct:!1},{id:"2",text:"Right to Life and Personal Security",correct:!0},{id:"3",text:"Freedom of Speech",correct:!1},{id:"4",text:"Right to Privacy",correct:!1}]},decisionQuestion:"Lior needs to make a decision: How will he protect the students' Right to Life and Security?",options:[{id:"opt1",text:"Document the cracks and contact the Ministry of Education or local authority.",feedback:"Advantage: Contacting a senior authority committed to safety. Disadvantage: The process might be slow."},{id:"opt2",text:"Organize with other students, sign a petition, and present it to the principal.",feedback:"Advantage: Group power creates pressure. Disadvantage: The principal might get angry or ignore it."},{id:"opt3",text:"Call parents and inform them about the danger.",feedback:"Advantage: Parents can act quickly and are often influential. Disadvantage: It might create conflict between parents and the school."},{id:"opt4",text:`Do nothing  "Maybe the cracks aren't that dangerous."`,feedback:"Advantage: No one gets annoyed. Disadvantage: The danger remains, and an accident might happen."}],moreInfoTitle:"Right to Life and Security",moreInfoContent:"In situations where there is a real danger to life or personal security, quick action is essential. When it comes to safety, time is a life-saving factor. Quick response makes the difference between an accident and prevention."}},{id:"town_square",title:"2. Protecting Space",type:Z.SCENARIO,isLocked:!0,isCompleted:!1,coordinates:{x:35,y:65},data:{description:`Goal: Identify when a person's personal security is violated and choose what the state should do. Drag the "Shield" only to situations representing a violation of personal security.`,backgroundImage:J.TOWN_SQUARE,dialog:[],interactionType:$.DRAG_SHIELD,interactionData:{items:[{id:"1",text:"Child threatened online",isDanger:!0,image:de.TOWN_SQUARE_1},{id:"2",text:"Person walking innocently",isDanger:!1,image:de.TOWN_SQUARE_2},{id:"3",text:"Person attacked on street",isDanger:!0,image:de.TOWN_SQUARE_3},{id:"4",text:"Citizen talking to police",isDanger:!1,image:de.TOWN_SQUARE_4}]},decisionQuestion:"Did you protect everyone?",options:[{id:"ok",text:"Continue",feedback:"Personal security is not a luxury  it is a basic right that every state must guarantee."}],moreInfoTitle:"Personal Security",moreInfoContent:"The right to personal security includes: protection from violence, assault or threat, maintaining privacy, and preventing physical and mental harm. This is the state's responsibility."}},{id:"city_hall",title:"3. The City That Films",type:Z.SCENARIO,isLocked:!0,isCompleted:!1,coordinates:{x:50,y:25},data:{description:"Neve Or is dealing with rising crime. The Mayor is considering adding thousands of AI cameras with facial recognition. He asks you, the Human Rights Advisor, to talk to residents before making a recommendation.",backgroundImage:J.CITY_HALL,dialog:[{id:"1",speaker:"Mayor",text:"I want you to talk to three residents and hear how they feel. Only then recommend what is right.",mood:"neutral"}],interactionType:$.CITY_HALL_SUB_LOCATIONS,subScenes:[{id:"sub_square",title:"Central Square",icon:"",backgroundImage:J.CITY_HALL_SQUARE,dialog:[{id:"1",speaker:"Elderly Resident",text:"I used to be afraid to go out at night. Since they installed cameras, I finally feel safe. If there's a criminal, they catch him immediately.",mood:"happy"},{id:"2",speaker:"Info",text:"Hint: The right to personal security includes protection from danger and harm to body and life.",mood:"neutral"}]},{id:"sub_cafe",title:"Coffee Shop",icon:"",backgroundImage:J.CITY_HALL_CAFE,dialog:[{id:"1",speaker:"Young Woman",text:"I'm not doing anything wrong, but I feel like someone is always watching me. Every move is recorded. That's not freedom.",mood:"concerned"},{id:"2",speaker:"Info",text:"Hint: The right to privacy protects a person from surveillance and intrusion into their personal life.",mood:"neutral"}]},{id:"sub_neighborhood",title:"Neighborhood",icon:"",backgroundImage:J.CITY_HALL_NEIGHBORHOOD,dialog:[{id:"1",speaker:"Teenager",text:"I have an Ethiopian friend. He says every time he passes a camera, he worries the system thinks he's a suspect.",mood:"concerned"},{id:"2",speaker:"Info",text:"Hint: AI facial recognition technology is not perfect and can discriminate due to bias.",mood:"neutral"}]},{id:"sub_school",title:"School",icon:"",backgroundImage:J.CITY_HALL_SCHOOL,dialog:[{id:"1",speaker:"Student",text:"If we had police officers who knew us, like community officers, we'd feel safer without cameras. Security is also about who listens to you.",mood:"neutral"},{id:"2",speaker:"Info",text:"Hint: Real security is also based on trust and cooperation between citizens and the state.",mood:"neutral"}]}],decisionQuestion:"What is the solution that ensures real security for Neve Or residents?",options:[{id:"1",text:"Install smart cameras everywhere",feedback:"Crime drops, but residents feel they lost their freedom. Physical security achieved, but privacy harmed."},{id:"2",text:"Invest in community policing",feedback:"Social security rises and community connection improves, but technological protection is missing."},{id:"3",text:"Combine supervised cameras with community policing",feedback:"Cameras placed only in high-risk areas, under supervision. Crime drops, freedom preserved. Balance creates real security."}],moreInfoTitle:"The Proper Balance",moreInfoContent:`The proper balance between the right to personal security and the right to privacy requires an examination of the proportionality and necessity of using surveillance measures.

Both rights are fundamental rights recognized in Israeli law, anchored in Supreme Court rulings and Basic Law: Human Dignity and Liberty.
On one hand, the state has a responsibility to protect the lives of its citizens and maintain their security; on the other hand, the right to privacy protects a person from intrusion into their personal life space and unreasonable surveillance by the authorities.
Therefore, the use of smart cameras and facial recognition can only be justified if it meets the following principles:
Proper Purpose  Surveillance is intended to prevent actual crime or security danger, not for general or political use.
Proportionality  The least intrusive means possible must be used (for example, blurring the faces of people who are not suspects).
Limitation of Use  Information will be kept only for the time necessary for the purpose for which it was collected and will not be transferred to unauthorized parties.
Supervision and Transparency  An independent oversight mechanism and public reporting on the scope of camera use are required.
In other words, public security does not automatically override the right to privacy, but only to the extent necessary and proportional for maintaining genuine public peace, while preserving democratic values and human rights.`}},{id:"intro_freedom_speech",title:"4. My Voice",type:Z.SCENARIO,isLocked:!0,isCompleted:!1,coordinates:{x:72,y:56},data:{description:"Mission: Pop only the balloons that show a violation of Freedom of Speech!",backgroundImage:J.FREEDOM_INTRO,dialog:[],interactionType:$.BALLOONS,interactionData:{items:[{id:"1",text:"Allowed to express unpopular opinion",isCorrect:!1,image:de.FREEDOM_1},{id:"2",text:"Forbidden to speak against government",isCorrect:!0,image:de.FREEDOM_2},{id:"3",text:"Forbidden to criticize institutions",isCorrect:!0,image:de.FREEDOM_3},{id:"4",text:"Allowed to write review in newspaper",isCorrect:!1,image:de.FREEDOM_4}]},decisionQuestion:"Mission Complete",options:[{id:"ok",text:"Continue",feedback:"Your voice matters  protect it, use it responsibly. Freedom of speech is not absolute, but it is a fundamental right."}],moreInfoTitle:"Freedom of Speech",moreInfoContent:"Freedom of speech includes the right to express an opinion, criticize, publish information, and demonstrate. Restrictions are allowed only when the expression endangers life or harms other rights disproportionately."}},{id:"school_tamara",title:"5. Tamara",type:Z.SCENARIO,isLocked:!0,isCompleted:!1,coordinates:{x:88,y:35},data:{description:'Tamara, a 10th grade student, writes a Facebook post against the principal who cancelled the Student Council without consultation. She calls her a "Dictator".',backgroundImage:J.SCHOOL_TAMARA,digitalContent:{type:"POST",author:"Tamara",content:"Our principal is a dictator and hurts freedom of speech! Cancelled council without asking anyone. How are we supposed to learn democracy when we have no voice?",likes:150},dialog:[{id:"1",speaker:"Principal Cohen",text:"Tamara, you called me a dictator in front of hundreds! This hurts my dignity and authority.",mood:"angry"},{id:"2",speaker:"Tamara",text:"But I have freedom of speech! I just expressed an opinion on a policy that hurts us.",mood:"concerned"},{id:"3",speaker:"Teacher Danny",text:'You are both partially right. Criticism is allowed, but "dictator" is a personal attack.',mood:"neutral"}],interactionType:$.NONE,decisionQuestion:"Part 1: What should happen with Tamara?",options:[{id:"1",text:`Suspend Tamara immediately! - You can't call the principal a "dictator" publicly.`,feedback:"Too harsh. Students have a right to freedom of speech."},{id:"2",text:"Tamara can criticize the decision, but needs to change to critical wording that isn't insulting.",feedback:"Correct. Freedom of speech is important but not absolute. Human dignity must be maintained."},{id:"3",text:"Tamara can write whatever she wants - freedom of speech is absolute.",feedback:"Inaccurate. Freedom of speech does not permit defamation."}],moreInfoTitle:"Student Rights",moreInfoContent:"The Convention on the Rights of the Child and Basic Laws grant students freedom of speech and participation.",secondaryDecisionQuestion:"Part 2: Does the principal have authority to cancel the council?",secondaryOptions:[{id:"1",text:"Yes, principal is the highest authority",feedback:"Incorrect. Student Rights Law protects the council."},{id:"2",text:"Principal can limit activities, but the Law forbids cancelling it",feedback:"Correct! The law mandates a student council."},{id:"3",text:"Principal can cancel if a majority agrees",feedback:"Inaccurate. The law mandates it regardless of majority."}],secondaryMoreInfoTitle:"Student Rights Law",secondaryMoreInfoContent:"The Student Rights Law (Section 13) states that an educational institution shall encourage the establishment of a student council and shall not take any action to prevent its establishment. Therefore, cancelling the Student Council constitutes a violation of the law. The principal may establish regulations, but cannot cancel it entirely."}},{id:"newspaper_office",title:"6. The Pulse",type:Z.SCENARIO,isLocked:!0,isCompleted:!1,coordinates:{x:20,y:70},data:{description:'The "Pulse" newspaper published an article: "Government suppresses journalists and hides info". Interior Minister ordered to close the paper for 10 days citing security.',backgroundImage:J.NEWSPAPER,digitalContent:{type:"ARTICLE",title:"The Pulse",content:"Exposure: Government suppresses independent journalists and hides critical info from the public.",author:"Editorial Board"},dialog:[{id:"1",speaker:"Editor",text:"We got a closure notice! What do we do?",mood:"concerned"},{id:"2",speaker:"Reporter",text:"We must fight this. It's silencing us.",mood:"angry"}],interactionType:$.NONE,decisionQuestion:"How will the team respond?",options:[{id:"1",text:`Post another angry post: "We won't be silenced!"`,feedback:"Might worsen the situation."},{id:"2",text:"Petition the Supreme Court",feedback:"Correct step. The democratic way to deal with a government decision."},{id:"3",text:"Take down article and apologize",feedback:"Surrender that hurts freedom of the press."}],moreInfoTitle:"Freedom of the Press",moreInfoContent:'Freedom of the press is derived from freedom of speech. This case recalls the "Kol HaAm" affair (1953) where a closure order for a newspaper was cancelled.'}},{id:"supreme_court",title:"7. The Court",type:Z.SCENARIO,isLocked:!0,isCompleted:!1,coordinates:{x:50,y:85},data:{description:"You are now Supreme Court judges. The newspaper petitioned against the Minister of Interior.",backgroundImage:J.COURT,dialog:[{id:"1",speaker:"Govt Rep",text:"The state must protect public security. This article could cause riots.",mood:"neutral"},{id:"2",speaker:"Editor",text:"There is no real danger here, just criticism. In a democracy, criticism is allowed.",mood:"neutral"}],interactionType:$.NONE,decisionQuestion:"As judges, what is your ruling?",options:[{id:"1",text:"Cancel order - Freedom of speech prevails",feedback:"Correct. This is the principle established in the Kol HaAm High Court ruling (1953)."},{id:"2",text:"Approve order - Better prevent danger",feedback:"This is a harsh approach rejected in historical rulings."},{id:"3",text:"Reduce order duration",feedback:"Still a disproportionate violation."}],moreInfoTitle:"Near Certainty Test",moreInfoContent:'In the "Kol HaAm" ruling, the court stated: Freedom of speech must not be restricted unless there is "near certainty of real harm to state security".'}},{id:"quiz_finale",title:"8. Cracking Code",type:Z.QUIZ,isLocked:!0,isCompleted:!1,coordinates:{x:85,y:70},data:{description:"Answer the questions to get the digits for the secret code and finish the game.",dialog:[],interactionType:$.CODE_CRACKER,interactionData:{questions:[{id:"q1",question:"Year of Universal Declaration of Human Rights?",options:[{text:"1947",value:0},{text:"1967",value:0},{text:"1948",value:3},{text:"1946",value:0}],explanation:"1948 - The digit is 3"},{id:"q2",question:"Year Basic Law: Human Dignity and Liberty enacted?",options:[{text:"1996",value:0},{text:"1992",value:2},{text:"1987",value:0},{text:"1990",value:0}],explanation:"1992 - The digit is 2"},{id:"q3",question:"Israel is party to how many core HR treaties?",options:[{text:"9",value:0},{text:"5",value:0},{text:"8",value:0},{text:"7",value:4}],explanation:"The digit is 4. Israel is party to 7 core treaties."},{id:"q4",question:"Month of Int'l Day Against Racism?",options:[{text:"December",value:0},{text:"March",value:2},{text:"February",value:0},{text:"August",value:0}],explanation:"March - The digit is 2"}]},decisionQuestion:"Code Cracked!",options:[],moreInfoTitle:"Well Done!",moreInfoContent:`Human rights are fundamental rights ensuring everyone lives with dignity, freedom, and security. They allow us to live in a just society.

It is important to keep learning about human rights, understand the challenges, and fight for them to be realized for everyone  always, everywhere.`}}],wo={he:oT,ar:sT,en:aT},Vo=t=>{const e=wo[t]&&wo[t].length>0?wo[t]:wo.he;return JSON.parse(JSON.stringify(e))};Vo("he");const Hd={he:{start:"  ",devMode:"   (Dev Mode)",backToMap:" ",stepBack:" ",locked:"",completed:"",open:" ",next:"",challenge:" ",finishLevel:"   ",finishGame:" ",moreInfo:"  ",close:"",understood:", ",mapTitle:" ",gameTitle:" ",loading:"...",closeDev:"  ",correct:" !",correctAnswer:" !",tryAgain:"!  ",codeCracked:" !",codeLabel:" ",accessDenied:" :  ",question:"",of:"",mission:"",socialMedia:" ",newsAlert:" ",likes:"",chooseLocation:"     ",visited:"  ",clickToListen:" ",finishedListening:" ",proceedToDecision:" ",visitMore:" ",locations:"",balloonsInst:"        !",shieldInst:"     !",yourChoice:" :",rotateDevice:"      "},en:{start:"Start Game",devMode:"Enter Dev Mode",backToMap:"Back to Map",stepBack:"Step Back",locked:"Locked",completed:"Completed",open:"Open",next:"Next",challenge:"Go to Challenge",finishLevel:"Finish Level & Back to Map",finishGame:"Finish Game",moreInfo:"More Info",close:"Close",understood:"Close",mapTitle:"City Map",gameTitle:"Neve Or",loading:"Loading...",closeDev:"Close & Play",correct:"Well Done!",correctAnswer:"Correct Answer!",tryAgain:"Wrong! Try Again",codeCracked:"Code Cracked!",codeLabel:"Secret Code",accessDenied:"Access Denied: Wrong Code",question:"Question",of:"of",mission:"MISSION",socialMedia:"SOCIAL MEDIA",newsAlert:"NEWS ALERT",likes:"Likes",chooseLocation:"Select a location to hear the residents",visited:" Visited",clickToListen:"Click to listen",finishedListening:"Finished listening",proceedToDecision:"Proceed to Decision",visitMore:"Visit",locations:"more locations",balloonsInst:" Pop only the balloons that show a violation of Freedom of Speech!",shieldInst:" Protect the vulnerable!",yourChoice:"Your Choice:",rotateDevice:"Please rotate your device to landscape "},ar:{start:" ",devMode:" ",backToMap:"  ",stepBack:"",locked:"",completed:"",open:"",next:"",challenge:" ",finishLevel:"  ",finishGame:" ",moreInfo:" ",close:"",understood:" ",mapTitle:" ",gameTitle:" ",loading:" ...",closeDev:" ",correct:"!",correctAnswer:" !",tryAgain:"!   ",codeCracked:"  !",codeLabel:" ",accessDenied:"  :  ",question:"",of:"",mission:"",socialMedia:" ",newsAlert:" ",likes:"",chooseLocation:"    ",visited:"  ",clickToListen:" ",finishedListening:"  ",proceedToDecision:"  ",visitMore:" ",locations:" ",balloonsInst:"        !",shieldInst:"     !",yourChoice:":",rotateDevice:"      "}},H=(t,e)=>Hd[e][t]||Hd.he[t],lT=t=>t==="en"?"ltr":"rtl";let lr=null;const uT=()=>(lr||(lr=new(window.AudioContext||window.webkitAudioContext)),lr.state==="suspended"&&lr.resume(),lr),kt=(t,e,n)=>{const i=t.createOscillator();return i.type=e,i.frequency.setValueAtTime(n,t.currentTime),i},sn=(t,e,n,i)=>{const r=t.createGain();return r.gain.setValueAtTime(e,t.currentTime),r.gain.exponentialRampToValueAtTime(n,t.currentTime+i),r},pe=t=>{try{const e=uT(),n=e.currentTime;switch(t){case"click":{const i=kt(e,"sine",600),r=sn(e,.05,.001,.1);i.connect(r),r.connect(e.destination),i.start(n),i.stop(n+.1)}break;case"hover":{const i=kt(e,"sine",400),r=sn(e,.02,.001,.05);i.connect(r),r.connect(e.destination),i.start(n),i.stop(n+.05)}break;case"success":{const o=kt(e,"sine",523.25),s=kt(e,"triangle",659.25),u=sn(e,.1,.001,.6),c=sn(e,.05,.001,.6);o.connect(u),s.connect(c),u.connect(e.destination),c.connect(e.destination),o.start(n),s.start(n),o.stop(n+.6),s.stop(n+.6)}break;case"error":{const i=kt(e,"triangle",150),r=sn(e,.15,.001,.3),o=e.createBiquadFilter();o.type="lowpass",o.frequency.setValueAtTime(200,n),i.connect(o),o.connect(r),r.connect(e.destination),i.start(n),i.frequency.exponentialRampToValueAtTime(100,n+.2),i.stop(n+.3)}break;case"pop":{const i=kt(e,"sine",400),r=sn(e,.1,.001,.15);i.connect(r),r.connect(e.destination),i.start(n),i.frequency.exponentialRampToValueAtTime(800,n+.1),i.stop(n+.15)}break;case"victory":[523.25,659.25,783.99,1046.5,1318.51].forEach((r,o)=>{const s=n+o*.12,u=kt(e,"triangle",r),c=sn(e,.15,.001,1);u.connect(c),c.connect(e.destination),u.start(s),u.stop(s+1)}),setTimeout(()=>{const r=kt(e,"sine",523.25),o=kt(e,"sine",659.25),s=kt(e,"sine",783.99),u=sn(e,.2,.001,1.5);r.connect(u),o.connect(u),s.connect(u),u.connect(e.destination);const c=e.currentTime;r.start(c),r.stop(c+1.5),o.start(c),o.stop(c+1.5),s.start(c),s.stop(c+1.5)},600);break}}catch{}},cT=({nodes:t,onNodeSelect:e,language:n,onBackToIntro:i,onOpenDevMode:r})=>{const o=t.find(f=>f.id==="HUB_CONFIG"),s=o==null?void 0:o.data.backgroundImage,[u,c]=z.useState(!1),d=t.filter(f=>f.type!=="INTRO"&&f.type!=="HUB"&&f.coordinates);return m.jsxs("div",{className:"fixed inset-0 w-full h-full bg-slate-900 overflow-hidden font-sans select-none",children:[m.jsxs("div",{className:"absolute inset-0 z-0",children:[s&&!u?m.jsx("img",{src:s,alt:"City Map",className:"w-full h-full object-cover transition-transform duration-[60s] ease-linear hover:scale-105",onError:()=>c(!0)}):m.jsxs("div",{className:"w-full h-full relative bg-[#f0f4f8]",children:[m.jsx("div",{className:"absolute bottom-0 right-0 w-1/3 h-1/3 bg-[#bfdbfe] rounded-tl-[100px] opacity-60"}),m.jsx("div",{className:"absolute top-20 left-[-10%] w-1/3 h-20 bg-[#bfdbfe] -rotate-12 opacity-40"}),m.jsx("div",{className:"absolute inset-0 opacity-10",style:{backgroundImage:"linear-gradient(#94a3b8 2px, transparent 2px), linear-gradient(90deg, #94a3b8 2px, transparent 2px)",backgroundSize:"60px 60px"}}),m.jsx("div",{className:"absolute bottom-4 right-4 text-slate-400 font-bold text-xs uppercase tracking-widest",children:"NOVE OR CITY MAP"})]}),m.jsx("div",{className:"absolute inset-0 bg-black/5 pointer-events-none"})]}),m.jsxs("button",{onClick:()=>{pe("click"),r()},className:"absolute top-2 left-2 z-50 text-[10px] text-white/70 font-bold hover:text-white transition-all bg-black/30 px-3 py-1.5 rounded-full border border-white/10 hover:bg-black/50 hover:scale-105 active:scale-95 flex items-center gap-1.5 backdrop-blur-sm",children:[m.jsx("span",{children:""})," Dev Mode"]}),m.jsx("div",{className:"absolute top-5 right-5 z-50",children:m.jsxs("button",{onClick:()=>{pe("click"),i()},className:"bg-white text-slate-700 px-5 py-2.5 rounded-full shadow-lg font-black text-xs sm:text-sm hover:scale-105 active:scale-95 transition-all flex items-center gap-2",children:[m.jsx("span",{children:""}),n==="en"?"Main Menu":n==="ar"?" ":" "]})}),m.jsx("div",{className:"absolute inset-0 z-10",children:d.map((f,p)=>{if(!f.coordinates)return null;const h=f.coordinates.y>60,y=!f.isLocked&&!f.isCompleted;return m.jsx("div",{className:"absolute transform -translate-x-1/2 -translate-y-1/2 hover:z-50 transition-all duration-300",style:{left:`${f.coordinates.x}%`,top:`${f.coordinates.y}%`},children:m.jsxs("button",{onClick:()=>{f.isLocked?pe("error"):(pe("click"),e(f.id))},disabled:f.isLocked,className:`relative group/pin flex flex-col items-center transition-all duration-300 ${f.isLocked?"opacity-80 grayscale cursor-not-allowed":"hover:scale-110 cursor-pointer"}`,children:[m.jsx("div",{className:"hidden sm:block w-0.5 h-6 bg-black/30 absolute top-full left-1/2 -translate-x-1/2 origin-top transform scale-y-0 transition-transform duration-300 group-hover/pin:scale-y-100"}),m.jsx("div",{className:"absolute -top-2 -right-2 w-5 h-5 sm:w-7 sm:h-7 bg-yellow-400 text-blue-900 rounded-full border-[2px] border-white flex items-center justify-center font-black text-[10px] sm:text-xs shadow-md z-30 transform transition-transform group-hover/pin:rotate-12",children:p+1}),y&&m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"absolute -top-8 left-1/2 -translate-x-1/2 bg-red-600 text-white text-[9px] sm:text-[10px] font-black px-1.5 py-0.5 rounded-full shadow-lg border border-white animate-bounce z-40 whitespace-nowrap",children:n==="he"?"!":"New!"}),m.jsx("div",{className:"absolute inset-0 rounded-3xl ring-4 ring-blue-400 animate-ping opacity-50"})]}),m.jsxs("div",{className:`w-10 h-10 sm:w-16 sm:h-16 rounded-xl sm:rounded-2xl rotate-45 flex items-center justify-center shadow-2xl border-[3px] sm:border-[4px] border-white transition-all relative z-20 overflow-hidden
                  ${f.isCompleted?"bg-gradient-to-br from-green-400 to-green-600":f.isLocked?"bg-gradient-to-br from-gray-400 to-gray-500":"bg-gradient-to-br from-blue-500 to-blue-700 hover:shadow-blue-500/50"}
                `,children:[m.jsx("span",{className:"-rotate-45 text-lg sm:text-3xl drop-shadow-md filter text-white",children:f.isCompleted?"":f.isLocked?"":f.type==="QUIZ"?"":""}),!f.isLocked&&m.jsx("div",{className:"absolute inset-0 bg-white/30 -skew-x-12 -translate-x-full group-hover/pin:animate-shine"})]}),m.jsxs("div",{className:`
                  absolute px-4 py-2 bg-white/95 backdrop-blur-md rounded-xl shadow-xl 
                  text-xs sm:text-sm font-bold text-gray-800 whitespace-nowrap opacity-0 
                  group-hover/pin:opacity-100 transition-all duration-300 z-30 flex flex-col items-center 
                  after:content-[''] after:absolute after:left-1/2 after:-translate-x-1/2 after:border-[6px] after:border-transparent pointer-events-none
                  ${h?"bottom-[calc(100%+16px)] translate-y-2 group-hover/pin:translate-y-0 after:-bottom-3 after:border-t-white/95 after:border-b-transparent":"top-[calc(100%+16px)] -translate-y-2 group-hover/pin:translate-y-0 after:-top-3 after:border-b-white/95 after:border-t-transparent"}
                `,children:[f.title,f.isLocked&&m.jsx("span",{className:"text-[9px] text-red-400 font-normal uppercase tracking-wider block text-center leading-none mt-0.5",children:"LOCKED"})]})]})},f.id)})}),m.jsxs("div",{className:"absolute bottom-6 right-6 z-40 flex items-center gap-3 sm:gap-4 bg-white/95 backdrop-blur px-5 py-2.5 rounded-full shadow-xl animate-fade-in-up",children:[m.jsx(Na,{color:"bg-blue-600",label:H("open",n)}),m.jsx("div",{className:"w-px h-4 bg-gray-200"}),m.jsx(Na,{color:"bg-green-500",label:H("completed",n)}),m.jsx("div",{className:"w-px h-4 bg-gray-200"}),m.jsx(Na,{color:"bg-gray-400",label:H("locked",n)})]})]})},Na=({color:t,label:e})=>m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("div",{className:`w-2.5 h-2.5 sm:w-3 sm:h-3 rounded-full ${t} shadow-sm ring-2 ring-gray-100`}),m.jsx("span",{className:"text-[10px] sm:text-xs font-bold text-gray-700 whitespace-nowrap",children:e})]}),ae=({children:t,variant:e="primary",fullWidth:n=!1,className:i="",onClick:r,...o})=>{const s="px-6 py-3 rounded-2xl font-bold transition-all duration-200 active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed shadow-sm hover:shadow-md",u={primary:"bg-blue-600 text-white hover:bg-blue-700 shadow-blue-200",secondary:"bg-amber-400 text-blue-900 hover:bg-amber-500 shadow-amber-200",danger:"bg-red-500 text-white hover:bg-red-600 shadow-red-200",outline:"bg-white ring-1 ring-inset ring-blue-200 text-blue-600 hover:bg-blue-50 hover:ring-blue-300 shadow-sm"},c=d=>{o.disabled||pe("click"),r&&r(d)};return m.jsx("button",{className:`${s} ${u[e]} ${n?"w-full":""} ${i}`,onClick:c,...o,children:t})},Bd=({message:t,avatarUrl:e})=>{const n=t.mood==="angry"?"bg-red-50 shadow-sm":t.mood==="happy"?"bg-green-50 shadow-sm":t.mood==="concerned"?"bg-amber-50 shadow-sm":"bg-white shadow-sm";return m.jsxs("div",{className:`flex gap-2 sm:gap-3 mb-2 sm:mb-4 animate-fade-in-up max-w-[98%] sm:max-w-[85%] ${t.isPlayer?"self-end flex-row-reverse":""}`,children:[m.jsx("div",{className:"flex-shrink-0 flex flex-col items-center gap-1",children:m.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 rounded-full shadow-md overflow-hidden bg-gray-100 flex items-center justify-center border-2 border-white",children:e?m.jsx("img",{src:e,alt:t.speaker,className:"w-full h-full object-cover"}):m.jsx("span",{className:"text-sm",children:""})})}),m.jsxs("div",{className:"flex flex-col gap-1 max-w-[85%]",children:[m.jsx("span",{className:`text-[9px] sm:text-xs font-bold px-2 py-0.5 rounded-full bg-black/20 text-white/90 shadow-sm backdrop-blur-sm w-fit ${t.isPlayer?"ml-auto":"mr-auto"}`,children:t.speaker}),m.jsx("div",{className:`py-2 px-3 sm:py-3 sm:px-4 rounded-2xl ${n} ${t.isPlayer?"rounded-tl-none":"rounded-tr-none"}`,children:m.jsx("p",{className:"text-gray-900 leading-relaxed text-xs sm:text-sm font-medium",children:t.text})})]})]})},dT=({node:t,onComplete:e,onBack:n,language:i})=>{const[r,o]=z.useState("INTRO"),[s,u]=z.useState(""),[c,d]=z.useState(!1),[f,p]=z.useState(!1),[h,y]=z.useState(null),[T,E]=z.useState(!1),[w,_]=z.useState([]),[g,v]=z.useState(null),[I,C]=z.useState(null),[x,A]=z.useState(!1),[N,P]=z.useState(new Set),[R,K]=z.useState(null),[Q,te]=z.useState(0),[Qe,xt]=z.useState([]),[Ee,qe]=z.useState(!1),[b,O]=z.useState(""),[G,S]=z.useState(null),[D,F]=z.useState(!1);z.useEffect(()=>{var L;if(o("INTRO"),F(!1),E(!1),te(0),xt([]),v(null),C(null),P(new Set),K(null),y(null),u(""),qe(!1),O(""),S(null),A(!1),p(!1),t.data.interactionType!==$.NONE&&((L=t.data.interactionData)!=null&&L.items)){const ce=t.data.interactionData.items.map(Ie=>({...Ie,popped:!1,protected:!1}));_(ce)}},[t]),z.useEffect(()=>{let L;return r==="INTRO"?(F(!1),L=setTimeout(()=>{F(!0)},4e3)):F(!0),()=>{L&&clearTimeout(L)}},[r]);const q=()=>{r==="INTRO"&&!D&&F(!0)},W=L=>{L.isCorrect?(pe("pop"),_(ce=>ce.map(Ie=>Ie.id===L.id?{...Ie,popped:!0}:Ie))):(pe("error"),v(L.id),setTimeout(()=>v(null),500))},oe=L=>{L.isDanger?(pe("success"),_(ce=>ce.map(Ie=>Ie.id===L.id?{...Ie,protected:!0}:Ie))):(pe("error"),v(L.id),setTimeout(()=>v(null),500))},Pe=L=>{C(L.id),L.correct?(pe("success"),setTimeout(()=>E(!0),800)):(pe("error"),v(L.id),setTimeout(()=>{v(null),C(null)},800))};z.useEffect(()=>{if(r==="INTERACTION"){let L=!1;t.data.interactionType===$.BALLOONS?L=w.filter(Ie=>Ie.isCorrect&&!Ie.popped).length===0:t.data.interactionType===$.DRAG_SHIELD&&(L=w.filter(Ie=>Ie.isDanger&&!Ie.protected).length===0),L&&w.length>0&&!T&&(pe("success"),setTimeout(()=>E(!0),1e3))}},[w,r,t.data.interactionType,T]);const ji=(L,ce)=>{if(L===0){pe("error"),A(!0),setTimeout(()=>A(!1),800);return}pe("success"),O(ce),S(L),qe(!0)},Ut=()=>{if(pe("click"),G!==null){const L=[...Qe,G];xt(L),Q<3?(te(ce=>ce+1),qe(!1)):L.join("")==="3242"?(pe("victory"),setTimeout(()=>E(!0),500)):(xt([]),te(0),qe(!1),alert(H("tryAgain",i))),S(null)}},Rc=(L=!1)=>{var ro;const{data:ce}=t;if(!ce.digitalContent)return null;const Ie=ce.digitalContent.type==="POST"?H("socialMedia",i):H("newsAlert",i),Vn=i==="he"||i==="ar"?"left-0 rounded-br-2xl":"right-0 rounded-bl-2xl";return m.jsxs("div",{className:`bg-white/95 backdrop-blur-md rounded-2xl shadow-xl relative overflow-hidden w-full ${L?"p-2":"p-4 sm:p-5"}`,children:[m.jsx("div",{className:`absolute top-0 ${Vn} bg-yellow-400 text-blue-900 text-[9px] sm:text-xs font-black px-3 py-1 shadow-sm z-10 uppercase tracking-wide`,children:Ie}),m.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 mb-2 mt-1",children:[m.jsx("div",{className:`rounded-full flex items-center justify-center font-bold text-slate-500 bg-slate-100 shadow-inner ${L?"w-8 h-8 text-[10px]":"w-10 h-10 text-base"}`,children:((ro=ce.digitalContent.author)==null?void 0:ro[0])||""}),m.jsx("div",{children:m.jsx("p",{className:"font-bold text-slate-800 text-xs sm:text-sm",children:ce.digitalContent.author||ce.digitalContent.title})})]}),m.jsxs("div",{className:`text-slate-900 font-medium leading-tight sm:leading-relaxed ${L?"text-xs":"text-xs sm:text-sm"} px-1`,children:['"',ce.digitalContent.content,'"']}),ce.digitalContent.likes&&m.jsx("div",{className:"mt-2 flex justify-end",children:m.jsxs("div",{className:"bg-blue-50 text-blue-600 px-2 py-1 rounded-full text-[10px] font-bold flex items-center gap-1 shadow-sm border border-blue-100",children:[m.jsx("span",{children:""}),m.jsx("span",{children:ce.digitalContent.likes}),m.jsx("span",{children:H("likes",i)})]})})]})},Iv=()=>{r==="DECISION"&&t.data.secondaryDecisionQuestion?(o("DECISION_PHASE_2"),y(null),u(""),d(!1)):e()},wv=()=>{if(pe("click"),R){K(null);return}r==="DECISION_PHASE_2"?(o("DECISION"),y(null)):r==="DECISION"?t.data.interactionType!==$.NONE?o("INTERACTION"):t.data.dialog.length>0?o("DIALOG"):(o("INTRO"),F(!0)):r==="INTERACTION"?t.data.dialog.length>0?o("DIALOG"):(o("INTRO"),F(!0)):r==="DIALOG"&&(o("INTRO"),F(!0))},On=t.data.options.length===1,io=On?t.data.options[0]:null,Cv=()=>{var ce,Ie,ta;const{data:L}=t;switch(r){case"INTRO":return D?m.jsx("div",{className:"flex flex-col h-full w-full justify-center items-center",children:m.jsxs("div",{className:"bg-white/85 backdrop-blur-xl rounded-2xl shadow-2xl w-fit max-w-lg flex flex-col max-h-full overflow-hidden animate-fade-in-up border border-white/40",children:[m.jsxs("div",{className:"px-4 py-2 flex justify-between items-center gap-2 flex-shrink-0 bg-white/50 border-b border-gray-100/50",children:[m.jsx("h2",{className:"text-sm sm:text-lg font-black truncate text-blue-900",children:t.title}),m.jsx("div",{className:"text-[10px] bg-blue-100 text-blue-800 px-2 py-0.5 rounded-full uppercase tracking-wider font-bold shadow-sm",children:H("mission",i)})]}),m.jsxs("div",{className:"px-4 py-2 overflow-y-auto custom-scrollbar flex-1 min-h-0",children:[m.jsx("p",{className:"text-xs sm:text-sm leading-relaxed text-gray-800 font-bold mb-3 whitespace-pre-line",children:L.description}),L.digitalContent&&m.jsx("div",{className:"mb-2",children:Rc(!1)})]}),m.jsx("div",{className:"p-3 flex justify-center flex-shrink-0 bg-white/50 border-t border-gray-100/50",children:m.jsx(ae,{fullWidth:!0,onClick:()=>o(L.dialog.length>0?"DIALOG":L.interactionType!==$.NONE?"INTERACTION":"DECISION"),className:"py-2 text-sm font-black shadow-lg rounded-xl",children:H("next",i)})})]})}):m.jsx("div",{className:"h-full w-full flex items-center justify-center pointer-events-none animate-fade-in",children:m.jsx("div",{className:"bg-white/10 backdrop-blur-sm p-4 rounded-full shadow-2xl animate-spin border border-white/20",children:m.jsxs("svg",{className:"w-10 h-10 text-white",fill:"none",viewBox:"0 0 24 24",children:[m.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),m.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})})});case"DIALOG":return m.jsxs("div",{className:"flex flex-col h-full w-full max-w-3xl mx-auto relative overflow-hidden",children:[m.jsx("div",{className:"flex-1 overflow-y-auto min-h-0 p-1 mask-image-linear-gradient custom-scrollbar",children:L.dialog.map(V=>{var X;return m.jsx(Bd,{message:V,avatarUrl:(X=L.characterImages)==null?void 0:X[V.speaker]},V.id)})}),m.jsx("div",{className:"flex justify-center flex-shrink-0 pt-1 sticky bottom-0 z-30",children:m.jsx(ae,{onClick:()=>o(L.interactionType!==$.NONE?"INTERACTION":"DECISION"),className:"py-1.5 px-6 rounded-full shadow-xl bg-blue-600 hover:bg-blue-700 text-sm font-bold border-2 border-white/20 backdrop-blur-sm",children:L.interactionType!==$.NONE?H("challenge",i):H("next",i)})})]});case"INTERACTION":if(L.interactionType===$.CITY_HALL_SUB_LOCATIONS&&L.subScenes){if(R)return m.jsxs("div",{className:"absolute inset-0 z-50 flex flex-col animate-fade-in bg-slate-900/50 backdrop-blur-sm",children:[R.backgroundImage&&m.jsx("img",{src:R.backgroundImage,className:"absolute inset-0 w-full h-full object-cover z-0",alt:""}),m.jsxs("div",{className:"absolute top-2 right-2 z-20 flex items-center gap-2 bg-white/80 backdrop-blur-md px-3 py-1 rounded-full border border-white/50 shadow-lg",children:[m.jsx("span",{className:"text-lg",children:R.icon}),m.jsx("h3",{className:"text-xs font-bold text-blue-900",children:R.title})]}),m.jsx("button",{onClick:()=>K(null),className:"absolute top-2 left-2 z-20 bg-black/30 text-white hover:bg-black/50 w-8 h-8 rounded-full flex items-center justify-center font-bold border border-white/30 backdrop-blur-md",children:""}),m.jsxs("div",{className:"relative z-10 flex flex-col p-3 w-full max-w-2xl mx-auto h-full justify-end pb-12",children:[m.jsx("div",{className:"overflow-y-auto max-h-[65vh] p-1 flex flex-col justify-end",children:R.dialog.map(X=>m.jsx(Bd,{message:X},X.id))}),m.jsx("div",{className:"flex justify-center mt-2 flex-shrink-0",children:m.jsx(ae,{onClick:()=>{pe("click"),P(X=>new Set(X).add(R.id)),K(null)},className:"py-2 px-8 rounded-full text-sm font-bold shadow-xl bg-blue-600 text-white border-2 border-white/20",children:H("finishedListening",i)})})]})]});const V=N.size>=3;return m.jsxs("div",{className:"h-full flex flex-col items-center justify-center animate-fade-in max-w-4xl mx-auto w-full relative z-10",children:[m.jsx("h3",{className:"text-sm font-black text-white mb-2 text-center drop-shadow-lg bg-black/40 px-4 py-1.5 rounded-xl backdrop-blur-md flex-shrink-0 border border-white/10 w-fit",children:H("chooseLocation",i)}),m.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 w-fit max-w-full overflow-y-auto flex-1 min-h-0 custom-scrollbar p-1",children:L.subScenes.map(X=>{const Xe=N.has(X.id);return m.jsxs("button",{onClick:()=>{pe("click"),K(X)},className:`relative overflow-hidden p-2 rounded-xl transition-all flex items-center gap-3 shadow-md group text-right min-h-[50px] border border-white/30 ${Xe?"bg-black/50 backdrop-blur-sm":"bg-white/80 backdrop-blur-sm hover:bg-white/90"}`,children:[X.backgroundImage&&m.jsx("div",{className:"absolute inset-0 opacity-40 z-0",children:m.jsx("img",{src:X.backgroundImage,className:"w-full h-full object-cover",alt:""})}),m.jsx("div",{className:"relative z-10 text-xl drop-shadow-sm",children:X.icon}),m.jsxs("div",{className:"relative z-10 flex-1",children:[m.jsx("div",{className:`font-black text-xs sm:text-sm ${Xe?"text-white":"text-gray-900"}`,children:X.title}),m.jsx("div",{className:`text-[10px] font-bold ${Xe?"text-green-300":"text-blue-600"}`,children:H(Xe?"visited":"clickToListen",i)})]})]},X.id)})}),m.jsx("div",{className:"mt-2 w-full flex justify-center flex-shrink-0",children:m.jsx(ae,{onClick:()=>o("DECISION"),disabled:!V,className:`py-1.5 px-6 rounded-full text-xs font-bold shadow-lg border border-white/20 backdrop-blur-sm ${V?"bg-blue-600 hover:bg-blue-500":"bg-gray-500/50 cursor-not-allowed"}`,children:V?H("proceedToDecision",i):`${H("visitMore",i)} ${3-N.size}`})})]})}if(L.interactionType===$.MULTIPLE_CHOICE&&((ce=L.interactionData)!=null&&ce.question))return m.jsxs("div",{className:"h-full w-full flex flex-col items-center overflow-hidden animate-fade-in relative",children:[m.jsx("div",{className:"flex-shrink-0 mb-1 z-10 max-w-[98%]",children:m.jsx("div",{className:"bg-white/85 backdrop-blur-xl text-blue-900 rounded-lg shadow-lg p-3 text-center border border-white/40 w-fit mx-auto",children:m.jsx("h3",{className:"text-xs sm:text-sm font-black relative z-10 leading-tight",children:L.interactionData.question})})}),m.jsx("div",{className:"flex-1 min-h-0 flex flex-col items-center relative w-full overflow-hidden",children:T?m.jsx("div",{className:"flex-1 flex flex-col items-center justify-center animate-fade-in p-2",children:m.jsxs("div",{className:"bg-white/90 backdrop-blur-xl p-3 rounded-2xl shadow-2xl text-center w-fit max-w-xs border border-white/50",children:[m.jsx("div",{className:"text-3xl mb-1 animate-bounce",children:""}),m.jsx("h3",{className:"text-sm font-black text-blue-900 mb-2",children:H("correct",i)}),m.jsx(ae,{fullWidth:!0,className:"py-1.5 text-xs shadow-xl bg-blue-600 text-white rounded-xl",onClick:()=>o("DECISION"),children:H("next",i)})]})}):m.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar flex flex-col gap-1 p-0.5 w-fit max-w-full",children:L.interactionData.answers.map(V=>{const X=I===V.id,Xe=X&&!V.correct&&g===V.id;return m.jsxs("button",{onClick:()=>Pe(V),className:`py-1.5 px-4 rounded-lg font-bold text-[10px] sm:text-sm transition-all flex justify-between items-center text-start shadow-sm shrink-0 min-h-[30px] leading-tight backdrop-blur-sm w-full
                                ${X&&V.correct?"bg-green-500 text-white":Xe?"bg-red-500 text-white animate-shake":"bg-white/90 text-gray-800 hover:bg-white"}
                              `,children:[m.jsx("span",{className:"flex-1",children:V.text}),m.jsxs("span",{className:"text-base flex-shrink-0 ml-2",children:[X&&V.correct&&"",Xe&&""]})]},V.id)})})})]});if(L.interactionType===$.DRAG_SHIELD)return m.jsxs("div",{className:"h-full w-full flex flex-col items-center relative animate-fade-in",children:[!T&&m.jsx("h3",{className:"text-center bg-black/40 text-white backdrop-blur-md rounded-full py-1 px-4 self-center mb-2 text-xs font-bold border border-white/10 w-fit",children:H("shieldInst",i)}),m.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 flex-1 overflow-y-auto min-h-0 p-1 w-full max-w-xl items-center content-center",children:w.map(V=>m.jsxs("button",{onClick:()=>oe(V),disabled:V.protected,className:`relative rounded-xl flex flex-col items-center text-center shadow-lg transition-all w-full overflow-hidden group max-w-[150px] mx-auto
                                    ${V.protected?"bg-green-100/90 border-2 border-green-500":g===V.id?"bg-red-50/90 border-2 border-red-300 animate-shake":"bg-white/95 backdrop-blur-sm hover:scale-[1.02]"}
                                `,children:[m.jsxs("div",{className:"w-full h-20 bg-white relative p-1",children:[V.image?m.jsx("img",{src:V.image,className:"w-full h-full object-contain",alt:""}):m.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400",children:"?"}),V.protected&&m.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-green-500/30 z-20",children:m.jsx("span",{className:"text-3xl animate-bounce",children:""})})]}),m.jsx("div",{className:"p-1.5 w-full flex-1 flex items-center justify-center min-h-[36px] bg-slate-50 border-t border-slate-100",children:m.jsx("span",{className:"text-[10px] font-bold text-gray-900 leading-tight",children:V.text})})]},V.id))}),T&&m.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/40 backdrop-blur-md z-20 animate-fade-in",children:m.jsxs("div",{className:"bg-white/95 p-3 rounded-2xl text-center shadow-2xl w-fit max-w-xs border border-white/50",children:[m.jsx("div",{className:"text-3xl mb-1",children:""}),m.jsx("h3",{className:"font-black text-blue-900 text-sm mb-2",children:H("correct",i)}),On&&io?m.jsx("div",{className:"bg-blue-50 p-2 rounded-lg mb-2 text-xs text-gray-800 text-right leading-normal border border-blue-100",children:io.feedback}):null,m.jsx(ae,{fullWidth:!0,onClick:()=>On?e():o("DECISION"),className:"shadow-lg py-1.5 text-xs",children:H(On?"finishLevel":"next",i)})]})})]});if(L.interactionType===$.BALLOONS)return m.jsxs("div",{className:"h-full w-full flex flex-col relative overflow-hidden rounded-xl",children:[m.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-blue-300 via-blue-200 to-white opacity-60 -z-10"}),!T&&m.jsx("h3",{className:"text-center bg-black/40 text-white backdrop-blur-md rounded-full py-1 px-4 self-center mb-2 text-xs font-bold z-10 shadow-md border border-white/10 w-fit",children:H("balloonsInst",i)}),m.jsx("div",{className:"flex-1 relative w-full h-full",children:w.map((V,X)=>{if(V.popped)return null;const Xe=X*22+5,Nv=10+X%2*15,Rv=X*.5;return m.jsxs("button",{onClick:()=>W(V),className:`absolute w-24 h-28 sm:w-32 sm:h-36 flex flex-col items-center justify-center text-center p-2 cursor-pointer transition-transform active:scale-95 balloon-float
                                        ${g===V.id?"animate-shake":""}
                                    `,style:{left:`${Xe}%`,top:`${Nv}%`,animationDelay:`${Rv}s`},children:[m.jsx("div",{className:`absolute inset-0 balloon-shape ${X%2===0?"bg-red-500":X%3===0?"bg-blue-500":"bg-yellow-400"} overflow-hidden`,children:V.image&&m.jsx("img",{src:V.image,className:"w-full h-full object-cover relative z-0",alt:""})}),m.jsx("span",{className:"relative z-10 text-[10px] sm:text-xs font-bold text-white leading-tight drop-shadow-md px-1 bg-black/20 rounded backdrop-blur-[1px]",children:V.text}),m.jsx("div",{className:"absolute top-full left-1/2 w-[1px] h-12 bg-white/50 origin-top animate-[stringWave_3s_ease-in-out_infinite]"})]},V.id)})}),T&&m.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/40 backdrop-blur-md z-20 animate-fade-in",children:m.jsxs("div",{className:"bg-white/95 p-3 rounded-2xl text-center shadow-2xl w-fit max-w-xs border border-white/50",children:[m.jsx("div",{className:"text-3xl mb-1",children:""}),m.jsx("h3",{className:"font-black text-blue-900 text-sm mb-2",children:H("correct",i)}),On&&io?m.jsx("div",{className:"bg-blue-50 p-2 rounded-lg mb-2 text-xs text-gray-800 text-right leading-normal border border-blue-100",children:io.feedback}):null,m.jsx(ae,{fullWidth:!0,onClick:()=>On?e():o("DECISION"),className:"shadow-lg py-1.5 text-xs",children:H(On?"finishLevel":"next",i)})]})})]});if(L.interactionType===$.CODE_CRACKER){const V=(ta=(Ie=L.interactionData)==null?void 0:Ie.questions)==null?void 0:ta[Q];return T?m.jsxs("div",{className:"h-full w-full flex flex-col items-center justify-center relative animate-fade-in overflow-hidden",children:[m.jsx("div",{className:"absolute inset-0 pointer-events-none overflow-hidden",children:[...Array(40)].map((X,Xe)=>m.jsx("div",{className:"absolute animate-confetti",style:{left:`${Math.random()*100}%`,top:"-10%",backgroundColor:["#ff0000","#00ff00","#0000ff","#ffff00","#ff00ff"][Math.floor(Math.random()*5)],width:"10px",height:"10px",animationDuration:`${2+Math.random()*3}s`,animationDelay:`${Math.random()*2}s`}},Xe))}),m.jsxs("div",{className:"bg-white/95 p-4 rounded-2xl shadow-2xl text-center backdrop-blur-xl border border-white/50 w-fit max-w-2xl flex flex-col items-center z-10 max-h-full",children:[m.jsx("div",{className:"text-4xl mb-2 animate-bounce",children:""}),m.jsx("h2",{className:"text-xl font-black text-blue-900 mb-2",children:H("codeCracked",i)}),m.jsx("div",{className:"bg-green-100 text-green-800 font-mono text-2xl px-4 py-1 rounded-lg mb-4 tracking-[0.5em] border border-green-200 shadow-inner",children:"3242"}),m.jsx("div",{className:"overflow-y-auto custom-scrollbar flex-1 min-h-0 mb-4 px-2 w-full",children:m.jsx("p",{className:"text-xs sm:text-sm leading-relaxed text-gray-800 font-medium whitespace-pre-wrap text-center",children:L.moreInfoContent})}),m.jsx(ae,{onClick:e,fullWidth:!0,className:"mt-auto shadow-lg bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-8 rounded-xl animate-pulse",children:H("finishGame",i)})]})]}):m.jsxs("div",{className:"h-full w-full flex flex-col relative animate-fade-in items-center",children:[m.jsxs("div",{className:"w-fit flex justify-between items-center gap-3 bg-black/40 px-3 py-1.5 rounded-xl backdrop-blur-md mb-2 border border-white/10 shrink-0",children:[m.jsxs("span",{className:"text-white font-mono font-bold text-sm",children:[H("codeLabel",i),":"]}),m.jsx("div",{className:"flex gap-1.5",children:[0,1,2,3].map(X=>m.jsx("div",{className:`w-6 h-8 sm:w-8 sm:h-10 bg-slate-800 rounded flex items-center justify-center text-white font-mono text-lg border-2 ${X<Qe.length?"border-green-400 text-green-400":"border-slate-600"}`,children:X<Qe.length?Qe[X]:"*"},X))})]}),V&&m.jsxs("div",{className:"flex-1 w-full max-w-2xl bg-white/90 backdrop-blur-xl rounded-2xl shadow-xl flex flex-col overflow-hidden relative border border-white/40 mb-1",children:[m.jsxs("div",{className:"bg-blue-600 px-2 py-1 text-white text-center font-bold text-xs shrink-0",children:[H("question",i)," ",Q+1," / 4"]}),m.jsx("div",{className:"p-2 sm:p-3 text-center border-b bg-white/50 shrink-0",children:m.jsx("h3",{className:"font-bold text-blue-900 text-sm sm:text-base leading-tight",children:V.question})}),Ee?m.jsxs("div",{className:"flex-1 flex flex-col animate-fade-in overflow-hidden relative",children:[m.jsxs("div",{className:"flex-1 overflow-y-auto px-4 py-2 flex flex-col items-center justify-center text-center custom-scrollbar",children:[m.jsx("div",{className:"text-2xl mb-1 flex-shrink-0",children:""}),m.jsx("p",{className:"text-xs sm:text-sm font-bold mb-2 leading-relaxed text-gray-800",children:b}),m.jsx("div",{className:"text-3xl font-mono font-black text-blue-600 tracking-widest bg-blue-50 px-4 py-1 rounded-lg border border-blue-200 flex-shrink-0",children:G})]}),m.jsx("div",{className:"p-2 border-t bg-gray-50 flex-shrink-0 z-10 w-full",children:m.jsx(ae,{onClick:Ut,fullWidth:!0,className:"animate-bounce shadow-xl py-2 text-sm",children:H("next",i)})})]}):m.jsx("div",{className:"flex-1 grid grid-cols-1 sm:grid-cols-2 gap-2 p-2 overflow-y-auto custom-scrollbar content-center",children:V.options.map((X,Xe)=>m.jsx("button",{onClick:()=>ji(X.value,V.explanation),className:`p-2 sm:p-3 rounded-xl font-bold text-xs sm:text-sm shadow-sm transition-all border-2 border-transparent flex items-center justify-center text-center h-full min-h-[50px]
                                                ${x?"animate-shake bg-red-100":"bg-slate-50 hover:bg-blue-50 hover:border-blue-200"}
                                            `,children:X.text},Xe))})]})]})}return m.jsx("div",{className:"flex items-center justify-center h-full",children:m.jsx(ae,{onClick:()=>o("DECISION"),children:H("next",i)})});case"DECISION":case"DECISION_PHASE_2":const Vn=r==="DECISION_PHASE_2",ro=Vn?L.secondaryDecisionQuestion:L.decisionQuestion,ci=Vn?L.secondaryOptions:L.options,Av=Vn?L.secondaryMoreInfoTitle:L.moreInfoTitle,kv=Vn?L.secondaryMoreInfoContent:L.moreInfoContent,na=ci==null?void 0:ci.find(V=>V.id===h);return m.jsxs("div",{className:"h-full w-full flex flex-col items-center overflow-hidden animate-fade-in relative justify-center",children:[!h&&m.jsx("div",{className:"bg-white/85 backdrop-blur-xl text-blue-900 rounded-lg shadow-lg relative overflow-hidden transition-all flex-shrink-0 flex flex-col justify-center text-center border border-white/40 w-fit max-w-[95%] mx-auto p-3 mb-1",children:m.jsx("p",{className:"relative z-10 leading-tight font-bold text-xs sm:text-base line-clamp-3",children:ro})}),m.jsx("div",{className:"flex-1 min-h-0 flex flex-col items-center relative w-full overflow-hidden justify-center",children:h?m.jsxs("div",{className:"flex flex-col animate-slide-up overflow-hidden w-fit max-w-sm mx-auto",children:[m.jsxs("div",{className:"bg-blue-50/90 border-r-4 border-blue-500 p-2 rounded-lg mb-1 flex-shrink-0 shadow-sm backdrop-blur-sm w-full",children:[m.jsx("span",{className:"text-[9px] font-bold text-blue-400 uppercase tracking-wider block",children:H("yourChoice",i)}),m.jsx("p",{className:"text-blue-900 font-bold text-xs leading-tight",children:na==null?void 0:na.text})]}),m.jsxs("div",{className:"bg-white/90 shadow-xl rounded-xl flex flex-col items-center text-center relative overflow-hidden border border-white/50 backdrop-blur-xl w-full",children:[m.jsxs("div",{className:"p-3 flex flex-col items-center",children:[m.jsx("div",{className:"w-5 h-5 sm:w-6 sm:h-6 bg-yellow-100 rounded-full flex items-center justify-center text-xs sm:text-sm mb-1 shadow-inner flex-shrink-0",children:""}),m.jsx("p",{className:"text-[11px] sm:text-sm text-gray-800 font-medium leading-normal px-1 whitespace-pre-wrap",children:s})]}),m.jsxs("div",{className:"w-full flex flex-col gap-1 p-2 bg-slate-50/80 border-t border-gray-100 flex-shrink-0 z-10",children:[m.jsxs(ae,{variant:"outline",className:"w-full py-1 text-[10px] text-blue-700 font-bold border-0 bg-blue-50/50 h-7",onClick:()=>{pe("pop"),d(!0)},children:[" ",H("moreInfo",i)]}),m.jsx(ae,{className:"w-full py-1.5 text-xs shadow-lg bg-blue-600 text-white rounded-lg font-black h-8",onClick:Iv,children:Vn||!L.secondaryDecisionQuestion?t.type==="QUIZ"?H("finishGame",i):H("finishLevel",i):H("next",i)})]})]})]}):m.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar flex flex-col gap-1 p-0.5 pb-1 w-fit max-w-full justify-center",children:ci==null?void 0:ci.map(V=>m.jsx("button",{disabled:!!h,className:"py-1.5 px-3 text-start rounded-lg transition-all shadow-sm font-bold text-gray-800 text-[10px] sm:text-sm bg-white/85 hover:bg-blue-50/90 hover:shadow-md min-h-[30px] flex items-center group flex-shrink-0 leading-3 sm:leading-tight mb-0.5 backdrop-blur-sm w-full",onClick:()=>{pe("click"),y(V.id),u(V.feedback)},children:m.jsxs("div",{className:"flex items-center gap-2 w-full",children:[m.jsx("span",{className:"flex-shrink-0 w-1.5 h-1.5 rounded-full bg-gray-300 group-hover:bg-blue-500"}),m.jsx("span",{className:"relative z-10 flex-1 py-1",children:V.text})]})},V.id))})}),c&&m.jsx("div",{className:"fixed inset-0 bg-black/60 z-[100] flex items-center justify-center p-4 backdrop-blur-md animate-fade-in",children:m.jsxs("div",{className:"bg-white/95 w-fit max-w-lg max-h-[80vh] flex flex-col rounded-2xl p-4 sm:p-6 shadow-2xl relative border border-white/50",children:[m.jsx("button",{onClick:()=>{pe("click"),d(!1)},className:"absolute top-3 left-3 w-6 h-6 bg-gray-100 rounded-full flex items-center justify-center font-bold text-sm z-10",children:""}),m.jsx("h3",{className:"text-base sm:text-lg font-black text-blue-900 mb-2 border-b pb-2 pl-4 leading-tight text-right",children:Av}),m.jsx("div",{className:"overflow-y-auto flex-1 mb-2 pl-1 custom-scrollbar",children:m.jsx("p",{className:"text-gray-900 text-xs sm:text-sm leading-relaxed whitespace-pre-line font-medium text-right",children:kv})}),m.jsx(ae,{fullWidth:!0,onClick:()=>{pe("click"),d(!1)},className:"py-2 text-sm font-black shadow-lg rounded-xl",children:H("understood",i)})]})})]})}},Ft=r==="INTRO",Sv=Ft&&!D?"blur-0":Ft?"blur-sm":"blur-0",xv=Ft&&!D?"bg-transparent":Ft?"bg-black/30":"bg-black/10";return m.jsxs("div",{className:"absolute inset-0 h-[100dvh] bg-slate-900 flex flex-col font-sans relative overflow-hidden",onClick:q,children:[t.data.backgroundImage&&m.jsxs("div",{className:`absolute inset-0 z-0 animate-fade-in transition-all duration-1000 ${R?"filter blur-[0px] scale-100":""}`,children:[m.jsx("img",{src:t.data.backgroundImage,className:`w-full h-full object-cover transition-all duration-1000 ${Ft?"opacity-100 scale-105":"opacity-100"} ${Sv}`,alt:"",onError:L=>L.currentTarget.style.display="none"}),m.jsx("div",{className:`absolute inset-0 transition-all duration-1000 ${xv}`})]}),m.jsxs("div",{className:`p-1 sm:p-2 flex justify-between items-center sticky top-0 z-20 transition-all flex-shrink-0 h-8 sm:h-12 bg-transparent pointer-events-none ${Ft&&!D?"opacity-0":"opacity-100"}`,children:[m.jsxs("div",{className:"flex gap-2 pointer-events-auto",children:[m.jsx(ae,{variant:"outline",className:"py-0.5 px-2 sm:py-1.5 sm:px-4 text-[9px] sm:text-xs rounded-full backdrop-blur-md font-bold shadow-lg bg-white/20 border-0 text-white hover:bg-white/30",onClick:n,children:H("backToMap",i)}),!Ft&&m.jsxs(ae,{variant:"outline",className:"py-0.5 px-2 sm:py-1.5 sm:px-3 text-[9px] sm:text-xs rounded-full backdrop-blur-md font-bold shadow-lg bg-white/20 border-0 text-white hover:bg-white/30 flex items-center gap-1",onClick:wv,children:[" ",H("stepBack",i)]}),t.data.digitalContent&&!Ft&&m.jsxs(ae,{variant:"secondary",className:"py-0.5 px-2 sm:py-1.5 sm:px-3 text-[9px] sm:text-xs rounded-full shadow-lg bg-yellow-400 text-blue-900 font-bold animate-pulse",onClick:()=>p(!0),children:[" ",H("moreInfo",i)]})]}),!Ft&&m.jsx("span",{className:"font-bold text-white text-[9px] sm:text-xs drop-shadow-md bg-black/40 px-2 py-0.5 rounded-full truncate max-w-[120px] backdrop-blur-md pointer-events-auto border border-white/20",children:t.title})]}),m.jsx("main",{className:"flex-1 p-1 sm:p-4 max-w-4xl mx-auto w-full relative z-10 flex flex-col min-h-0 overflow-hidden justify-start pointer-events-none",children:m.jsx("div",{className:"pointer-events-auto w-full h-full flex flex-col",children:Cv()})}),f&&t.data.digitalContent&&m.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-fade-in",onClick:()=>p(!1),children:m.jsx("div",{className:"w-fit max-w-md",onClick:L=>L.stopPropagation(),children:m.jsxs("div",{className:"relative",children:[m.jsx("button",{className:"absolute -top-3 -right-3 w-8 h-8 bg-white text-gray-800 rounded-full flex items-center justify-center font-bold shadow-lg border border-gray-200 z-50",onClick:()=>p(!1),children:""}),Rc(!1)]})})})]})};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let fT,pT;function hT(){return{geminiUrl:fT,vertexUrl:pT}}function mT(t,e,n,i){var r,o;if(!(t!=null&&t.baseUrl)){const s=hT();return e?(r=s.vertexUrl)!==null&&r!==void 0?r:n:(o=s.geminiUrl)!==null&&o!==void 0?o:i}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class nn{}function M(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(i,r)=>{if(Object.prototype.hasOwnProperty.call(e,r)){const o=e[r];return o!=null?String(o):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function l(t,e,n){for(let o=0;o<e.length-1;o++){const s=e[o];if(s.endsWith("[]")){const u=s.slice(0,-2);if(!(u in t))if(Array.isArray(n))t[u]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${s}`);if(Array.isArray(t[u])){const c=t[u];if(Array.isArray(n))for(let d=0;d<c.length;d++){const f=c[d];l(f,e.slice(o+1),n[d])}else for(const d of c)l(d,e.slice(o+1),n)}return}else if(s.endsWith("[0]")){const u=s.slice(0,-3);u in t||(t[u]=[{}]);const c=t[u];l(c[0],e.slice(o+1),n);return}(!t[s]||typeof t[s]!="object")&&(t[s]={}),t=t[s]}const i=e[e.length-1],r=t[i];if(r!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===r)return;if(typeof r=="object"&&typeof n=="object"&&r!==null&&n!==null)Object.assign(r,n);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else i==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[i]=n}function a(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let i=0;i<e.length;i++){if(typeof t!="object"||t===null)return n;const r=e[i];if(r.endsWith("[]")){const o=r.slice(0,-2);if(o in t){const s=t[o];return Array.isArray(s)?s.map(u=>a(u,e.slice(i+1),n)):n}else return n}else t=t[r]}return t}catch(i){if(i instanceof TypeError)return n;throw i}}function gT(t,e){for(const[n,i]of Object.entries(e)){const r=n.split("."),o=i.split("."),s=new Set;let u=-1;for(let c=0;c<r.length;c++)if(r[c]==="*"){u=c;break}if(u!==-1&&o.length>u)for(let c=u;c<o.length;c++){const d=o[c];d!=="*"&&!d.endsWith("[]")&&!d.endsWith("[0]")&&s.add(d)}Fl(t,r,o,0,s)}}function Fl(t,e,n,i,r){if(i>=e.length||typeof t!="object"||t===null)return;const o=e[i];if(o.endsWith("[]")){const s=o.slice(0,-2),u=t;if(s in u&&Array.isArray(u[s]))for(const c of u[s])Fl(c,e,n,i+1,r)}else if(o==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const s=t,u=Object.keys(s).filter(d=>!d.startsWith("_")&&!r.has(d)),c={};for(const d of u)c[d]=s[d];for(const[d,f]of Object.entries(c)){const p=[];for(const h of n.slice(i))h==="*"?p.push(d):p.push(h);l(s,p,f)}for(const d of u)delete s[d]}}else{const s=t;o in s&&Fl(s[o],e,n,i+1,r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Xu(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function yT(t){const e={},n=a(t,["operationName"]);n!=null&&l(e,["operationName"],n);const i=a(t,["resourceName"]);return i!=null&&l(e,["_url","resourceName"],i),e}function vT(t){const e={},n=a(t,["name"]);n!=null&&l(e,["name"],n);const i=a(t,["metadata"]);i!=null&&l(e,["metadata"],i);const r=a(t,["done"]);r!=null&&l(e,["done"],r);const o=a(t,["error"]);o!=null&&l(e,["error"],o);const s=a(t,["response","generateVideoResponse"]);return s!=null&&l(e,["response"],TT(s)),e}function _T(t){const e={},n=a(t,["name"]);n!=null&&l(e,["name"],n);const i=a(t,["metadata"]);i!=null&&l(e,["metadata"],i);const r=a(t,["done"]);r!=null&&l(e,["done"],r);const o=a(t,["error"]);o!=null&&l(e,["error"],o);const s=a(t,["response"]);return s!=null&&l(e,["response"],ET(s)),e}function TT(t){const e={},n=a(t,["generatedSamples"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>IT(s))),l(e,["generatedVideos"],o)}const i=a(t,["raiMediaFilteredCount"]);i!=null&&l(e,["raiMediaFilteredCount"],i);const r=a(t,["raiMediaFilteredReasons"]);return r!=null&&l(e,["raiMediaFilteredReasons"],r),e}function ET(t){const e={},n=a(t,["videos"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>wT(s))),l(e,["generatedVideos"],o)}const i=a(t,["raiMediaFilteredCount"]);i!=null&&l(e,["raiMediaFilteredCount"],i);const r=a(t,["raiMediaFilteredReasons"]);return r!=null&&l(e,["raiMediaFilteredReasons"],r),e}function IT(t){const e={},n=a(t,["video"]);return n!=null&&l(e,["video"],NT(n)),e}function wT(t){const e={},n=a(t,["_self"]);return n!=null&&l(e,["video"],RT(n)),e}function CT(t){const e={},n=a(t,["operationName"]);return n!=null&&l(e,["_url","operationName"],n),e}function ST(t){const e={},n=a(t,["operationName"]);return n!=null&&l(e,["_url","operationName"],n),e}function xT(t){const e={},n=a(t,["name"]);n!=null&&l(e,["name"],n);const i=a(t,["metadata"]);i!=null&&l(e,["metadata"],i);const r=a(t,["done"]);r!=null&&l(e,["done"],r);const o=a(t,["error"]);o!=null&&l(e,["error"],o);const s=a(t,["response"]);return s!=null&&l(e,["response"],AT(s)),e}function AT(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const i=a(t,["parent"]);i!=null&&l(e,["parent"],i);const r=a(t,["documentName"]);return r!=null&&l(e,["documentName"],r),e}function pg(t){const e={},n=a(t,["name"]);n!=null&&l(e,["name"],n);const i=a(t,["metadata"]);i!=null&&l(e,["metadata"],i);const r=a(t,["done"]);r!=null&&l(e,["done"],r);const o=a(t,["error"]);o!=null&&l(e,["error"],o);const s=a(t,["response"]);return s!=null&&l(e,["response"],kT(s)),e}function kT(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const i=a(t,["parent"]);i!=null&&l(e,["parent"],i);const r=a(t,["documentName"]);return r!=null&&l(e,["documentName"],r),e}function NT(t){const e={},n=a(t,["uri"]);n!=null&&l(e,["uri"],n);const i=a(t,["encodedVideo"]);i!=null&&l(e,["videoBytes"],Xu(i));const r=a(t,["encoding"]);return r!=null&&l(e,["mimeType"],r),e}function RT(t){const e={},n=a(t,["gcsUri"]);n!=null&&l(e,["uri"],n);const i=a(t,["bytesBase64Encoded"]);i!=null&&l(e,["videoBytes"],Xu(i));const r=a(t,["mimeType"]);return r!=null&&l(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Gd;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Gd||(Gd={}));var qd;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(qd||(qd={}));var $d;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})($d||($d={}));var _n;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(_n||(_n={}));var zd;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(zd||(zd={}));var Wd;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(Wd||(Wd={}));var Jd;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(Jd||(Jd={}));var Kd;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(Kd||(Kd={}));var Yd;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(Yd||(Yd={}));var Qd;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.HIGH="HIGH"})(Qd||(Qd={}));var Xd;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(Xd||(Xd={}));var Zd;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(Zd||(Zd={}));var jd;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(jd||(jd={}));var ef;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE"})(ef||(ef={}));var tf;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(tf||(tf={}));var nf;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(nf||(nf={}));var rf;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(rf||(rf={}));var of;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(of||(of={}));var sf;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(sf||(sf={}));var gs;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(gs||(gs={}));var af;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(af||(af={}));var lf;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(lf||(lf={}));var uf;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(uf||(uf={}));var Ol;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Ol||(Ol={}));var cf;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(cf||(cf={}));var df;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(df||(df={}));var ff;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(ff||(ff={}));var pf;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(pf||(pf={}));var hf;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(hf||(hf={}));var mf;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(mf||(mf={}));var gf;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(gf||(gf={}));var yf;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(yf||(yf={}));var vf;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(vf||(vf={}));var _f;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(_f||(_f={}));var Tf;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(Tf||(Tf={}));var Ef;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(Ef||(Ef={}));var If;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(If||(If={}));var wf;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(wf||(wf={}));var Cf;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(Cf||(Cf={}));var Sf;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(Sf||(Sf={}));var xf;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(xf||(xf={}));var Af;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(Af||(Af={}));var kf;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(kf||(kf={}));var Nf;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(Nf||(Nf={}));var Rf;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(Rf||(Rf={}));var Pf;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(Pf||(Pf={}));var Mf;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(Mf||(Mf={}));var bf;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(bf||(bf={}));var Df;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(Df||(Df={}));var Lf;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Lf||(Lf={}));var Uf;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(Uf||(Uf={}));var Ff;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Ff||(Ff={}));var Of;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(Of||(Of={}));var Vf;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(Vf||(Vf={}));var Ci;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(Ci||(Ci={}));class Vl{constructor(e){const n={};for(const i of e.headers.entries())n[i[0]]=i[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class ur{get text(){var e,n,i,r,o,s,u,c;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let d="",f=!1;const p=[];for(const h of(c=(u=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||u===void 0?void 0:u.parts)!==null&&c!==void 0?c:[]){for(const[y,T]of Object.entries(h))y!=="text"&&y!=="thought"&&y!=="thoughtSignature"&&(T!==null||T!==void 0)&&p.push(y);if(typeof h.text=="string"){if(typeof h.thought=="boolean"&&h.thought)continue;f=!0,d+=h.text}}return p.length>0&&console.warn(`there are non-text parts ${p} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),f?d:void 0}get data(){var e,n,i,r,o,s,u,c;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let d="";const f=[];for(const p of(c=(u=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||u===void 0?void 0:u.parts)!==null&&c!==void 0?c:[]){for(const[h,y]of Object.entries(p))h!=="inlineData"&&(y!==null||y!==void 0)&&f.push(h);p.inlineData&&typeof p.inlineData.data=="string"&&(d+=atob(p.inlineData.data))}return f.length>0&&console.warn(`there are non-data parts ${f} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),d.length>0?btoa(d):void 0}get functionCalls(){var e,n,i,r,o,s,u,c;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const d=(c=(u=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||u===void 0?void 0:u.parts)===null||c===void 0?void 0:c.filter(f=>f.functionCall).map(f=>f.functionCall).filter(f=>f!==void 0);if((d==null?void 0:d.length)!==0)return d}get executableCode(){var e,n,i,r,o,s,u,c,d;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const f=(c=(u=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||u===void 0?void 0:u.parts)===null||c===void 0?void 0:c.filter(p=>p.executableCode).map(p=>p.executableCode).filter(p=>p!==void 0);if((f==null?void 0:f.length)!==0)return(d=f==null?void 0:f[0])===null||d===void 0?void 0:d.code}get codeExecutionResult(){var e,n,i,r,o,s,u,c,d;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const f=(c=(u=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||u===void 0?void 0:u.parts)===null||c===void 0?void 0:c.filter(p=>p.codeExecutionResult).map(p=>p.codeExecutionResult).filter(p=>p!==void 0);if((f==null?void 0:f.length)!==0)return(d=f==null?void 0:f[0])===null||d===void 0?void 0:d.output}}class Hf{}class Bf{}class PT{}class MT{}class bT{}class DT{}class Gf{}class qf{}class $f{}class LT{}class ys{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new ys;let r;const o=e;return n?r=_T(o):r=vT(o),Object.assign(i,r),i}}class zf{}class Wf{}class Jf{}class UT{}class FT{}class OT{}class Zu{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new Zu,o=xT(e);return Object.assign(i,o),i}}class VT{}class HT{}class BT{}class Kf{}class GT{get text(){var e,n,i;let r="",o=!1;const s=[];for(const u of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[c,d]of Object.entries(u))c!=="text"&&c!=="thought"&&d!==null&&s.push(c);if(typeof u.text=="string"){if(typeof u.thought=="boolean"&&u.thought)continue;o=!0,r+=u.text}}return s.length>0&&console.warn(`there are non-text parts ${s} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),o?r:void 0}get data(){var e,n,i;let r="";const o=[];for(const s of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[u,c]of Object.entries(s))u!=="inlineData"&&c!==null&&o.push(u);s.inlineData&&typeof s.inlineData.data=="string"&&(r+=atob(s.inlineData.data))}return o.length>0&&console.warn(`there are non-data parts ${o} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class qT{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class ju{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new ju,o=pg(e);return Object.assign(i,o),i}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ee(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function hg(t,e){const n=ee(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function mg(t){return Array.isArray(t)?t.map(e=>vs(e)):[vs(t)]}function vs(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function gg(t){const e=vs(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function yg(t){const e=vs(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Yf(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function vg(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>Yf(e)):[Yf(t)]}function Hl(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function Qf(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function Xf(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function Le(t){if(t==null)throw new Error("ContentUnion is required");return Hl(t)?t:{role:"user",parts:vg(t)}}function ec(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const i=Le(n);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(t.isVertexAI()){const n=Le(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>Le(n)):[Le(e)]}function ct(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(Qf(t)||Xf(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Le(t)]}const e=[],n=[],i=Hl(t[0]);for(const r of t){const o=Hl(r);if(o!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(o)e.push(r);else{if(Qf(r)||Xf(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(r)}}return i||e.push({role:"user",parts:vg(n)}),e}function $T(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(i=>i!=="null");if(n.length===1)e.type=Object.values(_n).includes(n[0].toUpperCase())?n[0].toUpperCase():_n.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const i of n)e.anyOf.push({type:Object.values(_n).includes(i.toUpperCase())?i.toUpperCase():_n.TYPE_UNSPECIFIED})}}function Mi(t){const e={},n=["items"],i=["anyOf"],r=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const o=t.anyOf;o!=null&&o.length==2&&(o[0].type==="null"?(e.nullable=!0,t=o[1]):o[1].type==="null"&&(e.nullable=!0,t=o[0])),t.type instanceof Array&&$T(t.type,e);for(const[s,u]of Object.entries(t))if(u!=null)if(s=="type"){if(u==="null")throw new Error("type: null can not be the only possible type for the field.");if(u instanceof Array)continue;e.type=Object.values(_n).includes(u.toUpperCase())?u.toUpperCase():_n.TYPE_UNSPECIFIED}else if(n.includes(s))e[s]=Mi(u);else if(i.includes(s)){const c=[];for(const d of u){if(d.type=="null"){e.nullable=!0;continue}c.push(Mi(d))}e[s]=c}else if(r.includes(s)){const c={};for(const[d,f]of Object.entries(u))c[d]=Mi(f);e[s]=c}else{if(s==="additionalProperties")continue;e[s]=u}return e}function tc(t){return Mi(t)}function nc(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function ic(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function Ki(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Mi(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Mi(e.response));return t}function Yi(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function zT(t,e,n,i=1){const r=!e.startsWith(`${n}/`)&&e.split("/").length===i;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:r?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:r?`${n}/${e}`:e}function rn(t,e){if(typeof e!="string")throw new Error("name must be a string");return zT(t,e,"cachedContents")}function _g(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function Fn(t){return Xu(t)}function WT(t){return t!=null&&typeof t=="object"&&"name"in t}function JT(t){return t!=null&&typeof t=="object"&&"video"in t}function KT(t){return t!=null&&typeof t=="object"&&"uri"in t}function Tg(t){var e;let n;if(WT(t)&&(n=t.name),!(KT(t)&&(n=t.uri,n===void 0))&&!(JT(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const r=n.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${n}`);n=r[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function Eg(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function Ig(t){for(const e of["models","tunedModels","publisherModels"])if(YT(t,e))return t[e];return[]}function YT(t,e){return t!==null&&typeof t=="object"&&e in t}function QT(t,e={}){const n=t,i={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(i.responseJsonSchema=n.outputSchema),e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function XT(t,e={}){const n=[],i=new Set;for(const r of t){const o=r.name;if(i.has(o))throw new Error(`Duplicate function name ${o} found in MCP tools. Please ensure function names are unique.`);i.add(o);const s=QT(r,e);s.functionDeclarations&&n.push(...s.functionDeclarations)}return{functionDeclarations:n}}function wg(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const i=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,r=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(r>0||i!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(i>0||r!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function ZT(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function Cg(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const r=n.inlinedResponses;if(!Array.isArray(r)||r.length===0)return t;let o=!1;for(const s of r){if(typeof s!="object"||s===null)continue;const c=s.response;if(typeof c!="object"||c===null)continue;if(c.embedding!==void 0){o=!0;break}}return o&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function Qi(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function Sg(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function jT(t){const e={},n=a(t,["responsesFile"]);n!=null&&l(e,["fileName"],n);const i=a(t,["inlinedResponses","inlinedResponses"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>bE(s))),l(e,["inlinedResponses"],o)}const r=a(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>s)),l(e,["inlinedEmbedContentResponses"],o)}return e}function eE(t){const e={},n=a(t,["predictionsFormat"]);n!=null&&l(e,["format"],n);const i=a(t,["gcsDestination","outputUriPrefix"]);i!=null&&l(e,["gcsUri"],i);const r=a(t,["bigqueryDestination","outputUri"]);return r!=null&&l(e,["bigqueryUri"],r),e}function tE(t){const e={},n=a(t,["format"]);n!=null&&l(e,["predictionsFormat"],n);const i=a(t,["gcsUri"]);i!=null&&l(e,["gcsDestination","outputUriPrefix"],i);const r=a(t,["bigqueryUri"]);if(r!=null&&l(e,["bigqueryDestination","outputUri"],r),a(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(a(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(a(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function Ho(t){const e={},n=a(t,["name"]);n!=null&&l(e,["name"],n);const i=a(t,["metadata","displayName"]);i!=null&&l(e,["displayName"],i);const r=a(t,["metadata","state"]);r!=null&&l(e,["state"],Sg(r));const o=a(t,["metadata","createTime"]);o!=null&&l(e,["createTime"],o);const s=a(t,["metadata","endTime"]);s!=null&&l(e,["endTime"],s);const u=a(t,["metadata","updateTime"]);u!=null&&l(e,["updateTime"],u);const c=a(t,["metadata","model"]);c!=null&&l(e,["model"],c);const d=a(t,["metadata","output"]);return d!=null&&l(e,["dest"],jT(Cg(d))),e}function Bl(t){const e={},n=a(t,["name"]);n!=null&&l(e,["name"],n);const i=a(t,["displayName"]);i!=null&&l(e,["displayName"],i);const r=a(t,["state"]);r!=null&&l(e,["state"],Sg(r));const o=a(t,["error"]);o!=null&&l(e,["error"],o);const s=a(t,["createTime"]);s!=null&&l(e,["createTime"],s);const u=a(t,["startTime"]);u!=null&&l(e,["startTime"],u);const c=a(t,["endTime"]);c!=null&&l(e,["endTime"],c);const d=a(t,["updateTime"]);d!=null&&l(e,["updateTime"],d);const f=a(t,["model"]);f!=null&&l(e,["model"],f);const p=a(t,["inputConfig"]);p!=null&&l(e,["src"],nE(p));const h=a(t,["outputConfig"]);h!=null&&l(e,["dest"],eE(Cg(h)));const y=a(t,["completionStats"]);return y!=null&&l(e,["completionStats"],y),e}function nE(t){const e={},n=a(t,["instancesFormat"]);n!=null&&l(e,["format"],n);const i=a(t,["gcsSource","uris"]);i!=null&&l(e,["gcsUri"],i);const r=a(t,["bigquerySource","inputUri"]);return r!=null&&l(e,["bigqueryUri"],r),e}function iE(t,e){const n={};if(a(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(a(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(a(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=a(e,["fileName"]);i!=null&&l(n,["fileName"],i);const r=a(e,["inlinedRequests"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>ME(t,s))),l(n,["requests","requests"],o)}return n}function rE(t){const e={},n=a(t,["format"]);n!=null&&l(e,["instancesFormat"],n);const i=a(t,["gcsUri"]);i!=null&&l(e,["gcsSource","uris"],i);const r=a(t,["bigqueryUri"]);if(r!=null&&l(e,["bigquerySource","inputUri"],r),a(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(a(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function oE(t){const e={},n=a(t,["data"]);if(n!=null&&l(e,["data"],n),a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=a(t,["mimeType"]);return i!=null&&l(e,["mimeType"],i),e}function sE(t,e){const n={},i=a(e,["name"]);return i!=null&&l(n,["_url","name"],Qi(t,i)),n}function aE(t,e){const n={},i=a(e,["name"]);return i!=null&&l(n,["_url","name"],Qi(t,i)),n}function lE(t){const e={},n=a(t,["content"]);n!=null&&l(e,["content"],n);const i=a(t,["citationMetadata"]);i!=null&&l(e,["citationMetadata"],uE(i));const r=a(t,["tokenCount"]);r!=null&&l(e,["tokenCount"],r);const o=a(t,["finishReason"]);o!=null&&l(e,["finishReason"],o);const s=a(t,["avgLogprobs"]);s!=null&&l(e,["avgLogprobs"],s);const u=a(t,["groundingMetadata"]);u!=null&&l(e,["groundingMetadata"],u);const c=a(t,["index"]);c!=null&&l(e,["index"],c);const d=a(t,["logprobsResult"]);d!=null&&l(e,["logprobsResult"],d);const f=a(t,["safetyRatings"]);if(f!=null){let h=f;Array.isArray(h)&&(h=h.map(y=>y)),l(e,["safetyRatings"],h)}const p=a(t,["urlContextMetadata"]);return p!=null&&l(e,["urlContextMetadata"],p),e}function uE(t){const e={},n=a(t,["citationSources"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>r)),l(e,["citations"],i)}return e}function xg(t){const e={},n=a(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>HE(o))),l(e,["parts"],r)}const i=a(t,["role"]);return i!=null&&l(e,["role"],i),e}function cE(t,e){const n={},i=a(t,["displayName"]);if(e!==void 0&&i!=null&&l(e,["batch","displayName"],i),a(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function dE(t,e){const n={},i=a(t,["displayName"]);e!==void 0&&i!=null&&l(e,["displayName"],i);const r=a(t,["dest"]);return e!==void 0&&r!=null&&l(e,["outputConfig"],tE(ZT(r))),n}function Zf(t,e){const n={},i=a(e,["model"]);i!=null&&l(n,["_url","model"],ee(t,i));const r=a(e,["src"]);r!=null&&l(n,["batch","inputConfig"],iE(t,wg(t,r)));const o=a(e,["config"]);return o!=null&&cE(o,n),n}function fE(t,e){const n={},i=a(e,["model"]);i!=null&&l(n,["model"],ee(t,i));const r=a(e,["src"]);r!=null&&l(n,["inputConfig"],rE(wg(t,r)));const o=a(e,["config"]);return o!=null&&dE(o,n),n}function pE(t,e){const n={},i=a(t,["displayName"]);return e!==void 0&&i!=null&&l(e,["batch","displayName"],i),n}function hE(t,e){const n={},i=a(e,["model"]);i!=null&&l(n,["_url","model"],ee(t,i));const r=a(e,["src"]);r!=null&&l(n,["batch","inputConfig"],EE(t,r));const o=a(e,["config"]);return o!=null&&pE(o,n),n}function mE(t,e){const n={},i=a(e,["name"]);return i!=null&&l(n,["_url","name"],Qi(t,i)),n}function gE(t,e){const n={},i=a(e,["name"]);return i!=null&&l(n,["_url","name"],Qi(t,i)),n}function yE(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const i=a(t,["name"]);i!=null&&l(e,["name"],i);const r=a(t,["done"]);r!=null&&l(e,["done"],r);const o=a(t,["error"]);return o!=null&&l(e,["error"],o),e}function vE(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const i=a(t,["name"]);i!=null&&l(e,["name"],i);const r=a(t,["done"]);r!=null&&l(e,["done"],r);const o=a(t,["error"]);return o!=null&&l(e,["error"],o),e}function _E(t,e){const n={},i=a(e,["contents"]);if(i!=null){let o=ec(t,i);Array.isArray(o)&&(o=o.map(s=>s)),l(n,["requests[]","request","content"],o)}const r=a(e,["config"]);return r!=null&&(l(n,["_self"],TE(r,n)),gT(n,{"requests[].*":"requests[].request.*"})),n}function TE(t,e){const n={},i=a(t,["taskType"]);e!==void 0&&i!=null&&l(e,["requests[]","taskType"],i);const r=a(t,["title"]);e!==void 0&&r!=null&&l(e,["requests[]","title"],r);const o=a(t,["outputDimensionality"]);if(e!==void 0&&o!=null&&l(e,["requests[]","outputDimensionality"],o),a(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(a(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function EE(t,e){const n={},i=a(e,["fileName"]);i!=null&&l(n,["file_name"],i);const r=a(e,["inlinedRequests"]);return r!=null&&l(n,["requests"],_E(t,r)),n}function IE(t){const e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=a(t,["fileUri"]);n!=null&&l(e,["fileUri"],n);const i=a(t,["mimeType"]);return i!=null&&l(e,["mimeType"],i),e}function wE(t){const e={},n=a(t,["id"]);n!=null&&l(e,["id"],n);const i=a(t,["args"]);i!=null&&l(e,["args"],i);const r=a(t,["name"]);if(r!=null&&l(e,["name"],r),a(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(a(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function CE(t){const e={},n=a(t,["mode"]);n!=null&&l(e,["mode"],n);const i=a(t,["allowedFunctionNames"]);if(i!=null&&l(e,["allowedFunctionNames"],i),a(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function SE(t,e,n){const i={},r=a(e,["systemInstruction"]);n!==void 0&&r!=null&&l(n,["systemInstruction"],xg(Le(r)));const o=a(e,["temperature"]);o!=null&&l(i,["temperature"],o);const s=a(e,["topP"]);s!=null&&l(i,["topP"],s);const u=a(e,["topK"]);u!=null&&l(i,["topK"],u);const c=a(e,["candidateCount"]);c!=null&&l(i,["candidateCount"],c);const d=a(e,["maxOutputTokens"]);d!=null&&l(i,["maxOutputTokens"],d);const f=a(e,["stopSequences"]);f!=null&&l(i,["stopSequences"],f);const p=a(e,["responseLogprobs"]);p!=null&&l(i,["responseLogprobs"],p);const h=a(e,["logprobs"]);h!=null&&l(i,["logprobs"],h);const y=a(e,["presencePenalty"]);y!=null&&l(i,["presencePenalty"],y);const T=a(e,["frequencyPenalty"]);T!=null&&l(i,["frequencyPenalty"],T);const E=a(e,["seed"]);E!=null&&l(i,["seed"],E);const w=a(e,["responseMimeType"]);w!=null&&l(i,["responseMimeType"],w);const _=a(e,["responseSchema"]);_!=null&&l(i,["responseSchema"],tc(_));const g=a(e,["responseJsonSchema"]);if(g!=null&&l(i,["responseJsonSchema"],g),a(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(a(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const v=a(e,["safetySettings"]);if(n!==void 0&&v!=null){let Q=v;Array.isArray(Q)&&(Q=Q.map(te=>BE(te))),l(n,["safetySettings"],Q)}const I=a(e,["tools"]);if(n!==void 0&&I!=null){let Q=Yi(I);Array.isArray(Q)&&(Q=Q.map(te=>qE(Ki(te)))),l(n,["tools"],Q)}const C=a(e,["toolConfig"]);if(n!==void 0&&C!=null&&l(n,["toolConfig"],GE(C)),a(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const x=a(e,["cachedContent"]);n!==void 0&&x!=null&&l(n,["cachedContent"],rn(t,x));const A=a(e,["responseModalities"]);A!=null&&l(i,["responseModalities"],A);const N=a(e,["mediaResolution"]);N!=null&&l(i,["mediaResolution"],N);const P=a(e,["speechConfig"]);if(P!=null&&l(i,["speechConfig"],nc(P)),a(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const R=a(e,["thinkingConfig"]);R!=null&&l(i,["thinkingConfig"],R);const K=a(e,["imageConfig"]);return K!=null&&l(i,["imageConfig"],PE(K)),i}function xE(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const i=a(t,["candidates"]);if(i!=null){let c=i;Array.isArray(c)&&(c=c.map(d=>lE(d))),l(e,["candidates"],c)}const r=a(t,["modelVersion"]);r!=null&&l(e,["modelVersion"],r);const o=a(t,["promptFeedback"]);o!=null&&l(e,["promptFeedback"],o);const s=a(t,["responseId"]);s!=null&&l(e,["responseId"],s);const u=a(t,["usageMetadata"]);return u!=null&&l(e,["usageMetadata"],u),e}function AE(t,e){const n={},i=a(e,["name"]);return i!=null&&l(n,["_url","name"],Qi(t,i)),n}function kE(t,e){const n={},i=a(e,["name"]);return i!=null&&l(n,["_url","name"],Qi(t,i)),n}function NE(t){const e={};if(a(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=a(t,["enableWidget"]);return n!=null&&l(e,["enableWidget"],n),e}function RE(t){const e={};if(a(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(a(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=a(t,["timeRangeFilter"]);return n!=null&&l(e,["timeRangeFilter"],n),e}function PE(t){const e={},n=a(t,["aspectRatio"]);n!=null&&l(e,["aspectRatio"],n);const i=a(t,["imageSize"]);if(i!=null&&l(e,["imageSize"],i),a(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(a(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function ME(t,e){const n={},i=a(e,["model"]);i!=null&&l(n,["request","model"],ee(t,i));const r=a(e,["contents"]);if(r!=null){let u=ct(r);Array.isArray(u)&&(u=u.map(c=>xg(c))),l(n,["request","contents"],u)}const o=a(e,["metadata"]);o!=null&&l(n,["metadata"],o);const s=a(e,["config"]);return s!=null&&l(n,["request","generationConfig"],SE(t,s,a(n,["request"],{}))),n}function bE(t){const e={},n=a(t,["response"]);n!=null&&l(e,["response"],xE(n));const i=a(t,["error"]);return i!=null&&l(e,["error"],i),e}function DE(t,e){const n={},i=a(t,["pageSize"]);e!==void 0&&i!=null&&l(e,["_query","pageSize"],i);const r=a(t,["pageToken"]);if(e!==void 0&&r!=null&&l(e,["_query","pageToken"],r),a(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function LE(t,e){const n={},i=a(t,["pageSize"]);e!==void 0&&i!=null&&l(e,["_query","pageSize"],i);const r=a(t,["pageToken"]);e!==void 0&&r!=null&&l(e,["_query","pageToken"],r);const o=a(t,["filter"]);return e!==void 0&&o!=null&&l(e,["_query","filter"],o),n}function UE(t){const e={},n=a(t,["config"]);return n!=null&&DE(n,e),e}function FE(t){const e={},n=a(t,["config"]);return n!=null&&LE(n,e),e}function OE(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const i=a(t,["nextPageToken"]);i!=null&&l(e,["nextPageToken"],i);const r=a(t,["operations"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>Ho(s))),l(e,["batchJobs"],o)}return e}function VE(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const i=a(t,["nextPageToken"]);i!=null&&l(e,["nextPageToken"],i);const r=a(t,["batchPredictionJobs"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>Bl(s))),l(e,["batchJobs"],o)}return e}function HE(t){const e={},n=a(t,["mediaResolution"]);n!=null&&l(e,["mediaResolution"],n);const i=a(t,["codeExecutionResult"]);i!=null&&l(e,["codeExecutionResult"],i);const r=a(t,["executableCode"]);r!=null&&l(e,["executableCode"],r);const o=a(t,["fileData"]);o!=null&&l(e,["fileData"],IE(o));const s=a(t,["functionCall"]);s!=null&&l(e,["functionCall"],wE(s));const u=a(t,["functionResponse"]);u!=null&&l(e,["functionResponse"],u);const c=a(t,["inlineData"]);c!=null&&l(e,["inlineData"],oE(c));const d=a(t,["text"]);d!=null&&l(e,["text"],d);const f=a(t,["thought"]);f!=null&&l(e,["thought"],f);const p=a(t,["thoughtSignature"]);p!=null&&l(e,["thoughtSignature"],p);const h=a(t,["videoMetadata"]);return h!=null&&l(e,["videoMetadata"],h),e}function BE(t){const e={},n=a(t,["category"]);if(n!=null&&l(e,["category"],n),a(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=a(t,["threshold"]);return i!=null&&l(e,["threshold"],i),e}function GE(t){const e={},n=a(t,["functionCallingConfig"]);n!=null&&l(e,["functionCallingConfig"],CE(n));const i=a(t,["retrievalConfig"]);return i!=null&&l(e,["retrievalConfig"],i),e}function qE(t){const e={},n=a(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(p=>p)),l(e,["functionDeclarations"],f)}if(a(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=a(t,["googleSearchRetrieval"]);i!=null&&l(e,["googleSearchRetrieval"],i);const r=a(t,["computerUse"]);r!=null&&l(e,["computerUse"],r);const o=a(t,["fileSearch"]);o!=null&&l(e,["fileSearch"],o);const s=a(t,["codeExecution"]);if(s!=null&&l(e,["codeExecution"],s),a(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=a(t,["googleMaps"]);u!=null&&l(e,["googleMaps"],NE(u));const c=a(t,["googleSearch"]);c!=null&&l(e,["googleSearch"],RE(c));const d=a(t,["urlContext"]);return d!=null&&l(e,["urlContext"],d),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Xt;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(Xt||(Xt={}));class ai{constructor(e,n,i,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,i,r)}init(e,n,i){var r,o;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let s={config:{}};!i||Object.keys(i).length===0?s={config:{}}:typeof i=="object"?s=Object.assign({},i):s=i,s.config&&(s.config.pageToken=n.nextPageToken),this.paramsInternal=s,this.pageInternalSize=(o=(r=s.config)===null||r===void 0?void 0:r.pageSize)!==null&&o!==void 0?o:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class $E extends nn{constructor(e){super(),this.apiClient=e,this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)},this.list=async(n={})=>new ai(Xt.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(n),n)}createInlinedGenerateContentRequest(e){const n=Zf(this.apiClient,e),i=n._url,r=M("{model}:batchGenerateContent",i),u=n.batch.inputConfig.requests,c=u.requests,d=[];for(const f of c){const p=Object.assign({},f);if(p.systemInstruction){const h=p.systemInstruction;delete p.systemInstruction;const y=p.request;y.systemInstruction=h,p.request=y}d.push(p)}return u.requests=d,delete n.config,delete n._url,delete n._query,{path:r,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const i=n?Object.assign({},n):{},r=Date.now().toString();if(i.displayName||(i.displayName=`genaiBatchJob_${r}`),i.dest===void 0){const o=this.getGcsUri(e),s=this.getBigqueryUri(e);if(o)o.endsWith(".jsonl")?i.dest=`${o.slice(0,-6)}/dest`:i.dest=`${o}_dest_${r}`;else if(s)i.dest=`${s}_dest_${r}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return i}async createInternal(e){var n,i,r,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=fE(this.apiClient,e);return u=M("batchPredictionJobs",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>Bl(f))}else{const d=Zf(this.apiClient,e);return u=M("{model}:batchGenerateContent",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>Ho(f))}}async createEmbeddingsInternal(e){var n,i;let r,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=hE(this.apiClient,e);return o=M("{model}:asyncBatchEmbedContent",u._url),s=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),r.then(c=>Ho(c))}}async get(e){var n,i,r,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=kE(this.apiClient,e);return u=M("batchPredictionJobs/{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>Bl(f))}else{const d=AE(this.apiClient,e);return u=M("batches/{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>Ho(f))}}async cancel(e){var n,i,r,o;let s="",u={};if(this.apiClient.isVertexAI()){const c=aE(this.apiClient,e);s=M("batchPredictionJobs/{name}:cancel",c._url),u=c._query,delete c._url,delete c._query,await this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const c=sE(this.apiClient,e);s=M("batches/{name}:cancel",c._url),u=c._query,delete c._url,delete c._query,await this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var n,i,r,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=FE(e);return u=M("batchPredictionJobs",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=VE(f),h=new Kf;return Object.assign(h,p),h})}else{const d=UE(e);return u=M("batches",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=OE(f),h=new Kf;return Object.assign(h,p),h})}}async delete(e){var n,i,r,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=gE(this.apiClient,e);return u=M("batchPredictionJobs/{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>vE(f))}else{const d=mE(this.apiClient,e);return u=M("batches/{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>yE(f))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function zE(t){const e={},n=a(t,["data"]);if(n!=null&&l(e,["data"],n),a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=a(t,["mimeType"]);return i!=null&&l(e,["mimeType"],i),e}function jf(t){const e={},n=a(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>hI(o))),l(e,["parts"],r)}const i=a(t,["role"]);return i!=null&&l(e,["role"],i),e}function WE(t,e){const n={},i=a(t,["ttl"]);e!==void 0&&i!=null&&l(e,["ttl"],i);const r=a(t,["expireTime"]);e!==void 0&&r!=null&&l(e,["expireTime"],r);const o=a(t,["displayName"]);e!==void 0&&o!=null&&l(e,["displayName"],o);const s=a(t,["contents"]);if(e!==void 0&&s!=null){let f=ct(s);Array.isArray(f)&&(f=f.map(p=>jf(p))),l(e,["contents"],f)}const u=a(t,["systemInstruction"]);e!==void 0&&u!=null&&l(e,["systemInstruction"],jf(Le(u)));const c=a(t,["tools"]);if(e!==void 0&&c!=null){let f=c;Array.isArray(f)&&(f=f.map(p=>gI(p))),l(e,["tools"],f)}const d=a(t,["toolConfig"]);if(e!==void 0&&d!=null&&l(e,["toolConfig"],mI(d)),a(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function JE(t,e){const n={},i=a(t,["ttl"]);e!==void 0&&i!=null&&l(e,["ttl"],i);const r=a(t,["expireTime"]);e!==void 0&&r!=null&&l(e,["expireTime"],r);const o=a(t,["displayName"]);e!==void 0&&o!=null&&l(e,["displayName"],o);const s=a(t,["contents"]);if(e!==void 0&&s!=null){let p=ct(s);Array.isArray(p)&&(p=p.map(h=>h)),l(e,["contents"],p)}const u=a(t,["systemInstruction"]);e!==void 0&&u!=null&&l(e,["systemInstruction"],Le(u));const c=a(t,["tools"]);if(e!==void 0&&c!=null){let p=c;Array.isArray(p)&&(p=p.map(h=>yI(h))),l(e,["tools"],p)}const d=a(t,["toolConfig"]);e!==void 0&&d!=null&&l(e,["toolConfig"],d);const f=a(t,["kmsKeyName"]);return e!==void 0&&f!=null&&l(e,["encryption_spec","kmsKeyName"],f),n}function KE(t,e){const n={},i=a(e,["model"]);i!=null&&l(n,["model"],hg(t,i));const r=a(e,["config"]);return r!=null&&WE(r,n),n}function YE(t,e){const n={},i=a(e,["model"]);i!=null&&l(n,["model"],hg(t,i));const r=a(e,["config"]);return r!=null&&JE(r,n),n}function QE(t,e){const n={},i=a(e,["name"]);return i!=null&&l(n,["_url","name"],rn(t,i)),n}function XE(t,e){const n={},i=a(e,["name"]);return i!=null&&l(n,["_url","name"],rn(t,i)),n}function ZE(t){const e={},n=a(t,["sdkHttpResponse"]);return n!=null&&l(e,["sdkHttpResponse"],n),e}function jE(t){const e={},n=a(t,["sdkHttpResponse"]);return n!=null&&l(e,["sdkHttpResponse"],n),e}function eI(t){const e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=a(t,["fileUri"]);n!=null&&l(e,["fileUri"],n);const i=a(t,["mimeType"]);return i!=null&&l(e,["mimeType"],i),e}function tI(t){const e={},n=a(t,["id"]);n!=null&&l(e,["id"],n);const i=a(t,["args"]);i!=null&&l(e,["args"],i);const r=a(t,["name"]);if(r!=null&&l(e,["name"],r),a(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(a(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function nI(t){const e={},n=a(t,["mode"]);n!=null&&l(e,["mode"],n);const i=a(t,["allowedFunctionNames"]);if(i!=null&&l(e,["allowedFunctionNames"],i),a(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function iI(t){const e={};if(a(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=a(t,["description"]);n!=null&&l(e,["description"],n);const i=a(t,["name"]);i!=null&&l(e,["name"],i);const r=a(t,["parameters"]);r!=null&&l(e,["parameters"],r);const o=a(t,["parametersJsonSchema"]);o!=null&&l(e,["parametersJsonSchema"],o);const s=a(t,["response"]);s!=null&&l(e,["response"],s);const u=a(t,["responseJsonSchema"]);return u!=null&&l(e,["responseJsonSchema"],u),e}function rI(t,e){const n={},i=a(e,["name"]);return i!=null&&l(n,["_url","name"],rn(t,i)),n}function oI(t,e){const n={},i=a(e,["name"]);return i!=null&&l(n,["_url","name"],rn(t,i)),n}function sI(t){const e={};if(a(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=a(t,["enableWidget"]);return n!=null&&l(e,["enableWidget"],n),e}function aI(t){const e={};if(a(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(a(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=a(t,["timeRangeFilter"]);return n!=null&&l(e,["timeRangeFilter"],n),e}function lI(t,e){const n={},i=a(t,["pageSize"]);e!==void 0&&i!=null&&l(e,["_query","pageSize"],i);const r=a(t,["pageToken"]);return e!==void 0&&r!=null&&l(e,["_query","pageToken"],r),n}function uI(t,e){const n={},i=a(t,["pageSize"]);e!==void 0&&i!=null&&l(e,["_query","pageSize"],i);const r=a(t,["pageToken"]);return e!==void 0&&r!=null&&l(e,["_query","pageToken"],r),n}function cI(t){const e={},n=a(t,["config"]);return n!=null&&lI(n,e),e}function dI(t){const e={},n=a(t,["config"]);return n!=null&&uI(n,e),e}function fI(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const i=a(t,["nextPageToken"]);i!=null&&l(e,["nextPageToken"],i);const r=a(t,["cachedContents"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>s)),l(e,["cachedContents"],o)}return e}function pI(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const i=a(t,["nextPageToken"]);i!=null&&l(e,["nextPageToken"],i);const r=a(t,["cachedContents"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>s)),l(e,["cachedContents"],o)}return e}function hI(t){const e={},n=a(t,["mediaResolution"]);n!=null&&l(e,["mediaResolution"],n);const i=a(t,["codeExecutionResult"]);i!=null&&l(e,["codeExecutionResult"],i);const r=a(t,["executableCode"]);r!=null&&l(e,["executableCode"],r);const o=a(t,["fileData"]);o!=null&&l(e,["fileData"],eI(o));const s=a(t,["functionCall"]);s!=null&&l(e,["functionCall"],tI(s));const u=a(t,["functionResponse"]);u!=null&&l(e,["functionResponse"],u);const c=a(t,["inlineData"]);c!=null&&l(e,["inlineData"],zE(c));const d=a(t,["text"]);d!=null&&l(e,["text"],d);const f=a(t,["thought"]);f!=null&&l(e,["thought"],f);const p=a(t,["thoughtSignature"]);p!=null&&l(e,["thoughtSignature"],p);const h=a(t,["videoMetadata"]);return h!=null&&l(e,["videoMetadata"],h),e}function mI(t){const e={},n=a(t,["functionCallingConfig"]);n!=null&&l(e,["functionCallingConfig"],nI(n));const i=a(t,["retrievalConfig"]);return i!=null&&l(e,["retrievalConfig"],i),e}function gI(t){const e={},n=a(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(p=>p)),l(e,["functionDeclarations"],f)}if(a(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=a(t,["googleSearchRetrieval"]);i!=null&&l(e,["googleSearchRetrieval"],i);const r=a(t,["computerUse"]);r!=null&&l(e,["computerUse"],r);const o=a(t,["fileSearch"]);o!=null&&l(e,["fileSearch"],o);const s=a(t,["codeExecution"]);if(s!=null&&l(e,["codeExecution"],s),a(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=a(t,["googleMaps"]);u!=null&&l(e,["googleMaps"],sI(u));const c=a(t,["googleSearch"]);c!=null&&l(e,["googleSearch"],aI(c));const d=a(t,["urlContext"]);return d!=null&&l(e,["urlContext"],d),e}function yI(t){const e={},n=a(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(h=>iI(h))),l(e,["functionDeclarations"],p)}const i=a(t,["retrieval"]);i!=null&&l(e,["retrieval"],i);const r=a(t,["googleSearchRetrieval"]);r!=null&&l(e,["googleSearchRetrieval"],r);const o=a(t,["computerUse"]);if(o!=null&&l(e,["computerUse"],o),a(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const s=a(t,["codeExecution"]);s!=null&&l(e,["codeExecution"],s);const u=a(t,["enterpriseWebSearch"]);u!=null&&l(e,["enterpriseWebSearch"],u);const c=a(t,["googleMaps"]);c!=null&&l(e,["googleMaps"],c);const d=a(t,["googleSearch"]);d!=null&&l(e,["googleSearch"],d);const f=a(t,["urlContext"]);return f!=null&&l(e,["urlContext"],f),e}function vI(t,e){const n={},i=a(t,["ttl"]);e!==void 0&&i!=null&&l(e,["ttl"],i);const r=a(t,["expireTime"]);return e!==void 0&&r!=null&&l(e,["expireTime"],r),n}function _I(t,e){const n={},i=a(t,["ttl"]);e!==void 0&&i!=null&&l(e,["ttl"],i);const r=a(t,["expireTime"]);return e!==void 0&&r!=null&&l(e,["expireTime"],r),n}function TI(t,e){const n={},i=a(e,["name"]);i!=null&&l(n,["_url","name"],rn(t,i));const r=a(e,["config"]);return r!=null&&vI(r,n),n}function EI(t,e){const n={},i=a(e,["name"]);i!=null&&l(n,["_url","name"],rn(t,i));const r=a(e,["config"]);return r!=null&&_I(r,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class II extends nn{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new ai(Xt.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(n),n)}async create(e){var n,i,r,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=YE(this.apiClient,e);return u=M("cachedContents",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>f)}else{const d=KE(this.apiClient,e);return u=M("cachedContents",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>f)}}async get(e){var n,i,r,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=oI(this.apiClient,e);return u=M("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>f)}else{const d=rI(this.apiClient,e);return u=M("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>f)}}async delete(e){var n,i,r,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=XE(this.apiClient,e);return u=M("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=jE(f),h=new Wf;return Object.assign(h,p),h})}else{const d=QE(this.apiClient,e);return u=M("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=ZE(f),h=new Wf;return Object.assign(h,p),h})}}async update(e){var n,i,r,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=EI(this.apiClient,e);return u=M("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>f)}else{const d=TI(this.apiClient,e);return u=M("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>f)}}async listInternal(e){var n,i,r,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=dI(e);return u=M("cachedContents",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=pI(f),h=new Jf;return Object.assign(h,p),h})}else{const d=cI(e);return u=M("cachedContents",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=fI(f),h=new Jf;return Object.assign(h,p),h})}}}function ep(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function le(t){return this instanceof le?(this.v=t,this):new le(t)}function bi(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(t,e||[]),r,o=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),u("next"),u("throw"),u("return",s),r[Symbol.asyncIterator]=function(){return this},r;function s(y){return function(T){return Promise.resolve(T).then(y,p)}}function u(y,T){i[y]&&(r[y]=function(E){return new Promise(function(w,_){o.push([y,E,w,_])>1||c(y,E)})},T&&(r[y]=T(r[y])))}function c(y,T){try{d(i[y](T))}catch(E){h(o[0][3],E)}}function d(y){y.value instanceof le?Promise.resolve(y.value.v).then(f,p):h(o[0][2],y)}function f(y){c("next",y)}function p(y){c("throw",y)}function h(y,T){y(T),o.shift(),o.length&&c(o[0][0],o[0][1])}}function Cr(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof ep=="function"?ep(t):t[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(o){n[o]=t[o]&&function(s){return new Promise(function(u,c){s=t[o](s),r(u,c,s.done,s.value)})}}function r(o,s,u,c){Promise.resolve(c).then(function(d){o({value:d,done:u})},s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function wI(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:Ag(n)}function Ag(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function CI(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function tp(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let i=0;for(;i<n;)if(t[i].role==="user")e.push(t[i]),i++;else{const r=[];let o=!0;for(;i<n&&t[i].role==="model";)r.push(t[i]),o&&!Ag(t[i])&&(o=!1),i++;o?e.push(...r):e.pop()}return e}class SI{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new xI(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class xI{constructor(e,n,i,r={},o=[]){this.apiClient=e,this.modelsModule=n,this.model=i,this.config=r,this.history=o,this.sendPromise=Promise.resolve(),CI(o)}async sendMessage(e){var n;await this.sendPromise;const i=Le(e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var o,s,u;const c=await r,d=(s=(o=c.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content,f=c.automaticFunctionCallingHistory,p=this.getHistory(!0).length;let h=[];f!=null&&(h=(u=f.slice(p))!==null&&u!==void 0?u:[]);const y=d?[d]:[];this.recordHistory(i,y,h)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(e){var n;await this.sendPromise;const i=Le(e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const o=await r;return this.processStreamResponse(o,i)}getHistory(e=!1){const n=e?tp(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){var i,r;return bi(this,arguments,function*(){var s,u,c,d;const f=[];try{for(var p=!0,h=Cr(e),y;y=yield le(h.next()),s=y.done,!s;p=!0){d=y.value,p=!1;const T=d;if(wI(T)){const E=(r=(i=T.candidates)===null||i===void 0?void 0:i[0])===null||r===void 0?void 0:r.content;E!==void 0&&f.push(E)}yield yield le(T)}}catch(T){u={error:T}}finally{try{!p&&!s&&(c=h.return)&&(yield le(c.call(h)))}finally{if(u)throw u.error}}this.recordHistory(n,f)})}recordHistory(e,n,i){let r=[];n.length>0&&n.every(o=>o.role!==void 0)?r=n:r.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...tp(i)):this.history.push(e),this.history.push(...r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class zs extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,zs.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function AI(t){const e={},n=a(t,["file"]);return n!=null&&l(e,["file"],n),e}function kI(t){const e={},n=a(t,["sdkHttpResponse"]);return n!=null&&l(e,["sdkHttpResponse"],n),e}function NI(t){const e={},n=a(t,["name"]);return n!=null&&l(e,["_url","file"],Tg(n)),e}function RI(t){const e={},n=a(t,["sdkHttpResponse"]);return n!=null&&l(e,["sdkHttpResponse"],n),e}function PI(t){const e={},n=a(t,["name"]);return n!=null&&l(e,["_url","file"],Tg(n)),e}function MI(t,e){const n={},i=a(t,["pageSize"]);e!==void 0&&i!=null&&l(e,["_query","pageSize"],i);const r=a(t,["pageToken"]);return e!==void 0&&r!=null&&l(e,["_query","pageToken"],r),n}function bI(t){const e={},n=a(t,["config"]);return n!=null&&MI(n,e),e}function DI(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const i=a(t,["nextPageToken"]);i!=null&&l(e,["nextPageToken"],i);const r=a(t,["files"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>s)),l(e,["files"],o)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class LI extends nn{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new ai(Xt.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,i;let r,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=bI(e);return o=M("files",u._url),s=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),r.then(c=>{const d=DI(c),f=new VT;return Object.assign(f,d),f})}}async createInternal(e){var n,i;let r,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=AI(e);return o=M("upload/v1beta/files",u._url),s=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),r.then(c=>{const d=kI(c),f=new HT;return Object.assign(f,d),f})}}async get(e){var n,i;let r,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=PI(e);return o=M("files/{file}",u._url),s=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),r.then(c=>c)}}async delete(e){var n,i;let r,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=NI(e);return o=M("files/{file}",u._url),s=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),r.then(c=>{const d=RI(c),f=new BT;return Object.assign(f,d),f})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Bo(t){const e={},n=a(t,["data"]);if(n!=null&&l(e,["data"],n),a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=a(t,["mimeType"]);return i!=null&&l(e,["mimeType"],i),e}function UI(t){const e={},n=a(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>ZI(o))),l(e,["parts"],r)}const i=a(t,["role"]);return i!=null&&l(e,["role"],i),e}function FI(t){const e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=a(t,["fileUri"]);n!=null&&l(e,["fileUri"],n);const i=a(t,["mimeType"]);return i!=null&&l(e,["mimeType"],i),e}function OI(t){const e={},n=a(t,["id"]);n!=null&&l(e,["id"],n);const i=a(t,["args"]);i!=null&&l(e,["args"],i);const r=a(t,["name"]);if(r!=null&&l(e,["name"],r),a(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(a(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function VI(t){const e={};if(a(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=a(t,["description"]);n!=null&&l(e,["description"],n);const i=a(t,["name"]);i!=null&&l(e,["name"],i);const r=a(t,["parameters"]);r!=null&&l(e,["parameters"],r);const o=a(t,["parametersJsonSchema"]);o!=null&&l(e,["parametersJsonSchema"],o);const s=a(t,["response"]);s!=null&&l(e,["response"],s);const u=a(t,["responseJsonSchema"]);return u!=null&&l(e,["responseJsonSchema"],u),e}function HI(t){const e={},n=a(t,["modelSelectionConfig"]);n!=null&&l(e,["modelConfig"],n);const i=a(t,["responseJsonSchema"]);i!=null&&l(e,["responseJsonSchema"],i);const r=a(t,["audioTimestamp"]);r!=null&&l(e,["audioTimestamp"],r);const o=a(t,["candidateCount"]);o!=null&&l(e,["candidateCount"],o);const s=a(t,["enableAffectiveDialog"]);s!=null&&l(e,["enableAffectiveDialog"],s);const u=a(t,["frequencyPenalty"]);u!=null&&l(e,["frequencyPenalty"],u);const c=a(t,["logprobs"]);c!=null&&l(e,["logprobs"],c);const d=a(t,["maxOutputTokens"]);d!=null&&l(e,["maxOutputTokens"],d);const f=a(t,["mediaResolution"]);f!=null&&l(e,["mediaResolution"],f);const p=a(t,["presencePenalty"]);p!=null&&l(e,["presencePenalty"],p);const h=a(t,["responseLogprobs"]);h!=null&&l(e,["responseLogprobs"],h);const y=a(t,["responseMimeType"]);y!=null&&l(e,["responseMimeType"],y);const T=a(t,["responseModalities"]);T!=null&&l(e,["responseModalities"],T);const E=a(t,["responseSchema"]);E!=null&&l(e,["responseSchema"],E);const w=a(t,["routingConfig"]);w!=null&&l(e,["routingConfig"],w);const _=a(t,["seed"]);_!=null&&l(e,["seed"],_);const g=a(t,["speechConfig"]);g!=null&&l(e,["speechConfig"],kg(g));const v=a(t,["stopSequences"]);v!=null&&l(e,["stopSequences"],v);const I=a(t,["temperature"]);I!=null&&l(e,["temperature"],I);const C=a(t,["thinkingConfig"]);C!=null&&l(e,["thinkingConfig"],C);const x=a(t,["topK"]);x!=null&&l(e,["topK"],x);const A=a(t,["topP"]);if(A!=null&&l(e,["topP"],A),a(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function BI(t){const e={};if(a(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=a(t,["enableWidget"]);return n!=null&&l(e,["enableWidget"],n),e}function GI(t){const e={};if(a(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(a(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=a(t,["timeRangeFilter"]);return n!=null&&l(e,["timeRangeFilter"],n),e}function qI(t,e){const n={},i=a(t,["generationConfig"]);e!==void 0&&i!=null&&l(e,["setup","generationConfig"],i);const r=a(t,["responseModalities"]);e!==void 0&&r!=null&&l(e,["setup","generationConfig","responseModalities"],r);const o=a(t,["temperature"]);e!==void 0&&o!=null&&l(e,["setup","generationConfig","temperature"],o);const s=a(t,["topP"]);e!==void 0&&s!=null&&l(e,["setup","generationConfig","topP"],s);const u=a(t,["topK"]);e!==void 0&&u!=null&&l(e,["setup","generationConfig","topK"],u);const c=a(t,["maxOutputTokens"]);e!==void 0&&c!=null&&l(e,["setup","generationConfig","maxOutputTokens"],c);const d=a(t,["mediaResolution"]);e!==void 0&&d!=null&&l(e,["setup","generationConfig","mediaResolution"],d);const f=a(t,["seed"]);e!==void 0&&f!=null&&l(e,["setup","generationConfig","seed"],f);const p=a(t,["speechConfig"]);e!==void 0&&p!=null&&l(e,["setup","generationConfig","speechConfig"],ic(p));const h=a(t,["thinkingConfig"]);e!==void 0&&h!=null&&l(e,["setup","generationConfig","thinkingConfig"],h);const y=a(t,["enableAffectiveDialog"]);e!==void 0&&y!=null&&l(e,["setup","generationConfig","enableAffectiveDialog"],y);const T=a(t,["systemInstruction"]);e!==void 0&&T!=null&&l(e,["setup","systemInstruction"],UI(Le(T)));const E=a(t,["tools"]);if(e!==void 0&&E!=null){let x=Yi(E);Array.isArray(x)&&(x=x.map(A=>ew(Ki(A)))),l(e,["setup","tools"],x)}const w=a(t,["sessionResumption"]);e!==void 0&&w!=null&&l(e,["setup","sessionResumption"],jI(w));const _=a(t,["inputAudioTranscription"]);e!==void 0&&_!=null&&l(e,["setup","inputAudioTranscription"],_);const g=a(t,["outputAudioTranscription"]);e!==void 0&&g!=null&&l(e,["setup","outputAudioTranscription"],g);const v=a(t,["realtimeInputConfig"]);e!==void 0&&v!=null&&l(e,["setup","realtimeInputConfig"],v);const I=a(t,["contextWindowCompression"]);e!==void 0&&I!=null&&l(e,["setup","contextWindowCompression"],I);const C=a(t,["proactivity"]);return e!==void 0&&C!=null&&l(e,["setup","proactivity"],C),n}function $I(t,e){const n={},i=a(t,["generationConfig"]);e!==void 0&&i!=null&&l(e,["setup","generationConfig"],HI(i));const r=a(t,["responseModalities"]);e!==void 0&&r!=null&&l(e,["setup","generationConfig","responseModalities"],r);const o=a(t,["temperature"]);e!==void 0&&o!=null&&l(e,["setup","generationConfig","temperature"],o);const s=a(t,["topP"]);e!==void 0&&s!=null&&l(e,["setup","generationConfig","topP"],s);const u=a(t,["topK"]);e!==void 0&&u!=null&&l(e,["setup","generationConfig","topK"],u);const c=a(t,["maxOutputTokens"]);e!==void 0&&c!=null&&l(e,["setup","generationConfig","maxOutputTokens"],c);const d=a(t,["mediaResolution"]);e!==void 0&&d!=null&&l(e,["setup","generationConfig","mediaResolution"],d);const f=a(t,["seed"]);e!==void 0&&f!=null&&l(e,["setup","generationConfig","seed"],f);const p=a(t,["speechConfig"]);e!==void 0&&p!=null&&l(e,["setup","generationConfig","speechConfig"],kg(ic(p)));const h=a(t,["thinkingConfig"]);e!==void 0&&h!=null&&l(e,["setup","generationConfig","thinkingConfig"],h);const y=a(t,["enableAffectiveDialog"]);e!==void 0&&y!=null&&l(e,["setup","generationConfig","enableAffectiveDialog"],y);const T=a(t,["systemInstruction"]);e!==void 0&&T!=null&&l(e,["setup","systemInstruction"],Le(T));const E=a(t,["tools"]);if(e!==void 0&&E!=null){let x=Yi(E);Array.isArray(x)&&(x=x.map(A=>tw(Ki(A)))),l(e,["setup","tools"],x)}const w=a(t,["sessionResumption"]);e!==void 0&&w!=null&&l(e,["setup","sessionResumption"],w);const _=a(t,["inputAudioTranscription"]);e!==void 0&&_!=null&&l(e,["setup","inputAudioTranscription"],_);const g=a(t,["outputAudioTranscription"]);e!==void 0&&g!=null&&l(e,["setup","outputAudioTranscription"],g);const v=a(t,["realtimeInputConfig"]);e!==void 0&&v!=null&&l(e,["setup","realtimeInputConfig"],v);const I=a(t,["contextWindowCompression"]);e!==void 0&&I!=null&&l(e,["setup","contextWindowCompression"],I);const C=a(t,["proactivity"]);return e!==void 0&&C!=null&&l(e,["setup","proactivity"],C),n}function zI(t,e){const n={},i=a(e,["model"]);i!=null&&l(n,["setup","model"],ee(t,i));const r=a(e,["config"]);return r!=null&&l(n,["config"],qI(r,n)),n}function WI(t,e){const n={},i=a(e,["model"]);i!=null&&l(n,["setup","model"],ee(t,i));const r=a(e,["config"]);return r!=null&&l(n,["config"],$I(r,n)),n}function JI(t){const e={},n=a(t,["musicGenerationConfig"]);return n!=null&&l(e,["musicGenerationConfig"],n),e}function KI(t){const e={},n=a(t,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>r)),l(e,["weightedPrompts"],i)}return e}function YI(t){const e={},n=a(t,["media"]);if(n!=null){let d=mg(n);Array.isArray(d)&&(d=d.map(f=>Bo(f))),l(e,["mediaChunks"],d)}const i=a(t,["audio"]);i!=null&&l(e,["audio"],Bo(yg(i)));const r=a(t,["audioStreamEnd"]);r!=null&&l(e,["audioStreamEnd"],r);const o=a(t,["video"]);o!=null&&l(e,["video"],Bo(gg(o)));const s=a(t,["text"]);s!=null&&l(e,["text"],s);const u=a(t,["activityStart"]);u!=null&&l(e,["activityStart"],u);const c=a(t,["activityEnd"]);return c!=null&&l(e,["activityEnd"],c),e}function QI(t){const e={},n=a(t,["media"]);if(n!=null){let d=mg(n);Array.isArray(d)&&(d=d.map(f=>f)),l(e,["mediaChunks"],d)}const i=a(t,["audio"]);i!=null&&l(e,["audio"],yg(i));const r=a(t,["audioStreamEnd"]);r!=null&&l(e,["audioStreamEnd"],r);const o=a(t,["video"]);o!=null&&l(e,["video"],gg(o));const s=a(t,["text"]);s!=null&&l(e,["text"],s);const u=a(t,["activityStart"]);u!=null&&l(e,["activityStart"],u);const c=a(t,["activityEnd"]);return c!=null&&l(e,["activityEnd"],c),e}function XI(t){const e={},n=a(t,["setupComplete"]);n!=null&&l(e,["setupComplete"],n);const i=a(t,["serverContent"]);i!=null&&l(e,["serverContent"],i);const r=a(t,["toolCall"]);r!=null&&l(e,["toolCall"],r);const o=a(t,["toolCallCancellation"]);o!=null&&l(e,["toolCallCancellation"],o);const s=a(t,["usageMetadata"]);s!=null&&l(e,["usageMetadata"],nw(s));const u=a(t,["goAway"]);u!=null&&l(e,["goAway"],u);const c=a(t,["sessionResumptionUpdate"]);return c!=null&&l(e,["sessionResumptionUpdate"],c),e}function ZI(t){const e={},n=a(t,["mediaResolution"]);n!=null&&l(e,["mediaResolution"],n);const i=a(t,["codeExecutionResult"]);i!=null&&l(e,["codeExecutionResult"],i);const r=a(t,["executableCode"]);r!=null&&l(e,["executableCode"],r);const o=a(t,["fileData"]);o!=null&&l(e,["fileData"],FI(o));const s=a(t,["functionCall"]);s!=null&&l(e,["functionCall"],OI(s));const u=a(t,["functionResponse"]);u!=null&&l(e,["functionResponse"],u);const c=a(t,["inlineData"]);c!=null&&l(e,["inlineData"],Bo(c));const d=a(t,["text"]);d!=null&&l(e,["text"],d);const f=a(t,["thought"]);f!=null&&l(e,["thought"],f);const p=a(t,["thoughtSignature"]);p!=null&&l(e,["thoughtSignature"],p);const h=a(t,["videoMetadata"]);return h!=null&&l(e,["videoMetadata"],h),e}function jI(t){const e={},n=a(t,["handle"]);if(n!=null&&l(e,["handle"],n),a(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function kg(t){const e={},n=a(t,["languageCode"]);n!=null&&l(e,["languageCode"],n);const i=a(t,["voiceConfig"]);if(i!=null&&l(e,["voiceConfig"],i),a(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function ew(t){const e={},n=a(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(p=>p)),l(e,["functionDeclarations"],f)}if(a(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=a(t,["googleSearchRetrieval"]);i!=null&&l(e,["googleSearchRetrieval"],i);const r=a(t,["computerUse"]);r!=null&&l(e,["computerUse"],r);const o=a(t,["fileSearch"]);o!=null&&l(e,["fileSearch"],o);const s=a(t,["codeExecution"]);if(s!=null&&l(e,["codeExecution"],s),a(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=a(t,["googleMaps"]);u!=null&&l(e,["googleMaps"],BI(u));const c=a(t,["googleSearch"]);c!=null&&l(e,["googleSearch"],GI(c));const d=a(t,["urlContext"]);return d!=null&&l(e,["urlContext"],d),e}function tw(t){const e={},n=a(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(h=>VI(h))),l(e,["functionDeclarations"],p)}const i=a(t,["retrieval"]);i!=null&&l(e,["retrieval"],i);const r=a(t,["googleSearchRetrieval"]);r!=null&&l(e,["googleSearchRetrieval"],r);const o=a(t,["computerUse"]);if(o!=null&&l(e,["computerUse"],o),a(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const s=a(t,["codeExecution"]);s!=null&&l(e,["codeExecution"],s);const u=a(t,["enterpriseWebSearch"]);u!=null&&l(e,["enterpriseWebSearch"],u);const c=a(t,["googleMaps"]);c!=null&&l(e,["googleMaps"],c);const d=a(t,["googleSearch"]);d!=null&&l(e,["googleSearch"],d);const f=a(t,["urlContext"]);return f!=null&&l(e,["urlContext"],f),e}function nw(t){const e={},n=a(t,["promptTokenCount"]);n!=null&&l(e,["promptTokenCount"],n);const i=a(t,["cachedContentTokenCount"]);i!=null&&l(e,["cachedContentTokenCount"],i);const r=a(t,["candidatesTokenCount"]);r!=null&&l(e,["responseTokenCount"],r);const o=a(t,["toolUsePromptTokenCount"]);o!=null&&l(e,["toolUsePromptTokenCount"],o);const s=a(t,["thoughtsTokenCount"]);s!=null&&l(e,["thoughtsTokenCount"],s);const u=a(t,["totalTokenCount"]);u!=null&&l(e,["totalTokenCount"],u);const c=a(t,["promptTokensDetails"]);if(c!=null){let y=c;Array.isArray(y)&&(y=y.map(T=>T)),l(e,["promptTokensDetails"],y)}const d=a(t,["cacheTokensDetails"]);if(d!=null){let y=d;Array.isArray(y)&&(y=y.map(T=>T)),l(e,["cacheTokensDetails"],y)}const f=a(t,["candidatesTokensDetails"]);if(f!=null){let y=f;Array.isArray(y)&&(y=y.map(T=>T)),l(e,["responseTokensDetails"],y)}const p=a(t,["toolUsePromptTokensDetails"]);if(p!=null){let y=p;Array.isArray(y)&&(y=y.map(T=>T)),l(e,["toolUsePromptTokensDetails"],y)}const h=a(t,["trafficType"]);return h!=null&&l(e,["trafficType"],h),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function iw(t){const e={},n=a(t,["data"]);if(n!=null&&l(e,["data"],n),a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=a(t,["mimeType"]);return i!=null&&l(e,["mimeType"],i),e}function rw(t){const e={},n=a(t,["content"]);n!=null&&l(e,["content"],n);const i=a(t,["citationMetadata"]);i!=null&&l(e,["citationMetadata"],ow(i));const r=a(t,["tokenCount"]);r!=null&&l(e,["tokenCount"],r);const o=a(t,["finishReason"]);o!=null&&l(e,["finishReason"],o);const s=a(t,["avgLogprobs"]);s!=null&&l(e,["avgLogprobs"],s);const u=a(t,["groundingMetadata"]);u!=null&&l(e,["groundingMetadata"],u);const c=a(t,["index"]);c!=null&&l(e,["index"],c);const d=a(t,["logprobsResult"]);d!=null&&l(e,["logprobsResult"],d);const f=a(t,["safetyRatings"]);if(f!=null){let h=f;Array.isArray(h)&&(h=h.map(y=>y)),l(e,["safetyRatings"],h)}const p=a(t,["urlContextMetadata"]);return p!=null&&l(e,["urlContextMetadata"],p),e}function ow(t){const e={},n=a(t,["citationSources"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>r)),l(e,["citations"],i)}return e}function sw(t,e){const n={},i=a(e,["model"]);i!=null&&l(n,["_url","model"],ee(t,i));const r=a(e,["contents"]);if(r!=null){let o=ct(r);Array.isArray(o)&&(o=o.map(s=>s)),l(n,["contents"],o)}return n}function aw(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const i=a(t,["tokensInfo"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(o=>o)),l(e,["tokensInfo"],r)}return e}function lw(t){const e={},n=a(t,["values"]);n!=null&&l(e,["values"],n);const i=a(t,["statistics"]);return i!=null&&l(e,["statistics"],uw(i)),e}function uw(t){const e={},n=a(t,["truncated"]);n!=null&&l(e,["truncated"],n);const i=a(t,["token_count"]);return i!=null&&l(e,["tokenCount"],i),e}function Ws(t){const e={},n=a(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>vC(o))),l(e,["parts"],r)}const i=a(t,["role"]);return i!=null&&l(e,["role"],i),e}function cw(t){const e={},n=a(t,["controlType"]);n!=null&&l(e,["controlType"],n);const i=a(t,["enableControlImageComputation"]);return i!=null&&l(e,["computeControl"],i),e}function dw(t){const e={};if(a(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(a(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(a(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function fw(t,e){const n={},i=a(t,["systemInstruction"]);e!==void 0&&i!=null&&l(e,["systemInstruction"],Le(i));const r=a(t,["tools"]);if(e!==void 0&&r!=null){let s=r;Array.isArray(s)&&(s=s.map(u=>bg(u))),l(e,["tools"],s)}const o=a(t,["generationConfig"]);return e!==void 0&&o!=null&&l(e,["generationConfig"],iC(o)),n}function pw(t,e){const n={},i=a(e,["model"]);i!=null&&l(n,["_url","model"],ee(t,i));const r=a(e,["contents"]);if(r!=null){let s=ct(r);Array.isArray(s)&&(s=s.map(u=>Ws(u))),l(n,["contents"],s)}const o=a(e,["config"]);return o!=null&&dw(o),n}function hw(t,e){const n={},i=a(e,["model"]);i!=null&&l(n,["_url","model"],ee(t,i));const r=a(e,["contents"]);if(r!=null){let s=ct(r);Array.isArray(s)&&(s=s.map(u=>u)),l(n,["contents"],s)}const o=a(e,["config"]);return o!=null&&fw(o,n),n}function mw(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const i=a(t,["totalTokens"]);i!=null&&l(e,["totalTokens"],i);const r=a(t,["cachedContentTokenCount"]);return r!=null&&l(e,["cachedContentTokenCount"],r),e}function gw(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const i=a(t,["totalTokens"]);return i!=null&&l(e,["totalTokens"],i),e}function yw(t,e){const n={},i=a(e,["model"]);return i!=null&&l(n,["_url","name"],ee(t,i)),n}function vw(t,e){const n={},i=a(e,["model"]);return i!=null&&l(n,["_url","name"],ee(t,i)),n}function _w(t){const e={},n=a(t,["sdkHttpResponse"]);return n!=null&&l(e,["sdkHttpResponse"],n),e}function Tw(t){const e={},n=a(t,["sdkHttpResponse"]);return n!=null&&l(e,["sdkHttpResponse"],n),e}function Ew(t,e){const n={},i=a(t,["outputGcsUri"]);e!==void 0&&i!=null&&l(e,["parameters","storageUri"],i);const r=a(t,["negativePrompt"]);e!==void 0&&r!=null&&l(e,["parameters","negativePrompt"],r);const o=a(t,["numberOfImages"]);e!==void 0&&o!=null&&l(e,["parameters","sampleCount"],o);const s=a(t,["aspectRatio"]);e!==void 0&&s!=null&&l(e,["parameters","aspectRatio"],s);const u=a(t,["guidanceScale"]);e!==void 0&&u!=null&&l(e,["parameters","guidanceScale"],u);const c=a(t,["seed"]);e!==void 0&&c!=null&&l(e,["parameters","seed"],c);const d=a(t,["safetyFilterLevel"]);e!==void 0&&d!=null&&l(e,["parameters","safetySetting"],d);const f=a(t,["personGeneration"]);e!==void 0&&f!=null&&l(e,["parameters","personGeneration"],f);const p=a(t,["includeSafetyAttributes"]);e!==void 0&&p!=null&&l(e,["parameters","includeSafetyAttributes"],p);const h=a(t,["includeRaiReason"]);e!==void 0&&h!=null&&l(e,["parameters","includeRaiReason"],h);const y=a(t,["language"]);e!==void 0&&y!=null&&l(e,["parameters","language"],y);const T=a(t,["outputMimeType"]);e!==void 0&&T!=null&&l(e,["parameters","outputOptions","mimeType"],T);const E=a(t,["outputCompressionQuality"]);e!==void 0&&E!=null&&l(e,["parameters","outputOptions","compressionQuality"],E);const w=a(t,["addWatermark"]);e!==void 0&&w!=null&&l(e,["parameters","addWatermark"],w);const _=a(t,["labels"]);e!==void 0&&_!=null&&l(e,["labels"],_);const g=a(t,["editMode"]);e!==void 0&&g!=null&&l(e,["parameters","editMode"],g);const v=a(t,["baseSteps"]);return e!==void 0&&v!=null&&l(e,["parameters","editConfig","baseSteps"],v),n}function Iw(t,e){const n={},i=a(e,["model"]);i!=null&&l(n,["_url","model"],ee(t,i));const r=a(e,["prompt"]);r!=null&&l(n,["instances[0]","prompt"],r);const o=a(e,["referenceImages"]);if(o!=null){let u=o;Array.isArray(u)&&(u=u.map(c=>CC(c))),l(n,["instances[0]","referenceImages"],u)}const s=a(e,["config"]);return s!=null&&Ew(s,n),n}function ww(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const i=a(t,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(o=>Js(o))),l(e,["generatedImages"],r)}return e}function Cw(t,e){const n={},i=a(t,["taskType"]);e!==void 0&&i!=null&&l(e,["requests[]","taskType"],i);const r=a(t,["title"]);e!==void 0&&r!=null&&l(e,["requests[]","title"],r);const o=a(t,["outputDimensionality"]);if(e!==void 0&&o!=null&&l(e,["requests[]","outputDimensionality"],o),a(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(a(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function Sw(t,e){const n={},i=a(t,["taskType"]);e!==void 0&&i!=null&&l(e,["instances[]","task_type"],i);const r=a(t,["title"]);e!==void 0&&r!=null&&l(e,["instances[]","title"],r);const o=a(t,["outputDimensionality"]);e!==void 0&&o!=null&&l(e,["parameters","outputDimensionality"],o);const s=a(t,["mimeType"]);e!==void 0&&s!=null&&l(e,["instances[]","mimeType"],s);const u=a(t,["autoTruncate"]);return e!==void 0&&u!=null&&l(e,["parameters","autoTruncate"],u),n}function xw(t,e){const n={},i=a(e,["model"]);i!=null&&l(n,["_url","model"],ee(t,i));const r=a(e,["contents"]);if(r!=null){let u=ec(t,r);Array.isArray(u)&&(u=u.map(c=>c)),l(n,["requests[]","content"],u)}const o=a(e,["config"]);o!=null&&Cw(o,n);const s=a(e,["model"]);return s!==void 0&&l(n,["requests[]","model"],ee(t,s)),n}function Aw(t,e){const n={},i=a(e,["model"]);i!=null&&l(n,["_url","model"],ee(t,i));const r=a(e,["contents"]);if(r!=null){let s=ec(t,r);Array.isArray(s)&&(s=s.map(u=>u)),l(n,["instances[]","content"],s)}const o=a(e,["config"]);return o!=null&&Sw(o,n),n}function kw(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const i=a(t,["embeddings"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),l(e,["embeddings"],o)}const r=a(t,["metadata"]);return r!=null&&l(e,["metadata"],r),e}function Nw(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const i=a(t,["predictions[]","embeddings"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>lw(s))),l(e,["embeddings"],o)}const r=a(t,["metadata"]);return r!=null&&l(e,["metadata"],r),e}function Rw(t){const e={},n=a(t,["endpoint"]);n!=null&&l(e,["name"],n);const i=a(t,["deployedModelId"]);return i!=null&&l(e,["deployedModelId"],i),e}function Pw(t){const e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=a(t,["fileUri"]);n!=null&&l(e,["fileUri"],n);const i=a(t,["mimeType"]);return i!=null&&l(e,["mimeType"],i),e}function Mw(t){const e={},n=a(t,["id"]);n!=null&&l(e,["id"],n);const i=a(t,["args"]);i!=null&&l(e,["args"],i);const r=a(t,["name"]);if(r!=null&&l(e,["name"],r),a(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(a(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function bw(t){const e={},n=a(t,["mode"]);n!=null&&l(e,["mode"],n);const i=a(t,["allowedFunctionNames"]);if(i!=null&&l(e,["allowedFunctionNames"],i),a(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function Dw(t){const e={};if(a(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=a(t,["description"]);n!=null&&l(e,["description"],n);const i=a(t,["name"]);i!=null&&l(e,["name"],i);const r=a(t,["parameters"]);r!=null&&l(e,["parameters"],r);const o=a(t,["parametersJsonSchema"]);o!=null&&l(e,["parametersJsonSchema"],o);const s=a(t,["response"]);s!=null&&l(e,["response"],s);const u=a(t,["responseJsonSchema"]);return u!=null&&l(e,["responseJsonSchema"],u),e}function Lw(t,e,n){const i={},r=a(e,["systemInstruction"]);n!==void 0&&r!=null&&l(n,["systemInstruction"],Ws(Le(r)));const o=a(e,["temperature"]);o!=null&&l(i,["temperature"],o);const s=a(e,["topP"]);s!=null&&l(i,["topP"],s);const u=a(e,["topK"]);u!=null&&l(i,["topK"],u);const c=a(e,["candidateCount"]);c!=null&&l(i,["candidateCount"],c);const d=a(e,["maxOutputTokens"]);d!=null&&l(i,["maxOutputTokens"],d);const f=a(e,["stopSequences"]);f!=null&&l(i,["stopSequences"],f);const p=a(e,["responseLogprobs"]);p!=null&&l(i,["responseLogprobs"],p);const h=a(e,["logprobs"]);h!=null&&l(i,["logprobs"],h);const y=a(e,["presencePenalty"]);y!=null&&l(i,["presencePenalty"],y);const T=a(e,["frequencyPenalty"]);T!=null&&l(i,["frequencyPenalty"],T);const E=a(e,["seed"]);E!=null&&l(i,["seed"],E);const w=a(e,["responseMimeType"]);w!=null&&l(i,["responseMimeType"],w);const _=a(e,["responseSchema"]);_!=null&&l(i,["responseSchema"],tc(_));const g=a(e,["responseJsonSchema"]);if(g!=null&&l(i,["responseJsonSchema"],g),a(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(a(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const v=a(e,["safetySettings"]);if(n!==void 0&&v!=null){let Q=v;Array.isArray(Q)&&(Q=Q.map(te=>SC(te))),l(n,["safetySettings"],Q)}const I=a(e,["tools"]);if(n!==void 0&&I!=null){let Q=Yi(I);Array.isArray(Q)&&(Q=Q.map(te=>MC(Ki(te)))),l(n,["tools"],Q)}const C=a(e,["toolConfig"]);if(n!==void 0&&C!=null&&l(n,["toolConfig"],PC(C)),a(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const x=a(e,["cachedContent"]);n!==void 0&&x!=null&&l(n,["cachedContent"],rn(t,x));const A=a(e,["responseModalities"]);A!=null&&l(i,["responseModalities"],A);const N=a(e,["mediaResolution"]);N!=null&&l(i,["mediaResolution"],N);const P=a(e,["speechConfig"]);if(P!=null&&l(i,["speechConfig"],nc(P)),a(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const R=a(e,["thinkingConfig"]);R!=null&&l(i,["thinkingConfig"],R);const K=a(e,["imageConfig"]);return K!=null&&l(i,["imageConfig"],lC(K)),i}function Uw(t,e,n){const i={},r=a(e,["systemInstruction"]);n!==void 0&&r!=null&&l(n,["systemInstruction"],Le(r));const o=a(e,["temperature"]);o!=null&&l(i,["temperature"],o);const s=a(e,["topP"]);s!=null&&l(i,["topP"],s);const u=a(e,["topK"]);u!=null&&l(i,["topK"],u);const c=a(e,["candidateCount"]);c!=null&&l(i,["candidateCount"],c);const d=a(e,["maxOutputTokens"]);d!=null&&l(i,["maxOutputTokens"],d);const f=a(e,["stopSequences"]);f!=null&&l(i,["stopSequences"],f);const p=a(e,["responseLogprobs"]);p!=null&&l(i,["responseLogprobs"],p);const h=a(e,["logprobs"]);h!=null&&l(i,["logprobs"],h);const y=a(e,["presencePenalty"]);y!=null&&l(i,["presencePenalty"],y);const T=a(e,["frequencyPenalty"]);T!=null&&l(i,["frequencyPenalty"],T);const E=a(e,["seed"]);E!=null&&l(i,["seed"],E);const w=a(e,["responseMimeType"]);w!=null&&l(i,["responseMimeType"],w);const _=a(e,["responseSchema"]);_!=null&&l(i,["responseSchema"],tc(_));const g=a(e,["responseJsonSchema"]);g!=null&&l(i,["responseJsonSchema"],g);const v=a(e,["routingConfig"]);v!=null&&l(i,["routingConfig"],v);const I=a(e,["modelSelectionConfig"]);I!=null&&l(i,["modelConfig"],I);const C=a(e,["safetySettings"]);if(n!==void 0&&C!=null){let Ee=C;Array.isArray(Ee)&&(Ee=Ee.map(qe=>qe)),l(n,["safetySettings"],Ee)}const x=a(e,["tools"]);if(n!==void 0&&x!=null){let Ee=Yi(x);Array.isArray(Ee)&&(Ee=Ee.map(qe=>bg(Ki(qe)))),l(n,["tools"],Ee)}const A=a(e,["toolConfig"]);n!==void 0&&A!=null&&l(n,["toolConfig"],A);const N=a(e,["labels"]);n!==void 0&&N!=null&&l(n,["labels"],N);const P=a(e,["cachedContent"]);n!==void 0&&P!=null&&l(n,["cachedContent"],rn(t,P));const R=a(e,["responseModalities"]);R!=null&&l(i,["responseModalities"],R);const K=a(e,["mediaResolution"]);K!=null&&l(i,["mediaResolution"],K);const Q=a(e,["speechConfig"]);Q!=null&&l(i,["speechConfig"],Mg(nc(Q)));const te=a(e,["audioTimestamp"]);te!=null&&l(i,["audioTimestamp"],te);const Qe=a(e,["thinkingConfig"]);Qe!=null&&l(i,["thinkingConfig"],Qe);const xt=a(e,["imageConfig"]);return xt!=null&&l(i,["imageConfig"],uC(xt)),i}function np(t,e){const n={},i=a(e,["model"]);i!=null&&l(n,["_url","model"],ee(t,i));const r=a(e,["contents"]);if(r!=null){let s=ct(r);Array.isArray(s)&&(s=s.map(u=>Ws(u))),l(n,["contents"],s)}const o=a(e,["config"]);return o!=null&&l(n,["generationConfig"],Lw(t,o,n)),n}function ip(t,e){const n={},i=a(e,["model"]);i!=null&&l(n,["_url","model"],ee(t,i));const r=a(e,["contents"]);if(r!=null){let s=ct(r);Array.isArray(s)&&(s=s.map(u=>u)),l(n,["contents"],s)}const o=a(e,["config"]);return o!=null&&l(n,["generationConfig"],Uw(t,o,n)),n}function rp(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const i=a(t,["candidates"]);if(i!=null){let c=i;Array.isArray(c)&&(c=c.map(d=>rw(d))),l(e,["candidates"],c)}const r=a(t,["modelVersion"]);r!=null&&l(e,["modelVersion"],r);const o=a(t,["promptFeedback"]);o!=null&&l(e,["promptFeedback"],o);const s=a(t,["responseId"]);s!=null&&l(e,["responseId"],s);const u=a(t,["usageMetadata"]);return u!=null&&l(e,["usageMetadata"],u),e}function op(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const i=a(t,["candidates"]);if(i!=null){let d=i;Array.isArray(d)&&(d=d.map(f=>f)),l(e,["candidates"],d)}const r=a(t,["createTime"]);r!=null&&l(e,["createTime"],r);const o=a(t,["modelVersion"]);o!=null&&l(e,["modelVersion"],o);const s=a(t,["promptFeedback"]);s!=null&&l(e,["promptFeedback"],s);const u=a(t,["responseId"]);u!=null&&l(e,["responseId"],u);const c=a(t,["usageMetadata"]);return c!=null&&l(e,["usageMetadata"],c),e}function Fw(t,e){const n={};if(a(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(a(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=a(t,["numberOfImages"]);e!==void 0&&i!=null&&l(e,["parameters","sampleCount"],i);const r=a(t,["aspectRatio"]);e!==void 0&&r!=null&&l(e,["parameters","aspectRatio"],r);const o=a(t,["guidanceScale"]);if(e!==void 0&&o!=null&&l(e,["parameters","guidanceScale"],o),a(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const s=a(t,["safetyFilterLevel"]);e!==void 0&&s!=null&&l(e,["parameters","safetySetting"],s);const u=a(t,["personGeneration"]);e!==void 0&&u!=null&&l(e,["parameters","personGeneration"],u);const c=a(t,["includeSafetyAttributes"]);e!==void 0&&c!=null&&l(e,["parameters","includeSafetyAttributes"],c);const d=a(t,["includeRaiReason"]);e!==void 0&&d!=null&&l(e,["parameters","includeRaiReason"],d);const f=a(t,["language"]);e!==void 0&&f!=null&&l(e,["parameters","language"],f);const p=a(t,["outputMimeType"]);e!==void 0&&p!=null&&l(e,["parameters","outputOptions","mimeType"],p);const h=a(t,["outputCompressionQuality"]);if(e!==void 0&&h!=null&&l(e,["parameters","outputOptions","compressionQuality"],h),a(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(a(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const y=a(t,["imageSize"]);if(e!==void 0&&y!=null&&l(e,["parameters","sampleImageSize"],y),a(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function Ow(t,e){const n={},i=a(t,["outputGcsUri"]);e!==void 0&&i!=null&&l(e,["parameters","storageUri"],i);const r=a(t,["negativePrompt"]);e!==void 0&&r!=null&&l(e,["parameters","negativePrompt"],r);const o=a(t,["numberOfImages"]);e!==void 0&&o!=null&&l(e,["parameters","sampleCount"],o);const s=a(t,["aspectRatio"]);e!==void 0&&s!=null&&l(e,["parameters","aspectRatio"],s);const u=a(t,["guidanceScale"]);e!==void 0&&u!=null&&l(e,["parameters","guidanceScale"],u);const c=a(t,["seed"]);e!==void 0&&c!=null&&l(e,["parameters","seed"],c);const d=a(t,["safetyFilterLevel"]);e!==void 0&&d!=null&&l(e,["parameters","safetySetting"],d);const f=a(t,["personGeneration"]);e!==void 0&&f!=null&&l(e,["parameters","personGeneration"],f);const p=a(t,["includeSafetyAttributes"]);e!==void 0&&p!=null&&l(e,["parameters","includeSafetyAttributes"],p);const h=a(t,["includeRaiReason"]);e!==void 0&&h!=null&&l(e,["parameters","includeRaiReason"],h);const y=a(t,["language"]);e!==void 0&&y!=null&&l(e,["parameters","language"],y);const T=a(t,["outputMimeType"]);e!==void 0&&T!=null&&l(e,["parameters","outputOptions","mimeType"],T);const E=a(t,["outputCompressionQuality"]);e!==void 0&&E!=null&&l(e,["parameters","outputOptions","compressionQuality"],E);const w=a(t,["addWatermark"]);e!==void 0&&w!=null&&l(e,["parameters","addWatermark"],w);const _=a(t,["labels"]);e!==void 0&&_!=null&&l(e,["labels"],_);const g=a(t,["imageSize"]);e!==void 0&&g!=null&&l(e,["parameters","sampleImageSize"],g);const v=a(t,["enhancePrompt"]);return e!==void 0&&v!=null&&l(e,["parameters","enhancePrompt"],v),n}function Vw(t,e){const n={},i=a(e,["model"]);i!=null&&l(n,["_url","model"],ee(t,i));const r=a(e,["prompt"]);r!=null&&l(n,["instances[0]","prompt"],r);const o=a(e,["config"]);return o!=null&&Fw(o,n),n}function Hw(t,e){const n={},i=a(e,["model"]);i!=null&&l(n,["_url","model"],ee(t,i));const r=a(e,["prompt"]);r!=null&&l(n,["instances[0]","prompt"],r);const o=a(e,["config"]);return o!=null&&Ow(o,n),n}function Bw(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const i=a(t,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>jw(s))),l(e,["generatedImages"],o)}const r=a(t,["positivePromptSafetyAttributes"]);return r!=null&&l(e,["positivePromptSafetyAttributes"],Rg(r)),e}function Gw(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const i=a(t,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>Js(s))),l(e,["generatedImages"],o)}const r=a(t,["positivePromptSafetyAttributes"]);return r!=null&&l(e,["positivePromptSafetyAttributes"],Pg(r)),e}function qw(t,e){const n={},i=a(t,["numberOfVideos"]);if(e!==void 0&&i!=null&&l(e,["parameters","sampleCount"],i),a(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(a(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const r=a(t,["durationSeconds"]);if(e!==void 0&&r!=null&&l(e,["parameters","durationSeconds"],r),a(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const o=a(t,["aspectRatio"]);e!==void 0&&o!=null&&l(e,["parameters","aspectRatio"],o);const s=a(t,["resolution"]);e!==void 0&&s!=null&&l(e,["parameters","resolution"],s);const u=a(t,["personGeneration"]);if(e!==void 0&&u!=null&&l(e,["parameters","personGeneration"],u),a(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const c=a(t,["negativePrompt"]);e!==void 0&&c!=null&&l(e,["parameters","negativePrompt"],c);const d=a(t,["enhancePrompt"]);if(e!==void 0&&d!=null&&l(e,["parameters","enhancePrompt"],d),a(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const f=a(t,["lastFrame"]);e!==void 0&&f!=null&&l(e,["instances[0]","lastFrame"],Ks(f));const p=a(t,["referenceImages"]);if(e!==void 0&&p!=null){let h=p;Array.isArray(h)&&(h=h.map(y=>zC(y))),l(e,["instances[0]","referenceImages"],h)}if(a(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(a(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function $w(t,e){const n={},i=a(t,["numberOfVideos"]);e!==void 0&&i!=null&&l(e,["parameters","sampleCount"],i);const r=a(t,["outputGcsUri"]);e!==void 0&&r!=null&&l(e,["parameters","storageUri"],r);const o=a(t,["fps"]);e!==void 0&&o!=null&&l(e,["parameters","fps"],o);const s=a(t,["durationSeconds"]);e!==void 0&&s!=null&&l(e,["parameters","durationSeconds"],s);const u=a(t,["seed"]);e!==void 0&&u!=null&&l(e,["parameters","seed"],u);const c=a(t,["aspectRatio"]);e!==void 0&&c!=null&&l(e,["parameters","aspectRatio"],c);const d=a(t,["resolution"]);e!==void 0&&d!=null&&l(e,["parameters","resolution"],d);const f=a(t,["personGeneration"]);e!==void 0&&f!=null&&l(e,["parameters","personGeneration"],f);const p=a(t,["pubsubTopic"]);e!==void 0&&p!=null&&l(e,["parameters","pubsubTopic"],p);const h=a(t,["negativePrompt"]);e!==void 0&&h!=null&&l(e,["parameters","negativePrompt"],h);const y=a(t,["enhancePrompt"]);e!==void 0&&y!=null&&l(e,["parameters","enhancePrompt"],y);const T=a(t,["generateAudio"]);e!==void 0&&T!=null&&l(e,["parameters","generateAudio"],T);const E=a(t,["lastFrame"]);e!==void 0&&E!=null&&l(e,["instances[0]","lastFrame"],Ct(E));const w=a(t,["referenceImages"]);if(e!==void 0&&w!=null){let v=w;Array.isArray(v)&&(v=v.map(I=>WC(I))),l(e,["instances[0]","referenceImages"],v)}const _=a(t,["mask"]);e!==void 0&&_!=null&&l(e,["instances[0]","mask"],$C(_));const g=a(t,["compressionQuality"]);return e!==void 0&&g!=null&&l(e,["parameters","compressionQuality"],g),n}function zw(t){const e={},n=a(t,["name"]);n!=null&&l(e,["name"],n);const i=a(t,["metadata"]);i!=null&&l(e,["metadata"],i);const r=a(t,["done"]);r!=null&&l(e,["done"],r);const o=a(t,["error"]);o!=null&&l(e,["error"],o);const s=a(t,["response","generateVideoResponse"]);return s!=null&&l(e,["response"],Yw(s)),e}function Ww(t){const e={},n=a(t,["name"]);n!=null&&l(e,["name"],n);const i=a(t,["metadata"]);i!=null&&l(e,["metadata"],i);const r=a(t,["done"]);r!=null&&l(e,["done"],r);const o=a(t,["error"]);o!=null&&l(e,["error"],o);const s=a(t,["response"]);return s!=null&&l(e,["response"],Qw(s)),e}function Jw(t,e){const n={},i=a(e,["model"]);i!=null&&l(n,["_url","model"],ee(t,i));const r=a(e,["prompt"]);r!=null&&l(n,["instances[0]","prompt"],r);const o=a(e,["image"]);o!=null&&l(n,["instances[0]","image"],Ks(o));const s=a(e,["video"]);s!=null&&l(n,["instances[0]","video"],Dg(s));const u=a(e,["source"]);u!=null&&Xw(u,n);const c=a(e,["config"]);return c!=null&&qw(c,n),n}function Kw(t,e){const n={},i=a(e,["model"]);i!=null&&l(n,["_url","model"],ee(t,i));const r=a(e,["prompt"]);r!=null&&l(n,["instances[0]","prompt"],r);const o=a(e,["image"]);o!=null&&l(n,["instances[0]","image"],Ct(o));const s=a(e,["video"]);s!=null&&l(n,["instances[0]","video"],Lg(s));const u=a(e,["source"]);u!=null&&Zw(u,n);const c=a(e,["config"]);return c!=null&&$w(c,n),n}function Yw(t){const e={},n=a(t,["generatedSamples"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>tC(s))),l(e,["generatedVideos"],o)}const i=a(t,["raiMediaFilteredCount"]);i!=null&&l(e,["raiMediaFilteredCount"],i);const r=a(t,["raiMediaFilteredReasons"]);return r!=null&&l(e,["raiMediaFilteredReasons"],r),e}function Qw(t){const e={},n=a(t,["videos"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>nC(s))),l(e,["generatedVideos"],o)}const i=a(t,["raiMediaFilteredCount"]);i!=null&&l(e,["raiMediaFilteredCount"],i);const r=a(t,["raiMediaFilteredReasons"]);return r!=null&&l(e,["raiMediaFilteredReasons"],r),e}function Xw(t,e){const n={},i=a(t,["prompt"]);e!==void 0&&i!=null&&l(e,["instances[0]","prompt"],i);const r=a(t,["image"]);e!==void 0&&r!=null&&l(e,["instances[0]","image"],Ks(r));const o=a(t,["video"]);return e!==void 0&&o!=null&&l(e,["instances[0]","video"],Dg(o)),n}function Zw(t,e){const n={},i=a(t,["prompt"]);e!==void 0&&i!=null&&l(e,["instances[0]","prompt"],i);const r=a(t,["image"]);e!==void 0&&r!=null&&l(e,["instances[0]","image"],Ct(r));const o=a(t,["video"]);return e!==void 0&&o!=null&&l(e,["instances[0]","video"],Lg(o)),n}function jw(t){const e={},n=a(t,["_self"]);n!=null&&l(e,["image"],cC(n));const i=a(t,["raiFilteredReason"]);i!=null&&l(e,["raiFilteredReason"],i);const r=a(t,["_self"]);return r!=null&&l(e,["safetyAttributes"],Rg(r)),e}function Js(t){const e={},n=a(t,["_self"]);n!=null&&l(e,["image"],Ng(n));const i=a(t,["raiFilteredReason"]);i!=null&&l(e,["raiFilteredReason"],i);const r=a(t,["_self"]);r!=null&&l(e,["safetyAttributes"],Pg(r));const o=a(t,["prompt"]);return o!=null&&l(e,["enhancedPrompt"],o),e}function eC(t){const e={},n=a(t,["_self"]);n!=null&&l(e,["mask"],Ng(n));const i=a(t,["labels"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(o=>o)),l(e,["labels"],r)}return e}function tC(t){const e={},n=a(t,["video"]);return n!=null&&l(e,["video"],GC(n)),e}function nC(t){const e={},n=a(t,["_self"]);return n!=null&&l(e,["video"],qC(n)),e}function iC(t){const e={},n=a(t,["modelSelectionConfig"]);n!=null&&l(e,["modelConfig"],n);const i=a(t,["responseJsonSchema"]);i!=null&&l(e,["responseJsonSchema"],i);const r=a(t,["audioTimestamp"]);r!=null&&l(e,["audioTimestamp"],r);const o=a(t,["candidateCount"]);o!=null&&l(e,["candidateCount"],o);const s=a(t,["enableAffectiveDialog"]);s!=null&&l(e,["enableAffectiveDialog"],s);const u=a(t,["frequencyPenalty"]);u!=null&&l(e,["frequencyPenalty"],u);const c=a(t,["logprobs"]);c!=null&&l(e,["logprobs"],c);const d=a(t,["maxOutputTokens"]);d!=null&&l(e,["maxOutputTokens"],d);const f=a(t,["mediaResolution"]);f!=null&&l(e,["mediaResolution"],f);const p=a(t,["presencePenalty"]);p!=null&&l(e,["presencePenalty"],p);const h=a(t,["responseLogprobs"]);h!=null&&l(e,["responseLogprobs"],h);const y=a(t,["responseMimeType"]);y!=null&&l(e,["responseMimeType"],y);const T=a(t,["responseModalities"]);T!=null&&l(e,["responseModalities"],T);const E=a(t,["responseSchema"]);E!=null&&l(e,["responseSchema"],E);const w=a(t,["routingConfig"]);w!=null&&l(e,["routingConfig"],w);const _=a(t,["seed"]);_!=null&&l(e,["seed"],_);const g=a(t,["speechConfig"]);g!=null&&l(e,["speechConfig"],Mg(g));const v=a(t,["stopSequences"]);v!=null&&l(e,["stopSequences"],v);const I=a(t,["temperature"]);I!=null&&l(e,["temperature"],I);const C=a(t,["thinkingConfig"]);C!=null&&l(e,["thinkingConfig"],C);const x=a(t,["topK"]);x!=null&&l(e,["topK"],x);const A=a(t,["topP"]);if(A!=null&&l(e,["topP"],A),a(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function rC(t,e){const n={},i=a(e,["model"]);return i!=null&&l(n,["_url","name"],ee(t,i)),n}function oC(t,e){const n={},i=a(e,["model"]);return i!=null&&l(n,["_url","name"],ee(t,i)),n}function sC(t){const e={};if(a(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=a(t,["enableWidget"]);return n!=null&&l(e,["enableWidget"],n),e}function aC(t){const e={};if(a(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(a(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=a(t,["timeRangeFilter"]);return n!=null&&l(e,["timeRangeFilter"],n),e}function lC(t){const e={},n=a(t,["aspectRatio"]);n!=null&&l(e,["aspectRatio"],n);const i=a(t,["imageSize"]);if(i!=null&&l(e,["imageSize"],i),a(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(a(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function uC(t){const e={},n=a(t,["aspectRatio"]);n!=null&&l(e,["aspectRatio"],n);const i=a(t,["imageSize"]);i!=null&&l(e,["imageSize"],i);const r=a(t,["outputMimeType"]);r!=null&&l(e,["imageOutputOptions","mimeType"],r);const o=a(t,["outputCompressionQuality"]);return o!=null&&l(e,["imageOutputOptions","compressionQuality"],o),e}function cC(t){const e={},n=a(t,["bytesBase64Encoded"]);n!=null&&l(e,["imageBytes"],Fn(n));const i=a(t,["mimeType"]);return i!=null&&l(e,["mimeType"],i),e}function Ng(t){const e={},n=a(t,["gcsUri"]);n!=null&&l(e,["gcsUri"],n);const i=a(t,["bytesBase64Encoded"]);i!=null&&l(e,["imageBytes"],Fn(i));const r=a(t,["mimeType"]);return r!=null&&l(e,["mimeType"],r),e}function Ks(t){const e={};if(a(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=a(t,["imageBytes"]);n!=null&&l(e,["bytesBase64Encoded"],Fn(n));const i=a(t,["mimeType"]);return i!=null&&l(e,["mimeType"],i),e}function Ct(t){const e={},n=a(t,["gcsUri"]);n!=null&&l(e,["gcsUri"],n);const i=a(t,["imageBytes"]);i!=null&&l(e,["bytesBase64Encoded"],Fn(i));const r=a(t,["mimeType"]);return r!=null&&l(e,["mimeType"],r),e}function dC(t,e,n){const i={},r=a(e,["pageSize"]);n!==void 0&&r!=null&&l(n,["_query","pageSize"],r);const o=a(e,["pageToken"]);n!==void 0&&o!=null&&l(n,["_query","pageToken"],o);const s=a(e,["filter"]);n!==void 0&&s!=null&&l(n,["_query","filter"],s);const u=a(e,["queryBase"]);return n!==void 0&&u!=null&&l(n,["_url","models_url"],Eg(t,u)),i}function fC(t,e,n){const i={},r=a(e,["pageSize"]);n!==void 0&&r!=null&&l(n,["_query","pageSize"],r);const o=a(e,["pageToken"]);n!==void 0&&o!=null&&l(n,["_query","pageToken"],o);const s=a(e,["filter"]);n!==void 0&&s!=null&&l(n,["_query","filter"],s);const u=a(e,["queryBase"]);return n!==void 0&&u!=null&&l(n,["_url","models_url"],Eg(t,u)),i}function pC(t,e){const n={},i=a(e,["config"]);return i!=null&&dC(t,i,n),n}function hC(t,e){const n={},i=a(e,["config"]);return i!=null&&fC(t,i,n),n}function mC(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const i=a(t,["nextPageToken"]);i!=null&&l(e,["nextPageToken"],i);const r=a(t,["_self"]);if(r!=null){let o=Ig(r);Array.isArray(o)&&(o=o.map(s=>Gl(s))),l(e,["models"],o)}return e}function gC(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const i=a(t,["nextPageToken"]);i!=null&&l(e,["nextPageToken"],i);const r=a(t,["_self"]);if(r!=null){let o=Ig(r);Array.isArray(o)&&(o=o.map(s=>ql(s))),l(e,["models"],o)}return e}function yC(t){const e={},n=a(t,["maskMode"]);n!=null&&l(e,["maskMode"],n);const i=a(t,["segmentationClasses"]);i!=null&&l(e,["maskClasses"],i);const r=a(t,["maskDilation"]);return r!=null&&l(e,["dilation"],r),e}function Gl(t){const e={},n=a(t,["name"]);n!=null&&l(e,["name"],n);const i=a(t,["displayName"]);i!=null&&l(e,["displayName"],i);const r=a(t,["description"]);r!=null&&l(e,["description"],r);const o=a(t,["version"]);o!=null&&l(e,["version"],o);const s=a(t,["_self"]);s!=null&&l(e,["tunedModelInfo"],bC(s));const u=a(t,["inputTokenLimit"]);u!=null&&l(e,["inputTokenLimit"],u);const c=a(t,["outputTokenLimit"]);c!=null&&l(e,["outputTokenLimit"],c);const d=a(t,["supportedGenerationMethods"]);d!=null&&l(e,["supportedActions"],d);const f=a(t,["temperature"]);f!=null&&l(e,["temperature"],f);const p=a(t,["maxTemperature"]);p!=null&&l(e,["maxTemperature"],p);const h=a(t,["topP"]);h!=null&&l(e,["topP"],h);const y=a(t,["topK"]);y!=null&&l(e,["topK"],y);const T=a(t,["thinking"]);return T!=null&&l(e,["thinking"],T),e}function ql(t){const e={},n=a(t,["name"]);n!=null&&l(e,["name"],n);const i=a(t,["displayName"]);i!=null&&l(e,["displayName"],i);const r=a(t,["description"]);r!=null&&l(e,["description"],r);const o=a(t,["versionId"]);o!=null&&l(e,["version"],o);const s=a(t,["deployedModels"]);if(s!=null){let p=s;Array.isArray(p)&&(p=p.map(h=>Rw(h))),l(e,["endpoints"],p)}const u=a(t,["labels"]);u!=null&&l(e,["labels"],u);const c=a(t,["_self"]);c!=null&&l(e,["tunedModelInfo"],DC(c));const d=a(t,["defaultCheckpointId"]);d!=null&&l(e,["defaultCheckpointId"],d);const f=a(t,["checkpoints"]);if(f!=null){let p=f;Array.isArray(p)&&(p=p.map(h=>h)),l(e,["checkpoints"],p)}return e}function vC(t){const e={},n=a(t,["mediaResolution"]);n!=null&&l(e,["mediaResolution"],n);const i=a(t,["codeExecutionResult"]);i!=null&&l(e,["codeExecutionResult"],i);const r=a(t,["executableCode"]);r!=null&&l(e,["executableCode"],r);const o=a(t,["fileData"]);o!=null&&l(e,["fileData"],Pw(o));const s=a(t,["functionCall"]);s!=null&&l(e,["functionCall"],Mw(s));const u=a(t,["functionResponse"]);u!=null&&l(e,["functionResponse"],u);const c=a(t,["inlineData"]);c!=null&&l(e,["inlineData"],iw(c));const d=a(t,["text"]);d!=null&&l(e,["text"],d);const f=a(t,["thought"]);f!=null&&l(e,["thought"],f);const p=a(t,["thoughtSignature"]);p!=null&&l(e,["thoughtSignature"],p);const h=a(t,["videoMetadata"]);return h!=null&&l(e,["videoMetadata"],h),e}function _C(t){const e={},n=a(t,["productImage"]);return n!=null&&l(e,["image"],Ct(n)),e}function TC(t,e){const n={},i=a(t,["numberOfImages"]);e!==void 0&&i!=null&&l(e,["parameters","sampleCount"],i);const r=a(t,["baseSteps"]);e!==void 0&&r!=null&&l(e,["parameters","baseSteps"],r);const o=a(t,["outputGcsUri"]);e!==void 0&&o!=null&&l(e,["parameters","storageUri"],o);const s=a(t,["seed"]);e!==void 0&&s!=null&&l(e,["parameters","seed"],s);const u=a(t,["safetyFilterLevel"]);e!==void 0&&u!=null&&l(e,["parameters","safetySetting"],u);const c=a(t,["personGeneration"]);e!==void 0&&c!=null&&l(e,["parameters","personGeneration"],c);const d=a(t,["addWatermark"]);e!==void 0&&d!=null&&l(e,["parameters","addWatermark"],d);const f=a(t,["outputMimeType"]);e!==void 0&&f!=null&&l(e,["parameters","outputOptions","mimeType"],f);const p=a(t,["outputCompressionQuality"]);e!==void 0&&p!=null&&l(e,["parameters","outputOptions","compressionQuality"],p);const h=a(t,["enhancePrompt"]);e!==void 0&&h!=null&&l(e,["parameters","enhancePrompt"],h);const y=a(t,["labels"]);return e!==void 0&&y!=null&&l(e,["labels"],y),n}function EC(t,e){const n={},i=a(e,["model"]);i!=null&&l(n,["_url","model"],ee(t,i));const r=a(e,["source"]);r!=null&&wC(r,n);const o=a(e,["config"]);return o!=null&&TC(o,n),n}function IC(t){const e={},n=a(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>Js(r))),l(e,["generatedImages"],i)}return e}function wC(t,e){const n={},i=a(t,["prompt"]);e!==void 0&&i!=null&&l(e,["instances[0]","prompt"],i);const r=a(t,["personImage"]);e!==void 0&&r!=null&&l(e,["instances[0]","personImage","image"],Ct(r));const o=a(t,["productImages"]);if(e!==void 0&&o!=null){let s=o;Array.isArray(s)&&(s=s.map(u=>_C(u))),l(e,["instances[0]","productImages"],s)}return n}function CC(t){const e={},n=a(t,["referenceImage"]);n!=null&&l(e,["referenceImage"],Ct(n));const i=a(t,["referenceId"]);i!=null&&l(e,["referenceId"],i);const r=a(t,["referenceType"]);r!=null&&l(e,["referenceType"],r);const o=a(t,["maskImageConfig"]);o!=null&&l(e,["maskImageConfig"],yC(o));const s=a(t,["controlImageConfig"]);s!=null&&l(e,["controlImageConfig"],cw(s));const u=a(t,["styleImageConfig"]);u!=null&&l(e,["styleImageConfig"],u);const c=a(t,["subjectImageConfig"]);return c!=null&&l(e,["subjectImageConfig"],c),e}function Rg(t){const e={},n=a(t,["safetyAttributes","categories"]);n!=null&&l(e,["categories"],n);const i=a(t,["safetyAttributes","scores"]);i!=null&&l(e,["scores"],i);const r=a(t,["contentType"]);return r!=null&&l(e,["contentType"],r),e}function Pg(t){const e={},n=a(t,["safetyAttributes","categories"]);n!=null&&l(e,["categories"],n);const i=a(t,["safetyAttributes","scores"]);i!=null&&l(e,["scores"],i);const r=a(t,["contentType"]);return r!=null&&l(e,["contentType"],r),e}function SC(t){const e={},n=a(t,["category"]);if(n!=null&&l(e,["category"],n),a(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=a(t,["threshold"]);return i!=null&&l(e,["threshold"],i),e}function xC(t){const e={},n=a(t,["image"]);return n!=null&&l(e,["image"],Ct(n)),e}function AC(t,e){const n={},i=a(t,["mode"]);e!==void 0&&i!=null&&l(e,["parameters","mode"],i);const r=a(t,["maxPredictions"]);e!==void 0&&r!=null&&l(e,["parameters","maxPredictions"],r);const o=a(t,["confidenceThreshold"]);e!==void 0&&o!=null&&l(e,["parameters","confidenceThreshold"],o);const s=a(t,["maskDilation"]);e!==void 0&&s!=null&&l(e,["parameters","maskDilation"],s);const u=a(t,["binaryColorThreshold"]);e!==void 0&&u!=null&&l(e,["parameters","binaryColorThreshold"],u);const c=a(t,["labels"]);return e!==void 0&&c!=null&&l(e,["labels"],c),n}function kC(t,e){const n={},i=a(e,["model"]);i!=null&&l(n,["_url","model"],ee(t,i));const r=a(e,["source"]);r!=null&&RC(r,n);const o=a(e,["config"]);return o!=null&&AC(o,n),n}function NC(t){const e={},n=a(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>eC(r))),l(e,["generatedMasks"],i)}return e}function RC(t,e){const n={},i=a(t,["prompt"]);e!==void 0&&i!=null&&l(e,["instances[0]","prompt"],i);const r=a(t,["image"]);e!==void 0&&r!=null&&l(e,["instances[0]","image"],Ct(r));const o=a(t,["scribbleImage"]);return e!==void 0&&o!=null&&l(e,["instances[0]","scribble"],xC(o)),n}function Mg(t){const e={},n=a(t,["languageCode"]);n!=null&&l(e,["languageCode"],n);const i=a(t,["voiceConfig"]);if(i!=null&&l(e,["voiceConfig"],i),a(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function PC(t){const e={},n=a(t,["functionCallingConfig"]);n!=null&&l(e,["functionCallingConfig"],bw(n));const i=a(t,["retrievalConfig"]);return i!=null&&l(e,["retrievalConfig"],i),e}function MC(t){const e={},n=a(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(p=>p)),l(e,["functionDeclarations"],f)}if(a(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=a(t,["googleSearchRetrieval"]);i!=null&&l(e,["googleSearchRetrieval"],i);const r=a(t,["computerUse"]);r!=null&&l(e,["computerUse"],r);const o=a(t,["fileSearch"]);o!=null&&l(e,["fileSearch"],o);const s=a(t,["codeExecution"]);if(s!=null&&l(e,["codeExecution"],s),a(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=a(t,["googleMaps"]);u!=null&&l(e,["googleMaps"],sC(u));const c=a(t,["googleSearch"]);c!=null&&l(e,["googleSearch"],aC(c));const d=a(t,["urlContext"]);return d!=null&&l(e,["urlContext"],d),e}function bg(t){const e={},n=a(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(h=>Dw(h))),l(e,["functionDeclarations"],p)}const i=a(t,["retrieval"]);i!=null&&l(e,["retrieval"],i);const r=a(t,["googleSearchRetrieval"]);r!=null&&l(e,["googleSearchRetrieval"],r);const o=a(t,["computerUse"]);if(o!=null&&l(e,["computerUse"],o),a(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const s=a(t,["codeExecution"]);s!=null&&l(e,["codeExecution"],s);const u=a(t,["enterpriseWebSearch"]);u!=null&&l(e,["enterpriseWebSearch"],u);const c=a(t,["googleMaps"]);c!=null&&l(e,["googleMaps"],c);const d=a(t,["googleSearch"]);d!=null&&l(e,["googleSearch"],d);const f=a(t,["urlContext"]);return f!=null&&l(e,["urlContext"],f),e}function bC(t){const e={},n=a(t,["baseModel"]);n!=null&&l(e,["baseModel"],n);const i=a(t,["createTime"]);i!=null&&l(e,["createTime"],i);const r=a(t,["updateTime"]);return r!=null&&l(e,["updateTime"],r),e}function DC(t){const e={},n=a(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&l(e,["baseModel"],n);const i=a(t,["createTime"]);i!=null&&l(e,["createTime"],i);const r=a(t,["updateTime"]);return r!=null&&l(e,["updateTime"],r),e}function LC(t,e){const n={},i=a(t,["displayName"]);e!==void 0&&i!=null&&l(e,["displayName"],i);const r=a(t,["description"]);e!==void 0&&r!=null&&l(e,["description"],r);const o=a(t,["defaultCheckpointId"]);return e!==void 0&&o!=null&&l(e,["defaultCheckpointId"],o),n}function UC(t,e){const n={},i=a(t,["displayName"]);e!==void 0&&i!=null&&l(e,["displayName"],i);const r=a(t,["description"]);e!==void 0&&r!=null&&l(e,["description"],r);const o=a(t,["defaultCheckpointId"]);return e!==void 0&&o!=null&&l(e,["defaultCheckpointId"],o),n}function FC(t,e){const n={},i=a(e,["model"]);i!=null&&l(n,["_url","name"],ee(t,i));const r=a(e,["config"]);return r!=null&&LC(r,n),n}function OC(t,e){const n={},i=a(e,["model"]);i!=null&&l(n,["_url","model"],ee(t,i));const r=a(e,["config"]);return r!=null&&UC(r,n),n}function VC(t,e){const n={},i=a(t,["outputGcsUri"]);e!==void 0&&i!=null&&l(e,["parameters","storageUri"],i);const r=a(t,["safetyFilterLevel"]);e!==void 0&&r!=null&&l(e,["parameters","safetySetting"],r);const o=a(t,["personGeneration"]);e!==void 0&&o!=null&&l(e,["parameters","personGeneration"],o);const s=a(t,["includeRaiReason"]);e!==void 0&&s!=null&&l(e,["parameters","includeRaiReason"],s);const u=a(t,["outputMimeType"]);e!==void 0&&u!=null&&l(e,["parameters","outputOptions","mimeType"],u);const c=a(t,["outputCompressionQuality"]);e!==void 0&&c!=null&&l(e,["parameters","outputOptions","compressionQuality"],c);const d=a(t,["enhanceInputImage"]);e!==void 0&&d!=null&&l(e,["parameters","upscaleConfig","enhanceInputImage"],d);const f=a(t,["imagePreservationFactor"]);e!==void 0&&f!=null&&l(e,["parameters","upscaleConfig","imagePreservationFactor"],f);const p=a(t,["labels"]);e!==void 0&&p!=null&&l(e,["labels"],p);const h=a(t,["numberOfImages"]);e!==void 0&&h!=null&&l(e,["parameters","sampleCount"],h);const y=a(t,["mode"]);return e!==void 0&&y!=null&&l(e,["parameters","mode"],y),n}function HC(t,e){const n={},i=a(e,["model"]);i!=null&&l(n,["_url","model"],ee(t,i));const r=a(e,["image"]);r!=null&&l(n,["instances[0]","image"],Ct(r));const o=a(e,["upscaleFactor"]);o!=null&&l(n,["parameters","upscaleConfig","upscaleFactor"],o);const s=a(e,["config"]);return s!=null&&VC(s,n),n}function BC(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const i=a(t,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(o=>Js(o))),l(e,["generatedImages"],r)}return e}function GC(t){const e={},n=a(t,["uri"]);n!=null&&l(e,["uri"],n);const i=a(t,["encodedVideo"]);i!=null&&l(e,["videoBytes"],Fn(i));const r=a(t,["encoding"]);return r!=null&&l(e,["mimeType"],r),e}function qC(t){const e={},n=a(t,["gcsUri"]);n!=null&&l(e,["uri"],n);const i=a(t,["bytesBase64Encoded"]);i!=null&&l(e,["videoBytes"],Fn(i));const r=a(t,["mimeType"]);return r!=null&&l(e,["mimeType"],r),e}function $C(t){const e={},n=a(t,["image"]);n!=null&&l(e,["_self"],Ct(n));const i=a(t,["maskMode"]);return i!=null&&l(e,["maskMode"],i),e}function zC(t){const e={},n=a(t,["image"]);n!=null&&l(e,["image"],Ks(n));const i=a(t,["referenceType"]);return i!=null&&l(e,["referenceType"],i),e}function WC(t){const e={},n=a(t,["image"]);n!=null&&l(e,["image"],Ct(n));const i=a(t,["referenceType"]);return i!=null&&l(e,["referenceType"],i),e}function Dg(t){const e={},n=a(t,["uri"]);n!=null&&l(e,["uri"],n);const i=a(t,["videoBytes"]);i!=null&&l(e,["encodedVideo"],Fn(i));const r=a(t,["mimeType"]);return r!=null&&l(e,["encoding"],r),e}function Lg(t){const e={},n=a(t,["uri"]);n!=null&&l(e,["gcsUri"],n);const i=a(t,["videoBytes"]);i!=null&&l(e,["bytesBase64Encoded"],Fn(i));const r=a(t,["mimeType"]);return r!=null&&l(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const JC="Content-Type",KC="X-Server-Timeout",YC="User-Agent",$l="x-goog-api-client",QC="1.30.0",XC=`google-genai-sdk/${QC}`,ZC="v1beta1",jC="v1beta",sp=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class eS{constructor(e){var n,i;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const r={};this.clientOptions.vertexai?(r.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:ZC,r.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(r.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:jC,r.baseUrl="https://generativelanguage.googleapis.com/"),r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,i){const r=[this.getRequestUrlInternal(n)];return i&&r.push(this.getBaseResourcePath()),e!==""&&r.push(e),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,n,i);if(e.queryParams)for(const[s,u]of Object.entries(e.queryParams))r.searchParams.append(s,String(u));let o={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else o.body=e.body;return o=await this.includeExtraHttpOptionsToRequestInit(o,n,r.toString(),e.abortSignal),this.unaryApiCall(r,o,e.httpMethod)}patchHttpOptions(e,n){const i=JSON.parse(JSON.stringify(e));for(const[r,o]of Object.entries(n))typeof o=="object"?i[r]=Object.assign(Object.assign({},i[r]),o):o!==void 0&&(i[r]=o);return i}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,n,i);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let o={};return o.body=e.body,o=await this.includeExtraHttpOptionsToRequestInit(o,n,r.toString(),e.abortSignal),this.streamApiCall(r,o,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,i,r){if(n&&n.timeout||r){const o=new AbortController,s=o.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const u=setTimeout(()=>o.abort(),n.timeout);u&&typeof u.unref=="function"&&u.unref()}r&&r.addEventListener("abort",()=>{o.abort()}),e.signal=s}return n&&n.extraBody!==null&&tS(e,n.extraBody),e.headers=await this.getHeadersInternal(n,i),e}async unaryApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async r=>(await ap(r),new Vl(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async r=>(await ap(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(e){var n;return bi(this,arguments,function*(){const r=(n=e==null?void 0:e.body)===null||n===void 0?void 0:n.getReader(),o=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let s="";for(;;){const{done:u,value:c}=yield le(r.read());if(u){if(s.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const d=o.decode(c,{stream:!0});try{const p=JSON.parse(d);if("error"in p){const h=JSON.parse(JSON.stringify(p.error)),y=h.status,T=h.code,E=`got status: ${y}. ${JSON.stringify(p)}`;if(T>=400&&T<600)throw new zs({message:E,status:T})}}catch(p){if(p.name==="ApiError")throw p}s+=d;let f=s.match(sp);for(;f;){const p=f[1];try{const h=new Response(p,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield le(new Vl(h)),s=s.slice(f[0].length),f=s.match(sp)}catch(h){throw new Error(`exception parsing stream chunk ${p}. ${h}`)}}}}finally{r.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const e={},n=XC+" "+this.clientOptions.userAgentExtra;return e[YC]=n,e[$l]=n,e[JC]="application/json",e}async getHeadersInternal(e,n){const i=new Headers;if(e&&e.headers){for(const[r,o]of Object.entries(e.headers))i.append(r,o);e.timeout&&e.timeout>0&&i.append(KC,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(i,n),i}getFileName(e){var n;let i="";return typeof e=="string"&&(i=e.replace(/[/\\]+$/,""),i=(n=i.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),i}async uploadFile(e,n){var i;const r={};n!=null&&(r.mimeType=n.mimeType,r.name=n.name,r.displayName=n.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const o=this.clientOptions.uploader,s=await o.stat(e);r.sizeBytes=String(s.size);const u=(i=n==null?void 0:n.mimeType)!==null&&i!==void 0?i:s.type;if(u===void 0||u==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=u;const c={file:r},d=this.getFileName(e),f=M("upload/v1beta/files",c._url),p=await this.fetchUploadUrl(f,r.sizeBytes,r.mimeType,d,c,n==null?void 0:n.httpOptions);return o.upload(e,p,this)}async uploadFileToFileSearchStore(e,n,i){var r;const o=this.clientOptions.uploader,s=await o.stat(n),u=String(s.size),c=(r=i==null?void 0:i.mimeType)!==null&&r!==void 0?r:s.type;if(c===void 0||c==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const d=`upload/v1beta/${e}:uploadToFileSearchStore`,f=this.getFileName(n),p={};i!=null&&i.customMetadata&&(p.customMetadata=i.customMetadata),i!=null&&i.chunkingConfig&&(p.chunkingConfig=i.chunkingConfig);const h=await this.fetchUploadUrl(d,u,c,f,p,i==null?void 0:i.httpOptions);return o.uploadToFileSearchStore(n,h,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,i,r,o,s){var u;let c={};s?c=s:c={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${i}`},r?{"X-Goog-Upload-File-Name":r}:{})};const d=await this.request({path:e,body:JSON.stringify(o),httpMethod:"POST",httpOptions:c});if(!d||!(d!=null&&d.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const f=(u=d==null?void 0:d.headers)===null||u===void 0?void 0:u["x-goog-upload-url"];if(f===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return f}}async function ap(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let i;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await t.json():i={error:{message:await t.text(),code:t.status,status:t.statusText}};const r=JSON.stringify(i);throw n>=400&&n<600?new zs({message:r,status:n}):new Error(r)}}function tS(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const o=JSON.parse(t.body);if(typeof o=="object"&&o!==null&&!Array.isArray(o))n=o;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(o,s){const u=Object.assign({},o);for(const c in s)if(Object.prototype.hasOwnProperty.call(s,c)){const d=s[c],f=u[c];d&&typeof d=="object"&&!Array.isArray(d)&&f&&typeof f=="object"&&!Array.isArray(f)?u[c]=i(f,d):(f&&d&&typeof f!=typeof d&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${c}". Original type: ${typeof f}, New type: ${typeof d}. Overwriting.`),u[c]=d)}return u}const r=i(n,e);t.body=JSON.stringify(r)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const nS="mcp_used/unknown";let iS=!1;function Ug(t){for(const e of t)if(rS(e)||typeof e=="object"&&"inputSchema"in e)return!0;return iS}function Fg(t){var e;const n=(e=t[$l])!==null&&e!==void 0?e:"";t[$l]=(n+` ${nS}`).trimStart()}function rS(t){return t!==null&&typeof t=="object"&&t instanceof rc}function oS(t,e=100){return bi(this,arguments,function*(){let i,r=0;for(;r<e;){const o=yield le(t.listTools({cursor:i}));for(const s of o.tools)yield yield le(s),r++;if(!o.nextCursor)break;i=o.nextCursor}})}class rc{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new rc(e,n)}async initialize(){var e,n,i,r;if(this.mcpTools.length>0)return;const o={},s=[];for(const f of this.mcpClients)try{for(var u=!0,c=(n=void 0,Cr(oS(f))),d;d=await c.next(),e=d.done,!e;u=!0){r=d.value,u=!1;const p=r;s.push(p);const h=p.name;if(o[h])throw new Error(`Duplicate function name ${h} found in MCP tools. Please ensure function names are unique.`);o[h]=f}}catch(p){n={error:p}}finally{try{!u&&!e&&(i=c.return)&&await i.call(c)}finally{if(n)throw n.error}}this.mcpTools=s,this.functionNameToMcpClient=o}async tool(){return await this.initialize(),XT(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const i of e)if(i.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[i.name];let o;this.config.timeout&&(o={timeout:this.config.timeout});const s=await r.callTool({name:i.name,arguments:i.args},void 0,o);n.push({functionResponse:{name:i.name,response:s.isError?{error:s}:s}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function sS(t,e,n){const i=new qT;let r;n.data instanceof Blob?r=JSON.parse(await n.data.text()):r=JSON.parse(n.data),Object.assign(i,r),e(i)}class aS{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i}async connect(e){var n,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),o=this.apiClient.getApiVersion(),s=cS(this.apiClient.getDefaultHeaders()),u=this.apiClient.getApiKey(),c=`${r}/ws/google.ai.generativelanguage.${o}.GenerativeService.BidiGenerateMusic?key=${u}`;let d=()=>{};const f=new Promise(v=>{d=v}),p=e.callbacks,h=function(){d({})},y=this.apiClient,T={onopen:h,onmessage:v=>{sS(y,p.onmessage,v)},onerror:(n=p==null?void 0:p.onerror)!==null&&n!==void 0?n:function(v){},onclose:(i=p==null?void 0:p.onclose)!==null&&i!==void 0?i:function(v){}},E=this.webSocketFactory.create(c,uS(s),T);E.connect(),await f;const g={setup:{model:ee(this.apiClient,e.model)}};return E.send(JSON.stringify(g)),new lS(E,this.apiClient)}}class lS{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=KI(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=JI(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(Ci.PLAY)}pause(){this.sendPlaybackControl(Ci.PAUSE)}stop(){this.sendPlaybackControl(Ci.STOP)}resetContext(){this.sendPlaybackControl(Ci.RESET_CONTEXT)}close(){this.conn.close()}}function uS(t){const e={};return t.forEach((n,i)=>{e[i]=n}),e}function cS(t){const e=new Headers;for(const[n,i]of Object.entries(t))e.append(n,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const dS="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function fS(t,e,n){const i=new GT;let r;n.data instanceof Blob?r=await n.data.text():n.data instanceof ArrayBuffer?r=new TextDecoder().decode(n.data):r=n.data;const o=JSON.parse(r);if(t.isVertexAI()){const s=XI(o);Object.assign(i,s)}else Object.assign(i,o);e(i)}class pS{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i,this.music=new aS(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,i,r,o,s,u;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const c=this.apiClient.getWebsocketBaseUrl(),d=this.apiClient.getApiVersion();let f;const p=this.apiClient.getHeaders();e.config&&e.config.tools&&Ug(e.config.tools)&&Fg(p);const h=yS(p);if(this.apiClient.isVertexAI())f=`${c}/ws/google.cloud.aiplatform.${d}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(h,f);else{const P=this.apiClient.getApiKey();let R="BidiGenerateContent",K="key";P!=null&&P.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),d!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),R="BidiGenerateContentConstrained",K="access_token"),f=`${c}/ws/google.ai.generativelanguage.${d}.GenerativeService.${R}?${K}=${P}`}let y=()=>{};const T=new Promise(P=>{y=P}),E=e.callbacks,w=function(){var P;(P=E==null?void 0:E.onopen)===null||P===void 0||P.call(E),y({})},_=this.apiClient,g={onopen:w,onmessage:P=>{fS(_,E.onmessage,P)},onerror:(n=E==null?void 0:E.onerror)!==null&&n!==void 0?n:function(P){},onclose:(i=E==null?void 0:E.onclose)!==null&&i!==void 0?i:function(P){}},v=this.webSocketFactory.create(f,gS(h),g);v.connect(),await T;let I=ee(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&I.startsWith("publishers/")){const P=this.apiClient.getProject(),R=this.apiClient.getLocation();I=`projects/${P}/locations/${R}/`+I}let C={};this.apiClient.isVertexAI()&&((r=e.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[gs.AUDIO]}:e.config.responseModalities=[gs.AUDIO]),!((o=e.config)===null||o===void 0)&&o.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const x=(u=(s=e.config)===null||s===void 0?void 0:s.tools)!==null&&u!==void 0?u:[],A=[];for(const P of x)if(this.isCallableTool(P)){const R=P;A.push(await R.tool())}else A.push(P);A.length>0&&(e.config.tools=A);const N={model:I,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?C=WI(this.apiClient,N):C=zI(this.apiClient,N),delete C.config,v.send(JSON.stringify(C)),new mS(v,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const hS={turnComplete:!0};class mS{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let i=[];try{i=ct(n.turns),e.isVertexAI()||(i=i.map(r=>Ws(r)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:i,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let i=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?i=n.functionResponses:i=[n.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const o of i){if(typeof o!="object"||o===null||!("name"in o)||!("response"in o))throw new Error(`Could not parse function response, type '${typeof o}'.`);if(!e.isVertexAI()&&!("id"in o))throw new Error(dS)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},hS),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:QI(e)}:n={realtimeInput:YI(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function gS(t){const e={};return t.forEach((n,i)=>{e[i]=n}),e}function yS(t){const e=new Headers;for(const[n,i]of Object.entries(t))e.append(n,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const lp=10;function up(t){var e,n,i;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let r=!1;for(const s of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(Di(s)){r=!0;break}if(!r)return!0;const o=(i=t==null?void 0:t.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return o&&(o<0||!Number.isInteger(o))||o==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",o),!0):!1}function Di(t){return"callTool"in t&&typeof t.callTool=="function"}function vS(t){var e,n,i;return(i=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(r=>Di(r)))!==null&&i!==void 0?i:!1}function cp(t){var e;const n=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((i,r)=>{if(Di(i))return;const o=i;o.functionDeclarations&&o.functionDeclarations.length>0&&n.push(r)}),n}function dp(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class _S extends nn{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var i,r,o,s,u;const c=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!vS(n)||up(n.config))return await this.generateContentInternal(c);const d=cp(n);if(d.length>0){const E=d.map(w=>`tools[${w}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${E}.`)}let f,p;const h=ct(c.contents),y=(o=(r=(i=c.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&o!==void 0?o:lp;let T=0;for(;T<y&&(f=await this.generateContentInternal(c),!(!f.functionCalls||f.functionCalls.length===0));){const E=f.candidates[0].content,w=[];for(const _ of(u=(s=n.config)===null||s===void 0?void 0:s.tools)!==null&&u!==void 0?u:[])if(Di(_)){const v=await _.callTool(f.functionCalls);w.push(...v)}T++,p={role:"user",parts:w},c.contents=ct(c.contents),c.contents.push(E),c.contents.push(p),dp(c.config)&&(h.push(E),h.push(p))}return dp(c.config)&&(f.automaticFunctionCallingHistory=h),f},this.generateContentStream=async n=>{var i,r,o,s,u;if(this.maybeMoveToResponseJsonSchem(n),up(n.config)){const p=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(p)}const c=cp(n);if(c.length>0){const p=c.map(h=>`tools[${h}]`).join(", ");throw new Error(`Incompatible tools found at ${p}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const d=(o=(r=(i=n==null?void 0:n.config)===null||i===void 0?void 0:i.toolConfig)===null||r===void 0?void 0:r.functionCallingConfig)===null||o===void 0?void 0:o.streamFunctionCallArguments,f=(u=(s=n==null?void 0:n.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||u===void 0?void 0:u.disable;if(d&&!f)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(i=>{var r;let o;const s=[];if(i!=null&&i.generatedImages)for(const c of i.generatedImages)c&&(c!=null&&c.safetyAttributes)&&((r=c==null?void 0:c.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?o=c==null?void 0:c.safetyAttributes:s.push(c);let u;return o?u={generatedImages:s,positivePromptSafetyAttributes:o,sdkHttpResponse:i.sdkHttpResponse}:u={generatedImages:s,sdkHttpResponse:i.sdkHttpResponse},u}),this.list=async n=>{var i;const s={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!s.config.queryBase){if(!((i=s.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");s.config.filter="labels.tune-type:*"}return new ai(Xt.PAGED_ITEM_MODELS,u=>this.listInternal(u),await this.listInternal(s),s)},this.editImage=async n=>{const i={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(i.referenceImages=n.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async n=>{let i={numberOfImages:1,mode:"upscale"};n.config&&(i=Object.assign(Object.assign({},i),n.config));const r={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:i};return await this.upscaleImageInternal(r)},this.generateVideos=async n=>{var i,r,o,s,u,c;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((i=n.video)===null||i===void 0)&&i.uri&&(!((r=n.video)===null||r===void 0)&&r.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((s=(o=n.source)===null||o===void 0?void 0:o.video)===null||s===void 0)&&s.uri&&(!((c=(u=n.source)===null||u===void 0?void 0:u.video)===null||c===void 0)&&c.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,i,r;const o=(n=e.config)===null||n===void 0?void 0:n.tools;if(!o)return e;const s=await Promise.all(o.map(async c=>Di(c)?await c.tool():c)),u={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:s})};if(u.config.tools=s,e.config&&e.config.tools&&Ug(e.config.tools)){const c=(r=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&r!==void 0?r:{};let d=Object.assign({},c);Object.keys(d).length===0&&(d=this.apiClient.getDefaultHeaders()),Fg(d),u.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:d})}return u}async initAfcToolsMap(e){var n,i,r;const o=new Map;for(const s of(i=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&i!==void 0?i:[])if(Di(s)){const u=s,c=await u.tool();for(const d of(r=c.functionDeclarations)!==null&&r!==void 0?r:[]){if(!d.name)throw new Error("Function declaration name is required.");if(o.has(d.name))throw new Error(`Duplicate tool declaration name: ${d.name}`);o.set(d.name,u)}}return o}async processAfcStream(e){var n,i,r;const o=(r=(i=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&r!==void 0?r:lp;let s=!1,u=0;const c=await this.initAfcToolsMap(e);return function(d,f,p){var h,y;return bi(this,arguments,function*(){for(var T,E,w,_;u<o;){s&&(u++,s=!1);const C=yield le(d.processParamsMaybeAddMcpUsage(p)),x=yield le(d.generateContentStreamInternal(C)),A=[],N=[];try{for(var g=!0,v=(E=void 0,Cr(x)),I;I=yield le(v.next()),T=I.done,!T;g=!0){_=I.value,g=!1;const P=_;if(yield yield le(P),P.candidates&&(!((h=P.candidates[0])===null||h===void 0)&&h.content)){N.push(P.candidates[0].content);for(const R of(y=P.candidates[0].content.parts)!==null&&y!==void 0?y:[])if(u<o&&R.functionCall){if(!R.functionCall.name)throw new Error("Function call name was not returned by the model.");if(f.has(R.functionCall.name)){const K=yield le(f.get(R.functionCall.name).callTool([R.functionCall]));A.push(...K)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${f.keys()}, mising tool: ${R.functionCall.name}`)}}}}catch(P){E={error:P}}finally{try{!g&&!T&&(w=v.return)&&(yield le(w.call(v)))}finally{if(E)throw E.error}}if(A.length>0){s=!0;const P=new ur;P.candidates=[{content:{role:"user",parts:A}}],yield yield le(P);const R=[];R.push(...N),R.push({role:"user",parts:A});const K=ct(p.contents).concat(R);p.contents=K}else break}})}(this,c,e)}async generateContentInternal(e){var n,i,r,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=ip(this.apiClient,e);return u=M("{model}:generateContent",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=op(f),h=new ur;return Object.assign(h,p),h})}else{const d=np(this.apiClient,e);return u=M("{model}:generateContent",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=rp(f),h=new ur;return Object.assign(h,p),h})}}async generateContentStreamInternal(e){var n,i,r,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=ip(this.apiClient,e);return u=M("{model}:streamGenerateContent?alt=sse",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.requestStream({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),s.then(function(p){return bi(this,arguments,function*(){var h,y,T,E;try{for(var w=!0,_=Cr(p),g;g=yield le(_.next()),h=g.done,!h;w=!0){E=g.value,w=!1;const v=E,I=op(yield le(v.json()));I.sdkHttpResponse={headers:v.headers};const C=new ur;Object.assign(C,I),yield yield le(C)}}catch(v){y={error:v}}finally{try{!w&&!h&&(T=_.return)&&(yield le(T.call(_)))}finally{if(y)throw y.error}}})})}else{const d=np(this.apiClient,e);return u=M("{model}:streamGenerateContent?alt=sse",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.requestStream({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),s.then(function(p){return bi(this,arguments,function*(){var h,y,T,E;try{for(var w=!0,_=Cr(p),g;g=yield le(_.next()),h=g.done,!h;w=!0){E=g.value,w=!1;const v=E,I=rp(yield le(v.json()));I.sdkHttpResponse={headers:v.headers};const C=new ur;Object.assign(C,I),yield yield le(C)}}catch(v){y={error:v}}finally{try{!w&&!h&&(T=_.return)&&(yield le(T.call(_)))}finally{if(y)throw y.error}}})})}}async embedContent(e){var n,i,r,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=Aw(this.apiClient,e);return u=M("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=Nw(f),h=new Hf;return Object.assign(h,p),h})}else{const d=xw(this.apiClient,e);return u=M("{model}:batchEmbedContents",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=kw(f),h=new Hf;return Object.assign(h,p),h})}}async generateImagesInternal(e){var n,i,r,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=Hw(this.apiClient,e);return u=M("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=Gw(f),h=new Bf;return Object.assign(h,p),h})}else{const d=Vw(this.apiClient,e);return u=M("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=Bw(f),h=new Bf;return Object.assign(h,p),h})}}async editImageInternal(e){var n,i;let r,o="",s={};if(this.apiClient.isVertexAI()){const u=Iw(this.apiClient,e);return o=M("{model}:predict",u._url),s=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),r.then(c=>{const d=ww(c),f=new PT;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,i;let r,o="",s={};if(this.apiClient.isVertexAI()){const u=HC(this.apiClient,e);return o=M("{model}:predict",u._url),s=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),r.then(c=>{const d=BC(c),f=new MT;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,i;let r,o="",s={};if(this.apiClient.isVertexAI()){const u=EC(this.apiClient,e);return o=M("{model}:predict",u._url),s=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),r.then(c=>{const d=IC(c),f=new bT;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,i;let r,o="",s={};if(this.apiClient.isVertexAI()){const u=kC(this.apiClient,e);return o=M("{model}:predict",u._url),s=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),r.then(c=>{const d=NC(c),f=new DT;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,i,r,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=oC(this.apiClient,e);return u=M("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>ql(f))}else{const d=rC(this.apiClient,e);return u=M("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>Gl(f))}}async listInternal(e){var n,i,r,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=hC(this.apiClient,e);return u=M("{models_url}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=gC(f),h=new Gf;return Object.assign(h,p),h})}else{const d=pC(this.apiClient,e);return u=M("{models_url}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=mC(f),h=new Gf;return Object.assign(h,p),h})}}async update(e){var n,i,r,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=OC(this.apiClient,e);return u=M("{model}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>ql(f))}else{const d=FC(this.apiClient,e);return u=M("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>Gl(f))}}async delete(e){var n,i,r,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=vw(this.apiClient,e);return u=M("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=Tw(f),h=new qf;return Object.assign(h,p),h})}else{const d=yw(this.apiClient,e);return u=M("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=_w(f),h=new qf;return Object.assign(h,p),h})}}async countTokens(e){var n,i,r,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=hw(this.apiClient,e);return u=M("{model}:countTokens",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=gw(f),h=new $f;return Object.assign(h,p),h})}else{const d=pw(this.apiClient,e);return u=M("{model}:countTokens",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=mw(f),h=new $f;return Object.assign(h,p),h})}}async computeTokens(e){var n,i;let r,o="",s={};if(this.apiClient.isVertexAI()){const u=sw(this.apiClient,e);return o=M("{model}:computeTokens",u._url),s=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),r.then(c=>{const d=aw(c),f=new LT;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,i,r,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=Kw(this.apiClient,e);return u=M("{model}:predictLongRunning",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>{const p=Ww(f),h=new ys;return Object.assign(h,p),h})}else{const d=Jw(this.apiClient,e);return u=M("{model}:predictLongRunning",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>{const p=zw(f),h=new ys;return Object.assign(h,p),h})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class TS extends nn{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=n.name.split("/operations/")[0];let o;i&&"httpOptions"in i&&(o=i.httpOptions);const s=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:r,config:{httpOptions:o}});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async get(e){const n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=n.name.split("/operations/")[0];let o;i&&"httpOptions"in i&&(o=i.httpOptions);const s=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:r,config:{httpOptions:o}});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,i,r,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=ST(e);return u=M("{operationName}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s}else{const d=CT(e);return u=M("{operationName}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s}}async fetchPredictVideosOperationInternal(e){var n,i;let r,o="",s={};if(this.apiClient.isVertexAI()){const u=yT(e);return o=M("{resourceName}:fetchPredictOperation",u._url),s=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ES(t){const e={},n=a(t,["data"]);if(n!=null&&l(e,["data"],n),a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=a(t,["mimeType"]);return i!=null&&l(e,["mimeType"],i),e}function IS(t){const e={},n=a(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>PS(o))),l(e,["parts"],r)}const i=a(t,["role"]);return i!=null&&l(e,["role"],i),e}function wS(t,e,n){const i={},r=a(e,["expireTime"]);n!==void 0&&r!=null&&l(n,["expireTime"],r);const o=a(e,["newSessionExpireTime"]);n!==void 0&&o!=null&&l(n,["newSessionExpireTime"],o);const s=a(e,["uses"]);n!==void 0&&s!=null&&l(n,["uses"],s);const u=a(e,["liveConnectConstraints"]);n!==void 0&&u!=null&&l(n,["bidiGenerateContentSetup"],RS(t,u));const c=a(e,["lockAdditionalFields"]);return n!==void 0&&c!=null&&l(n,["fieldMask"],c),i}function CS(t,e){const n={},i=a(e,["config"]);return i!=null&&l(n,["config"],wS(t,i,n)),n}function SS(t){const e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=a(t,["fileUri"]);n!=null&&l(e,["fileUri"],n);const i=a(t,["mimeType"]);return i!=null&&l(e,["mimeType"],i),e}function xS(t){const e={},n=a(t,["id"]);n!=null&&l(e,["id"],n);const i=a(t,["args"]);i!=null&&l(e,["args"],i);const r=a(t,["name"]);if(r!=null&&l(e,["name"],r),a(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(a(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function AS(t){const e={};if(a(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=a(t,["enableWidget"]);return n!=null&&l(e,["enableWidget"],n),e}function kS(t){const e={};if(a(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(a(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=a(t,["timeRangeFilter"]);return n!=null&&l(e,["timeRangeFilter"],n),e}function NS(t,e){const n={},i=a(t,["generationConfig"]);e!==void 0&&i!=null&&l(e,["setup","generationConfig"],i);const r=a(t,["responseModalities"]);e!==void 0&&r!=null&&l(e,["setup","generationConfig","responseModalities"],r);const o=a(t,["temperature"]);e!==void 0&&o!=null&&l(e,["setup","generationConfig","temperature"],o);const s=a(t,["topP"]);e!==void 0&&s!=null&&l(e,["setup","generationConfig","topP"],s);const u=a(t,["topK"]);e!==void 0&&u!=null&&l(e,["setup","generationConfig","topK"],u);const c=a(t,["maxOutputTokens"]);e!==void 0&&c!=null&&l(e,["setup","generationConfig","maxOutputTokens"],c);const d=a(t,["mediaResolution"]);e!==void 0&&d!=null&&l(e,["setup","generationConfig","mediaResolution"],d);const f=a(t,["seed"]);e!==void 0&&f!=null&&l(e,["setup","generationConfig","seed"],f);const p=a(t,["speechConfig"]);e!==void 0&&p!=null&&l(e,["setup","generationConfig","speechConfig"],ic(p));const h=a(t,["thinkingConfig"]);e!==void 0&&h!=null&&l(e,["setup","generationConfig","thinkingConfig"],h);const y=a(t,["enableAffectiveDialog"]);e!==void 0&&y!=null&&l(e,["setup","generationConfig","enableAffectiveDialog"],y);const T=a(t,["systemInstruction"]);e!==void 0&&T!=null&&l(e,["setup","systemInstruction"],IS(Le(T)));const E=a(t,["tools"]);if(e!==void 0&&E!=null){let x=Yi(E);Array.isArray(x)&&(x=x.map(A=>bS(Ki(A)))),l(e,["setup","tools"],x)}const w=a(t,["sessionResumption"]);e!==void 0&&w!=null&&l(e,["setup","sessionResumption"],MS(w));const _=a(t,["inputAudioTranscription"]);e!==void 0&&_!=null&&l(e,["setup","inputAudioTranscription"],_);const g=a(t,["outputAudioTranscription"]);e!==void 0&&g!=null&&l(e,["setup","outputAudioTranscription"],g);const v=a(t,["realtimeInputConfig"]);e!==void 0&&v!=null&&l(e,["setup","realtimeInputConfig"],v);const I=a(t,["contextWindowCompression"]);e!==void 0&&I!=null&&l(e,["setup","contextWindowCompression"],I);const C=a(t,["proactivity"]);return e!==void 0&&C!=null&&l(e,["setup","proactivity"],C),n}function RS(t,e){const n={},i=a(e,["model"]);i!=null&&l(n,["setup","model"],ee(t,i));const r=a(e,["config"]);return r!=null&&l(n,["config"],NS(r,n)),n}function PS(t){const e={},n=a(t,["mediaResolution"]);n!=null&&l(e,["mediaResolution"],n);const i=a(t,["codeExecutionResult"]);i!=null&&l(e,["codeExecutionResult"],i);const r=a(t,["executableCode"]);r!=null&&l(e,["executableCode"],r);const o=a(t,["fileData"]);o!=null&&l(e,["fileData"],SS(o));const s=a(t,["functionCall"]);s!=null&&l(e,["functionCall"],xS(s));const u=a(t,["functionResponse"]);u!=null&&l(e,["functionResponse"],u);const c=a(t,["inlineData"]);c!=null&&l(e,["inlineData"],ES(c));const d=a(t,["text"]);d!=null&&l(e,["text"],d);const f=a(t,["thought"]);f!=null&&l(e,["thought"],f);const p=a(t,["thoughtSignature"]);p!=null&&l(e,["thoughtSignature"],p);const h=a(t,["videoMetadata"]);return h!=null&&l(e,["videoMetadata"],h),e}function MS(t){const e={},n=a(t,["handle"]);if(n!=null&&l(e,["handle"],n),a(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function bS(t){const e={},n=a(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(p=>p)),l(e,["functionDeclarations"],f)}if(a(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=a(t,["googleSearchRetrieval"]);i!=null&&l(e,["googleSearchRetrieval"],i);const r=a(t,["computerUse"]);r!=null&&l(e,["computerUse"],r);const o=a(t,["fileSearch"]);o!=null&&l(e,["fileSearch"],o);const s=a(t,["codeExecution"]);if(s!=null&&l(e,["codeExecution"],s),a(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=a(t,["googleMaps"]);u!=null&&l(e,["googleMaps"],AS(u));const c=a(t,["googleSearch"]);c!=null&&l(e,["googleSearch"],kS(c));const d=a(t,["urlContext"]);return d!=null&&l(e,["urlContext"],d),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function DS(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const i=t[n];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const r=Object.keys(i).map(o=>`${n}.${o}`);e.push(...r)}else e.push(n)}return e.join(",")}function LS(t,e){let n=null;const i=t.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const o=i.setup;typeof o=="object"&&o!==null?(t.bidiGenerateContentSetup=o,n=o):delete t.bidiGenerateContentSetup}else i!==void 0&&delete t.bidiGenerateContentSetup;const r=t.fieldMask;if(n){const o=DS(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)o?t.fieldMask=o:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const s=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let u=[];r.length>0&&(u=r.map(d=>s.includes(d)?`generationConfig.${d}`:d));const c=[];o&&c.push(o),u.length>0&&c.push(...u),c.length>0?t.fieldMask=c.join(","):delete t.fieldMask}else delete t.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?t.fieldMask=r.join(","):delete t.fieldMask;return t}class US extends nn{constructor(e){super(),this.apiClient=e}async create(e){var n,i;let r,o="",s={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const u=CS(this.apiClient,e);o=M("auth_tokens",u._url),s=u._query,delete u.config,delete u._url,delete u._query;const c=LS(u,e.config);return r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>d)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function FS(t,e){const n={},i=a(t,["displayName"]);return e!==void 0&&i!=null&&l(e,["displayName"],i),n}function OS(t){const e={},n=a(t,["config"]);return n!=null&&FS(n,e),e}function VS(t,e){const n={},i=a(t,["force"]);return e!==void 0&&i!=null&&l(e,["_query","force"],i),n}function HS(t){const e={},n=a(t,["name"]);n!=null&&l(e,["_url","name"],n);const i=a(t,["config"]);return i!=null&&VS(i,e),e}function BS(t){const e={},n=a(t,["name"]);return n!=null&&l(e,["_url","name"],n),e}function GS(t,e){const n={},i=a(t,["customMetadata"]);if(e!==void 0&&i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),l(e,["customMetadata"],o)}const r=a(t,["chunkingConfig"]);return e!==void 0&&r!=null&&l(e,["chunkingConfig"],r),n}function qS(t){const e={},n=a(t,["name"]);n!=null&&l(e,["name"],n);const i=a(t,["metadata"]);i!=null&&l(e,["metadata"],i);const r=a(t,["done"]);r!=null&&l(e,["done"],r);const o=a(t,["error"]);o!=null&&l(e,["error"],o);const s=a(t,["response"]);return s!=null&&l(e,["response"],zS(s)),e}function $S(t){const e={},n=a(t,["fileSearchStoreName"]);n!=null&&l(e,["_url","file_search_store_name"],n);const i=a(t,["fileName"]);i!=null&&l(e,["fileName"],i);const r=a(t,["config"]);return r!=null&&GS(r,e),e}function zS(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const i=a(t,["parent"]);i!=null&&l(e,["parent"],i);const r=a(t,["documentName"]);return r!=null&&l(e,["documentName"],r),e}function WS(t,e){const n={},i=a(t,["pageSize"]);e!==void 0&&i!=null&&l(e,["_query","pageSize"],i);const r=a(t,["pageToken"]);return e!==void 0&&r!=null&&l(e,["_query","pageToken"],r),n}function JS(t){const e={},n=a(t,["config"]);return n!=null&&WS(n,e),e}function KS(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const i=a(t,["nextPageToken"]);i!=null&&l(e,["nextPageToken"],i);const r=a(t,["fileSearchStores"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>s)),l(e,["fileSearchStores"],o)}return e}function YS(t,e){const n={},i=a(t,["mimeType"]);e!==void 0&&i!=null&&l(e,["mimeType"],i);const r=a(t,["displayName"]);e!==void 0&&r!=null&&l(e,["displayName"],r);const o=a(t,["customMetadata"]);if(e!==void 0&&o!=null){let u=o;Array.isArray(u)&&(u=u.map(c=>c)),l(e,["customMetadata"],u)}const s=a(t,["chunkingConfig"]);return e!==void 0&&s!=null&&l(e,["chunkingConfig"],s),n}function QS(t){const e={},n=a(t,["fileSearchStoreName"]);n!=null&&l(e,["_url","file_search_store_name"],n);const i=a(t,["config"]);return i!=null&&YS(i,e),e}function XS(t){const e={},n=a(t,["sdkHttpResponse"]);return n!=null&&l(e,["sdkHttpResponse"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ZS(t,e){const n={},i=a(t,["force"]);return e!==void 0&&i!=null&&l(e,["_query","force"],i),n}function jS(t){const e={},n=a(t,["name"]);n!=null&&l(e,["_url","name"],n);const i=a(t,["config"]);return i!=null&&ZS(i,e),e}function ex(t){const e={},n=a(t,["name"]);return n!=null&&l(e,["_url","name"],n),e}function tx(t,e){const n={},i=a(t,["pageSize"]);e!==void 0&&i!=null&&l(e,["_query","pageSize"],i);const r=a(t,["pageToken"]);return e!==void 0&&r!=null&&l(e,["_query","pageToken"],r),n}function nx(t){const e={},n=a(t,["parent"]);n!=null&&l(e,["_url","parent"],n);const i=a(t,["config"]);return i!=null&&tx(i,e),e}function ix(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&l(e,["sdkHttpResponse"],n);const i=a(t,["nextPageToken"]);i!=null&&l(e,["nextPageToken"],i);const r=a(t,["documents"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>s)),l(e,["documents"],o)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class rx extends nn{constructor(e){super(),this.apiClient=e,this.list=async n=>new ai(Xt.PAGED_ITEM_DOCUMENTS,i=>this.listInternal({parent:n.parent,config:i.config}),await this.listInternal(n),n)}async get(e){var n,i;let r,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=ex(e);return o=M("{name}",u._url),s=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),r.then(c=>c)}}async delete(e){var n,i;let r="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=jS(e);r=M("{name}",s._url),o=s._query,delete s._url,delete s._query,await this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(s),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var n,i;let r,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=nx(e);return o=M("{parent}/documents",u._url),s=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),r.then(c=>{const d=ix(c),f=new UT;return Object.assign(f,d),f})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ox extends nn{constructor(e,n=new rx(e)){super(),this.apiClient=e,this.documents=n,this.list=async(i={})=>new ai(Xt.PAGED_ITEM_FILE_SEARCH_STORES,r=>this.listInternal(r),await this.listInternal(i),i)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,i;let r,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=OS(e);return o=M("fileSearchStores",u._url),s=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),r.then(c=>c)}}async get(e){var n,i;let r,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=BS(e);return o=M("{name}",u._url),s=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),r.then(c=>c)}}async delete(e){var n,i;let r="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=HS(e);r=M("{name}",s._url),o=s._query,delete s._url,delete s._query,await this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(s),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var n,i;let r,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=JS(e);return o=M("fileSearchStores",u._url),s=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),r.then(c=>{const d=KS(c),f=new FT;return Object.assign(f,d),f})}}async uploadToFileSearchStoreInternal(e){var n,i;let r,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=QS(e);return o=M("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",u._url),s=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),r.then(c=>{const d=XS(c),f=new OT;return Object.assign(f,d),f})}}async importFile(e){var n,i;let r,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=$S(e);return o=M("{file_search_store_name}:importFile",u._url),s=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),r.then(c=>{const d=qS(c),f=new Zu;return Object.assign(f,d),f})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function sx(t,e){const n={},i=a(t,["name"]);return i!=null&&l(n,["_url","name"],i),n}function ax(t,e){const n={},i=a(t,["name"]);return i!=null&&l(n,["_url","name"],i),n}function lx(t,e,n){const i={};if(a(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=a(t,["tunedModelDisplayName"]);if(e!==void 0&&r!=null&&l(e,["displayName"],r),a(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const o=a(t,["epochCount"]);e!==void 0&&o!=null&&l(e,["tuningTask","hyperparameters","epochCount"],o);const s=a(t,["learningRateMultiplier"]);if(s!=null&&l(i,["tuningTask","hyperparameters","learningRateMultiplier"],s),a(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(a(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(a(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const u=a(t,["batchSize"]);e!==void 0&&u!=null&&l(e,["tuningTask","hyperparameters","batchSize"],u);const c=a(t,["learningRate"]);if(e!==void 0&&c!=null&&l(e,["tuningTask","hyperparameters","learningRate"],c),a(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(a(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return i}function ux(t,e,n){const i={};let r=a(n,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const y=a(t,["validationDataset"]);e!==void 0&&y!=null&&l(e,["supervisedTuningSpec"],fp(y))}else if(r==="PREFERENCE_TUNING"){const y=a(t,["validationDataset"]);e!==void 0&&y!=null&&l(e,["preferenceOptimizationSpec"],fp(y))}const o=a(t,["tunedModelDisplayName"]);e!==void 0&&o!=null&&l(e,["tunedModelDisplayName"],o);const s=a(t,["description"]);e!==void 0&&s!=null&&l(e,["description"],s);let u=a(n,["config","method"]);if(u===void 0&&(u="SUPERVISED_FINE_TUNING"),u==="SUPERVISED_FINE_TUNING"){const y=a(t,["epochCount"]);e!==void 0&&y!=null&&l(e,["supervisedTuningSpec","hyperParameters","epochCount"],y)}else if(u==="PREFERENCE_TUNING"){const y=a(t,["epochCount"]);e!==void 0&&y!=null&&l(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],y)}let c=a(n,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){const y=a(t,["learningRateMultiplier"]);e!==void 0&&y!=null&&l(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],y)}else if(c==="PREFERENCE_TUNING"){const y=a(t,["learningRateMultiplier"]);e!==void 0&&y!=null&&l(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],y)}let d=a(n,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const y=a(t,["exportLastCheckpointOnly"]);e!==void 0&&y!=null&&l(e,["supervisedTuningSpec","exportLastCheckpointOnly"],y)}else if(d==="PREFERENCE_TUNING"){const y=a(t,["exportLastCheckpointOnly"]);e!==void 0&&y!=null&&l(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],y)}let f=a(n,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const y=a(t,["adapterSize"]);e!==void 0&&y!=null&&l(e,["supervisedTuningSpec","hyperParameters","adapterSize"],y)}else if(f==="PREFERENCE_TUNING"){const y=a(t,["adapterSize"]);e!==void 0&&y!=null&&l(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],y)}if(a(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(a(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const p=a(t,["labels"]);e!==void 0&&p!=null&&l(e,["labels"],p);const h=a(t,["beta"]);return e!==void 0&&h!=null&&l(e,["preferenceOptimizationSpec","hyperParameters","beta"],h),i}function cx(t,e){const n={},i=a(t,["baseModel"]);i!=null&&l(n,["baseModel"],i);const r=a(t,["preTunedModel"]);r!=null&&l(n,["preTunedModel"],r);const o=a(t,["trainingDataset"]);o!=null&&Ex(o);const s=a(t,["config"]);return s!=null&&lx(s,n),n}function dx(t,e){const n={},i=a(t,["baseModel"]);i!=null&&l(n,["baseModel"],i);const r=a(t,["preTunedModel"]);r!=null&&l(n,["preTunedModel"],r);const o=a(t,["trainingDataset"]);o!=null&&Ix(o,n,e);const s=a(t,["config"]);return s!=null&&ux(s,n,e),n}function fx(t,e){const n={},i=a(t,["name"]);return i!=null&&l(n,["_url","name"],i),n}function px(t,e){const n={},i=a(t,["name"]);return i!=null&&l(n,["_url","name"],i),n}function hx(t,e,n){const i={},r=a(t,["pageSize"]);e!==void 0&&r!=null&&l(e,["_query","pageSize"],r);const o=a(t,["pageToken"]);e!==void 0&&o!=null&&l(e,["_query","pageToken"],o);const s=a(t,["filter"]);return e!==void 0&&s!=null&&l(e,["_query","filter"],s),i}function mx(t,e,n){const i={},r=a(t,["pageSize"]);e!==void 0&&r!=null&&l(e,["_query","pageSize"],r);const o=a(t,["pageToken"]);e!==void 0&&o!=null&&l(e,["_query","pageToken"],o);const s=a(t,["filter"]);return e!==void 0&&s!=null&&l(e,["_query","filter"],s),i}function gx(t,e){const n={},i=a(t,["config"]);return i!=null&&hx(i,n),n}function yx(t,e){const n={},i=a(t,["config"]);return i!=null&&mx(i,n),n}function vx(t,e){const n={},i=a(t,["sdkHttpResponse"]);i!=null&&l(n,["sdkHttpResponse"],i);const r=a(t,["nextPageToken"]);r!=null&&l(n,["nextPageToken"],r);const o=a(t,["tunedModels"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(u=>Og(u))),l(n,["tuningJobs"],s)}return n}function _x(t,e){const n={},i=a(t,["sdkHttpResponse"]);i!=null&&l(n,["sdkHttpResponse"],i);const r=a(t,["nextPageToken"]);r!=null&&l(n,["nextPageToken"],r);const o=a(t,["tuningJobs"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(u=>zl(u))),l(n,["tuningJobs"],s)}return n}function Tx(t,e){const n={},i=a(t,["name"]);i!=null&&l(n,["model"],i);const r=a(t,["name"]);return r!=null&&l(n,["endpoint"],r),n}function Ex(t,e){const n={};if(a(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(a(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const i=a(t,["examples"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(o=>o)),l(n,["examples","examples"],r)}return n}function Ix(t,e,n){const i={};let r=a(n,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const s=a(t,["gcsUri"]);e!==void 0&&s!=null&&l(e,["supervisedTuningSpec","trainingDatasetUri"],s)}else if(r==="PREFERENCE_TUNING"){const s=a(t,["gcsUri"]);e!==void 0&&s!=null&&l(e,["preferenceOptimizationSpec","trainingDatasetUri"],s)}let o=a(n,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const s=a(t,["vertexDatasetResource"]);e!==void 0&&s!=null&&l(e,["supervisedTuningSpec","trainingDatasetUri"],s)}else if(o==="PREFERENCE_TUNING"){const s=a(t,["vertexDatasetResource"]);e!==void 0&&s!=null&&l(e,["preferenceOptimizationSpec","trainingDatasetUri"],s)}if(a(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return i}function Og(t,e){const n={},i=a(t,["sdkHttpResponse"]);i!=null&&l(n,["sdkHttpResponse"],i);const r=a(t,["name"]);r!=null&&l(n,["name"],r);const o=a(t,["state"]);o!=null&&l(n,["state"],_g(o));const s=a(t,["createTime"]);s!=null&&l(n,["createTime"],s);const u=a(t,["tuningTask","startTime"]);u!=null&&l(n,["startTime"],u);const c=a(t,["tuningTask","completeTime"]);c!=null&&l(n,["endTime"],c);const d=a(t,["updateTime"]);d!=null&&l(n,["updateTime"],d);const f=a(t,["description"]);f!=null&&l(n,["description"],f);const p=a(t,["baseModel"]);p!=null&&l(n,["baseModel"],p);const h=a(t,["_self"]);return h!=null&&l(n,["tunedModel"],Tx(h)),n}function zl(t,e){const n={},i=a(t,["sdkHttpResponse"]);i!=null&&l(n,["sdkHttpResponse"],i);const r=a(t,["name"]);r!=null&&l(n,["name"],r);const o=a(t,["state"]);o!=null&&l(n,["state"],_g(o));const s=a(t,["createTime"]);s!=null&&l(n,["createTime"],s);const u=a(t,["startTime"]);u!=null&&l(n,["startTime"],u);const c=a(t,["endTime"]);c!=null&&l(n,["endTime"],c);const d=a(t,["updateTime"]);d!=null&&l(n,["updateTime"],d);const f=a(t,["error"]);f!=null&&l(n,["error"],f);const p=a(t,["description"]);p!=null&&l(n,["description"],p);const h=a(t,["baseModel"]);h!=null&&l(n,["baseModel"],h);const y=a(t,["tunedModel"]);y!=null&&l(n,["tunedModel"],y);const T=a(t,["preTunedModel"]);T!=null&&l(n,["preTunedModel"],T);const E=a(t,["supervisedTuningSpec"]);E!=null&&l(n,["supervisedTuningSpec"],E);const w=a(t,["preferenceOptimizationSpec"]);w!=null&&l(n,["preferenceOptimizationSpec"],w);const _=a(t,["tuningDataStats"]);_!=null&&l(n,["tuningDataStats"],_);const g=a(t,["encryptionSpec"]);g!=null&&l(n,["encryptionSpec"],g);const v=a(t,["partnerModelTuningSpec"]);v!=null&&l(n,["partnerModelTuningSpec"],v);const I=a(t,["customBaseModel"]);I!=null&&l(n,["customBaseModel"],I);const C=a(t,["experiment"]);C!=null&&l(n,["experiment"],C);const x=a(t,["labels"]);x!=null&&l(n,["labels"],x);const A=a(t,["outputUri"]);A!=null&&l(n,["outputUri"],A);const N=a(t,["pipelineJob"]);N!=null&&l(n,["pipelineJob"],N);const P=a(t,["serviceAccount"]);P!=null&&l(n,["serviceAccount"],P);const R=a(t,["tunedModelDisplayName"]);R!=null&&l(n,["tunedModelDisplayName"],R);const K=a(t,["veoTuningSpec"]);return K!=null&&l(n,["veoTuningSpec"],K),n}function wx(t,e){const n={},i=a(t,["sdkHttpResponse"]);i!=null&&l(n,["sdkHttpResponse"],i);const r=a(t,["name"]);r!=null&&l(n,["name"],r);const o=a(t,["metadata"]);o!=null&&l(n,["metadata"],o);const s=a(t,["done"]);s!=null&&l(n,["done"],s);const u=a(t,["error"]);return u!=null&&l(n,["error"],u),n}function fp(t,e){const n={},i=a(t,["gcsUri"]);i!=null&&l(n,["validationDatasetUri"],i);const r=a(t,["vertexDatasetResource"]);return r!=null&&l(n,["validationDatasetUri"],r),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Cx extends nn{constructor(e){super(),this.apiClient=e,this.get=async n=>await this.getInternal(n),this.list=async(n={})=>new ai(Xt.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(n),n),this.tune=async n=>{var i;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const r={tunedModelName:n.baseModel};!((i=n.config)===null||i===void 0)&&i.preTunedModelCheckpointId&&(r.checkpointId=n.config.preTunedModelCheckpointId);const o=Object.assign(Object.assign({},n),{preTunedModel:r});return o.baseModel=void 0,await this.tuneInternal(o)}else{const r=Object.assign({},n);return await this.tuneInternal(r)}else{const r=Object.assign({},n),o=await this.tuneMldevInternal(r);let s="";return o.metadata!==void 0&&o.metadata.tunedModel!==void 0?s=o.metadata.tunedModel:o.name!==void 0&&o.name.includes("/operations/")&&(s=o.name.split("/operations/")[0]),{name:s,state:Ol.JOB_STATE_QUEUED}}}}async getInternal(e){var n,i,r,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=px(e);return u=M("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>zl(f))}else{const d=fx(e);return u=M("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>Og(f))}}async listInternal(e){var n,i,r,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=yx(e);return u=M("tuningJobs",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=_x(f),h=new zf;return Object.assign(h,p),h})}else{const d=gx(e);return u=M("tunedModels",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=vx(f),h=new zf;return Object.assign(h,p),h})}}async cancel(e){var n,i,r,o;let s="",u={};if(this.apiClient.isVertexAI()){const c=ax(e);s=M("{name}:cancel",c._url),u=c._query,delete c._url,delete c._query,await this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const c=sx(e);s=M("{name}:cancel",c._url),u=c._query,delete c._url,delete c._query,await this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async tuneInternal(e){var n,i;let r,o="",s={};if(this.apiClient.isVertexAI()){const u=dx(e,e);return o=M("tuningJobs",u._url),s=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),r.then(c=>zl(c))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,i;let r,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=cx(e);return o=M("tunedModels",u._url),s=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),r.then(c=>wx(c))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Sx{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const xx=1024*1024*8,Ax=3,kx=1e3,Nx=2,_s="x-goog-upload-status";async function Rx(t,e,n){var i;const r=await Vg(t,e,n),o=await(r==null?void 0:r.json());if(((i=r==null?void 0:r.headers)===null||i===void 0?void 0:i[_s])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return o.file}async function Px(t,e,n){var i;const r=await Vg(t,e,n),o=await(r==null?void 0:r.json());if(((i=r==null?void 0:r.headers)===null||i===void 0?void 0:i[_s])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const s=pg(o),u=new ju;return Object.assign(u,s),u}async function Vg(t,e,n){var i,r;let o=0,s=0,u=new Vl(new Response),c="upload";for(o=t.size;s<o;){const d=Math.min(xx,o-s),f=t.slice(s,s+d);s+d>=o&&(c+=", finalize");let p=0,h=kx;for(;p<Ax&&(u=await n.request({path:"",body:f,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":c,"X-Goog-Upload-Offset":String(s),"Content-Length":String(d)}}}),!(!((i=u==null?void 0:u.headers)===null||i===void 0)&&i[_s]));)p++,await bx(h),h=h*Nx;if(s+=d,((r=u==null?void 0:u.headers)===null||r===void 0?void 0:r[_s])!=="active")break;if(o<=s)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return u}async function Mx(t){return{size:t.size,type:t.type}}function bx(t){return new Promise(e=>setTimeout(e,t))}class Dx{async upload(e,n,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Rx(e,n,i)}async uploadToFileSearchStore(e,n,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Px(e,n,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Mx(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Lx{create(e,n,i){return new Ux(e,n,i)}}class Ux{constructor(e,n,i){this.url=e,this.headers=n,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const pp="x-goog-api-key";class Fx{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(pp)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(pp,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ox="gl-node/";class Vx{constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const i=mT(e.httpOptions,e.vertexai,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion;const r=new Fx(this.apiKey);this.apiClient=new eS({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:Ox+"web",uploader:new Dx,downloader:new Sx}),this.models=new _S(this.apiClient),this.live=new pS(this.apiClient,r,new Lx),this.batches=new $E(this.apiClient),this.chats=new SI(this.models,this.apiClient),this.caches=new II(this.apiClient),this.files=new LI(this.apiClient),this.operations=new TS(this.apiClient),this.authTokens=new US(this.apiClient),this.tunings=new Cx(this.apiClient),this.fileSearchStores=new ox(this.apiClient)}}var Hx={API_KEY:'""'};const oc=()=>{const t=Hx.API_KEY;return new Vx({apiKey:t})},sc=t=>{var e,n;if(!t||!t.candidates||!((n=(e=t.candidates[0])==null?void 0:e.content)!=null&&n.parts))return null;for(const i of t.candidates[0].content.parts)if(i.inlineData&&i.inlineData.data)return`data:${i.inlineData.mimeType||"image/png"};base64,${i.inlineData.data}`;return null},Bx=async t=>{const e=oc();if(!e)return null;try{const n=await e.models.generateContent({model:"gemini-2.5-flash-image",contents:{parts:[{text:`Create a clean, text-free vector art illustration in digital city style, flat design, modern colors. The scene depicts: ${t}. NO WORDS, NO LABELS, NO TEXT. Aspect ratio 16:9.`}]},config:{imageConfig:{aspectRatio:"16:9"}}});return sc(n)}catch(n){return console.error("Error generating scene image:",n),null}},Gx=async(t,e="neutral")=>{const n=oc();if(!n)return null;try{const i=await n.models.generateContent({model:"gemini-2.5-flash-image",contents:{parts:[{text:`Create a vector art avatar portrait of a character named "${t}", looking ${e}. Digital city style, flat design, circle background. Minimalist features. NO TEXT. Aspect ratio 1:1.`}]},config:{imageConfig:{aspectRatio:"1:1"}}});return sc(i)}catch(i){return console.error("Error generating character image:",i),null}},qx=async t=>{const e=oc();if(!e)return null;try{const n=await e.models.generateContent({model:"gemini-2.5-flash-image",contents:{parts:[{text:`Create a simple, clean vector art icon or illustration of: ${t}. Digital flat design style, white background, minimalist. Purely visual object. NO TEXT. Aspect ratio 1:1.`}]},config:{imageConfig:{aspectRatio:"1:1"}}});return sc(n)}catch(n){return console.error("Error generating item image:",n),null}};var hp={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hg=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},$x=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const o=t[n++];e[i++]=String.fromCharCode((r&31)<<6|o&63)}else if(r>239&&r<365){const o=t[n++],s=t[n++],u=t[n++],c=((r&7)<<18|(o&63)<<12|(s&63)<<6|u&63)-65536;e[i++]=String.fromCharCode(55296+(c>>10)),e[i++]=String.fromCharCode(56320+(c&1023))}else{const o=t[n++],s=t[n++];e[i++]=String.fromCharCode((r&15)<<12|(o&63)<<6|s&63)}}return e.join("")},Bg={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const o=t[r],s=r+1<t.length,u=s?t[r+1]:0,c=r+2<t.length,d=c?t[r+2]:0,f=o>>2,p=(o&3)<<4|u>>4;let h=(u&15)<<2|d>>6,y=d&63;c||(y=64,s||(h=64)),i.push(n[f],n[p],n[h],n[y])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Hg(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):$x(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const o=n[t.charAt(r++)],u=r<t.length?n[t.charAt(r)]:0;++r;const d=r<t.length?n[t.charAt(r)]:64;++r;const p=r<t.length?n[t.charAt(r)]:64;if(++r,o==null||u==null||d==null||p==null)throw new zx;const h=o<<2|u>>4;if(i.push(h),d!==64){const y=u<<4&240|d>>2;if(i.push(y),p!==64){const T=d<<6&192|p;i.push(T)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class zx extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Wx=function(t){const e=Hg(t);return Bg.encodeByteArray(e,!0)},Ts=function(t){return Wx(t).replace(/\./g,"")},Gg=function(t){try{return Bg.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jx(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kx=()=>Jx().__FIREBASE_DEFAULTS__,Yx=()=>{if(typeof process>"u"||typeof hp>"u")return;const t=hp.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Qx=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Gg(t[1]);return e&&JSON.parse(e)},ac=()=>{try{return Kx()||Yx()||Qx()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},qg=t=>{var e,n;return(n=(e=ac())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Xx=t=>{const e=qg(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},$g=()=>{var t;return(t=ac())===null||t===void 0?void 0:t.config},zg=t=>{var e;return(e=ac())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zx{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jx(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",r=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Ts(JSON.stringify(n)),Ts(JSON.stringify(s)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function He(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function eA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(He())}function tA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Wg(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function nA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function iA(){const t=He();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Jg(){try{return typeof indexedDB=="object"}catch{return!1}}function Kg(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var o;e(((o=r.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}function rA(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oA="FirebaseError";class St extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=oA,Object.setPrototypeOf(this,St.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,li.prototype.create)}}class li{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},r=`${this.service}/${e}`,o=this.errors[e],s=o?sA(o,i):"Error",u=`${this.serviceName}: ${s} (${r}).`;return new St(r,u,i)}}function sA(t,e){return t.replace(aA,(n,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const aA=/\{\$([^}]+)}/g;function lA(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function zr(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const o=t[r],s=e[r];if(mp(o)&&mp(s)){if(!zr(o,s))return!1}else if(o!==s)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function mp(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jr(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function uA(t,e){const n=new cA(t,e);return n.subscribe.bind(n)}class cA{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let r;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");dA(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:i},r.next===void 0&&(r.next=Ra),r.error===void 0&&(r.error=Ra),r.complete===void 0&&(r.complete=Ra);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function dA(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Ra(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fA=1e3,pA=2,hA=4*60*60*1e3,mA=.5;function gp(t,e=fA,n=pA){const i=e*Math.pow(n,t),r=Math.round(mA*i*(Math.random()-.5)*2);return Math.min(hA,i+r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ht(t){return t&&t._delegate?t._delegate:t}class wt{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gn="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gA{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new Zx;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(o){if(r)return null;throw o}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(vA(e))try{this.getOrInitializeService({instanceIdentifier:Gn})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:r});i.resolve(o)}catch{}}}}clearInstance(e=Gn){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Gn){return this.instances.has(e)}getOptions(e=Gn){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[o,s]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(o);i===u&&s.resolve(r)}return r}onInit(e,n){var i;const r=this.normalizeInstanceIdentifier(n),o=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;o.add(e),this.onInitCallbacks.set(r,o);const s=this.instances.get(r);return s&&e(s,r),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:yA(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Gn){return this.component?this.component.multipleInstances?e:Gn:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function yA(t){return t===Gn?void 0:t}function vA(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _A{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new gA(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ie;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ie||(ie={}));const TA={debug:ie.DEBUG,verbose:ie.VERBOSE,info:ie.INFO,warn:ie.WARN,error:ie.ERROR,silent:ie.SILENT},EA=ie.INFO,IA={[ie.DEBUG]:"log",[ie.VERBOSE]:"log",[ie.INFO]:"info",[ie.WARN]:"warn",[ie.ERROR]:"error"},wA=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),r=IA[e];if(r)console[r](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class lc{constructor(e){this.name=e,this._logLevel=EA,this._logHandler=wA,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ie))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?TA[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ie.DEBUG,...e),this._logHandler(this,ie.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ie.VERBOSE,...e),this._logHandler(this,ie.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ie.INFO,...e),this._logHandler(this,ie.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ie.WARN,...e),this._logHandler(this,ie.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ie.ERROR,...e),this._logHandler(this,ie.ERROR,...e)}}const CA=(t,e)=>e.some(n=>t instanceof n);let yp,vp;function SA(){return yp||(yp=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function xA(){return vp||(vp=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Yg=new WeakMap,Wl=new WeakMap,Qg=new WeakMap,Pa=new WeakMap,uc=new WeakMap;function AA(t){const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(kn(t.result)),r()},s=()=>{i(t.error),r()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&Yg.set(n,t)}).catch(()=>{}),uc.set(e,t),e}function kA(t){if(Wl.has(t))return;const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),r()},s=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});Wl.set(t,e)}let Jl={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Wl.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Qg.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return kn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function NA(t){Jl=t(Jl)}function RA(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(Ma(this),e,...n);return Qg.set(i,e.sort?e.sort():[e]),kn(i)}:xA().includes(t)?function(...e){return t.apply(Ma(this),e),kn(Yg.get(this))}:function(...e){return kn(t.apply(Ma(this),e))}}function PA(t){return typeof t=="function"?RA(t):(t instanceof IDBTransaction&&kA(t),CA(t,SA())?new Proxy(t,Jl):t)}function kn(t){if(t instanceof IDBRequest)return AA(t);if(Pa.has(t))return Pa.get(t);const e=PA(t);return e!==t&&(Pa.set(t,e),uc.set(e,t)),e}const Ma=t=>uc.get(t);function Xg(t,e,{blocked:n,upgrade:i,blocking:r,terminated:o}={}){const s=indexedDB.open(t,e),u=kn(s);return i&&s.addEventListener("upgradeneeded",c=>{i(kn(s.result),c.oldVersion,c.newVersion,kn(s.transaction),c)}),n&&s.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),u.then(c=>{o&&c.addEventListener("close",()=>o()),r&&c.addEventListener("versionchange",d=>r(d.oldVersion,d.newVersion,d))}).catch(()=>{}),u}const MA=["get","getKey","getAll","getAllKeys","count"],bA=["put","add","delete","clear"],ba=new Map;function _p(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(ba.get(e))return ba.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=bA.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||MA.includes(n)))return;const o=async function(s,...u){const c=this.transaction(s,r?"readwrite":"readonly");let d=c.store;return i&&(d=d.index(u.shift())),(await Promise.all([d[n](...u),r&&c.done]))[0]};return ba.set(e,o),o}NA(t=>({...t,get:(e,n,i)=>_p(e,n)||t.get(e,n,i),has:(e,n)=>!!_p(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(LA(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function LA(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Kl="@firebase/app",Tp="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zt=new lc("@firebase/app"),UA="@firebase/app-compat",FA="@firebase/analytics-compat",OA="@firebase/analytics",VA="@firebase/app-check-compat",HA="@firebase/app-check",BA="@firebase/auth",GA="@firebase/auth-compat",qA="@firebase/database",$A="@firebase/data-connect",zA="@firebase/database-compat",WA="@firebase/functions",JA="@firebase/functions-compat",KA="@firebase/installations",YA="@firebase/installations-compat",QA="@firebase/messaging",XA="@firebase/messaging-compat",ZA="@firebase/performance",jA="@firebase/performance-compat",ek="@firebase/remote-config",tk="@firebase/remote-config-compat",nk="@firebase/storage",ik="@firebase/storage-compat",rk="@firebase/firestore",ok="@firebase/vertexai-preview",sk="@firebase/firestore-compat",ak="firebase",lk="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yl="[DEFAULT]",uk={[Kl]:"fire-core",[UA]:"fire-core-compat",[OA]:"fire-analytics",[FA]:"fire-analytics-compat",[HA]:"fire-app-check",[VA]:"fire-app-check-compat",[BA]:"fire-auth",[GA]:"fire-auth-compat",[qA]:"fire-rtdb",[$A]:"fire-data-connect",[zA]:"fire-rtdb-compat",[WA]:"fire-fn",[JA]:"fire-fn-compat",[KA]:"fire-iid",[YA]:"fire-iid-compat",[QA]:"fire-fcm",[XA]:"fire-fcm-compat",[ZA]:"fire-perf",[jA]:"fire-perf-compat",[ek]:"fire-rc",[tk]:"fire-rc-compat",[nk]:"fire-gcs",[ik]:"fire-gcs-compat",[rk]:"fire-fst",[sk]:"fire-fst-compat",[ok]:"fire-vertex","fire-js":"fire-js",[ak]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Es=new Map,ck=new Map,Ql=new Map;function Ep(t,e){try{t.container.addComponent(e)}catch(n){Zt.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Lt(t){const e=t.name;if(Ql.has(e))return Zt.debug(`There were multiple attempts to register component ${e}.`),!1;Ql.set(e,t);for(const n of Es.values())Ep(n,t);for(const n of ck.values())Ep(n,t);return!0}function ui(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Gt(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dk={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Nn=new li("app","Firebase",dk);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fk{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new wt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Nn.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xi=lk;function Zg(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:Yl,automaticDataCollectionEnabled:!1},e),r=i.name;if(typeof r!="string"||!r)throw Nn.create("bad-app-name",{appName:String(r)});if(n||(n=$g()),!n)throw Nn.create("no-options");const o=Es.get(r);if(o){if(zr(n,o.options)&&zr(i,o.config))return o;throw Nn.create("duplicate-app",{appName:r})}const s=new _A(r);for(const c of Ql.values())s.addComponent(c);const u=new fk(n,i,s);return Es.set(r,u),u}function cc(t=Yl){const e=Es.get(t);if(!e&&t===Yl&&$g())return Zg();if(!e)throw Nn.create("no-app",{appName:t});return e}function dt(t,e,n){var i;let r=(i=uk[t])!==null&&i!==void 0?i:t;n&&(r+=`-${n}`);const o=r.match(/\s|\//),s=e.match(/\s|\//);if(o||s){const u=[`Unable to register library "${r}" with version "${e}":`];o&&u.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&s&&u.push("and"),s&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Zt.warn(u.join(" "));return}Lt(new wt(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pk="firebase-heartbeat-database",hk=1,Wr="firebase-heartbeat-store";let Da=null;function jg(){return Da||(Da=Xg(pk,hk,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Wr)}catch(n){console.warn(n)}}}}).catch(t=>{throw Nn.create("idb-open",{originalErrorMessage:t.message})})),Da}async function mk(t){try{const n=(await jg()).transaction(Wr),i=await n.objectStore(Wr).get(ey(t));return await n.done,i}catch(e){if(e instanceof St)Zt.warn(e.message);else{const n=Nn.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Zt.warn(n.message)}}}async function Ip(t,e){try{const i=(await jg()).transaction(Wr,"readwrite");await i.objectStore(Wr).put(e,ey(t)),await i.done}catch(n){if(n instanceof St)Zt.warn(n.message);else{const i=Nn.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Zt.warn(i.message)}}}function ey(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gk=1024,yk=30*24*60*60*1e3;class vk{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Tk(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=wp();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o)?void 0:(this._heartbeatsCache.heartbeats.push({date:o,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{const u=new Date(s.date).valueOf();return Date.now()-u<=yk}),this._storage.overwrite(this._heartbeatsCache))}catch(i){Zt.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=wp(),{heartbeatsToSend:i,unsentEntries:r}=_k(this._heartbeatsCache.heartbeats),o=Ts(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return Zt.warn(n),""}}}function wp(){return new Date().toISOString().substring(0,10)}function _k(t,e=gk){const n=[];let i=t.slice();for(const r of t){const o=n.find(s=>s.agent===r.agent);if(o){if(o.dates.push(r.date),Cp(n)>e){o.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),Cp(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class Tk{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Jg()?Kg().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await mk(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return Ip(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return Ip(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Cp(t){return Ts(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ek(t){Lt(new wt("platform-logger",e=>new DA(e),"PRIVATE")),Lt(new wt("heartbeat",e=>new vk(e),"PRIVATE")),dt(Kl,Tp,t),dt(Kl,Tp,"esm2017"),dt("fire-js","")}Ek("");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ty="firebasestorage.googleapis.com",ny="storageBucket",Ik=2*60*1e3,wk=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _e extends St{constructor(e,n,i=0){super(La(e),`Firebase Storage: ${n} (${La(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,_e.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return La(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var ve;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(ve||(ve={}));function La(t){return"storage/"+t}function dc(){const t="An unknown error occurred, please check the error payload for server response.";return new _e(ve.UNKNOWN,t)}function Ck(t){return new _e(ve.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function Sk(t){return new _e(ve.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function xk(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new _e(ve.UNAUTHENTICATED,t)}function Ak(){return new _e(ve.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function kk(t){return new _e(ve.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function Nk(){return new _e(ve.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Rk(){return new _e(ve.CANCELED,"User canceled the upload/download.")}function Pk(t){return new _e(ve.INVALID_URL,"Invalid URL '"+t+"'.")}function Mk(t){return new _e(ve.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function bk(){return new _e(ve.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+ny+"' property when initializing the app?")}function Dk(){return new _e(ve.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Lk(){return new _e(ve.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function Uk(t){return new _e(ve.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Xl(t){return new _e(ve.INVALID_ARGUMENT,t)}function iy(){return new _e(ve.APP_DELETED,"The Firebase app was deleted.")}function Fk(t){return new _e(ve.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Sr(t,e){return new _e(ve.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function cr(t){throw new _e(ve.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let i;try{i=et.makeFromUrl(e,n)}catch{return new et(e,"")}if(i.path==="")return i;throw Mk(e)}static makeFromUrl(e,n){let i=null;const r="([A-Za-z0-9.\\-_]+)";function o(I){I.path.charAt(I.path.length-1)==="/"&&(I.path_=I.path_.slice(0,-1))}const s="(/(.*))?$",u=new RegExp("^gs://"+r+s,"i"),c={bucket:1,path:3};function d(I){I.path_=decodeURIComponent(I.path)}const f="v[A-Za-z0-9_]+",p=n.replace(/[.]/g,"\\."),h="(/([^?#]*).*)?$",y=new RegExp(`^https?://${p}/${f}/b/${r}/o${h}`,"i"),T={bucket:1,path:3},E=n===ty?"(?:storage.googleapis.com|storage.cloud.google.com)":n,w="([^?#]*)",_=new RegExp(`^https?://${E}/${r}/${w}`,"i"),v=[{regex:u,indices:c,postModify:o},{regex:y,indices:T,postModify:d},{regex:_,indices:{bucket:1,path:2},postModify:d}];for(let I=0;I<v.length;I++){const C=v[I],x=C.regex.exec(e);if(x){const A=x[C.indices.bucket];let N=x[C.indices.path];N||(N=""),i=new et(A,N),C.postModify(i);break}}if(i==null)throw Pk(e);return i}}class Ok{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vk(t,e,n){let i=1,r=null,o=null,s=!1,u=0;function c(){return u===2}let d=!1;function f(...w){d||(d=!0,e.apply(null,w))}function p(w){r=setTimeout(()=>{r=null,t(y,c())},w)}function h(){o&&clearTimeout(o)}function y(w,..._){if(d){h();return}if(w){h(),f.call(null,w,..._);return}if(c()||s){h(),f.call(null,w,..._);return}i<64&&(i*=2);let v;u===1?(u=2,v=0):v=(i+Math.random())*1e3,p(v)}let T=!1;function E(w){T||(T=!0,h(),!d&&(r!==null?(w||(u=2),clearTimeout(r),p(0)):w||(u=1)))}return p(0),o=setTimeout(()=>{s=!0,E(!0)},n),E}function Hk(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bk(t){return t!==void 0}function Gk(t){return typeof t=="object"&&!Array.isArray(t)}function fc(t){return typeof t=="string"||t instanceof String}function Sp(t){return pc()&&t instanceof Blob}function pc(){return typeof Blob<"u"}function xp(t,e,n,i){if(i<e)throw Xl(`Invalid value for '${t}'. Expected ${e} or greater.`);if(i>n)throw Xl(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hc(t,e,n){let i=e;return n==null&&(i=`https://${e}`),`${n}://${i}/v0${t}`}function ry(t){const e=encodeURIComponent;let n="?";for(const i in t)if(t.hasOwnProperty(i)){const r=e(i)+"="+e(t[i]);n=n+r+"&"}return n=n.slice(0,-1),n}var Yn;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Yn||(Yn={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qk(t,e){const n=t>=500&&t<600,r=[408,429].indexOf(t)!==-1,o=e.indexOf(t)!==-1;return n||r||o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $k{constructor(e,n,i,r,o,s,u,c,d,f,p,h=!0){this.url_=e,this.method_=n,this.headers_=i,this.body_=r,this.successCodes_=o,this.additionalRetryCodes_=s,this.callback_=u,this.errorCallback_=c,this.timeout_=d,this.progressCallback_=f,this.connectionFactory_=p,this.retry=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((y,T)=>{this.resolve_=y,this.reject_=T,this.start_()})}start_(){const e=(i,r)=>{if(r){i(!1,new Co(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const s=u=>{const c=u.loaded,d=u.lengthComputable?u.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,d)};this.progressCallback_!==null&&o.addUploadProgressListener(s),o.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(s),this.pendingConnection_=null;const u=o.getErrorCode()===Yn.NO_ERROR,c=o.getStatus();if(!u||qk(c,this.additionalRetryCodes_)&&this.retry){const f=o.getErrorCode()===Yn.ABORT;i(!1,new Co(!1,null,f));return}const d=this.successCodes_.indexOf(c)!==-1;i(!0,new Co(d,o))})},n=(i,r)=>{const o=this.resolve_,s=this.reject_,u=r.connection;if(r.wasSuccessCode)try{const c=this.callback_(u,u.getResponse());Bk(c)?o(c):o()}catch(c){s(c)}else if(u!==null){const c=dc();c.serverResponse=u.getErrorText(),this.errorCallback_?s(this.errorCallback_(u,c)):s(c)}else if(r.canceled){const c=this.appDelete_?iy():Rk();s(c)}else{const c=Nk();s(c)}};this.canceled_?n(!1,new Co(!1,null,!0)):this.backoffId_=Vk(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&Hk(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Co{constructor(e,n,i){this.wasSuccessCode=e,this.connection=n,this.canceled=!!i}}function zk(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function Wk(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function Jk(t,e){e&&(t["X-Firebase-GMPID"]=e)}function Kk(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function Yk(t,e,n,i,r,o,s=!0){const u=ry(t.urlParams),c=t.url+u,d=Object.assign({},t.headers);return Jk(d,e),zk(d,n),Wk(d,o),Kk(d,i),new $k(c,t.method,d,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qk(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function Xk(...t){const e=Qk();if(e!==void 0){const n=new e;for(let i=0;i<t.length;i++)n.append(t[i]);return n.getBlob()}else{if(pc())return new Blob(t);throw new _e(ve.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function Zk(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jk(t){if(typeof atob>"u")throw Uk("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _t={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Ua{constructor(e,n){this.data=e,this.contentType=n||null}}function oy(t,e){switch(t){case _t.RAW:return new Ua(sy(e));case _t.BASE64:case _t.BASE64URL:return new Ua(ay(t,e));case _t.DATA_URL:return new Ua(tN(e),nN(e))}throw dc()}function sy(t){const e=[];for(let n=0;n<t.length;n++){let i=t.charCodeAt(n);if(i<=127)e.push(i);else if(i<=2047)e.push(192|i>>6,128|i&63);else if((i&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const o=i,s=t.charCodeAt(++n);i=65536|(o&1023)<<10|s&1023,e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)===56320?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(e)}function eN(t){let e;try{e=decodeURIComponent(t)}catch{throw Sr(_t.DATA_URL,"Malformed data URL.")}return sy(e)}function ay(t,e){switch(t){case _t.BASE64:{const r=e.indexOf("-")!==-1,o=e.indexOf("_")!==-1;if(r||o)throw Sr(t,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case _t.BASE64URL:{const r=e.indexOf("+")!==-1,o=e.indexOf("/")!==-1;if(r||o)throw Sr(t,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=jk(e)}catch(r){throw r.message.includes("polyfill")?r:Sr(t,"Invalid character found")}const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}class ly{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Sr(_t.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=n[1]||null;i!=null&&(this.base64=iN(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=e.substring(e.indexOf(",")+1)}}function tN(t){const e=new ly(t);return e.base64?ay(_t.BASE64,e.rest):eN(e.rest)}function nN(t){return new ly(t).contentType}function iN(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(e,n){let i=0,r="";Sp(e)?(this.data_=e,i=e.size,r=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),i=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),i=e.length),this.size_=i,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,n){if(Sp(this.data_)){const i=this.data_,r=Zk(i,e,n);return r===null?null:new fn(r)}else{const i=new Uint8Array(this.data_.buffer,e,n-e);return new fn(i,!0)}}static getBlob(...e){if(pc()){const n=e.map(i=>i instanceof fn?i.data_:i);return new fn(Xk.apply(null,n))}else{const n=e.map(s=>fc(s)?oy(_t.RAW,s).data:s.data_);let i=0;n.forEach(s=>{i+=s.byteLength});const r=new Uint8Array(i);let o=0;return n.forEach(s=>{for(let u=0;u<s.length;u++)r[o++]=s[u]}),new fn(r,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uy(t){let e;try{e=JSON.parse(t)}catch{return null}return Gk(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rN(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function oN(t,e){const n=e.split("/").filter(i=>i.length>0).join("/");return t.length===0?n:t+"/"+n}function cy(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sN(t,e){return e}class Fe{constructor(e,n,i,r){this.server=e,this.local=n||e,this.writable=!!i,this.xform=r||sN}}let So=null;function aN(t){return!fc(t)||t.length<2?t:cy(t)}function dy(){if(So)return So;const t=[];t.push(new Fe("bucket")),t.push(new Fe("generation")),t.push(new Fe("metageneration")),t.push(new Fe("name","fullPath",!0));function e(o,s){return aN(s)}const n=new Fe("name");n.xform=e,t.push(n);function i(o,s){return s!==void 0?Number(s):s}const r=new Fe("size");return r.xform=i,t.push(r),t.push(new Fe("timeCreated")),t.push(new Fe("updated")),t.push(new Fe("md5Hash",null,!0)),t.push(new Fe("cacheControl",null,!0)),t.push(new Fe("contentDisposition",null,!0)),t.push(new Fe("contentEncoding",null,!0)),t.push(new Fe("contentLanguage",null,!0)),t.push(new Fe("contentType",null,!0)),t.push(new Fe("metadata","customMetadata",!0)),So=t,So}function lN(t,e){function n(){const i=t.bucket,r=t.fullPath,o=new et(i,r);return e._makeStorageReference(o)}Object.defineProperty(t,"ref",{get:n})}function uN(t,e,n){const i={};i.type="file";const r=n.length;for(let o=0;o<r;o++){const s=n[o];i[s.local]=s.xform(i,e[s.server])}return lN(i,t),i}function fy(t,e,n){const i=uy(e);return i===null?null:uN(t,i,n)}function cN(t,e,n,i){const r=uy(e);if(r===null||!fc(r.downloadTokens))return null;const o=r.downloadTokens;if(o.length===0)return null;const s=encodeURIComponent;return o.split(",").map(d=>{const f=t.bucket,p=t.fullPath,h="/b/"+s(f)+"/o/"+s(p),y=hc(h,n,i),T=ry({alt:"media",token:d});return y+T})[0]}function dN(t,e){const n={},i=e.length;for(let r=0;r<i;r++){const o=e[r];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}class py{constructor(e,n,i,r){this.url=e,this.method=n,this.handler=i,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hy(t){if(!t)throw dc()}function fN(t,e){function n(i,r){const o=fy(t,r,e);return hy(o!==null),o}return n}function pN(t,e){function n(i,r){const o=fy(t,r,e);return hy(o!==null),cN(o,r,t.host,t._protocol)}return n}function my(t){function e(n,i){let r;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?r=Ak():r=xk():n.getStatus()===402?r=Sk(t.bucket):n.getStatus()===403?r=kk(t.path):r=i,r.status=n.getStatus(),r.serverResponse=i.serverResponse,r}return e}function hN(t){const e=my(t);function n(i,r){let o=e(i,r);return i.getStatus()===404&&(o=Ck(t.path)),o.serverResponse=r.serverResponse,o}return n}function mN(t,e,n){const i=e.fullServerUrl(),r=hc(i,t.host,t._protocol),o="GET",s=t.maxOperationRetryTime,u=new py(r,o,pN(t,n),s);return u.errorHandler=hN(e),u}function gN(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function yN(t,e,n){const i=Object.assign({},n);return i.fullPath=t.path,i.size=e.size(),i.contentType||(i.contentType=gN(null,e)),i}function vN(t,e,n,i,r){const o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"};function u(){let v="";for(let I=0;I<2;I++)v=v+Math.random().toString().slice(2);return v}const c=u();s["Content-Type"]="multipart/related; boundary="+c;const d=yN(e,i,r),f=dN(d,n),p="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+f+`\r
--`+c+`\r
Content-Type: `+d.contentType+`\r
\r
`,h=`\r
--`+c+"--",y=fn.getBlob(p,i,h);if(y===null)throw Dk();const T={name:d.fullPath},E=hc(o,t.host,t._protocol),w="POST",_=t.maxUploadRetryTime,g=new py(E,w,fN(t,n),_);return g.urlParams=T,g.headers=s,g.body=y.uploadData(),g.errorHandler=my(e),g}class _N{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Yn.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Yn.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Yn.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,i,r){if(this.sent_)throw cr("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),r!==void 0)for(const o in r)r.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,r[o].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw cr("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw cr("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw cr("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw cr("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class TN extends _N{initXhr(){this.xhr_.responseType="text"}}function gy(){return new TN}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti{constructor(e,n){this._service=e,n instanceof et?this._location=n:this._location=et.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new ti(e,n)}get root(){const e=new et(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return cy(this._location.path)}get storage(){return this._service}get parent(){const e=rN(this._location.path);if(e===null)return null;const n=new et(this._location.bucket,e);return new ti(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw Fk(e)}}function EN(t,e,n){t._throwIfRoot("uploadBytes");const i=vN(t.storage,t._location,dy(),new fn(e,!0),n);return t.storage.makeRequestWithTokens(i,gy).then(r=>({metadata:r,ref:t}))}function IN(t,e,n=_t.RAW,i){t._throwIfRoot("uploadString");const r=oy(n,e),o=Object.assign({},i);return o.contentType==null&&r.contentType!=null&&(o.contentType=r.contentType),EN(t,r.data,o)}function wN(t){t._throwIfRoot("getDownloadURL");const e=mN(t.storage,t._location,dy());return t.storage.makeRequestWithTokens(e,gy).then(n=>{if(n===null)throw Lk();return n})}function CN(t,e){const n=oN(t._location.path,e),i=new et(t._location.bucket,n);return new ti(t.storage,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SN(t){return/^[A-Za-z]+:\/\//.test(t)}function xN(t,e){return new ti(t,e)}function yy(t,e){if(t instanceof mc){const n=t;if(n._bucket==null)throw bk();const i=new ti(n,n._bucket);return e!=null?yy(i,e):i}else return e!==void 0?CN(t,e):t}function AN(t,e){if(e&&SN(e)){if(t instanceof mc)return xN(t,e);throw Xl("To use ref(service, url), the first argument must be a Storage instance.")}else return yy(t,e)}function Ap(t,e){const n=e==null?void 0:e[ny];return n==null?null:et.makeFromBucketSpec(n,t)}function kN(t,e,n,i={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:r}=i;r&&(t._overrideAuthToken=typeof r=="string"?r:jx(r,t.app.options.projectId))}class mc{constructor(e,n,i,r,o){this.app=e,this._authProvider=n,this._appCheckProvider=i,this._url=r,this._firebaseVersion=o,this._bucket=null,this._host=ty,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Ik,this._maxUploadRetryTime=wk,this._requests=new Set,r!=null?this._bucket=et.makeFromBucketSpec(r,this._host):this._bucket=Ap(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=et.makeFromBucketSpec(this._url,e):this._bucket=Ap(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){xp("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){xp("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new ti(this,e)}_makeRequest(e,n,i,r,o=!0){if(this._deleted)return new Ok(iy());{const s=Yk(e,this._appId,i,r,n,this._firebaseVersion,o);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}async makeRequestWithTokens(e,n){const[i,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,i,r).getPromise()}}const kp="@firebase/storage",Np="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vy="storage";function NN(t,e,n,i){return t=ht(t),IN(t,e,n,i)}function RN(t){return t=ht(t),wN(t)}function PN(t,e){return t=ht(t),AN(t,e)}function MN(t=cc(),e){t=ht(t);const i=ui(t,vy).getImmediate({identifier:e}),r=Xx("storage");return r&&bN(i,...r),i}function bN(t,e,n,i={}){kN(t,e,n,i)}function DN(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),r=t.getProvider("app-check-internal");return new mc(n,i,r,e,Xi)}function LN(){Lt(new wt(vy,DN,"PUBLIC").setMultipleInstances(!0)),dt(kp,Np,""),dt(kp,Np,"esm2017")}LN();function gc(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function _y(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const UN=_y,Ty=new li("auth","Firebase",_y());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Is=new lc("@firebase/auth");function FN(t,...e){Is.logLevel<=ie.WARN&&Is.warn(`Auth (${Xi}): ${t}`,...e)}function Go(t,...e){Is.logLevel<=ie.ERROR&&Is.error(`Auth (${Xi}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jt(t,...e){throw yc(t,...e)}function bt(t,...e){return yc(t,...e)}function Ey(t,e,n){const i=Object.assign(Object.assign({},UN()),{[e]:n});return new li("auth","Firebase",i).create(e,{appName:t.name})}function Rn(t){return Ey(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function yc(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return Ty.create(t,...e)}function B(t,e,...n){if(!t)throw yc(e,...n)}function qt(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Go(e),new Error(e)}function en(t,e){t||qt(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zl(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function ON(){return Rp()==="http:"||Rp()==="https:"}function Rp(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(ON()||Wg()||"connection"in navigator)?navigator.onLine:!0}function HN(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eo{constructor(e,n){this.shortDelay=e,this.longDelay=n,en(n>e,"Short delay should be less than long delay!"),this.isMobile=eA()||nA()}get(){return VN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vc(t,e){en(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iy{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;qt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;qt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;qt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GN=new eo(3e4,6e4);function Ys(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Zi(t,e,n,i,r={}){return wy(t,r,async()=>{let o={},s={};i&&(e==="GET"?s=i:o={body:JSON.stringify(i)});const u=jr(Object.assign({key:t.config.apiKey},s)).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const d=Object.assign({method:e,headers:c},o);return tA()||(d.referrerPolicy="no-referrer"),Iy.fetch()(Sy(t,t.config.apiHost,n,u),d)})}async function wy(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},BN),e);try{const r=new qN(t),o=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const s=await o.json();if("needConfirmation"in s)throw xo(t,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{const u=o.ok?s.errorMessage:s.error.message,[c,d]=u.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw xo(t,"credential-already-in-use",s);if(c==="EMAIL_EXISTS")throw xo(t,"email-already-in-use",s);if(c==="USER_DISABLED")throw xo(t,"user-disabled",s);const f=i[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw Ey(t,f,d);jt(t,f)}}catch(r){if(r instanceof St)throw r;jt(t,"network-request-failed",{message:String(r)})}}async function Cy(t,e,n,i,r={}){const o=await Zi(t,e,n,i,r);return"mfaPendingCredential"in o&&jt(t,"multi-factor-auth-required",{_serverResponse:o}),o}function Sy(t,e,n,i){const r=`${e}${n}?${i}`;return t.config.emulator?vc(t.config,r):`${t.config.apiScheme}://${r}`}class qN{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(bt(this.auth,"network-request-failed")),GN.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function xo(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=bt(t,e,i);return r.customData._tokenResponse=n,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $N(t,e){return Zi(t,"POST","/v1/accounts:delete",e)}async function xy(t,e){return Zi(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xr(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function zN(t,e=!1){const n=ht(t),i=await n.getIdToken(e),r=_c(i);B(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const o=typeof r.firebase=="object"?r.firebase:void 0,s=o==null?void 0:o.sign_in_provider;return{claims:r,token:i,authTime:xr(Fa(r.auth_time)),issuedAtTime:xr(Fa(r.iat)),expirationTime:xr(Fa(r.exp)),signInProvider:s||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function Fa(t){return Number(t)*1e3}function _c(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return Go("JWT malformed, contained fewer than 3 sections"),null;try{const r=Gg(n);return r?JSON.parse(r):(Go("Failed to decode base64 JWT payload"),null)}catch(r){return Go("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function Pp(t){const e=_c(t);return B(e,"internal-error"),B(typeof e.exp<"u","internal-error"),B(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jr(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof St&&WN(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function WN({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JN{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const r=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=xr(this.lastLoginAt),this.creationTime=xr(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ws(t){var e;const n=t.auth,i=await t.getIdToken(),r=await Jr(t,xy(n,{idToken:i}));B(r==null?void 0:r.users.length,n,"internal-error");const o=r.users[0];t._notifyReloadListener(o);const s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?Ay(o.providerUserInfo):[],u=YN(t.providerData,s),c=t.isAnonymous,d=!(t.email&&o.passwordHash)&&!(u!=null&&u.length),f=c?d:!1,p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new jl(o.createdAt,o.lastLoginAt),isAnonymous:f};Object.assign(t,p)}async function KN(t){const e=ht(t);await ws(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function YN(t,e){return[...t.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function Ay(t){return t.map(e=>{var{providerId:n}=e,i=gc(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QN(t,e){const n=await wy(t,{},async()=>{const i=jr({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:o}=t.config,s=Sy(t,r,"/v1/token",`key=${o}`),u=await t._getAdditionalHeaders();return u["Content-Type"]="application/x-www-form-urlencoded",Iy.fetch()(s,{method:"POST",headers:u,body:i})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function XN(t,e){return Zi(t,"POST","/v2/accounts:revokeToken",Ys(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){B(e.idToken,"internal-error"),B(typeof e.idToken<"u","internal-error"),B(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Pp(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){B(e.length!==0,"internal-error");const n=Pp(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(B(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:r,expiresIn:o}=await QN(e,n);this.updateTokensAndExpiration(i,r,Number(o))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:r,expirationTime:o}=n,s=new Li;return i&&(B(typeof i=="string","internal-error",{appName:e}),s.refreshToken=i),r&&(B(typeof r=="string","internal-error",{appName:e}),s.accessToken=r),o&&(B(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Li,this.toJSON())}_performRefresh(){return qt("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function an(t,e){B(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class $t{constructor(e){var{uid:n,auth:i,stsTokenManager:r}=e,o=gc(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new JN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new jl(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await Jr(this,this.stsTokenManager.getToken(this.auth,e));return B(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return zN(this,e)}reload(){return KN(this)}_assign(e){this!==e&&(B(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new $t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){B(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await ws(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Gt(this.auth.app))return Promise.reject(Rn(this.auth));const e=await this.getIdToken();return await Jr(this,$N(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,r,o,s,u,c,d,f;const p=(i=n.displayName)!==null&&i!==void 0?i:void 0,h=(r=n.email)!==null&&r!==void 0?r:void 0,y=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,T=(s=n.photoURL)!==null&&s!==void 0?s:void 0,E=(u=n.tenantId)!==null&&u!==void 0?u:void 0,w=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,_=(d=n.createdAt)!==null&&d!==void 0?d:void 0,g=(f=n.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:v,emailVerified:I,isAnonymous:C,providerData:x,stsTokenManager:A}=n;B(v&&A,e,"internal-error");const N=Li.fromJSON(this.name,A);B(typeof v=="string",e,"internal-error"),an(p,e.name),an(h,e.name),B(typeof I=="boolean",e,"internal-error"),B(typeof C=="boolean",e,"internal-error"),an(y,e.name),an(T,e.name),an(E,e.name),an(w,e.name),an(_,e.name),an(g,e.name);const P=new $t({uid:v,auth:e,email:h,emailVerified:I,displayName:p,isAnonymous:C,photoURL:T,phoneNumber:y,tenantId:E,stsTokenManager:N,createdAt:_,lastLoginAt:g});return x&&Array.isArray(x)&&(P.providerData=x.map(R=>Object.assign({},R))),w&&(P._redirectEventId=w),P}static async _fromIdTokenResponse(e,n,i=!1){const r=new Li;r.updateFromServerResponse(n);const o=new $t({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await ws(o),o}static async _fromGetAccountInfoResponse(e,n,i){const r=n.users[0];B(r.localId!==void 0,"internal-error");const o=r.providerUserInfo!==void 0?Ay(r.providerUserInfo):[],s=!(r.email&&r.passwordHash)&&!(o!=null&&o.length),u=new Li;u.updateFromIdToken(i);const c=new $t({uid:r.localId,auth:e,stsTokenManager:u,isAnonymous:s}),d={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new jl(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(o!=null&&o.length)};return Object.assign(c,d),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mp=new Map;function zt(t){en(t instanceof Function,"Expected a class definition");let e=Mp.get(t);return e?(en(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Mp.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ky{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}ky.type="NONE";const bp=ky;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qo(t,e,n){return`firebase:${t}:${e}:${n}`}class Ui{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:r,name:o}=this.auth;this.fullUserKey=qo(this.userKey,r.apiKey,o),this.fullPersistenceKey=qo("persistence",r.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?$t._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new Ui(zt(bp),e,i);const r=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let o=r[0]||zt(bp);const s=qo(i,e.config.apiKey,e.name);let u=null;for(const d of n)try{const f=await d._get(s);if(f){const p=$t._fromJSON(e,f);d!==o&&(u=p),o=d;break}}catch{}const c=r.filter(d=>d._shouldAllowMigration);return!o._shouldAllowMigration||!c.length?new Ui(o,e,i):(o=c[0],u&&await o._set(s,u.toJSON()),await Promise.all(n.map(async d=>{if(d!==o)try{await d._remove(s)}catch{}})),new Ui(o,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dp(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(My(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Ny(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Dy(e))return"Blackberry";if(Ly(e))return"Webos";if(Ry(e))return"Safari";if((e.includes("chrome/")||Py(e))&&!e.includes("edge/"))return"Chrome";if(by(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function Ny(t=He()){return/firefox\//i.test(t)}function Ry(t=He()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Py(t=He()){return/crios\//i.test(t)}function My(t=He()){return/iemobile/i.test(t)}function by(t=He()){return/android/i.test(t)}function Dy(t=He()){return/blackberry/i.test(t)}function Ly(t=He()){return/webos/i.test(t)}function Tc(t=He()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function ZN(t=He()){var e;return Tc(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function jN(){return iA()&&document.documentMode===10}function Uy(t=He()){return Tc(t)||by(t)||Ly(t)||Dy(t)||/windows phone/i.test(t)||My(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fy(t,e=[]){let n;switch(t){case"Browser":n=Dp(He());break;case"Worker":n=`${Dp(He())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Xi}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eR{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=o=>new Promise((s,u)=>{try{const c=e(o);s(c)}catch(c){u(c)}});i.onAbort=n,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tR(t,e={}){return Zi(t,"GET","/v2/passwordPolicy",Ys(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nR=6;class iR{constructor(e){var n,i,r,o;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=s.minPasswordLength)!==null&&n!==void 0?n:nR,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,i,r,o,s,u;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(i=c.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(r=c.containsLowercaseLetter)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(o=c.containsUppercaseLetter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(s=c.containsNumericCharacter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(u=c.containsNonAlphanumericCharacter)!==null&&u!==void 0?u:!0),c}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,r,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rR{constructor(e,n,i,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Lp(this),this.idTokenSubscription=new Lp(this),this.beforeStateQueue=new eR(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ty,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=zt(n)),this._initializationPromise=this.queue(async()=>{var i,r;if(!this._deleted&&(this.persistenceManager=await Ui.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await xy(this,{idToken:e}),i=await $t._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Gt(this.app)){const s=this.app.settings.authIdToken;return s?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(u,u))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let r=i,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const s=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,u=r==null?void 0:r._redirectEventId,c=await this.tryRedirectSignIn(e);(!s||s===u)&&(c!=null&&c.user)&&(r=c.user,o=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(r)}catch(s){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return B(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await ws(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=HN()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Gt(this.app))return Promise.reject(Rn(this));const n=e?ht(e):null;return n&&B(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&B(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Gt(this.app)?Promise.reject(Rn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Gt(this.app)?Promise.reject(Rn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(zt(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await tR(this),n=new iR(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new li("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await XN(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&zt(e)||this._popupRedirectResolver;B(n,this,"argument-error"),this.redirectPersistenceManager=await Ui.create(this,[zt(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,r){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let s=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(B(u,this,"internal-error"),u.then(()=>{s||o(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,i,r);return()=>{s=!0,c()}}else{const c=e.addObserver(n);return()=>{s=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return B(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Fy(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(n["X-Firebase-Client"]=i);const r=await this._getAppCheckToken();return r&&(n["X-Firebase-AppCheck"]=r),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&FN(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Qs(t){return ht(t)}class Lp{constructor(e){this.auth=e,this.observer=null,this.addObserver=uA(n=>this.observer=n)}get next(){return B(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ec={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function oR(t){Ec=t}function sR(t){return Ec.loadJS(t)}function aR(){return Ec.gapiScript}function lR(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uR(t,e){const n=ui(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),o=n.getOptions();if(zr(o,e??{}))return r;jt(r,"already-initialized")}return n.initialize({options:e})}function cR(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(zt);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function dR(t,e,n){const i=Qs(t);B(i._canInitEmulator,i,"emulator-config-failed"),B(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!1,o=Oy(e),{host:s,port:u}=fR(e),c=u===null?"":`:${u}`;i.config.emulator={url:`${o}//${s}${c}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:s,port:u,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:r})}),pR()}function Oy(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function fR(t){const e=Oy(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const o=r[1];return{host:o,port:Up(i.substr(o.length+1))}}else{const[o,s]=i.split(":");return{host:o,port:Up(s)}}}function Up(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function pR(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vy{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return qt("not implemented")}_getIdTokenResponse(e){return qt("not implemented")}_linkToIdToken(e,n){return qt("not implemented")}_getReauthenticationResolver(e){return qt("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fi(t,e){return Cy(t,"POST","/v1/accounts:signInWithIdp",Ys(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hR="http://localhost";class ni extends Vy{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ni(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):jt("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r}=n,o=gc(n,["providerId","signInMethod"]);if(!i||!r)return null;const s=new ni(i,r);return s.idToken=o.idToken||void 0,s.accessToken=o.accessToken||void 0,s.secret=o.secret,s.nonce=o.nonce,s.pendingToken=o.pendingToken||null,s}_getIdTokenResponse(e){const n=this.buildRequest();return Fi(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,Fi(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Fi(e,n)}buildRequest(){const e={requestUri:hR,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=jr(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hy{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to extends Hy{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn extends to{constructor(){super("facebook.com")}static credential(e){return ni._fromParams({providerId:pn.PROVIDER_ID,signInMethod:pn.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return pn.credentialFromTaggedObject(e)}static credentialFromError(e){return pn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return pn.credential(e.oauthAccessToken)}catch{return null}}}pn.FACEBOOK_SIGN_IN_METHOD="facebook.com";pn.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn extends to{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ni._fromParams({providerId:hn.PROVIDER_ID,signInMethod:hn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return hn.credentialFromTaggedObject(e)}static credentialFromError(e){return hn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return hn.credential(n,i)}catch{return null}}}hn.GOOGLE_SIGN_IN_METHOD="google.com";hn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn extends to{constructor(){super("github.com")}static credential(e){return ni._fromParams({providerId:mn.PROVIDER_ID,signInMethod:mn.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return mn.credentialFromTaggedObject(e)}static credentialFromError(e){return mn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return mn.credential(e.oauthAccessToken)}catch{return null}}}mn.GITHUB_SIGN_IN_METHOD="github.com";mn.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn extends to{constructor(){super("twitter.com")}static credential(e,n){return ni._fromParams({providerId:gn.PROVIDER_ID,signInMethod:gn.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return gn.credentialFromTaggedObject(e)}static credentialFromError(e){return gn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return gn.credential(n,i)}catch{return null}}}gn.TWITTER_SIGN_IN_METHOD="twitter.com";gn.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mR(t,e){return Cy(t,"POST","/v1/accounts:signUp",Ys(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,r=!1){const o=await $t._fromIdTokenResponse(e,i,r),s=Fp(i);return new bn({user:o,providerId:s,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const r=Fp(i);return new bn({user:e,providerId:r,_tokenResponse:i,operationType:n})}}function Fp(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function By(t){var e;if(Gt(t.app))return Promise.reject(Rn(t));const n=Qs(t);if(await n._initializationPromise,!((e=n.currentUser)===null||e===void 0)&&e.isAnonymous)return new bn({user:n.currentUser,providerId:null,operationType:"signIn"});const i=await mR(n,{returnSecureToken:!0}),r=await bn._fromIdTokenResponse(n,"signIn",i,!0);return await n._updateCurrentUser(r.user),r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cs extends St{constructor(e,n,i,r){var o;super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,Cs.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,r){return new Cs(e,n,i,r)}}function Gy(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Cs._fromErrorAndOperation(t,o,e,i):o})}async function gR(t,e,n=!1){const i=await Jr(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return bn._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yR(t,e,n=!1){const{auth:i}=t;if(Gt(i.app))return Promise.reject(Rn(i));const r="reauthenticate";try{const o=await Jr(t,Gy(i,r,e,t),n);B(o.idToken,i,"internal-error");const s=_c(o.idToken);B(s,i,"internal-error");const{sub:u}=s;return B(t.uid===u,i,"user-mismatch"),bn._forOperation(t,r,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&jt(i,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vR(t,e,n=!1){if(Gt(t.app))return Promise.reject(Rn(t));const i="signIn",r=await Gy(t,i,e),o=await bn._fromIdTokenResponse(t,i,r);return n||await t._updateCurrentUser(o.user),o}function _R(t,e,n,i){return ht(t).onIdTokenChanged(e,n,i)}function TR(t,e,n){return ht(t).beforeAuthStateChanged(e,n)}const Ss="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qy{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Ss,"1"),this.storage.removeItem(Ss),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ER=1e3,IR=10;class $y extends qy{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Uy(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),r=this.localCache[n];i!==r&&e(n,r,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((s,u,c)=>{this.notifyListeners(s,c)});return}const i=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const s=this.storage.getItem(i);!n&&this.localCache[i]===s||this.notifyListeners(i,s)},o=this.storage.getItem(i);jN()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,IR):r()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},ER)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}$y.type="LOCAL";const wR=$y;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zy extends qy{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}zy.type="SESSION";const Wy=zy;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CR(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const i=new Xs(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:r,data:o}=n.data,s=this.handlersMap[r];if(!(s!=null&&s.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const u=Array.from(s).map(async d=>d(n.origin,o)),c=await CR(u);n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Xs.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ic(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SR{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let o,s;return new Promise((u,c)=>{const d=Ic("",20);r.port1.start();const f=setTimeout(()=>{c(new Error("unsupported_event"))},i);s={messageChannel:r,onMessage(p){const h=p;if(h.data.eventId===d)switch(h.data.status){case"ack":clearTimeout(f),o=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),u(h.data.response);break;default:clearTimeout(f),clearTimeout(o),c(new Error("invalid_response"));break}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[r.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dt(){return window}function xR(t){Dt().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jy(){return typeof Dt().WorkerGlobalScope<"u"&&typeof Dt().importScripts=="function"}async function AR(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function kR(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function NR(){return Jy()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ky="firebaseLocalStorageDb",RR=1,xs="firebaseLocalStorage",Yy="fbase_key";class no{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Zs(t,e){return t.transaction([xs],e?"readwrite":"readonly").objectStore(xs)}function PR(){const t=indexedDB.deleteDatabase(Ky);return new no(t).toPromise()}function eu(){const t=indexedDB.open(Ky,RR);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(xs,{keyPath:Yy})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(xs)?e(i):(i.close(),await PR(),e(await eu()))})})}async function Op(t,e,n){const i=Zs(t,!0).put({[Yy]:e,value:n});return new no(i).toPromise()}async function MR(t,e){const n=Zs(t,!1).get(e),i=await new no(n).toPromise();return i===void 0?null:i.value}function Vp(t,e){const n=Zs(t,!0).delete(e);return new no(n).toPromise()}const bR=800,DR=3;class Qy{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await eu(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>DR)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Jy()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Xs._getInstance(NR()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await AR(),!this.activeServiceWorker)return;this.sender=new SR(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((n=i[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||kR()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await eu();return await Op(e,Ss,"1"),await Vp(e,Ss),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>Op(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>MR(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Vp(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const o=Zs(r,!1).getAll();return new no(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:r,value:o}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(o)&&(this.notifyListeners(r,o),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),bR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Qy.type="LOCAL";const LR=Qy;new eo(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UR(t,e){return e?zt(e):(B(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wc extends Vy{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Fi(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Fi(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Fi(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function FR(t){return vR(t.auth,new wc(t),t.bypassAuthState)}function OR(t){const{auth:e,user:n}=t;return B(n,e,"internal-error"),yR(n,new wc(t),t.bypassAuthState)}async function VR(t){const{auth:e,user:n}=t;return B(n,e,"internal-error"),gR(n,new wc(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xy{constructor(e,n,i,r,o=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:r,tenantId:o,error:s,type:u}=e;if(s){this.reject(s);return}const c={auth:this.auth,requestUri:n,sessionId:i,tenantId:o||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(c))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return FR;case"linkViaPopup":case"linkViaRedirect":return VR;case"reauthViaPopup":case"reauthViaRedirect":return OR;default:jt(this.auth,"internal-error")}}resolve(e){en(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){en(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HR=new eo(2e3,1e4);class Si extends Xy{constructor(e,n,i,r,o){super(e,n,r,o),this.provider=i,this.authWindow=null,this.pollId=null,Si.currentPopupAction&&Si.currentPopupAction.cancel(),Si.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return B(e,this.auth,"internal-error"),e}async onExecution(){en(this.filter.length===1,"Popup operations only handle one event");const e=Ic();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(bt(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(bt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Si.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if(!((i=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(bt(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,HR.get())};e()}}Si.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BR="pendingRedirect",$o=new Map;class GR extends Xy{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=$o.get(this.auth._key());if(!e){try{const i=await qR(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}$o.set(this.auth._key(),e)}return this.bypassAuthState||$o.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function qR(t,e){const n=WR(e),i=zR(t);if(!await i._isAvailable())return!1;const r=await i._get(n)==="true";return await i._remove(n),r}function $R(t,e){$o.set(t._key(),e)}function zR(t){return zt(t._redirectPersistence)}function WR(t){return qo(BR,t.config.apiKey,t.name)}async function JR(t,e,n=!1){if(Gt(t.app))return Promise.reject(Rn(t));const i=Qs(t),r=UR(i,e),s=await new GR(i,r,n).execute();return s&&!n&&(delete s.user._redirectEventId,await i._persistUserIfCurrent(s.user),await i._setRedirectUser(null,e)),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KR=10*60*1e3;class YR{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!QR(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!Zy(e)){const r=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(bt(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=KR&&this.cachedEventUids.clear(),this.cachedEventUids.has(Hp(e))}saveEventToCache(e){this.cachedEventUids.add(Hp(e)),this.lastProcessedEventTime=Date.now()}}function Hp(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Zy({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function QR(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Zy(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XR(t,e={}){return Zi(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZR=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,jR=/^https?/;async function eP(t){if(t.config.emulator)return;const{authorizedDomains:e}=await XR(t);for(const n of e)try{if(tP(n))return}catch{}jt(t,"unauthorized-domain")}function tP(t){const e=Zl(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const s=new URL(t);return s.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&s.hostname===i}if(!jR.test(n))return!1;if(ZR.test(t))return i===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nP=new eo(3e4,6e4);function Bp(){const t=Dt().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function iP(t){return new Promise((e,n)=>{var i,r,o;function s(){Bp(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Bp(),n(bt(t,"network-request-failed"))},timeout:nP.get()})}if(!((r=(i=Dt().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((o=Dt().gapi)===null||o===void 0)&&o.load)s();else{const u=lR("iframefcb");return Dt()[u]=()=>{gapi.load?s():n(bt(t,"network-request-failed"))},sR(`${aR()}?onload=${u}`).catch(c=>n(c))}}).catch(e=>{throw zo=null,e})}let zo=null;function rP(t){return zo=zo||iP(t),zo}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oP=new eo(5e3,15e3),sP="__/auth/iframe",aP="emulator/auth/iframe",lP={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},uP=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function cP(t){const e=t.config;B(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?vc(e,aP):`https://${t.config.authDomain}/${sP}`,i={apiKey:e.apiKey,appName:t.name,v:Xi},r=uP.get(t.config.apiHost);r&&(i.eid=r);const o=t._getFrameworks();return o.length&&(i.fw=o.join(",")),`${n}?${jr(i).slice(1)}`}async function dP(t){const e=await rP(t),n=Dt().gapi;return B(n,t,"internal-error"),e.open({where:document.body,url:cP(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:lP,dontclear:!0},i=>new Promise(async(r,o)=>{await i.restyle({setHideOnLeave:!1});const s=bt(t,"network-request-failed"),u=Dt().setTimeout(()=>{o(s)},oP.get());function c(){Dt().clearTimeout(u),r(i)}i.ping(c).then(c,()=>{o(s)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fP={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},pP=500,hP=600,mP="_blank",gP="http://localhost";class Gp{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function yP(t,e,n,i=pP,r=hP){const o=Math.max((window.screen.availHeight-r)/2,0).toString(),s=Math.max((window.screen.availWidth-i)/2,0).toString();let u="";const c=Object.assign(Object.assign({},fP),{width:i.toString(),height:r.toString(),top:o,left:s}),d=He().toLowerCase();n&&(u=Py(d)?mP:n),Ny(d)&&(e=e||gP,c.scrollbars="yes");const f=Object.entries(c).reduce((h,[y,T])=>`${h}${y}=${T},`,"");if(ZN(d)&&u!=="_self")return vP(e||"",u),new Gp(null);const p=window.open(e||"",u,f);B(p,t,"popup-blocked");try{p.focus()}catch{}return new Gp(p)}function vP(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _P="__/auth/handler",TP="emulator/auth/handler",EP=encodeURIComponent("fac");async function qp(t,e,n,i,r,o){B(t.config.authDomain,t,"auth-domain-config-required"),B(t.config.apiKey,t,"invalid-api-key");const s={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:Xi,eventId:r};if(e instanceof Hy){e.setDefaultLanguage(t.languageCode),s.providerId=e.providerId||"",lA(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,p]of Object.entries({}))s[f]=p}if(e instanceof to){const f=e.getScopes().filter(p=>p!=="");f.length>0&&(s.scopes=f.join(","))}t.tenantId&&(s.tid=t.tenantId);const u=s;for(const f of Object.keys(u))u[f]===void 0&&delete u[f];const c=await t._getAppCheckToken(),d=c?`#${EP}=${encodeURIComponent(c)}`:"";return`${IP(t)}?${jr(u).slice(1)}${d}`}function IP({config:t}){return t.emulator?vc(t,TP):`https://${t.authDomain}/${_P}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oa="webStorageSupport";class wP{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Wy,this._completeRedirectFn=JR,this._overrideRedirectResult=$R}async _openPopup(e,n,i,r){var o;en((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const s=await qp(e,n,i,Zl(),r);return yP(e,s,Ic())}async _openRedirect(e,n,i,r){await this._originValidation(e);const o=await qp(e,n,i,Zl(),r);return xR(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:o}=this.eventManagers[n];return r?Promise.resolve(r):(en(o,"If manager is not set, promise should be"),o)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await dP(e),i=new YR(e);return n.register("authEvent",r=>(B(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Oa,{type:Oa},r=>{var o;const s=(o=r==null?void 0:r[0])===null||o===void 0?void 0:o[Oa];s!==void 0&&n(!!s),jt(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=eP(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Uy()||Ry()||Tc()}}const CP=wP;var $p="@firebase/auth",zp="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SP{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){B(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xP(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function AP(t){Lt(new wt("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:u}=i.options;B(s&&!s.includes(":"),"invalid-api-key",{appName:i.name});const c={apiKey:s,authDomain:u,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Fy(t)},d=new rR(i,r,o,c);return cR(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),Lt(new wt("auth-internal",e=>{const n=Qs(e.getProvider("auth").getImmediate());return(i=>new SP(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),dt($p,zp,xP(t)),dt($p,zp,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kP=5*60,NP=zg("authIdTokenMaxAge")||kP;let Wp=null;const RP=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>NP)return;const r=n==null?void 0:n.token;Wp!==r&&(Wp=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function PP(t=cc()){const e=ui(t,"auth");if(e.isInitialized())return e.getImmediate();const n=uR(t,{popupRedirectResolver:CP,persistence:[LR,wR,Wy]}),i=zg("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(i,location.origin);if(location.origin===o.origin){const s=RP(o.toString());TR(n,s,()=>s(n.currentUser)),_R(n,u=>s(u))}}const r=qg("auth");return r&&dR(n,`http://${r}`),n}function MP(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}oR({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=r=>{const o=bt("internal-error");o.customData=r,n(o)},i.type="text/javascript",i.charset="UTF-8",MP().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});AP("Browser");var bP="firebase",DP="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */dt(bP,DP,"app");const jy="@firebase/installations",Cc="0.6.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ev=1e4,tv=`w:${Cc}`,nv="FIS_v2",LP="https://firebaseinstallations.googleapis.com/v1",UP=60*60*1e3,FP="installations",OP="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VP={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},ii=new li(FP,OP,VP);function iv(t){return t instanceof St&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rv({projectId:t}){return`${LP}/projects/${t}/installations`}function ov(t){return{token:t.token,requestStatus:2,expiresIn:BP(t.expiresIn),creationTime:Date.now()}}async function sv(t,e){const i=(await e.json()).error;return ii.create("request-failed",{requestName:t,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})}function av({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function HP(t,{refreshToken:e}){const n=av(t);return n.append("Authorization",GP(e)),n}async function lv(t){const e=await t();return e.status>=500&&e.status<600?t():e}function BP(t){return Number(t.replace("s","000"))}function GP(t){return`${nv} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qP({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const i=rv(t),r=av(t),o=e.getImmediate({optional:!0});if(o){const d=await o.getHeartbeatsHeader();d&&r.append("x-firebase-client",d)}const s={fid:n,authVersion:nv,appId:t.appId,sdkVersion:tv},u={method:"POST",headers:r,body:JSON.stringify(s)},c=await lv(()=>fetch(i,u));if(c.ok){const d=await c.json();return{fid:d.fid||n,registrationStatus:2,refreshToken:d.refreshToken,authToken:ov(d.authToken)}}else throw await sv("Create Installation",c)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uv(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $P(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zP=/^[cdef][\w-]{21}$/,tu="";function WP(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=JP(t);return zP.test(n)?n:tu}catch{return tu}}function JP(t){return $P(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function js(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cv=new Map;function dv(t,e){const n=js(t);fv(n,e),KP(n,e)}function fv(t,e){const n=cv.get(t);if(n)for(const i of n)i(e)}function KP(t,e){const n=YP();n&&n.postMessage({key:t,fid:e}),QP()}let Wn=null;function YP(){return!Wn&&"BroadcastChannel"in self&&(Wn=new BroadcastChannel("[Firebase] FID Change"),Wn.onmessage=t=>{fv(t.data.key,t.data.fid)}),Wn}function QP(){cv.size===0&&Wn&&(Wn.close(),Wn=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XP="firebase-installations-database",ZP=1,ri="firebase-installations-store";let Va=null;function Sc(){return Va||(Va=Xg(XP,ZP,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(ri)}}})),Va}async function As(t,e){const n=js(t),r=(await Sc()).transaction(ri,"readwrite"),o=r.objectStore(ri),s=await o.get(n);return await o.put(e,n),await r.done,(!s||s.fid!==e.fid)&&dv(t,e.fid),e}async function pv(t){const e=js(t),i=(await Sc()).transaction(ri,"readwrite");await i.objectStore(ri).delete(e),await i.done}async function ea(t,e){const n=js(t),r=(await Sc()).transaction(ri,"readwrite"),o=r.objectStore(ri),s=await o.get(n),u=e(s);return u===void 0?await o.delete(n):await o.put(u,n),await r.done,u&&(!s||s.fid!==u.fid)&&dv(t,u.fid),u}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xc(t){let e;const n=await ea(t.appConfig,i=>{const r=jP(i),o=eM(t,r);return e=o.registrationPromise,o.installationEntry});return n.fid===tu?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function jP(t){const e=t||{fid:WP(),registrationStatus:0};return hv(e)}function eM(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const r=Promise.reject(ii.create("app-offline"));return{installationEntry:e,registrationPromise:r}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=tM(t,n);return{installationEntry:n,registrationPromise:i}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:nM(t)}:{installationEntry:e}}async function tM(t,e){try{const n=await qP(t,e);return As(t.appConfig,n)}catch(n){throw iv(n)&&n.customData.serverCode===409?await pv(t.appConfig):await As(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function nM(t){let e=await Jp(t.appConfig);for(;e.registrationStatus===1;)await uv(100),e=await Jp(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:i}=await xc(t);return i||n}return e}function Jp(t){return ea(t,e=>{if(!e)throw ii.create("installation-not-found");return hv(e)})}function hv(t){return iM(t)?{fid:t.fid,registrationStatus:0}:t}function iM(t){return t.registrationStatus===1&&t.registrationTime+ev<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rM({appConfig:t,heartbeatServiceProvider:e},n){const i=oM(t,n),r=HP(t,n),o=e.getImmediate({optional:!0});if(o){const d=await o.getHeartbeatsHeader();d&&r.append("x-firebase-client",d)}const s={installation:{sdkVersion:tv,appId:t.appId}},u={method:"POST",headers:r,body:JSON.stringify(s)},c=await lv(()=>fetch(i,u));if(c.ok){const d=await c.json();return ov(d)}else throw await sv("Generate Auth Token",c)}function oM(t,{fid:e}){return`${rv(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ac(t,e=!1){let n;const i=await ea(t.appConfig,o=>{if(!mv(o))throw ii.create("not-registered");const s=o.authToken;if(!e&&lM(s))return o;if(s.requestStatus===1)return n=sM(t,e),o;{if(!navigator.onLine)throw ii.create("app-offline");const u=cM(o);return n=aM(t,u),u}});return n?await n:i.authToken}async function sM(t,e){let n=await Kp(t.appConfig);for(;n.authToken.requestStatus===1;)await uv(100),n=await Kp(t.appConfig);const i=n.authToken;return i.requestStatus===0?Ac(t,e):i}function Kp(t){return ea(t,e=>{if(!mv(e))throw ii.create("not-registered");const n=e.authToken;return dM(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function aM(t,e){try{const n=await rM(t,e),i=Object.assign(Object.assign({},e),{authToken:n});return await As(t.appConfig,i),n}catch(n){if(iv(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await pv(t.appConfig);else{const i=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await As(t.appConfig,i)}throw n}}function mv(t){return t!==void 0&&t.registrationStatus===2}function lM(t){return t.requestStatus===2&&!uM(t)}function uM(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+UP}function cM(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function dM(t){return t.requestStatus===1&&t.requestTime+ev<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fM(t){const e=t,{installationEntry:n,registrationPromise:i}=await xc(e);return i?i.catch(console.error):Ac(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pM(t,e=!1){const n=t;return await hM(n),(await Ac(n,e)).token}async function hM(t){const{registrationPromise:e}=await xc(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mM(t){if(!t||!t.options)throw Ha("App Configuration");if(!t.name)throw Ha("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw Ha(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Ha(t){return ii.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gv="installations",gM="installations-internal",yM=t=>{const e=t.getProvider("app").getImmediate(),n=mM(e),i=ui(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:i,_delete:()=>Promise.resolve()}},vM=t=>{const e=t.getProvider("app").getImmediate(),n=ui(e,gv).getImmediate();return{getId:()=>fM(n),getToken:r=>pM(n,r)}};function _M(){Lt(new wt(gv,yM,"PUBLIC")),Lt(new wt(gM,vM,"PRIVATE"))}_M();dt(jy,Cc);dt(jy,Cc,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ks="analytics",TM="firebase_id",EM="origin",IM=60*1e3,wM="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",kc="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ye=new lc("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CM={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},nt=new li("analytics","Analytics",CM);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SM(t){if(!t.startsWith(kc)){const e=nt.create("invalid-gtag-resource",{gtagURL:t});return Ye.warn(e.message),""}return t}function yv(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function xM(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function AM(t,e){const n=xM("firebase-js-sdk-policy",{createScriptURL:SM}),i=document.createElement("script"),r=`${kc}?l=${t}&id=${e}`;i.src=n?n==null?void 0:n.createScriptURL(r):r,i.async=!0,document.head.appendChild(i)}function kM(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function NM(t,e,n,i,r,o){const s=i[r];try{if(s)await e[s];else{const c=(await yv(n)).find(d=>d.measurementId===r);c&&await e[c.appId]}}catch(u){Ye.error(u)}t("config",r,o)}async function RM(t,e,n,i,r){try{let o=[];if(r&&r.send_to){let s=r.send_to;Array.isArray(s)||(s=[s]);const u=await yv(n);for(const c of s){const d=u.find(p=>p.measurementId===c),f=d&&e[d.appId];if(f)o.push(f);else{o=[];break}}}o.length===0&&(o=Object.values(e)),await Promise.all(o),t("event",i,r||{})}catch(o){Ye.error(o)}}function PM(t,e,n,i){async function r(o,...s){try{if(o==="event"){const[u,c]=s;await RM(t,e,n,u,c)}else if(o==="config"){const[u,c]=s;await NM(t,e,n,i,u,c)}else if(o==="consent"){const[u,c]=s;t("consent",u,c)}else if(o==="get"){const[u,c,d]=s;t("get",u,c,d)}else if(o==="set"){const[u]=s;t("set",u)}else t(o,...s)}catch(u){Ye.error(u)}}return r}function MM(t,e,n,i,r){let o=function(...s){window[i].push(arguments)};return window[r]&&typeof window[r]=="function"&&(o=window[r]),window[r]=PM(o,t,e,n),{gtagCore:o,wrappedGtag:window[r]}}function bM(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(kc)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DM=30,LM=1e3;class UM{constructor(e={},n=LM){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const vv=new UM;function FM(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function OM(t){var e;const{appId:n,apiKey:i}=t,r={method:"GET",headers:FM(i)},o=wM.replace("{app-id}",n),s=await fetch(o,r);if(s.status!==200&&s.status!==304){let u="";try{const c=await s.json();!((e=c.error)===null||e===void 0)&&e.message&&(u=c.error.message)}catch{}throw nt.create("config-fetch-failed",{httpStatus:s.status,responseMessage:u})}return s.json()}async function VM(t,e=vv,n){const{appId:i,apiKey:r,measurementId:o}=t.options;if(!i)throw nt.create("no-app-id");if(!r){if(o)return{measurementId:o,appId:i};throw nt.create("no-api-key")}const s=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},u=new GM;return setTimeout(async()=>{u.abort()},IM),_v({appId:i,apiKey:r,measurementId:o},s,u,e)}async function _v(t,{throttleEndTimeMillis:e,backoffCount:n},i,r=vv){var o;const{appId:s,measurementId:u}=t;try{await HM(i,e)}catch(c){if(u)return Ye.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${u} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:s,measurementId:u};throw c}try{const c=await OM(t);return r.deleteThrottleMetadata(s),c}catch(c){const d=c;if(!BM(d)){if(r.deleteThrottleMetadata(s),u)return Ye.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${u} provided in the "measurementId" field in the local Firebase config. [${d==null?void 0:d.message}]`),{appId:s,measurementId:u};throw c}const f=Number((o=d==null?void 0:d.customData)===null||o===void 0?void 0:o.httpStatus)===503?gp(n,r.intervalMillis,DM):gp(n,r.intervalMillis),p={throttleEndTimeMillis:Date.now()+f,backoffCount:n+1};return r.setThrottleMetadata(s,p),Ye.debug(`Calling attemptFetch again in ${f} millis`),_v(t,p,i,r)}}function HM(t,e){return new Promise((n,i)=>{const r=Math.max(e-Date.now(),0),o=setTimeout(n,r);t.addEventListener(()=>{clearTimeout(o),i(nt.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function BM(t){if(!(t instanceof St)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class GM{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function qM(t,e,n,i,r){if(r&&r.global){t("event",n,i);return}else{const o=await e,s=Object.assign(Object.assign({},i),{send_to:o});t("event",n,s)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $M(){if(Jg())try{await Kg()}catch(t){return Ye.warn(nt.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return Ye.warn(nt.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function zM(t,e,n,i,r,o,s){var u;const c=VM(t);c.then(y=>{n[y.measurementId]=y.appId,t.options.measurementId&&y.measurementId!==t.options.measurementId&&Ye.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${y.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(y=>Ye.error(y)),e.push(c);const d=$M().then(y=>{if(y)return i.getId()}),[f,p]=await Promise.all([c,d]);bM(o)||AM(o,f.measurementId),r("js",new Date);const h=(u=s==null?void 0:s.config)!==null&&u!==void 0?u:{};return h[EM]="firebase",h.update=!0,p!=null&&(h[TM]=p),r("config",f.measurementId,h),f.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WM{constructor(e){this.app=e}_delete(){return delete Ar[this.app.options.appId],Promise.resolve()}}let Ar={},Yp=[];const Qp={};let Ba="dataLayer",JM="gtag",Xp,Tv,Zp=!1;function KM(){const t=[];if(Wg()&&t.push("This is a browser extension environment."),rA()||t.push("Cookies are not available."),t.length>0){const e=t.map((i,r)=>`(${r+1}) ${i}`).join(" "),n=nt.create("invalid-analytics-context",{errorInfo:e});Ye.warn(n.message)}}function YM(t,e,n){KM();const i=t.options.appId;if(!i)throw nt.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)Ye.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw nt.create("no-api-key");if(Ar[i]!=null)throw nt.create("already-exists",{id:i});if(!Zp){kM(Ba);const{wrappedGtag:o,gtagCore:s}=MM(Ar,Yp,Qp,Ba,JM);Tv=o,Xp=s,Zp=!0}return Ar[i]=zM(t,Yp,Qp,e,Xp,Ba,n),new WM(t)}function QM(t=cc()){t=ht(t);const e=ui(t,ks);return e.isInitialized()?e.getImmediate():XM(t)}function XM(t,e={}){const n=ui(t,ks);if(n.isInitialized()){const r=n.getImmediate();if(zr(e,n.getOptions()))return r;throw nt.create("already-initialized")}return n.initialize({options:e})}function ZM(t,e,n,i){t=ht(t),qM(Tv,Ar[t.app.options.appId],e,n,i).catch(r=>Ye.error(r))}const jp="@firebase/analytics",eh="0.10.8";function jM(){Lt(new wt(ks,(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("installations-internal").getImmediate();return YM(i,r,n)},"PUBLIC")),Lt(new wt("analytics-internal",t,"PRIVATE")),dt(jp,eh),dt(jp,eh,"esm2017");function t(e){try{const n=e.getProvider(ks).getImmediate();return{logEvent:(i,r,o)=>ZM(n,i,r,o)}}catch(n){throw nt.create("interop-component-reg-failed",{reason:n})}}}jM();const eb={apiKey:"AIzaSyB0BSDI-T2UWNJt0_shdB3GA3PncZt3d40",authDomain:"neve-or.firebaseapp.com",projectId:"neve-or",storageBucket:"neve-or.firebasestorage.app",messagingSenderId:"49659169778",appId:"1:49659169778:web:c7e1089fcef9f529e9b96b",measurementId:"G-TGC0CQR7N1"},Nc=Zg(eb);QM(Nc);const tb=MN(Nc),nu=PP(Nc),Ga=async(t,e)=>{try{nu.currentUser||(console.log("User not signed in, attempting anonymous sign-in..."),await By(nu));const n=PN(tb,e);return await NN(n,t,"data_url"),await RN(n)}catch(n){return console.error("Error uploading image to Firebase:",n),n.code==="storage/unauthorized"?alert(" :  -Authentication  -Firebase Console   -Rules."):n.message&&n.message.includes("CORS")&&alert(" CORS:     gsutil  ."),null}},nb={town_square_1:"A vector icon representing cyberbullying awareness, abstract, sad face with phone, blue colors, flat design",town_square_3:"A vector icon representing danger or conflict, silhouette figures running, red warning color, flat design",intro_freedom_speech_2:"A vector icon of a mouth with a zipper or tape, representing silence, flat design",intro_freedom_speech_3:"A vector icon of a building with a prohibition sign, flat design"},ib=({gameState:t,onUpdateGameState:e,onClose:n,isStorageFull:i})=>{var b,O,G;const[r,o]=z.useState(t.nodes.length>0?t.nodes[0].id:""),[s,u]=z.useState("ASSETS"),[c,d]=z.useState(null),[f,p]=z.useState(0),[h,y]=z.useState(null),T=t.nodes.find(S=>S.id===r),E=h!==null,w=E?(b=T==null?void 0:T.data.subScenes)==null?void 0:b.find(S=>S.id===h):null,_=E?w==null?void 0:w.backgroundImage:T==null?void 0:T.data.backgroundImage,g=T&&T.data&&T.data.dialog?Array.from(new Set(T.data.dialog.map(S=>S.speaker))):[],v=((O=T==null?void 0:T.data.interactionData)==null?void 0:O.items)||[];z.useEffect(()=>{const S=JSON.stringify(t),F=new Blob([S]).size/(1024*1024);p(F)},[t]);const I=S=>{var D,F;return!!((D=S.data.backgroundImage)!=null&&D.startsWith("data:")||Object.values(S.data.characterImages||{}).some(q=>q.startsWith("data:"))||(F=S.data.subScenes)!=null&&F.some(q=>{var W;return(W=q.backgroundImage)==null?void 0:W.startsWith("data:")}))},C=(S,D)=>{var q,W;const F=(q=S.data.subScenes)==null?void 0:q.find(oe=>oe.id===D);return(W=F==null?void 0:F.backgroundImage)==null?void 0:W.startsWith("data:")},x=S=>{T&&(E?te(T.id,{description:S.target.value}):te(T.id,{description:S.target.value}))},A=async()=>{if(!T)return;d("gen_bg");let S=T.data.description;if(T.id==="town_square"&&!E&&(S="A beautiful wide city square in a modern digital city. Sunny day. People walking peacefully, open paved space, a few trees, benches, city skyline in background. Wide angle view, single unified composition, vector art style. No split screen."),T.id==="newspaper_office"&&!E&&(S="A close-up view of a modern journalist's desk. Aesthetic and clean office interior. Includes a computer screen (blank), a coffee cup, notebooks, and pens. Soft lighting. Digital city vector art style. STRICTLY NO TEXT, NO HEADLINES, NO LETTERS anywhere."),T.id==="intro_freedom_speech"&&(S="A beautiful bright blue sky with fluffy white clouds. Digital vector art style, flat design, minimalist. Use soft blue and white colors. It is a background for a balloon game. STRICTLY NO TEXT, NO GROUND, NO BUILDINGS, JUST SKY."),E&&w){let F="";const q=w.id.toLowerCase(),W=w.title;q.includes("school")||W.includes(" ")?F="Interior of a modern high school classroom. Rows of student desks, a large whiteboard or blackboard, educational posters on walls, school hallway, lockers. Bright educational setting.":q.includes("cafe")||W.includes("")?F="Interior of a cozy urban coffee shop. Espresso machine, small round tables, customers sitting with laptops, warm lighting, coffee cups.":q.includes("square")||W.includes("")?F="A public city square outdoors. Wide open paved space, a central fountain or statue, benches, city skyline in background, people walking.":(q.includes("neighborhood")||W.includes(""))&&(F="A quiet residential street view. Apartment building facades, sidewalk, street lamps, some greenery, parked cars."),S=`Specific location scene: ${w.title}. ${F} (Context from story: ${T.data.description})`}const D=await Bx(S);d(null),D?E&&w?Qe(T.id,w.id,{backgroundImage:D}):te(T.id,{backgroundImage:D}):alert("  .   API KEY  ( Console ).")},N=async S=>{var q;if(!T)return;d(`gen_char_${S}`);const D=((q=T.data.dialog.find(W=>W.speaker===S))==null?void 0:q.mood)||"neutral",F=await Gx(S,D);if(d(null),F){const W=T.data.characterImages||{};te(T.id,{characterImages:{...W,[S]:F}})}else alert("  .  API KEY   .")},P=async(S,D)=>{var oe;if(!T)return;d(`gen_item_${S}`);const F=`${T.id}_${S}`,q=nb[F]||D,W=await qx(q);if(d(null),W){const ji=(((oe=T.data.interactionData)==null?void 0:oe.items)||[]).map(Ut=>Ut.id===S?{...Ut,image:W}:Ut);te(T.id,{interactionData:{...T.data.interactionData,items:ji}})}else alert(`    "${D}".         .`)},R=async S=>{var W,oe;if(!T)return;const D=(W=T.data.interactionData)==null?void 0:W.items.find(Pe=>Pe.id===S);if(!D||!D.image||!D.image.startsWith("data:"))return;d(`up_item_${S}`);const F=`items/${T.id}_item_${S}_${Date.now()}.jpg`,q=await Ga(D.image,F);if(d(null),q){const ji=(((oe=T.data.interactionData)==null?void 0:oe.items)||[]).map(Ut=>Ut.id===S?{...Ut,image:q}:Ut);te(T.id,{interactionData:{...T.data.interactionData,items:ji}}),alert("   !")}},K=async()=>{if(!T)return;const S=_;if(!S||!S.startsWith("data:")){alert("    (  ).");return}d("up_bg");const D=E?`_sub_${w==null?void 0:w.id}`:"",F=`backgrounds/${T.id}${D}_${Date.now()}.jpg`,q=await Ga(S,F);d(null),q?(E&&w?Qe(T.id,w.id,{backgroundImage:q}):te(T.id,{backgroundImage:q}),alert("   !")):alert("   .")},Q=async S=>{var oe;if(!T||!((oe=T.data.characterImages)!=null&&oe[S]))return;const D=T.data.characterImages[S];if(!D.startsWith("data:"))return;d(`up_char_${S}`);const F=S.replace(/[^a-z0-9]/gi,"_").toLowerCase(),q=`characters/${T.id}_${F}_${Date.now()}.jpg`,W=await Ga(D,q);if(d(null),W){const Pe=T.data.characterImages||{};te(T.id,{characterImages:{...Pe,[S]:W}}),alert(` ${S}  !`)}},te=(S,D)=>{const F=t.nodes.map(q=>q.id===S?{...q,data:{...q.data,...D}}:q);e({...t,nodes:F})},Qe=(S,D,F)=>{const q=t.nodes.map(W=>{if(W.id===S&&W.data.subScenes){const oe=W.data.subScenes.map(Pe=>Pe.id===D?{...Pe,...F}:Pe);return{...W,data:{...W.data,subScenes:oe}}}return W});e({...t,nodes:q})},xt=()=>{confirm("  ?            .")&&(localStorage.removeItem(Ul),window.location.reload())},Ee=Math.min(f/4.8*100,100),qe=Ee>90?"bg-red-500":Ee>70?"bg-orange-500":"bg-green-500";return m.jsxs("div",{className:"fixed inset-0 bg-white z-50 overflow-hidden flex flex-col",dir:"rtl",children:[m.jsxs("header",{className:"bg-gray-900 text-white p-4 flex justify-between items-center shadow-md z-10 shrink-0",children:[m.jsxs("div",{className:"flex items-center gap-4",children:[m.jsx("h2",{className:"text-xl font-bold",children:" Dev Panel"}),m.jsxs("div",{className:"flex bg-gray-800 rounded-lg p-1",children:[m.jsx("button",{onClick:()=>u("ASSETS"),className:`px-4 py-1 rounded-md text-sm font-bold transition ${s==="ASSETS"?"bg-blue-600 text-white":"text-gray-400 hover:text-white"}`,children:" (AI & Cloud)"}),m.jsx("button",{onClick:()=>u("INTERACTION"),className:`px-4 py-1 rounded-md text-sm font-bold transition ${s==="INTERACTION"?"bg-blue-600 text-white":"text-gray-400 hover:text-white"}`,children:" "}),m.jsx("button",{onClick:()=>u("CONTENT"),className:`px-4 py-1 rounded-md text-sm font-bold transition ${s==="CONTENT"?"bg-blue-600 text-white":"text-gray-400 hover:text-white"}`,children:" "})]})]}),m.jsxs("div",{className:"flex gap-2 items-center",children:[m.jsxs("div",{className:"flex flex-col items-end mr-4",children:[m.jsxs("div",{className:"text-[10px] text-gray-400",children:[" : ",f.toFixed(2),"MB / 5.00MB"]}),m.jsx("div",{className:"w-32 h-1.5 bg-gray-700 rounded-full overflow-hidden",children:m.jsx("div",{className:`h-full ${qe} transition-all duration-500`,style:{width:`${Ee}%`}})})]}),m.jsx(ae,{variant:"secondary",onClick:xt,className:"py-1 px-3 text-sm bg-red-100 text-red-600 hover:bg-red-200 border-none shadow-none",children:""}),m.jsx(ae,{variant:"danger",onClick:n,className:"py-1 px-3 text-sm",children:""})]})]}),(i||Ee>95)&&m.jsx("div",{className:"bg-red-600 text-white p-2 text-center text-sm font-bold animate-pulse shadow-lg shrink-0",children:"   !   .     -      ."}),m.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[m.jsxs("aside",{className:"w-72 bg-gray-100 border-l border-gray-200 flex flex-col shrink-0",children:[m.jsx("div",{className:"p-4 border-b bg-gray-50 font-bold text-gray-700",children:"  :"}),m.jsx("div",{className:"overflow-y-auto flex-1 p-2 space-y-1",children:t.nodes.map(S=>{const D=I(S);return m.jsxs("div",{onClick:()=>{o(S.id),y(null)},className:`p-3 rounded-lg cursor-pointer text-sm font-medium transition-colors flex justify-between items-center ${r===S.id?"bg-blue-600 text-white shadow-md":"bg-white hover:bg-gray-200 text-gray-700"}`,children:[m.jsx("span",{className:"truncate flex-1",children:S.title}),D&&m.jsx("span",{title:"    ",className:"text-[10px] bg-orange-500 text-white px-2 py-0.5 rounded-full shadow-sm animate-pulse ml-2 font-bold",children:" "})]},S.id)})})]}),m.jsx("main",{className:"flex-1 overflow-y-auto bg-slate-50 p-8",children:T?m.jsxs("div",{className:"max-w-4xl mx-auto space-y-8 pb-20",children:[T.data.subScenes&&T.data.subScenes.length>0&&m.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-blue-200 flex flex-col gap-2",children:[m.jsxs("div",{className:"flex items-center gap-2 mb-1 justify-between",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("span",{className:"font-bold text-blue-900",children:"   :"}),m.jsx("span",{className:"text-xs text-gray-500",children:"(    )"})]}),m.jsx("div",{className:"text-xs text-orange-600 font-bold bg-orange-50 px-2 py-1 rounded",children:"   "})]}),m.jsxs("div",{className:"flex gap-2 flex-wrap",children:[m.jsxs("button",{onClick:()=>y(null),className:`px-3 py-2 rounded-lg text-sm transition-all border flex items-center gap-2 ${h===null?"bg-blue-600 text-white border-blue-600 shadow-md":"bg-white text-gray-600 hover:bg-gray-50"}`,children:[m.jsx("span",{children:" "}),((G=T.data.backgroundImage)==null?void 0:G.startsWith("data:"))&&m.jsx("span",{className:"w-2.5 h-2.5 bg-orange-500 rounded-full animate-pulse border border-white"})]}),T.data.subScenes.map(S=>{const D=C(T,S.id);return m.jsxs("button",{onClick:()=>y(S.id),className:`px-3 py-2 rounded-lg text-sm transition-all border relative flex items-center gap-2 ${h===S.id?"bg-blue-600 text-white border-blue-600 shadow-md":"bg-white text-gray-600 hover:bg-gray-50"}`,children:[m.jsxs("span",{children:[S.icon," ",S.title]}),D&&m.jsx("span",{className:"w-2.5 h-2.5 bg-orange-500 rounded-full animate-pulse border border-white",title:"  "})]},S.id)})]})]}),s==="ASSETS"&&m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-gray-200",children:[m.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2 justify-between",children:[m.jsxs("span",{children:["   ",E?`( ${w==null?void 0:w.title})`:"()"]}),(_==null?void 0:_.startsWith("data:"))&&m.jsx("span",{className:"text-xs bg-orange-100 text-orange-700 px-2 py-1 rounded font-bold",children:"   "})]}),m.jsxs("div",{className:"flex gap-6 items-start",children:[m.jsxs("div",{className:"flex-1 space-y-4",children:[m.jsxs("div",{className:"bg-blue-50 p-3 rounded border border-blue-100 text-sm text-blue-800",children:[m.jsx("strong",{children:"  :"}),m.jsx("br",{}),"1.  ",m.jsx("b",{children:'" "'}),"     -AI.",m.jsx("br",{}),"2. ",m.jsx("span",{className:"text-red-600 font-black",children:"!"}),"  ",m.jsx("b",{children:'" "'}),"   .",m.jsx("br",{}),"        ."]}),m.jsx("p",{className:"text-xs text-gray-500",children:E?`  AI: "Scene in ${w==null?void 0:w.title}..."`:`  AI: "${T.data.description.substring(0,50)}..."`}),m.jsxs("div",{className:"flex gap-2",children:[m.jsx(ae,{onClick:A,disabled:!!c,className:"flex-1",children:c==="gen_bg"?" ...":"  "}),_&&_.startsWith("data:")&&m.jsx(ae,{onClick:K,variant:"secondary",disabled:!!c,className:"flex-1 bg-orange-500 hover:bg-orange-600 text-white shadow-orange-200 animate-pulse font-black",children:c==="up_bg"?" ...":"   (!)"})]})]}),m.jsx("div",{className:"w-1/2 aspect-video bg-gray-100 rounded-xl overflow-hidden border-2 border-dashed border-gray-300 flex items-center justify-center relative group",children:_?m.jsxs(m.Fragment,{children:[m.jsx("img",{src:_,alt:"BG",className:"w-full h-full object-cover"}),_.startsWith("data:")&&m.jsx("div",{className:"absolute top-2 right-2 bg-orange-500 text-white text-xs px-2 py-1 rounded shadow animate-pulse",children:"  ()"})]}):m.jsx("span",{className:"text-gray-400",children:" "})})]})]}),!E&&m.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-gray-200",children:[m.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:"  ( )"}),g.length===0?m.jsx("p",{className:"text-gray-500",children:"   ."}):m.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-6",children:g.map(S=>{var q,W,oe;const D=!!((q=T.data.characterImages)!=null&&q[S]),F=D&&!((W=T.data.characterImages)!=null&&W[S].startsWith("data:"));return m.jsxs("div",{className:"border rounded-xl p-4 flex flex-col items-center gap-3 bg-gray-50 relative",children:[D&&!F&&m.jsx("div",{className:"absolute top-2 right-2 text-orange-500 text-xs font-bold animate-pulse",children:"  "}),m.jsx("div",{className:"w-24 h-24 rounded-full bg-gray-200 overflow-hidden shadow-inner border-2 border-white",children:D?m.jsx("img",{src:(oe=T.data.characterImages)==null?void 0:oe[S],alt:S,className:"w-full h-full object-cover"}):m.jsx("div",{className:"w-full h-full flex items-center justify-center text-2xl",children:""})}),m.jsx("div",{className:"font-bold text-gray-800",children:S}),m.jsxs("div",{className:"w-full flex flex-col gap-2",children:[m.jsx(ae,{variant:"outline",className:"text-xs py-1 px-3 w-full",onClick:()=>N(S),disabled:!!c,children:c===`gen_char_${S}`?"":" "}),D&&!F&&m.jsx(ae,{variant:"secondary",className:"text-xs py-1 px-3 w-full bg-orange-500 text-white hover:bg-orange-600",onClick:()=>Q(S),disabled:!!c,children:c===`up_char_${S}`?"...":" "})]})]},S)})})]})]}),s==="INTERACTION"&&m.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-gray-200",children:[m.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:"   ()"}),v.length===0?m.jsx("p",{className:"text-gray-500 text-center py-4",children:"      ."}):m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:v.map(S=>{const D=!!S.image,F=D&&!S.image.startsWith("data:");return m.jsxs("div",{className:"border p-3 rounded-xl bg-gray-50 flex gap-3",children:[m.jsx("div",{className:"w-20 h-20 bg-gray-200 rounded-lg overflow-hidden flex-shrink-0 flex items-center justify-center border",children:D?m.jsx("img",{src:S.image,className:"w-full h-full object-cover"}):m.jsx("span",{className:"text-xs text-gray-400",children:" "})}),m.jsxs("div",{className:"flex-1 flex flex-col justify-between",children:[m.jsx("div",{className:"text-xs font-bold text-gray-700 line-clamp-2",title:S.text,children:S.text}),m.jsxs("div",{className:"flex gap-2 mt-2",children:[m.jsx(ae,{variant:"outline",className:"text-[10px] py-1 px-2 flex-1",onClick:()=>P(S.id,S.text),disabled:!!c,children:c===`gen_item_${S.id}`?"":" "}),D&&!F&&m.jsx(ae,{variant:"secondary",className:"text-[10px] py-1 px-2 flex-1 bg-orange-500 text-white",onClick:()=>R(S.id),disabled:!!c,children:c===`up_item_${S.id}`?"...":" "})]})]})]},S.id)})})]}),s==="CONTENT"&&!E&&m.jsx("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-gray-200 space-y-6",children:m.jsxs("div",{children:[m.jsx("label",{className:"block font-bold mb-2 text-gray-700",children:"  ()"}),m.jsx("textarea",{className:"w-full p-4 border border-gray-300 rounded-xl h-32 focus:ring-2 focus:ring-blue-500",value:T.data.description,onChange:x})]})})]}):m.jsx("div",{className:"flex items-center justify-center h-full text-gray-400",children:"   "})})]})]})},rb=({currentLang:t,onLanguageChange:e,className:n=""})=>{const i=n.includes("bg-black")||n.includes("text-white"),o=n||"bg-white shadow-lg border border-gray-100";return m.jsx("div",{className:`flex gap-0.5 p-1 rounded-full ${o}`,children:["he","ar","en"].map(s=>{const u=t===s;let c="px-3 py-1 rounded-full text-xs font-bold transition-all duration-200 ";return i?u?c+="bg-white text-blue-900 shadow-sm":c+="text-white/80 hover:bg-white/10":u?c+="bg-blue-600 text-white shadow-md":c+="text-gray-600 hover:bg-gray-100 hover:text-blue-600",m.jsx("button",{onClick:()=>e(s),className:c,children:s==="he"?"":s==="ar"?"":"English"},s)})})},ob=()=>{const[t,e]=z.useState("he"),[n,i]=z.useState(!1),[r,o]=z.useState(!1),[s,u]=z.useState(!1),[c,d]=z.useState({currentNodeId:null,nodes:Vo("he"),score:0,devMode:!1});z.useEffect(()=>{(async()=>{try{await By(nu),console.log("Signed in anonymously to Firebase")}catch(w){console.error("Error signing in anonymously:",w)}})()},[]),z.useEffect(()=>{try{const E=localStorage.getItem(Ul);if(E){const w=JSON.parse(E);if(!w||!Array.isArray(w.nodes))throw new Error("Invalid save data structure");const g=Vo("he").map(v=>{var C,x,A;const I=w.nodes.find(N=>N.id===v.id);return I?{...v,isLocked:I.isLocked,isCompleted:I.isCompleted,data:{...v.data,backgroundImage:typeof((C=I.data)==null?void 0:C.backgroundImage)=="string"?I.data.backgroundImage:v.data.backgroundImage,characterImages:(x=I.data)!=null&&x.characterImages?I.data.characterImages:v.data.characterImages,subScenes:(A=I.data)!=null&&A.subScenes&&Array.isArray(I.data.subScenes)&&v.data.subScenes?v.data.subScenes.map(N=>{const P=I.data.subScenes.find(R=>R.id===N.id);return P?{...N,backgroundImage:P.backgroundImage||N.backgroundImage}:N}):v.data.subScenes}}:v});d(v=>({...v,nodes:g,score:typeof w.score=="number"?w.score:0}))}}catch(E){console.warn("Corrupted local save detected or empty. Starting fresh.",E)}},[]),z.useEffect(()=>{var E;try{const w={nodes:c.nodes.map(g=>{var v;return{id:g.id,isLocked:g.isLocked,isCompleted:g.isCompleted,data:{backgroundImage:g.data.backgroundImage,characterImages:g.data.characterImages,subScenes:(v=g.data.subScenes)==null?void 0:v.map(I=>({id:I.id,backgroundImage:I.backgroundImage}))}}}),score:c.score},_=JSON.stringify(w);localStorage.setItem(Ul,_),n&&i(!1)}catch(w){(w.name==="QuotaExceededError"||w.name==="NS_ERROR_DOM_QUOTA_REACHED"||(E=w.message)!=null&&E.includes("exceeded"))&&(console.error("LocalStorage Full!",w),i(!0))}},[c]),z.useEffect(()=>{},[]),z.useEffect(()=>{const E=()=>{const w=window.innerWidth<1024,_=window.innerHeight>window.innerWidth;o(w&&_)};return E(),window.addEventListener("resize",E),window.addEventListener("orientationchange",E),()=>{window.removeEventListener("resize",E),window.removeEventListener("orientationchange",E)}},[]);const f=lT(t),p=E=>{e(E);const _=Vo(E).map(g=>{var I;const v=c.nodes.find(C=>C.id===g.id);return v?{...g,isLocked:v.isLocked,isCompleted:v.isCompleted,data:{...g.data,backgroundImage:v.data.backgroundImage||g.data.backgroundImage,characterImages:v.data.characterImages||g.data.characterImages,subScenes:(I=v.data)!=null&&I.subScenes&&g.data.subScenes?g.data.subScenes.map(C=>{const x=v.data.subScenes.find(A=>A.id===C.id);return x?{...C,backgroundImage:x.backgroundImage||C.backgroundImage}:C}):g.data.subScenes}}:g});d(g=>({...g,nodes:_}))},h=E=>{d(w=>({...w,currentNodeId:E}))},y=()=>{d(E=>{const w=E.nodes.findIndex(v=>v.id===E.currentNodeId),_=[...E.nodes];w!==-1&&(_[w].isCompleted=!0,w+1<_.length&&(_[w+1].isLocked=!1));let g="HUB";return E.currentNodeId==="city_hall"?g="intro_freedom_speech":E.currentNodeId==="newspaper_office"&&(g="supreme_court"),{...E,nodes:_,currentNodeId:g}})},T=c.nodes.find(E=>E.id===c.currentNodeId);if(c.devMode)return m.jsx(ib,{gameState:c,onUpdateGameState:d,onClose:()=>d(E=>({...E,devMode:!1})),isStorageFull:n});if(r&&!s)return m.jsxs("div",{className:"fixed inset-0 z-[100] bg-slate-900 flex flex-col items-center justify-center p-8 text-center",dir:f,children:[m.jsx("div",{className:"text-6xl mb-6 animate-rotate-phone",children:""}),m.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:H("rotateDevice",t)}),m.jsx("p",{className:"text-gray-400 text-sm mb-8",children:"This game is designed for landscape mode."}),m.jsx("div",{className:"flex flex-col gap-3 w-full max-w-xs",children:m.jsx("button",{onClick:()=>u(!0),className:"text-white/60 text-xs hover:text-white underline mt-6 transition-colors",children:"  "})})]});if(c.currentNodeId===null||T&&T.type===Z.INTRO){const E=c.nodes.find(w=>w.id==="intro")||c.nodes.find(w=>w.type===Z.INTRO);return E?m.jsxs("div",{className:"h-[100dvh] w-full bg-slate-900 flex items-center justify-center p-4 relative overflow-hidden",dir:f,children:[E.data.backgroundImage&&m.jsxs("div",{className:"absolute inset-0 z-0 animate-fade-in",children:[m.jsx("img",{src:E.data.backgroundImage,className:"w-full h-full object-cover transition-transform duration-[30s] hover:scale-105",alt:"Intro Background",onError:w=>w.currentTarget.style.display="none"}),m.jsx("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-[2px]"})]}),m.jsx("div",{className:"absolute top-4 left-4 z-20 flex gap-2",children:m.jsx(rb,{currentLang:t,onLanguageChange:p,className:"!bg-black/30 border border-white/20"})}),m.jsxs("div",{className:"relative z-10 w-full max-w-md bg-white/95 backdrop-blur-xl rounded-2xl shadow-2xl p-6 sm:p-8 text-center border border-white/20 animate-fade-in-up",children:[m.jsxs("div",{className:"mb-4",children:[m.jsx("h1",{className:"text-4xl sm:text-5xl font-black tracking-tight text-blue-900 drop-shadow-sm mb-2",children:H("gameTitle",t)}),m.jsx("div",{className:"h-1 w-16 bg-blue-500 mx-auto rounded-full"})]}),m.jsx("div",{className:"mb-6 text-gray-600 text-sm sm:text-base leading-relaxed font-medium",children:E.data.description}),m.jsx("div",{className:"flex flex-col items-center gap-3",children:m.jsx(ae,{onClick:()=>y(),className:"text-lg py-3 px-10 rounded-xl shadow-lg shadow-blue-200 bg-gradient-to-r from-blue-600 to-blue-500 hover:from-blue-700 hover:to-blue-600 transform transition-all hover:scale-105",children:H("start",t)})})]}),m.jsx("div",{className:"absolute bottom-4 text-white/40 text-xs font-mono z-10",children:"Neve Or Human Rights Simulator  2025"})]}):m.jsx("div",{className:"flex items-center justify-center h-screen bg-slate-900 text-white",children:"Error: Intro content not found"})}return m.jsx("div",{className:"w-full h-[100dvh] overflow-hidden bg-slate-900",dir:f,children:c.currentNodeId==="HUB"?m.jsx(cT,{nodes:c.nodes,onNodeSelect:h,language:t,onLanguageChange:p,onOpenDevMode:()=>d(E=>({...E,devMode:!0})),onBackToIntro:()=>d(E=>({...E,currentNodeId:null}))}):T?m.jsx(dT,{node:T,onComplete:y,onBack:()=>d(E=>({...E,currentNodeId:"HUB"})),language:t}):m.jsx("div",{className:"flex items-center justify-center h-screen bg-slate-900 text-white",children:H("loading",t)})})},Ev=document.getElementById("root");if(!Ev)throw new Error("Could not find root element to mount to");const sb=qa.createRoot(Ev);sb.render(m.jsx(Jv.StrictMode,{children:m.jsx(ob,{})}));
